import{B as e,w as i,A as r,x as s,G as t,H as n}from"./vendor.3b6a4709.js";import{$ as a,b2 as o}from"./index.db6b5319.js";import{r as c,b as l}from"./index.33b12f75.js";var u="mqik-60f4e87e",d="mqik-8589d34b",m="mqik-1d18b684",f="mqik-8bc66879";const h=["/connect","/error","/initial"];var b=t=>{const[n,a]=e.exports.useState(!1),[o,l]=e.exports.useState(""),{currentUser:b,actions:p,location:x,history:v}=t,g=async()=>{""!==o&&l("");const{data:e,error:i}=await p.userConnect();if(e){const e=(r=x.search,new URLSearchParams(r).get("next")||"");return e&&-1===h.indexOf(e)?v.replace(e):k()}var r;i&&l(i.message)},k=async()=>{a(!0),await c(t.history)};return e.exports.useEffect((()=>{if(t.initializing||!b){if(t.initializing||b&&n)return()=>{};g()}else k()}),[]),i("div",{className:r(u),children:[s("div",{className:r(d,"u3-hidden"),children:s("p",{children:"Kết nối tài khoản"})}),o?i("div",{className:m,children:[s("p",{children:o}),s("button",{className:f,onClick:g,children:"Thử lại"})]}):null]})};var p=t((function(e){return{initializing:e.requests.users.logout.status===a.SUCCESS||!e.storage.initialized,currentUser:o(e)}}),(function(e){return{actions:n({userConnect:l},e)}}))(b);export{p as default};
