var e=Object.defineProperty,a=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,n,t)=>n in a?e(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,l=(e,a)=>{for(var n in a||(a={}))s.call(a,n)&&i(e,n,a[n]);if(t)for(var n of t(a))r.call(a,n)&&i(e,n,a[n]);return e},o=(e,t)=>a(e,n(t)),c=(e,a,n)=>(i(e,"symbol"!=typeof a?a+"":a,n),n);import{y as d,x as h,B as m,A as u,R as p,$ as f,F as b,G as v,V as y,Z as g}from"./vendor.bbf9911b.js";import{a2 as N,p as C,q as k,t as I,G as x,S as w,a3 as q}from"./index.c913271b.js";import{D as M,b3 as _,d as R,b2 as T,gZ as E,b as A,aa as P,av as L,f as j,ge as H,dH as B,C as O,cM as D,bZ as $,bd as F,g_ as U,g$ as G,eq as S,bE as V,r as J,dt as W,bt as z,gU as K,fW as Z,dO as Y,dK as X,aS as Q,a9 as ee,ba as ae,a6 as ne,s as te,fY as se,dI as re,g as ie,g4 as le,a as oe,g1 as ce,o as de,c as he,Z as me,h0 as ue,h1 as pe,h2 as fe}from"./index.97b013dd.js";import{P as be,F as ve,H as ye,h as ge,j as Ne,k as Ce,l as ke,C as Ie,W as xe,D as we,n as qe,B as Me}from"./DotsVerticalIcon.da17b9d5.js";import{r as _e}from"./jsx-runtime_commonjs-proxy.8e94ef61.js";import{P as Re}from"./index.5f19ab8a.js";import{T as Te}from"./Tooltip.022f051b.js";import{W as Ee}from"./index.f7ed4d9c.js";import"./FormattedMarkdownMessage.bdef2d7a.js";var Ae=e=>d("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[d("defs",{children:[h("symbol",{id:"chrome-tab-geometry-left",viewBox:"0 0 214 36",children:h("path",{d:"M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z"})}),h("symbol",{id:"chrome-tab-geometry-right",viewBox:"0 0 214 36",children:h("use",{xlinkHref:"#chrome-tab-geometry-left"})}),h("clipPath",{id:"crop",children:h("rect",{className:"mask",width:"100%",height:"100%",x:"0"})})]}),h("svg",{width:"52%",height:"100%",children:h("use",{xlinkHref:"#chrome-tab-geometry-left",width:"214",height:"36",className:e.tabGeometry})}),h("g",{transform:"scale(-1, 1)",children:h("svg",{width:"52%",height:"100%",x:"-100%",y:"0",children:h("use",{xlinkHref:"#chrome-tab-geometry-right",width:"214",height:"36",className:e.tabGeometry})})})]}),Pe=_e.jsx,Le=_e.jsxs;var je=m.exports.forwardRef((function(e,a){return Le("svg",o(l({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a},e)),{children:[Pe("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),Pe("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}))})),He=_e.jsx;var Be=m.exports.forwardRef((function(e,a){return He("svg",o(l({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a},e)),{children:He("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}))}));var Oe={joinMoreTab:"mqik-579f2c9b",modalJoinMore:"mqik-b301ce1b",modalOverlay:"mqik-d7c925b5",modalTrickCenter:"mqik-4c6ca5b9",modalCard:"mqik-5ec79ea9",modalHeader:"mqik-5a7da58b",modalCardTitle:"mqik-23f44451",closeBtn:"mqik-6942a1a8",modalButton:"mqik-5a3020e7",modalButtonIcon:"mqik-9f4301f3",modalBody:"mqik-4500a791",loader:"mqik-4b96749a",channelListView:"mqik-b182efcc",itemView:"mqik-5f708c87",channelDetail:"mqik-dfa436ad",channelName:"mqik-efed7250",channelPurpose:"mqik-74c55633",channelActions:"mqik-b426946a",channelBtn:"mqik-cfb2aa5d",channelJoined:"mqik-381752da",buttonGroup:"mqik-1669d815",buttonGroupItem:"mqik-729f13b4",buttonView:"mqik-550de176",buttonExit:"mqik-f0e8f211"},De=e=>{const[a,n]=m.exports.useState(e.channelJoinned),[t,s]=m.exports.useState([]);return m.exports.useEffect((()=>{a.length!==e.channelJoinned.length&&n(e.channelJoinned)}),[e.channelJoinned]),d("div",{className:Oe.channelListView,children:[e.channels.length?h(m.exports.Fragment,{}):h("p",{className:Oe.noChannels,children:"Hiện tại không có Nhóm nào để bạn tham gia!"}),e.channels.map(((r,i)=>d("div",{className:Oe.itemView,children:[h("div",{className:Oe.channelAvatar,children:h(Re,{src:M.getChannelPictureUrl(r.id,r.last_picture_update),size:"xl",status:"",wrapperClass:Oe.channelAvatarPicture,newStatusIcon:!1})}),d("div",{className:Oe.channelDetail,children:[h("h3",{className:Oe.channelName,children:r.display_name}),h("p",{className:Oe.channelPurpose,children:r.purpose})]}),h("div",{className:Oe.channelActions,children:a.includes(r.id)?d("div",{className:Oe.buttonGroup,children:[d("button",{className:u(Oe.buttonGroupItem,Oe.buttonView),onClick:()=>e.onView(r.name),children:[h(je,{className:"u3-w-4 u3-h-4"}),h("span",{children:"Xem"})]}),h("button",{className:u(Oe.buttonGroupItem,Oe.buttonExit),onClick:()=>e.onExit(r.id),children:h(Be,{className:"u3-w-4 u3-h-4"})})]}):h("button",{className:Oe.channelBtn,onClick:()=>(async r=>{if(t.includes(r))return;s([...t,r]),await e.onJoin(r),n([...a,r]);let i=t.indexOf(r);t.splice(i,1),s(t)})(r.id),children:t.includes(r.id)?"Đang vào...":"Tham gia"})})]},`${i}-${r.id}`)))]})};const $e=p.forwardRef(((e,a)=>{const[n,t]=m.exports.useState(!1),[s,r]=m.exports.useState(!1),[i,l]=m.exports.useState([]),o=_(e.currentUser),c=f();function p(){t(!1)}m.exports.useEffect((()=>{!o&&n&&(async(a,n)=>{s&&r(!1),n.length||r(!0);const{data:t}=await e.actions.fetchMyChannelsByIds(a,n);t&&l(t.channels),r(!0)})(e.teamId,e.channelIds)}),[n]);return d(m.exports.Fragment,{children:[d("div",{className:u(e.styles.tab,{[e.styles.active]:!e.currentChannelId}),ref:a,onClick:function(){c.replace(`/${e.teamName}/group`),e.actions.selectChannel("")},children:[h("div",{className:e.styles.divider}),h("div",{className:e.styles.background,children:h(Ae,{tabGeometry:e.styles.tabGeometry})}),h(Te,{placement:"top",content:"Tham gia nhóm",offset:4,delayWith:"offsetLeft",children:h("div",{className:e.styles.content,children:h(be,{className:u("u3-mx-0",e.styles.plusIcon)})})})]}),h(Ee,{appear:!0,show:n,as:m.exports.Fragment,children:h(ve,{as:"div",className:Oe.modalJoinMore,onClose:p,children:d("div",{className:"u3-min-h-screen u3-px-4 u3-text-center",children:[h(Ee.Child,{as:m.exports.Fragment,enter:"u3-ease-out u3-duration-300",enterFrom:"u3-opacity-0",enterTo:"u3-opacity-100",leave:"u3-ease-in u3-duration-200",leaveFrom:"u3-opacity-100",leaveTo:"u3-opacity-0",children:h(ve.Overlay,{className:Oe.modalOverlay})}),h("span",{className:Oe.modalTrickCenter,"aria-hidden":"true",children:"​"}),h(Ee.Child,{as:m.exports.Fragment,enter:"u3-ease-out u3-duration-300",enterFrom:"u3-opacity-0 u3-scale-95",enterTo:"u3-opacity-100 u3-scale-100",leave:"u3-ease-in u3-duration-200",leaveFrom:"u3-opacity-100 u3-scale-100",leaveTo:"u3-opacity-0 u3-scale-95",children:d("div",{className:Oe.modalCard,children:[d("div",{className:Oe.modalHeader,children:[h(ve.Title,{as:"h3",className:Oe.modalCardTitle,children:"Danh sách nhóm"}),h("div",{className:Oe.closeBtn,children:h("button",{type:"button",className:u(Oe.modalButton),onClick:p,children:h(ye,{className:Oe.modalButtonIcon})})})]}),o?d("div",{className:Oe.modalBody,children:[d("p",{children:["Bạn đang là ",h("strong",{children:"Khách"}),"."]}),h("p",{children:"Vui lòng Đăng nhập để sử dụng tính năng này!"})]}):h("div",{className:Oe.modalBody,children:s?h(De,{teamName:e.teamName,channels:i,channelJoinned:e.channelJoinned,onJoin:function(a){return e.actions.joinChannelIntegrated(e.currentUser.id,e.teamId,a,"")},onView:function(a){p(),c.push(`/${e.teamName}/group/${a}`)},onExit:async a=>{const{data:{nextPage:n}}=await e.actions.leaveChannel(a);n&&c.replace(n)}}):h("div",{className:Oe.loader,children:h(ge,{})})})]})})]})})})]})}));var Fe=b((function(e){const a=R(e),n=T(e),t=E(e),s=A(e,"all"),r=P(e),i=L(e);return{currentUser:n,channelJoinned:s,channelIds:t,teamId:a,teamName:r.name,currentChannelId:i}}),(function(e){return{actions:v({fetchMyChannelsByIds:j,joinChannelIntegrated:H,leaveChannel:N,selectChannel:B},e)}}),null,{forwardRef:!0})($e);var Ue="mqik-b1a11290",Ge="mqik-5d96f235",Se=({children:e})=>h(Ee,{as:m.exports.Fragment,enter:"u3-transition u3-ease-out u3-duration-100",enterFrom:"u3-transform u3-opacity-0 u3-scale-95",enterTo:"u3-transform u3-opacity-100 u3-scale-100",leave:"u3-transition u3-ease-in u3-duration-75",leaveFrom:"u3-transform u3-opacity-100 u3-scale-100",leaveTo:"u3-transform u3-opacity-0 u3-scale-95",children:e}),Ve=e=>d(xe,{as:"div",className:e.stylex.close,children:[h(xe.Button,{children:h(we,{className:e.stylex.closeIcon})}),h(Se,{children:h(xe.Items,{className:Ue,children:h(Je,{stylex:e.stylex,channel:e.channel,isMobile:!1})})})]});const Je=b((e=>({user:T(e),isArchived:U(e),isDefault:G(e)})))((e=>{const{channel:a,isArchived:n,isDefault:t}=e,s=a.type===O.PRIVATE_CHANNEL?F.MANAGE_PRIVATE_CHANNEL_MEMBERS:F.MANAGE_PUBLIC_CHANNEL_MEMBERS;return h(m.exports.Fragment,{children:h("div",{className:Ge,children:d(Ne,{channelId:a.id,teamId:a.team_id,permissions:[s],children:[h(Ce,{id:"channelViewInfo",show:a.type!==O.DM_CHANNEL&&a.type!==O.GM_CHANNEL,modalId:D.CHANNEL_INFO,dialogType:ke,dialogProps:{channel:a},text:$("navbar.viewInfo","View Info")}),h(Ce,{id:"channelManageMembers",show:a.type!==O.DM_CHANNEL&&a.type!==O.GM_CHANNEL&&!n&&!t,modalId:D.CHANNEL_MEMBERS,dialogType:Ie,dialogProps:{channel:a},text:$("channel_header.manageMembers","Manage Members")})]})})})}));var We=_e.jsx,ze=_e.jsxs;var Ke=m.exports.forwardRef((function(e,a){return ze("svg",o(l({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a},e)),{children:[We("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),We("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}))}));var Ze="mqik-c47132a1",Ye="mqik-f7299146";function Xe(e,a,n){return e&&Boolean(e.message.trim()||e.fileInfos.length||e.uploadsInProgress.length)&&a!==(null==n?void 0:n.id)}var Qe=b((function(e,a){var n;const t=L(e);return{hasDraft:Xe(!!(null==(n=a.channel)?void 0:n.id)&&S(e,V.DRAFT,a.channel.id),t,a.channel)}}),(function(e){return{actions:v({},e)}}))((e=>0!==e.channel.delete_at?h(qe,{className:u(Ze,Ye)}):e.hasDraft?h(Ke,{className:u(Ze,Ye)}):e.icon));var ea="mqik-22b0f324",aa="mqik-afa6b0a9",na="mqik-2f0cc8e8",ta="mqik-49bfa606",sa="mqik-013daa6f",ra="mqik-133903d4";class ia extends p.PureComponent{constructor(e){super(e),c(this,"labelRef"),c(this,"gmItemRef"),c(this,"enableToolTipIfNeeded",(()=>{const e=this.gmItemRef.current||this.labelRef.current,a=e&&e.offsetWidth<e.scrollWidth;this.setState({showTooltip:Boolean(a)})})),c(this,"getAriaLabel",(()=>{const{label:e,ariaLabelPrefix:a,unreadMentions:n}=this.props;let t=e;return a&&(t+=` ${a}`),1===n?t+=` ${n} ${$("accessibility.sidebar.types.mention","mention")}`:n>1&&(t+=` ${n} ${$("accessibility.sidebar.types.mentions","mentions")}`),this.showChannelAsUnread()&&0===n&&(t+=` ${$("accessibility.sidebar.types.unread","unread")}`),t.toLowerCase()})),c(this,"removeTooltipLink",(()=>{var e,a;return null==(a=null==(e=this.gmItemRef.current)?void 0:e.removeAttribute)?void 0:a.call(e,"aria-describedby")})),c(this,"handleMenuToggle",(e=>this.setState({isMenuOpen:e}))),c(this,"showChannelAsUnread",(()=>this.props.unreadMentions>0||this.props.unreadMsgs>0&&this.props.showUnreadForMsgs)),this.labelRef=p.createRef(),this.gmItemRef=p.createRef(),this.state={isMenuOpen:!1,showTooltip:!0}}componentDidMount(){this.enableToolTipIfNeeded()}componentDidUpdate(e){e.label!==this.props.label&&this.enableToolTipIfNeeded()}render(){const{link:e,label:a,channel:n,currentChannelId:t,icon:s,memberCount:r,isMuted:i,canManage:l,styles:o}=this.props;let c=null;return t===n.id&&l&&(c=h(Ve,{stylex:o,channel:n})),h(m.exports.Fragment,{children:d(y,{className:u(o.content,sa),to:e,"aria-label":this.getAriaLabel(),title:a,children:[h("div",{className:u(o.icon,ra),children:h(Qe,{channel:n,icon:s})}),h("div",{className:u(o.title,ea,{[na]:i,[aa]:this.showChannelAsUnread(),[ta]:0!==n.delete_at}),children:a}),null,c]})})}}var la=b((function(e,a){const n=J(e)[a.channel.id],t=L(e),s=W(e);let r=null;s[a.channel.id]&&(r=s[a.channel.id]);let i=0,l=0,o=!0;const c=z(e),d=K(e);return n&&(i=c?n.mention_count_root:n.mention_count,a.channel&&(l=Z(c,a.channel,n)),n.notify_props&&(o=n.notify_props.mark_unread!==Y.MENTION)),{unreadMentions:i,unreadMsgs:l,showUnreadForMsgs:o,isMuted:X(n),memberCount:r?r.member_count-r.guest_count:-1,canManage:d,currentChannelId:t}}),(function(e){return{actions:v({getChannelStats:Q},e)}}))(ia);var oa=b(null,(function(e){return{actions:v({leaveChannel:k},e)}}))((e=>{const a=()=>{e.actions.leaveChannel(e.channel.id)},n=()=>{C({id:e.channel.id,display_name:e.channel.display_name})};let t;e.channel.type===O.OPEN_CHANNEL?t=$("accessibility.sidebar.types.public","public channel"):e.channel.type===O.PRIVATE_CHANNEL&&(t=$("accessibility.sidebar.types.private","private channel"));const{channel:s,currentTeamName:r,styles:i}=e;return h(la,{channel:s,styles:i,link:`/${r}/group/${s.name}`,label:s.display_name,ariaLabelPrefix:t,closeHandler:(()=>{const{channel:t}=e;return t.type===O.OPEN_CHANNEL&&t.name!==O.DEFAULT_CHANNEL?a:t.type===O.PRIVATE_CHANNEL?n:null})(),icon:(()=>{const{channel:a}=e;return h(Re,{src:M.getChannelPictureUrl(a.id,a.last_picture_update),size:"tab",status:"",wrapperClass:"",newStatusIcon:!0})})()})}));var ca=g((e=>{const{channel:a,teammate:n,currentTeamName:t,currentUserId:s,intl:r}=e;if(!n)return null;let i=a.display_name;return s===n.id&&(i=r.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:i})),h(la,{teammateId:n.id,channel:a,link:`/${t}/messages/@${n.username}`,label:i,closeHandler:a=>{const n=e.channel.teammate_id,t=O.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,s=e.currentUserId;e.actions.savePreferences(s,[{user_id:s,category:t,name:n,value:"false"}]).then(a),e.actions.leaveDirectChannel(e.channel.name),e.active&&ee.push(`#u3-app/${e.currentTeamName}/group/${e.redirectChannel}`)},icon:(()=>{const{channel:a,teammate:n}=e;if(!n)return null;if(n.id&&n.delete_at)return h("i",{className:"icon icon-archive-outline"});let t="";return"online"===a.status?t="status-online":"away"===a.status?t="status-away":"dnd"===a.status&&(t="status-dnd"),h(Re,{src:M.getProfilePictureUrl(n.id,n.last_picture_update),size:"tab",status:n.is_bot?"":a.status,wrapperClass:"DirectChannel__profile-picture",newStatusIcon:!1,statusClass:`DirectChannel__status-icon ${t}`})})(),styles:e.styles})}));var da=b((function(e,a){const n=ae(e,a.channel.teammate_id),t=T(e),s=P(e),r=ne(e,s.id),i=L(e),l=a.channel.id===i;return{teammate:n,currentUserId:t.id,redirectChannel:r,active:l}}),(function(e){return{actions:v({savePreferences:te,leaveDirectChannel:I},e)}}))(ca);class ha extends p.PureComponent{constructor(){super(...arguments),c(this,"handleLeaveChannel",(e=>{const a=this.props.channel.id,n=O.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,t=this.props.currentUserId;this.props.actions.savePreferences(t,[{user_id:t,category:n,name:a,value:"false"}]).then(e),this.props.active&&ee.push(`#u3-app/${this.props.currentTeamName}/group/${this.props.redirectChannel}`)})),c(this,"getIcon",(()=>h("div",{className:"status status--group",children:this.props.membersCount})))}render(){const{channel:e,currentTeamName:a,styles:n}=this.props;return h(la,{channel:e,link:`/${a}/messages/${e.name}`,label:e.display_name,closeHandler:this.handleLeaveChannel,icon:this.getIcon(),styles:n})}}var ma=b((function(e,a){const n=T(e),t=P(e),s=ne(e,t.id),r=L(e),i=a.channel.id===r,l=se(e);let o=0;if(l&&l[a.channel.id]){const e=l[a.channel.id];o=e.size,e.has(n.id)&&o--}return{currentUserId:n.id,redirectChannel:s,active:i,membersCount:o}}),(function(e){return{actions:v({savePreferences:te},e)}}))(ha);var ua={itemTabChannel:"mqik-aef0f632",tab:"mqik-636eaf61",divider:"mqik-8894bce1",background:"mqik-d23cabb8",tabGeometry:"mqik-3f282ffb",active:"mqik-04826ad9",justAdded:"mqik-9a5930be",tabWasJustAdded:"mqik-eafa980b",content:"mqik-70df9724",icon:"mqik-9cb71bdb",title:"mqik-a034c782",badge:"mqik-b324cfe6",close:"mqik-cece8b76",closeIcon:"mqik-9bf0a77c"};const pa=m.exports.forwardRef(((e,a)=>{if(!e.channel)return null;let n=oa;return e.channel.type===O.DM_CHANNEL?n=da:e.channel.type===O.GM_CHANNEL&&(n=ma),d("div",{ref:a,className:u(ua.tab,{[ua.active]:e.isCurrentChannel}),children:[h("div",{className:ua.divider}),h("div",{className:ua.background,children:h(Ae,{tabGeometry:ua.tabGeometry})}),h(n,{channel:e.channel,currentTeamName:e.currentTeamName,styles:ua})]})}));var fa=b(function(){const e=re();return(a,n)=>{const t=e(a,{id:n.channelId}),s=P(a),r=J(a)[n.channelId],i=L(a);let l=0,o=0,c=!0;return r&&(l=r.mention_count,t&&(o=Z(!1,t,r)),r.notify_props&&(c=r.notify_props.mark_unread!==Y.MENTION)),{channel:t,currentTeamName:s.name,isCurrentChannel:t.id===i,unreadMentions:l,unreadMsgs:o,showUnreadForMsgs:c}}}(),null,null,{forwardRef:!0})(pa);var ba={items:"mqik-de39095c",listItems:"mqik-f90cfba6",chromeTabs:"mqik-0ba29205",chromeContent:"mqik-ccf8ee20",tab:"mqik-06382617",divider:"mqik-18a40aa8",background:"mqik-726bf2a2",tabGeometry:"mqik-a8269bbb",active:"mqik-5a764161",justAdded:"mqik-d113a3d5",tabWasJustAdded:"mqik-146f5b8a",content:"mqik-c9390443",icon:"mqik-fae86490",title:"mqik-20552f1b",badge:"mqik-f73abad0",close:"mqik-a67f3ebe",closeIcon:"mqik-a004418d",plusIcon:"mqik-bf387a6e",bottomBar:"mqik-9b0723b5"};class va extends p.PureComponent{constructor(e){super(e),c(this,"chromeTabsRef"),c(this,"tabsContentRef"),c(this,"joinMoreRef"),c(this,"tabItemRefs"),c(this,"layoutTabsDebounce"),c(this,"firstLoad"),c(this,"refKey",(e=>`refKey_${e}`)),c(this,"handleTabItemRef",(e=>a=>{this.tabItemRefs.set(this.refKey(e),a),this.layoutTabsDebounce()})),this.chromeTabsRef=m.exports.createRef(),this.tabsContentRef=m.exports.createRef(),this.joinMoreRef=m.exports.createRef(),this.tabItemRefs=new Map,this.firstLoad=!0,this.layoutTabsDebounce=x((()=>{this.layoutTabs(this.props.channelIds),this.firstLoad=!1}),50)}componentDidMount(){var e;null==(e=this.chromeTabsRef.current)||e.style.setProperty("--tab-content-margin","9px")}componentWillUnmount(){var e;null==(e=this.chromeTabsRef.current)||e.style.removeProperty("--tab-content-margin"),this.tabItemRefs.clear()}get tabContentWidths(){var e;const a=this.props.channelIds.length,n=(null==(e=this.tabsContentRef.current)?void 0:e.clientWidth)||0,t=1*(a+1-1),s=(n-18+t-52)/a,r=Math.max(24,Math.min(196,s)),i=Math.floor(r),l=[];let o=n-(i*a+18-t+52);for(let c=0;c<a+1;c+=1){const e=i<196&&o>0?1:0;c<a?l.push(i+e):l.push(52),o>0&&(o-=1)}return l}get tabContentPositions(){const e=[],a=this.tabContentWidths;let n=9;return a.forEach(((a,t)=>{const s=1*t;e.push(n-s),n+=a})),e}get tabPositions(){const e=[];return this.tabContentPositions.forEach((a=>{e.push(a-9)})),e}layoutTabs(e){const a=this.tabContentWidths,n=this.tabPositions;e.forEach(((e,t)=>{const s=a[t],r=s+18,i=this.tabItemRefs.get(this.refKey(e));if(i){i.style.width=r+"px",i.removeAttribute("small"),i.removeAttribute("smaller"),i.removeAttribute("mini"),s<84&&i.setAttribute("small",""),s<60&&i.setAttribute("smaller",""),s<48&&i.setAttribute("mini","");const e=n[t];i.style.left=`${e}px`}})),this.joinMoreRef.current&&(this.joinMoreRef.current.style.width="52px",this.joinMoreRef.current.style.left=`${n[n.length-1]}px`,this.joinMoreRef.current.style.display="block")}render(){const{channelIds:e}=this.props;return d("div",{ref:this.chromeTabsRef,className:ba.chromeTabs,children:[d("div",{ref:this.tabsContentRef,className:ba.chromeContent,children:[e.map(((e,a)=>h(fa,{ref:this.handleTabItemRef(e),channelIndex:a,channelId:e},e))),h(Fe,{ref:this.joinMoreRef,styles:ba})]}),h("div",{className:ba.bottomBar})]})}}var ya=b(function(){const e=ue(),a=pe(),n=fe();return t=>{const s=ie(t),r=le(t,s),i=oe(t,s),l=A(t,s),o=1===ce(t);if("all"===s||i.type===de.DIRECT_MESSAGES){let s=l.reduce(((e,a)=>{const n=he(t,a);return n&&n.type===me.PRIVATE_CHANNEL&&e.push(n),e}),[]);return s=e(t,s),s=a(t,s),s=n(t,s),{channelIds:s.map((e=>e.id)),categoryLoading:o,sidebarIndex:r}}return{channelIds:[],categoryLoading:o,sidebarIndex:r}}}())(va);var ga="mqik-5d502d38",Na="mqik-98b0c3b7";var Ca=b()((()=>(m.exports.useRef(null),h("div",{className:ga,children:h("div",{className:Na,children:h(ya,{})})}))));var ka="mqik-d7cbc3e0";var Ia=e=>{const[a,n]=m.exports.useState(!0);m.exports.useEffect((()=>{e.teamId&&(a||n(!0),e.actions.loadChannelsForCurrentUser2().then((()=>{n(!1)})))}),[e.teamId]);return a?h(Me,{}):h("div",{className:ka,children:h(Ca,{onJoinMore:()=>{}})})};var xa=b((function(e){const a=P(e),n=T(e);return{teamId:a.id,currentUser:n}}),(function(e){return{actions:v({loadChannelsForCurrentUser2:w},e)}}))(Ia);var wa=b((function(e){return{}}),(function(e){return{actions:v({receivedEvent:q},e)}}))((function(e){return m.exports.useEffect((()=>{window.quikExternalEvent(e.location.state)}),[]),d(m.exports.Fragment,{children:[h("div",{children:"OK 123"}),h(xa,{})]})}));export{wa as default};
