import{B as e,y as s,A as a,x as t,F as i,G as r}from"./vendor.bbf9911b.js";import{C as n,M as o,b2 as d,bO as c,b3 as m,cf as l,bc as u,bd as b,cg as p,aT as T,ch as f}from"./index.97b013dd.js";import{F as _}from"./FormattedMarkdownMessage.bdef2d7a.js";var h="mqik-d3bc89b9",g="mqik-35f23b7d",M="mqik-72f1a839",v="mqik-1a5b411c";var S=i=>{const[r,o]=e.exports.useState(""),[d,c]=e.exports.useState(!1),m=async()=>{c(!0);const{data:e,error:s}=await i.actions.getTeams(0,10,!1);s?o(s.message):(void 0!==i.currentUserRoles&&await i.actions.loadRolesIfNeeded(i.currentUserRoles.split(" ")),l(e))},l=async e=>{const{currentUserRoles:s,siteURL:a}=i,r=e||i.listableTeams[0];if(!r[0])return o("Có lỗi không xác định. Hãy thử lại!");const d=r[0],{data:c,error:m}=await i.actions.addUserToTeam(r[0].id,i.currentUserId);if(c&&void 0!==i.history)i.history.replace(`/${d.name}`);else if(m){let e=m.message;"api.team.add_members.user_denied"===m.server_error_id&&(e=void 0!==s&&s.includes(n.PERMISSIONS_SYSTEM_ADMIN)?t(_,{id:"join_team_group_constrained_denied_admin",defaultMessage:`You need to be a member of a linked group to join this team. You can add a group to this team [here](${a}/admin_console/user_management/groups).`,values:{siteURL:a}}):t(_,{id:"join_team_group_constrained_denied",defaultMessage:"You need to be a member of a linked group to join this team."})),o(e)}};return e.exports.useEffect((()=>{d||m()}),[]),s("div",{className:a(h),children:[t("div",{className:g,children:t("p",{children:"Kết nối tài khoản"})}),r?s("div",{className:M,children:[t("p",{children:r}),t("button",{className:v,onClick:m,children:"Thử lại"})]}):null]})};var U=i((function(e){const s=o(e),a=d(e),t=Object.values(c(e));return{currentUserId:a.id,currentUserRoles:a.roles||"",currentUserIsGuest:m(a),customDescriptionText:s.CustomDescriptionText,isMemberOfTeam:t&&t.length>0,listableTeams:l(e,a.locale),siteName:s.SiteName,canCreateTeams:u(e,{permission:b.CREATE_TEAM}),canManageSystem:u(e,{permission:b.MANAGE_SYSTEM}),canJoinPublicTeams:u(e,{permission:b.JOIN_PUBLIC_TEAMS}),canJoinPrivateTeams:u(e,{permission:b.JOIN_PRIVATE_TEAMS}),siteURL:s.SiteURL,totalTeamsCount:e.entities.teams.totalCount||0,publicChannel:s.ChannelPublic}}),(function(e){return{actions:r({getTeams:p,loadRolesIfNeeded:T,addUserToTeam:f},e)}}))(S);export{U as default};
