import{B as e,w as i,A as r,x as s,G as a,H as t}from"./vendor.3b6a4709.js";import{$ as n,b2 as c}from"./index.e1d3c0a7.js";import{r as o,b as l}from"./index.dae179ee.js";var d="mqik-60f4e87e",u="mqik-8589d34b",m="mqik-1d18b684",f="mqik-8bc66879";const h=["/connect","/error","/initial"];var p=a=>{const[t,n]=e.exports.useState(!1),[c,l]=e.exports.useState(""),{currentUser:p,actions:x,location:v,history:b}=a,g=async()=>{""!==c&&l("");const{data:e,error:i}=await x.userConnect();if(e){const e=(r=v.search,new URLSearchParams(r).get("next")||"");return e&&-1===h.indexOf(e)?b.replace(e):k()}var r;i&&l(i.message)},k=async()=>{n(!0),await o(a.history)};return e.exports.useEffect((()=>{if(a.initializing||!p){if(a.initializing||p&&t)return()=>{};g()}else k()}),[]),i("div",{className:r(d),children:[s("div",{className:r(u,"u3-hidden"),children:s("p",{children:"Kết nối tài khoản"})}),c?i("div",{className:m,children:[s("p",{children:c}),s("button",{className:f,onClick:g,children:"Thử lại"})]}):null]})};var x=a((function(e){return{initializing:e.requests.users.logout.status===n.SUCCESS||!e.storage.initialized,currentUser:c(e)}}),(function(e){return{actions:t({userConnect:l},e)}}))(p);export{x as default};
