var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,o=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&a(e,n,t[n]);if(s)for(var n of s(t))r.call(t,n)&&a(e,n,t[n]);return e},l=(e,s)=>t(e,n(s)),c=(e,t)=>{var n={};for(var a in e)i.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&s)for(var a of s(e))t.indexOf(a)<0&&r.call(e,a)&&(n[a]=e[a]);return n},u=(e,t,n)=>(a(e,"symbol"!=typeof t?t+"":t,n),n);import{B as d,x as h,G as p,R as f,w as m,A as g,F as v,D as b,Y as y,a as C,H as E,$ as w,Z as S,a3 as _,a4 as A,a5 as k,a6 as P,O as x,a7 as T,U as N,a8 as M,a9 as I,I as O,u as R,q as L,aa as D,ab as F,V as j,S as H,C as U}from"./vendor.3b6a4709.js";import{F as q,av as B,cD as V,cE as z,cF as W,Z as G,o as K,cG as Y,a as X,cH as $,cI as Q,cJ as J,be as Z,cK as ee,cL as te,cd as ne,cM as se,bd as ie,cN as re,cO as ae,aa as oe,k as le,$ as ce,M as ue,cP as de,cQ as he,cR as pe,cw as fe,cv as me,cS as ge,C as ve,bZ as be,cn as ye,K as Ce,d as Ee,cT as we,cU as Se,cV as _e,L as Ae,b4 as ke,D as Pe,b2 as xe,a2 as Te,bI as Ne,ba as Me,cu as Ie,cW as Oe,cX as Re,X as Le,cY as De,cZ as Fe,a9 as je,c_ as He,c$ as Ue,an as qe,d0 as Be,c as Ve,d1 as ze,ar as We,d2 as Ge,d3 as Ke,d4 as Ye,d5 as Xe,bN as $e,d6 as Qe,d7 as Je,d8 as Ze,d9 as et,aH as tt,da as nt,db as st,dc as it,dd as rt,de as at,df as ot,dg as lt,dh as ct,di as ut,dj as dt,dk as ht,dl as pt,dm as ft,dn as mt,dp as gt,dq as vt,dr as bt,ds as yt,dt as Ct,a7 as Et,du as wt,dv as St,cz as _t,dw as At,dx as kt,dy as Pt,dz as xt,dA as Tt,dB as Nt,dC as Mt,dD as It,dE as Ot,dF as Rt,dG as Lt,dH as Dt,dI as Ft,dJ as jt,dK as Ht,dL as Ut,dM as qt,dN as Bt,dO as Vt,dP as zt,a6 as Wt,s as Gt,dQ as Kt,r as Yt,dR as Xt,ab as $t,dS as Qt,dT as Jt,dU as Zt,dV as en,dW as tn,b6 as nn,dX as sn,dY as rn,bS as an,bR as on,dZ as ln,d_ as cn,d$ as un,e0 as dn,ac as hn,e1 as pn,e2 as fn,e3 as mn,e4 as gn,b9 as vn,e5 as bn,e6 as yn,e7 as Cn,e8 as En,e9 as wn,ea as Sn,eb as _n,ec as An,ed as kn,ee as Pn,ef as xn,eg as Tn,eh as Nn,ei as Mn,ej as In,ek as On,W as Rn,el as Ln,bC as Dn,em as Fn,en as jn,eo as Hn,ep as Un,eq as qn,bP as Bn,er as Vn,bE as zn,es as Wn,et as Gn,a1 as Kn,eu as Yn,ev as Xn,ew as $n,ex as Qn,ey as Jn,ez as Zn,eA as es,eB as ts,aw as ns,ax as ss,eC as is,eD as rs,eE as as,eF as os,P as ls,aN as cs,aX as us,eG as ds,ck as hs,b3 as ps,eH as fs,eI as ms,aI as gs,eJ as vs,eK as bs,eL as ys,eM as Cs,eN as Es,bz as ws,eO as Ss,eP as _s,eQ as As,eR as ks,eS as Ps,eT as xs,eU as Ts,eV as Ns,eW as Ms,eX as Is,eY as Os,eZ as Rs,e_ as Ls,e$ as Ds,f0 as Fs,f1 as js,f2 as Hs,f3 as Us,f4 as qs,f5 as Bs,f6 as Vs,f7 as zs,f8 as Ws,f9 as Gs,fa as Ks,fb as Ys,fc as Xs,fd as $s,fe as Qs,ff as Js,fg as Zs,c8 as ei,fh as ti,fi as ni,aM as si,c2 as ii,fj as ri,fk as ai,cp as oi,fl as li,fm as ci,fn as ui,fo as di,fp as hi,fq as pi,fr as fi,fs as mi,ft as gi,ad as vi,bt as bi,fu as yi,fv as Ci,fw as Ei,fx as wi,fy as Si,fz as _i,fA as Ai,fB as ki,fC as Pi,fD as xi,fE as Ti,fF as Ni,fG as Mi,fH as Ii,as as Oi,fI as Ri,ao as Li,fJ as Di,fK as Fi,fL as ji,fM as Hi,fN as Ui,fO as qi,fP as Bi,bo as Vi,fQ as zi,fR as Wi,bO as Gi,fS as Ki,fT as Yi,fU as Xi,fV as $i,fW as Qi,fX as Ji,bj as Zi,fY as er,fZ as tr,f_ as nr,f$ as sr,g0 as ir,g1 as rr,g2 as ar,g3 as or,g4 as lr,g5 as cr,g as ur,g6 as dr,e as hr,g7 as pr,g8 as fr,g9 as mr,ga as gr,aK as vr,gb as br,bG as yr,gc as Cr,bg as Er,co as wr,gd as Sr,l as _r,h as Ar,ge as kr,aS as Pr,j as xr,bb as Tr,gf as Nr,gg as Mr,a8 as Ir,gh as Or,m as Rr,gi as Lr,gj as Dr,gk as Fr,gl as jr,gm as Hr,gn as Ur,go as qr,ag as Br,gp as Vr,p as zr,gq as Wr,ch as Gr,gr as Kr}from"./index.fbb43448.js";import{s as Yr,d as Xr,f as $r,g as Qr,h as Jr,u as Zr,m as ea,j as ta,k as na,o as sa,n as ia,l as ra,p as aa,q as oa,t as la,v as ca,w as ua,x as da,y as ha,z as pa,A as fa,C as ma,D as ga,E as va,F as ba,M as ya,G as Ca,H as Ea,I as wa,J as Sa,K as _a,L as Aa,N as ka,O as Pa,P as xa,Q as Ta,R as Na,S as Ma,T as Ia,U as Oa,V as Ra,X as La,Y as Da,Z as Fa,_ as ja,$ as Ha,a0 as Ua,a1 as qa,a2 as Ba,a3 as Va}from"./index.5417b449.js";import{r as za}from"./jsx-runtime_commonjs-proxy.1991ba65.js";import{U as Wa,X as Ga,c as Ka,P as Ya,m as Xa,i as $a,T as Qa,a as Ja,Y as Za,b as eo,d as to,e as no}from"./index.01a89db1.js";import{P as so,A as io,S as ro}from"./index.a5ba24b0.js";import{s as ao,$ as oo,Q as lo,L as co,M as uo,a as ho,b as po,G as fo,c as mo,d as go,e as vo,g as bo,f as yo,h as Co,A as Eo,i as wo,C as So,X as _o,P as Ao,j as ko,k as Po,m as xo,W as To,l as No,n as Mo,o as Io,t as Oo,p as Ro,q as Lo,r as Do,u as Fo,v as jo,w as Ho,x as Uo,y as qo,V as Bo,S as Vo,E as zo,z as Wo,B as Go,D as Ko}from"./PlusIcon.61cd43a3.js";import{g as Yo,F as Xo}from"./index.f417daac.js";import{F as $o,i as Qo}from"./FormattedMarkdownMessage.78fea521.js";const Jo=()=>e=>e({type:q.CLOSE_LHS});var Zo=za.jsx;var el=d.exports.forwardRef((function(e,t){return Zo("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:Zo("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}))}));function tl(e){return{type:q.SIDEBAR_DRAGGING_SET_STATE,data:e}}function nl(){return{type:q.SIDEBAR_DRAGGING_STOP}}function sl(e,t,n){return async(s,i)=>{if(n){const e=i().views.channelSidebar.multiSelectedChannelIds;n.forEach((t=>{e.indexOf(t)>=0&&s(al(t))}))}const r=await s(V(e,t,n));return s({type:q.ADD_NEW_CATEGORY_ID,data:r.data.id})}}function il(e,t,n,s=!0){return(i,r)=>{const a=r(),o=a.views.channelSidebar.multiSelectedChannelIds;let l=[];if(o.length&&-1!==o.indexOf(n)){const t=z(a),s=W(a);let r=[n];const c=t.find((t=>t.id===e));r=o.filter((e=>{const t=s.find((t=>e===t.id)),n=(null==t?void 0:t.type)===G.DM_CHANNEL||(null==t?void 0:t.type)===G.GM_CHANNEL;return(null==c?void 0:c.type)===K.CUSTOM||(null==c?void 0:c.type)===K.FAVORITES||n&&(null==c?void 0:c.type)===K.DIRECT_MESSAGES||!n&&(null==c?void 0:c.type)!==K.DIRECT_MESSAGES}));const u=s.map((e=>e.id));r.sort(((e,t)=>u.indexOf(e)-u.indexOf(t))),r.forEach((e=>i(al(e)))),l=r}else l=[n];const c=function(e,t,n,s,i){if(0===s)return 0;const r=X(e,t),a=$()(e,r),o=a.filter(((e,t)=>e!==i&&-1!==n.indexOf(e)&&t<=s)),l=s-o.length;if(r.channel_ids.length===a.length)return l;const c=Q(a,n,l),u=c[c.indexOf(n[0])-1];let d=r.channel_ids.indexOf(u)+1;const h=r.channel_ids.indexOf(n[0]);-1!==h&&h<d&&(d-=1);return Math.max(d-o.length,0)}(a,e,l,t,n);return i(Y(e,l,c,s))}}function rl(){return(e,t)=>0===t().views.channelSidebar.multiSelectedChannelIds.length?Promise.resolve({data:!0}):e({type:q.MULTISELECT_CHANNEL_CLEAR})}function al(e){return(t,n)=>{const s=n();if(!s.views.channelSidebar.multiSelectedChannelIds.length){const e=B(s);t({type:q.MULTISELECT_CHANNEL,data:e})}return t({type:q.MULTISELECT_CHANNEL_ADD,data:e})}}function ol(e){return(t,n)=>{const s=n(),i=s.views.channelSidebar.multiSelectedChannelIds;let r=s.views.channelSidebar.lastSelectedChannel;if(!i.length){const e=B(s);t({type:q.MULTISELECT_CHANNEL,data:e}),r=e}const a=J(s).map((e=>e.id)),o=a.indexOf(e),l=a.indexOf(r);if(o===l)return null;const c=Math.min(l,o),u=Math.max(l,o),d=a.slice(c,u+1);return t({type:q.MULTISELECT_CHANNEL_TO,data:d})}}function ll(e){return t=>t({type:q.ADD_CHAT_ID,data:e})}function cl(e){return t=>t({type:q.REMOVE_CHAT_ID,data:e})}function ul(e){return t=>t({type:q.SET_CHAT_MINIMAL,data:e})}function dl(e){return t=>t({type:q.REMOVE_CHAT_MINIMAL,data:e})}function hl(e,t){return n=>n({type:q.SET_PRE_CHAT,data:o({id:e},t)})}var pl=e=>h("div",{className:ao.dialogActions,children:e.children}),fl=e=>e.children;var ml=p((function(e,t){if(!t.teamId)return{hasPermission:!1};for(const n of t.permissions)if(Z(e,{team:t.teamId,permission:n}))return{hasPermission:!0};return{hasPermission:!1}}))((e=>{const{hasPermission:t,children:n,invert:s=!1}=e;return t&&!s||!t&&s?n:null}));var gl={filteredUserList:"mqik-534bc39c",channelList:"mqik-bcf3333f",modalRow:"mqik-ea25767e",modalDetail:"mqik-8b41cba2",modalItemName:"mqik-04b1596a",btn:"mqik-2027c07b",btnPrimary:"mqik-722a9ad7",searchableInput:"mqik-002551a5"};class vl extends f.PureComponent{constructor(e){super(e),u(this,"nextTimeoutId"),u(this,"filter"),u(this,"channelListScroll"),u(this,"createChannelRow",(e=>{const t=`${e.display_name}, ${e.purpose}`.toLowerCase();return m("div",{className:g(gl.modalRow,"more-modal__row"),id:`ChannelRow-${e.name}`,children:[m("div",{className:g(gl.modalDetail,"more-modal__details"),children:[h("button",{onClick:this.handleJoin.bind(this,e),"aria-label":t,className:g(gl.modalItemName,"style--none more-modal__name"),children:e.display_name}),h("p",{className:"more-modal__description",children:e.purpose})]}),h("div",{className:g(gl.modalActions,"more-modal__actions"),children:h("button",{onClick:this.handleJoin.bind(this,e),className:g(gl.btn,gl.btnPrimary,"btn btn-primary"),disabled:this.state.joiningChannel,children:this.state.joiningChannel===e.id?h(v,{id:"more_channels.joining",defaultMessage:"Vào nhóm..."}):h(v,{id:"more_channels.join",defaultMessage:"Tham gia"})})})]},e.id)})),u(this,"nextPage",(e=>{e.preventDefault(),this.setState({page:this.state.page+1,nextDisabled:!0}),this.nextTimeoutId=setTimeout((()=>this.setState({nextDisabled:!1})),500),this.props.nextPage(this.state.page+1),oo(b.findDOMNode(this.channelListScroll.current)).scrollTop(0)})),u(this,"previousPage",(e=>{e.preventDefault(),this.setState({page:this.state.page-1}),oo(b.findDOMNode(this.channelListScroll.current)).scrollTop(0)})),u(this,"doSearch",(()=>{const e=this.filter.current.value;this.props.search(e),""===e&&this.setState({page:0})})),this.nextTimeoutId=0,this.state={joiningChannel:"",page:0,nextDisabled:!1},this.filter=f.createRef(),this.channelListScroll=f.createRef()}static getDerivedStateFromProps(e,t){return{isSearch:e.isSearch,page:e.isSearch&&!t.isSearch?0:t.page}}componentDidMount(){!ee()&&this.filter.current&&this.filter.current.focus()}handleJoin(e){this.setState({joiningChannel:e.id}),this.props.handleJoin(e,(()=>{this.setState({joiningChannel:""})}))}render(){const e=this.props.channels;let t,n,s;if(this.props.loading&&0===e.length)t=h(ne,{});else if(0===e.length)t=m("div",{className:"no-channel-message",children:[h("p",{className:"primary-message",children:h(v,{id:"more_channels.noMore",defaultMessage:"No more channels to join"})}),this.props.noResultsText]});else{const e=this.state.page*this.props.channelsPerPage,i=e+this.props.channelsPerPage,r=this.props.channels.slice(e,i);t=r.map(this.createChannelRow),r.length>=this.props.channelsPerPage&&i<this.props.channels.length&&(n=h("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled,children:h(v,{id:"more_channels.next",defaultMessage:"Next"})})),this.state.page>0&&(s=h("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.previousPage,children:h(v,{id:"more_channels.prev",defaultMessage:"Previous"})}))}let i=h("div",{className:"filter-row filter-row--full",children:h("div",{className:"col-sm-12",children:h(lo,{id:"searchChannelsTextbox",ref:this.filter,className:g(gl.searchableInput,"form-control filter-textbox"),placeholder:{id:te("filtered_channels_list.search"),defaultMessage:"Search channels"},inputComponent:co,onInput:this.doSearch})})});return this.props.createChannelButton&&(i=m("div",{className:"channel_search",children:[h("div",{className:"search_input",children:h(lo,{id:"searchChannelsTextbox",ref:this.filter,className:"form-control filter-textbox",placeholder:{id:te("filtered_channels_list.search"),defaultMessage:"Search channels"},inputComponent:co,onInput:this.doSearch})}),h("div",{className:"create_button",children:this.props.createChannelButton})]})),m("div",{className:gl.filteredUserList,children:[i,h("div",{role:"application",ref:"channelList",className:g(gl.channelList,"more-modal__list"),children:h("div",{id:"moreChannelsList",ref:this.channelListScroll,children:t})}),m("div",{className:"filter-controls",children:[s,n]})]})}}vl.defaultProps={channels:[],isSearch:!1},vl.propTypes={channels:y.arrayOf(y.object),channelsPerPage:y.number,nextPage:y.func.isRequired,isSearch:y.bool,search:y.func.isRequired,handleJoin:y.func.isRequired,noResultsText:y.object,loading:y.bool,createChannelButton:y.element,toggleArchivedChannels:y.func.isRequired,shouldShowArchivedChannels:y.bool.isRequired,canShowArchivedChannels:y.bool.isRequired};var bl="mqik-4a38de9e";class yl extends f.PureComponent{constructor(e){super(e),u(this,"searchTimeoutId"),u(this,"handleHide",(()=>{this.setState({show:!1}),this.props.bodyOnly&&this.handleExit()})),u(this,"handleExit",(()=>{this.props.actions.closeModal(se.MORE_CHANNELS)})),u(this,"onChange",(e=>{this.state.search&&!e||this.setState({searchedChannels:[],serverError:null})})),u(this,"nextPage",(e=>{this.props.actions.getChannels(this.props.teamId,e+1,50)})),u(this,"handleJoin",(async(e,t)=>{const{actions:n,currentUserId:s,teamId:i,teamName:r}=this.props,a=await n.joinChannel(s,i,e.id);a.error?this.setState({serverError:a.error.message}):this.handleHide(),t&&t()})),u(this,"search",(e=>{if(clearTimeout(this.searchTimeoutId),""===e)return this.onChange(!0),this.setState({search:!1,searchedChannels:[],searching:!1,searchTerm:e}),void(this.searchTimeoutId=0);this.setState({search:!0,searching:!0,searchTerm:e});const t=window.setTimeout((async()=>{try{const{data:n}=await this.props.actions.searchMoreChannels(e,this.state.shouldShowArchivedChannels);if(t!==this.searchTimeoutId)return;n?this.setSearchResults(n):this.setState({searchedChannels:[],searching:!1})}catch(n){this.setState({searchedChannels:[],searching:!1})}}),100);this.searchTimeoutId=t})),u(this,"setSearchResults",(e=>{this.setState({searchedChannels:this.state.shouldShowArchivedChannels?e.filter((e=>0!==e.delete_at)):e.filter((e=>0===e.delete_at)),searching:!1})})),u(this,"toggleArchivedChannels",(e=>{this.search(this.state.searchTerm),this.setState({shouldShowArchivedChannels:e})})),this.searchTimeoutId=0,this.state={show:!0,shouldShowArchivedChannels:"private"===this.props.morePublicChannelsModalType,search:!1,searchedChannels:[],serverError:null,searching:!1,searchTerm:""}}componentDidMount(){this.props.actions.getChannels(this.props.teamId,0,100),this.props.canShowArchivedChannels&&this.props.actions.getArchivedChannels(this.props.teamId,0,100)}render(){const{channels:e,archivedChannels:t,teamId:n,channelsRequestStarted:s,bodyOnly:i}=this.props,{search:r,searchedChannels:a,serverError:o,show:l,searching:c,shouldShowArchivedChannels:u}=this.state;let d;d=u?r?a:t:r?a:e;const p=h(ml,{teamId:n,permissions:[ie.CREATE_PUBLIC_CHANNEL,ie.CREATE_PRIVATE_CHANNEL],children:h("p",{className:"secondary-message",children:h(v,{id:"more_channels.createClick",defaultMessage:"Click 'Create New Channel' to make a new one"})})});return m(uo,{dialogClassName:"a11y__modal more-modal more-modal--action",show:l,onHide:this.handleHide,onExited:this.handleExit,"aria-labelledby":"moreChannelsModalLabel",children:[h(ho,{closeButton:!0,onClose:this.handleHide,children:h(v,{id:"more_channels.title2",defaultMessage:"Tìm Nhóm"})}),h(po,{children:h("div",{className:bl,children:h(vl,{channels:d,channelsPerPage:50,nextPage:this.nextPage,isSearch:r,search:this.search,handleJoin:this.handleJoin,noResultsText:p,loading:r?c:s,createChannelButton:i&&null,toggleArchivedChannels:this.toggleArchivedChannels,shouldShowArchivedChannels:this.state.shouldShowArchivedChannels,canShowArchivedChannels:this.props.canShowArchivedChannels})})})]})}}const Cl=C(re,(e=>e&&e.filter((e=>0===e.delete_at)))),El=C(ae,(e=>e&&e.filter((e=>0!==e.delete_at))));var wl=p((function(e){const t=oe(e)||{};return{channels:Cl(e)||[],archivedChannels:El(e)||[],currentUserId:le(e),teamId:t.id,teamName:t.name,channelsRequestStarted:e.requests.channels.getChannels.status===ce.STARTED,canShowArchivedChannels:"true"===ue(e).ExperimentalViewArchivedChannels}}),(function(e){return{actions:E({getChannels:de,getArchivedChannels:he,joinChannel:pe,searchMoreChannels:Yr,openModal:fe,closeModal:me,addChatId:ll},e)}}))(yl);var Sl={newChannel:"mqik-8bb4a2e1",formGroup:"mqik-48ae4be8",inputHelp:"mqik-62279099",error:"mqik-7a20a2ef",formLabel:"mqik-9c7904d0",light:"mqik-8b64b48b",formValue:"mqik-c9f5aa32",formControl:"mqik-a77cc126",noResize:"mqik-ff660243",flexParent:"mqik-6f0b8d25",icon:"mqik-69bc8b90",radioSelect:"mqik-917b71ed",hasError:"mqik-7de8b87d",newChannelActions:"mqik-bf8193e1",btn:"mqik-0864b77b",btnPrimary:"mqik-9b678f1f",btnLink:"mqik-fc567c2d"};class _l extends f.PureComponent{constructor(e){super(e),u(this,"displayNameInput"),u(this,"channelPurposeInput"),u(this,"onEnterKeyDown",(e=>{const t=ge(e,ve.KeyCodes.ENTER),{ctrlSend:n}=this.props;n&&t&&!e.ctrlKey?e.preventDefault():(n&&t&&e.ctrlKey||!n&&t&&!e.shiftKey&&!e.altKey)&&this.handleSubmit(e)})),u(this,"handleSubmit",(e=>{e.preventDefault();this.displayNameInput.current.value.trim().length<ve.MIN_CHANNELNAME_LENGTH?this.setState({displayNameError:!0}):this.props.onSubmitChannel()})),u(this,"handleChange",(()=>{const e={displayName:this.displayNameInput.current.value,purpose:this.channelPurposeInput.current.value};this.props.onDataChanged(e)})),u(this,"handleOnURLChange",(e=>{e.preventDefault(),this.props.onChangeURLPressed&&this.props.onChangeURLPressed()})),u(this,"handlePublicTypeSelect",(()=>{this.props.onTypeSwitched("O")})),u(this,"handlePrivateTypeSelect",(()=>{this.props.onTypeSwitched("P")})),this.state={displayNameError:""},this.channelPurposeInput=f.createRef(),this.displayNameInput=f.createRef()}static getDerivedStateFromProps(e){return!1===e.show?{displayNameError:""}:null}render(){const{canCreatePublicChannel:e,canCreatePrivateChannel:t,show:n}=this.props,s=e&&t;var i=null,r=null,a="";this.state.displayNameError&&(i=m("p",{className:g(Sl.inputHelp,Sl.error),children:[h(v,{id:"channel_modal.displayNameError",defaultMessage:"Display name must have at least 2 characters."}),this.state.displayNameError]}),a=Sl.hasError),this.props.serverError&&(r=h("div",{className:g(Sl.formGroup),children:h("p",{className:g(Sl.inputHelp,Sl.error),children:this.props.serverError})}));const o=m("div",{className:Sl.flexParent,children:[h(fo,{className:Sl.icon}),h(v,{id:"channel_modal.publicName",defaultMessage:"Public"}),h(v,{id:"channel_modal.publicHint",defaultMessage:" - Anyone can join this channel"})]}),l=m("div",{className:Sl.flexParent,children:[h(mo,{className:Sl.icon}),h(v,{id:"channel_modal.privateName",defaultMessage:"Private"}),h(v,{id:"channel_modal.privateHint",defaultMessage:" - Only invited members can join this channel"})]});let c=null;return c=s?m("fieldset",{className:g(Sl.radioSelect),children:[h("div",{className:g(Sl.radio),children:m("label",{children:[h("input",{id:"public",type:"radio",name:"channelType",checked:"O"===this.props.channelType,onChange:this.handlePublicTypeSelect,"aria-labelledby":"channelModalTypeLabel"}),o]})}),h("div",{className:g(Sl.radio),children:m("label",{children:[h("input",{id:"private",type:"radio",name:"channelType",checked:"P"===this.props.channelType,onChange:this.handlePrivateTypeSelect,"aria-labelledby":"channelModalTypeLabel"}),l]})})]},"channelType"):h("div",{className:"type-container multi-select__radio",children:m("div",{className:"radio",children:[e?o:null,t?l:null]})}),m(uo,{dialogClassName:"a11y__modal more-modal more-modal--action",show:n,onHide:this.props.onModalDismissed,onExited:this.props.onModalExited,"aria-labelledby":"newChannelModalLabel",children:[h(ho,{closeButton:!0,onClose:this.props.onModalDismissed,children:h(v,{id:"channel_modal.modalTitle",defaultMessage:"New Channel"})}),h(po,{children:m("form",{role:"form",className:g(Sl.newChannel),children:[m("div",{className:g(Sl.formGroup),children:[h("label",{className:g(Sl.formLabel),children:h(v,{id:"channel_modal.type",defaultMessage:"Type"})}),h("div",{className:g(Sl.formValue),children:c})]}),m("div",{className:g(a,Sl.formGroup),children:[h("label",{className:g(Sl.formLabel),htmlFor:"newChannelName",children:h(v,{id:"channel_modal.name",defaultMessage:"Name"})}),m("div",{className:g(Sl.formValue),children:[h(co,{id:"newChannelName",onChange:this.handleChange,type:"text",ref:this.displayNameInput,className:g(Sl.formControl),placeholder:{id:te("channel_modal.nameEx"),defaultMessage:'E.g.: "Bugs", "Marketing", "客户支持"'},maxLength:ve.MAX_CHANNELNAME_LENGTH,value:this.props.channelData.displayName,autoFocus:!0,onKeyDown:this.onEnterKeyDown}),i]})]}),m("div",{className:g(Sl.formGroup),children:[m("div",{className:g(Sl.formLabel),children:[h("label",{className:g(Sl.formLabel),htmlFor:"newChannelPurpose",children:h(v,{id:"channel_modal.purpose",defaultMessage:"Purpose"})}),h("label",{className:g(Sl.formLabel,Sl.light),children:h(v,{id:"channel_modal.optional",defaultMessage:"(optional)"})})]}),m("div",{className:g(Sl.formValue),children:[h("textarea",{id:"newChannelPurpose",className:g(Sl.formControl,Sl.noResize),ref:this.channelPurposeInput,rows:4,placeholder:be("channel_modal.purposeEx",'E.g.: "A channel to file bugs and improvements"'),maxLength:250,value:this.props.channelData.purpose,onChange:this.handleChange}),r]})]})]})}),h(pl,{children:m("div",{className:Sl.newChannelActions,children:[h("button",{id:"cancelNewChannel",type:"button",className:g(Sl.btn,Sl.btnLink),onClick:this.props.onModalDismissed,children:h(v,{id:"channel_modal.cancel",defaultMessage:"Cancel"})}),h("button",{id:"submitNewChannel",onClick:this.handleSubmit,type:"submit",className:g(Sl.btn,Sl.btnPrimary),children:h(v,{id:"channel_modal.createNew",defaultMessage:"Create Channel"})})]})})]})}}u(_l,"propTypes",{show:y.bool.isRequired,currentTeamId:y.string.isRequired,channelType:y.string.isRequired,channelData:y.object.isRequired,ctrlSend:y.bool,serverError:y.node,onSubmitChannel:y.func.isRequired,onModalDismissed:y.func.isRequired,onModalExited:y.func,onTypeSwitched:y.func.isRequired,onChangeURLPressed:y.func.isRequired,onDataChanged:y.func.isRequired,canCreatePublicChannel:y.bool.isRequired,canCreatePrivateChannel:y.bool.isRequired});var Al=p((function(e){return{ctrlSend:ye(e,Ce.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),currentTeamId:Ee(e)}}))(_l);function kl(e){let t=e.channelType||ve.OPEN_CHANNEL;return e.canCreatePublicChannel||t!==ve.OPEN_CHANNEL||(t=ve.PRIVATE_CHANNEL),e.canCreatePrivateChannel||t!==ve.PRIVATE_CHANNEL||(t=ve.OPEN_CHANNEL),t}class Pl extends f.PureComponent{constructor(e){super(e),u(this,"onSubmit",(()=>{if(!this.state.channelDisplayName)return void this.setState({serverError:be("channel_flow.invalidName","Invalid Channel Name")});if(this.state.channelName.length<2)return void this.setState({flowState:3});const{actions:e,currentTeamId:t,history:n}=this.props,s={team_id:t,name:this.state.channelName,display_name:this.state.channelDisplayName,purpose:this.state.channelPurpose,header:this.state.channelHeader,type:this.state.channelType,create_at:0,creator_id:"",delete_at:0,extra_update_at:0,group_constrained:!1,id:"",last_post_at:0,scheme_id:"",total_msg_count:0,total_msg_count_root:0,update_at:0,last_picture_update:0,verified:!1};e.createChannel(s).then((({data:t,error:s})=>{s?this.onCreateChannelError(s):t&&(this.onModalDismissed(),e.switchToChannel(t,n))}))})),u(this,"onModalDismissed",(()=>{this.props.actions.closeModal(se.NEW_CHANNEL_FLOW)})),u(this,"onCreateChannelError",(e=>{"model.channel.is_valid.2_or_more.app_error"===e.server_error_id?this.setState({flowState:3,serverError:h(v,{id:"channel_flow.handleTooShort",defaultMessage:"Channel URL must be 2 or more lowercase alphanumeric characters"})}):"store.sql_channel.update.exists.app_error"===e.server_error_id?this.setState({serverError:be("channel_flow.alreadyExist","A channel with that URL already exists")}):this.setState({serverError:e.message})})),u(this,"typeSwitched",(e=>{this.setState({channelType:e,serverError:""})})),u(this,"urlChangeRequested",(e=>{e&&e.preventDefault(),this.setState({flowState:2})})),u(this,"urlChangeSubmitted",(e=>{3===this.state.flowState?this.setState({channelName:e,nameModified:!0},this.onSubmit):this.setState({flowState:1,serverError:null,channelName:e,nameModified:!0})})),u(this,"urlChangeDismissed",(()=>{this.setState({flowState:1})})),u(this,"channelDataChanged",(e=>{this.setState({channelDisplayName:e.displayName,channelPurpose:e.purpose,channelHeader:e.header}),this.state.nameModified||this.setState({channelName:we(e.displayName.trim())})})),this.state={serverError:"",channelType:kl(e),flowState:1,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1}}render(){const e={name:this.state.channelName,displayName:this.state.channelDisplayName,purpose:this.state.channelPurpose,header:this.state.channelHeader};let t=!1;switch(this.state.flowState){case 1:t=!0}return console.info("showChannelModal",t),h(d.exports.Fragment,{children:h(Al,{show:t,channelType:this.state.channelType,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,channelData:e,serverError:this.state.serverError,onSubmitChannel:this.onSubmit,onModalDismissed:this.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged})})}}u(Pl,"defaultProps",{channelType:ve.OPEN_CHANNEL});var xl=p((function(e){const t=oe(e),n=B(e);let s=!1,i=!1;return t&&(s=Se(e,{channel:n,team:t.id,permission:ie.CREATE_PUBLIC_CHANNEL}),i=Se(e,{channel:n,team:t.id,permission:ie.CREATE_PRIVATE_CHANNEL})),{currentTeamId:t.id,canCreatePrivateChannel:i,canCreatePublicChannel:s}}),(function(e){return{actions:E({createChannel:_e,switchToChannel:Xr,closeModal:me},e)}}))(Pl);var Tl="mqik-0a9d2a73",Nl="mqik-bf52855f",Ml="mqik-3dbb95fa",Il="mqik-e187b183",Ol="mqik-a5b73d28",Rl="mqik-bf41671d",Ll="mqik-d3e0efae";var Dl=p((function(e){const t=Ae.getPreviousTeamId(le(e)),n=ke(e,t);return{permalinkRedirectTeamName:n?n.name:"",chatActive:$r(e),chatReady:Qr(e)}}),(function(e){return{actions:E({setChatActive:Jr,openModal:fe},e)}}))((e=>{const t=w(),{open:n,permalinkRedirectTeamName:s}=e;return h("div",{className:g(Tl,{[Nl]:!n}),children:n?h("div",{className:Ml,children:m("ul",{children:[m("li",{children:[h("button",{onClick:()=>{e.onClose(),t.push(`/${s}/friends`)},children:"Danh sách theo dõi"}),m("span",{className:g(Il,"u3-invisible"),children:[h("span",{className:g(Ol,"u3-animate-ping")}),h("span",{className:Rl})]})]}),h("li",{children:h("button",{onClick:()=>{e.onClose(),e.actions.openModal({modalId:se.MORE_CHANNELS,dialogType:wl,dialogProps:{morePublicChannelsModalType:"public",history:t}})},children:"Tìm nhóm chat"})}),h("li",{children:h("button",{onClick:()=>{e.onClose(),e.actions.openModal({modalId:se.NEW_CHANNEL_FLOW,dialogType:xl,dialogProps:{history:t}})},children:"Tạo nhóm chat"})}),h("li",{children:h("button",{className:Ll,onClick:()=>e.onLogout(!1),children:"Tắt chat"})})]})}):null})}));var Fl="mqik-ad29fc58",jl="mqik-2cda1eee",Hl="mqik-6f73654e",Ul="mqik-c752aa57",ql="mqik-a3757568",Bl="mqik-ccef951a",Vl="mqik-aa1c4648",zl="mqik-85ac1e93",Wl="mqik-e8cda058",Gl="mqik-0ce1936f";var Kl=p((function(e){const t=le(e),n=Ae.getPreviousTeamId(t);return ke(e,n),{userId:t,user:xe(e),chatActive:$r(e),chatReady:Qr(e)}}),(function(e){return{actions:E({setChatActive:Jr},e)}}))((e=>{const[t,n]=d.exports.useState(!1);d.exports.useState(!0);return m("div",{className:g(Fl),children:[h(Dl,{open:t,onClose:()=>n(!1),onLogout:()=>{n(!1),e.actions.setChatActive(!1)}}),m("div",{className:g(jl),children:[h(so,{src:Pe.getProfilePictureUrl(e.user.id,e.user.last_picture_update),size:"lg",userId:e.user.id,hasMention:!0,username:e.user.username}),h("div",{className:g(Hl),children:h(Wa,{userId:e.userId,disablePopover:!0})}),m("div",{className:g(Ul),children:[h("button",{className:g(ql,{[Vl]:t}),onClick:()=>n(!t),children:h(t?Ga:el,{className:Bl})}),m("span",{className:g(zl,"u3-hidden u3-invisible"),children:[h("span",{className:g(Wl,"u3-animate-ping")}),h("span",{className:Gl})]})]})]})]})}));var Yl,Xl,$l="mqik-4f490a72",Ql="mqik-56c987b1";(Xl=Yl||(Yl={})).Mention="Mention",Xl.Unread="Unread",Xl.None="None";var Jl=S((e=>{const t=Zr(),n=function(e){const t=d.exports.useRef();return d.exports.useEffect((()=>{t.current=e})),t.current||{}}(e),s=e=>e.mentionCount>0?Yl.Mention:e.messageCount>0?Yl.Unread:Yl.None;return d.exports.useEffect((()=>{(()=>{const{currentChannel:n,currentTeam:s,currentTeammate:i,unreads:r,inGlobalThreads:a,contactName:o}=e,{formatMessage:l}=e.intl;if(n&&s&&n.id){let r=n.display_name;n.type===ve.DM_CHANNEL&&null!=i&&(r=o||i.display_name);let a="";if(e.channelStats){const{member_count:t,online_count:n}=e.channelStats;a=` | ${n}/${t}`}t.setTitle(`${r}${a} - ${s.display_name}`)}else s&&a?t.setTitle(l({id:"globalThreads.title",defaultMessage:"{prefix}Threads - {displayName} {siteName}"},{prefix:"",displayName:s.display_name,siteName:""})):t.setTitle("U3 Chat")})();const i=s(n.unreads||{}),r=s(e.unreads||{});i!==r&&t.selectDot(r)}),[e]),null}));var Zl=_(p((function(e,{location:{pathname:t}}){const n=ue(e),s=Te(e),i=s&&s.teammate_id?s:null,r=oe(e),a=Ne(e);let o="";if(i){const t=Me(e,i.teammate_id);o=t?Ie(e,t.id):""}return{currentChannel:s,currentTeam:r,currentTeammate:i,siteName:n.SiteName,unreads:Oe(e),inGlobalThreads:null!=A(t,{path:"/:team/threads/:threadIdentifier?"}),contactName:o,channelStats:a}}),(function(e){return{actions:E({},e)}}))(Jl));class ec extends f.PureComponent{constructor(e){super(e)}render(){const e=this.props,{modals:t}=e,n=c(e,["modals"]),{modalState:s}=t;if(!t)return h("div",{});const i=[];for(const r in s)if(s.hasOwnProperty(r)){const e=s[r];if(e.open){const t=f.createElement(e.dialogType,Object.assign({},e.dialogProps,{onHide:n.actions.closeModal.bind(this,r),key:`${r}_modal`}));i.push(t)}}return h("div",{children:i})}}var tc=p((function(e){return{modals:e.views.modals}}),(function(e){return{actions:E({closeModal:me},e)}}))(ec);function nc(e){return{type:q.SET_SHOW_PREVIEW_ON_CREATE_POST,showPreview:e}}function sc(e){return{type:q.SET_SHOW_PREVIEW_ON_EDIT_POST_MODAL,showPreview:e}}function ic(e){return e.views.textbox.shouldShowPreviewOnCreatePost}function rc(e){return e.views.textbox.shouldShowPreviewOnEditPostModal}function ac(e){return async(t,n)=>{const s=await Re(e)(t,n);return s.error&&"api.post.update_post.permissions_time_limit.app_error"===s.error.server_error_id&&t(Le({type:De.ANNOUNCEMENT,message:s.error.message},!0)),s}}function oc(e){if(-1===Array.from(e.types).indexOf("text/html"))return!1;const t=e.getData("text/html");if(!/<table/i.test(t))return!1;const n=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelector("table")}(t);return n||!1}function lc(e){return null==e.textContent?" ":e.textContent.trim().replace(/\|/g,"\\|").replace(/\n/g," ")}function cc(e,t,n){const s=Array.from(e.querySelectorAll("tr")),i=s.shift(),r=i?(a=i,Array.from(a.querySelectorAll("td, th")).map(lc)):[];var a;const o=r.map((()=>"---")),l=`${`|${r.join(" | ")}|\n|${o.join(" | ")}|\n`}${s.map((e=>`|${Array.from(e.querySelectorAll("td")).map(lc).join(" | ")}|`)).join("\n")}\n`;if(!t)return l;if(void 0===n)return`${t}\n\n${l}`;return[t.slice(0,n),l,t.slice(n)].join("\n")}function uc(e,t,n){const{firstPiece:s,lastPiece:i}=Fe(e,t),r=""===i?"":"\n",a=(""===s?"":"\n")+"```\n"+function(e){return-1!==Array.from(e.types).indexOf("text/plain")&&e.getData("text/plain")}(n)+"\n```"+r;return{formattedMessage:`${s}${a}${i}`,formattedCodeBlock:a}}class dc extends f.PureComponent{constructor(e){super(e),u(this,"deletePostBtn"),u(this,"handleDelete",(async()=>{const{actions:e,post:t}=this.props;let n="";const s=await e.deleteAndRemovePost(t),i=A(this.props.location.pathname,{path:"/:teamName/messages/:username/:postid"}),r=A(this.props.location.pathname,{path:"/:teamName/group/:channelname/:postid"});if(i?n=i.params.postid:r&&(n=r.params.postid),n===t.id){const e=this.props.location.pathname.split("/").slice(0,-1).join("/");je.replace(e)}s.data&&this.onHide()})),u(this,"handleEntered",(()=>{var e,t;null==(t=null==(e=this.deletePostBtn)?void 0:e.current)||t.focus()})),u(this,"onHide",(()=>{if(this.setState({show:!1}),!ee()){let e;e=this.props.isRHS?document.getElementById("reply_textbox"):document.getElementById("post_textbox"),e&&e.focus()}})),this.deletePostBtn=f.createRef(),this.state={show:!0}}render(){let e="";this.props.commentCount>0&&""===this.props.post.root_id&&(e=h(v,{id:"delete_post.warning",defaultMessage:"This post has {count, number} {count, plural, one {comment} other {comments}} on it.",values:{count:this.props.commentCount}}));const t=this.props.post.root_id?h(v,{id:"delete_post.comment",defaultMessage:"Comment"}):h(v,{id:"delete_post.post",defaultMessage:"Post"});return m(uo,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,children:[h(ho,{closeButton:!0,onClose:this.onHide,children:h(v,{id:"delete_post.confirm",defaultMessage:"Confirm {term} Delete",values:{term:t}})}),m(po,{children:[h(v,{id:"delete_post.question",defaultMessage:"Are you sure you want to delete this {term}?",values:{term:t}}),h("br",{}),e]}),m(pl,{children:[h("button",{ref:this.deletePostBtn,type:"button",autoFocus:!0,className:"u3-btn u3-btn-danger",onClick:this.handleDelete,id:"deletePostModalButton",children:h(v,{id:"delete_post.del",defaultMessage:"Delete"})}),h("button",{type:"button",className:"u3-btn u3-btn-link",onClick:this.onHide,children:h(v,{id:"delete_post.cancel",defaultMessage:"Cancel"})})]})]})}}var hc=_(p(null,(function(e){return{actions:E({deleteAndRemovePost:He},e)}}))(dc));function pc(e,t,n){return async(s,i)=>{const r=i();return Se(r,{permission:ie.USE_GROUP_MENTIONS,channel:n,team:t})?{data:go(r,e,t,n)}:{data:[]}}}var fc=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function mc(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(s=e[n],i=t[n],!(s===i||fc(s)&&fc(i)))return!1;var s,i;return!0}function gc(e,t){var n;void 0===t&&(t=mc);var s,i=[],r=!1;return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r&&n===this&&t(a,i)||(s=e.apply(this,a),r=!0,n=this,i=a),s}}function vc(e){return bc("@"===e[0]?e:`@${e}`,{markdown:!1})}function bc(e,t,n){return h(vo,{message:e,options:t,postId:n&&n.id,postType:n&&n.type})}function yc(e){const t=vc(e.props.username),n=vc(e.props.addedUsername);return h(v,{id:"api.channel.add_member.added",defaultMessage:"{addedUsername} added to the channel by {username}.",values:{username:t,addedUsername:n}})}const Cc={[qe.POST_TYPES.JOIN_CHANNEL]:function(e){const t=vc(e.props.username);return h(v,{id:"api.channel.join_channel.post_and_forget",defaultMessage:"{username} joined the channel.",values:{username:t}})},[qe.POST_TYPES.GUEST_JOIN_CHANNEL]:function(e){const t=vc(e.props.username);return h(v,{id:"api.channel.guest_join_channel.post_and_forget",defaultMessage:"{username} joined the channel as a guest.",values:{username:t}})},[qe.POST_TYPES.LEAVE_CHANNEL]:function(e){const t=vc(e.props.username);return h(v,{id:"api.channel.leave.left",defaultMessage:"{username} has left the channel.",values:{username:t}})},[qe.POST_TYPES.ADD_TO_CHANNEL]:yc,[qe.POST_TYPES.ADD_GUEST_TO_CHANNEL]:function(e){const t=vc(e.props.username),n=vc(e.props.addedUsername);return h(v,{id:"api.channel.add_guest.added",defaultMessage:"{addedUsername} added to the channel as a guest by {username}.",values:{username:t,addedUsername:n}})},[qe.POST_TYPES.REMOVE_FROM_CHANNEL]:function(e){const t=vc(e.props.removedUsername);return h(v,{id:"api.channel.remove_member.removed",defaultMessage:"{removedUsername} was removed from the channel",values:{removedUsername:t}})},[qe.POST_TYPES.JOIN_TEAM]:function(e){const t=vc(e.props.username);return h(v,{id:"api.team.join_team.post_and_forget",defaultMessage:"{username} joined the team.",values:{username:t}})},[qe.POST_TYPES.LEAVE_TEAM]:function(e){const t=vc(e.props.username);return h(v,{id:"api.team.leave.left",defaultMessage:"{username} left the team.",values:{username:t}})},[qe.POST_TYPES.ADD_TO_TEAM]:function(e){const t=vc(e.props.username),n=vc(e.props.addedUsername);return h(v,{id:"api.team.add_member.added",defaultMessage:"{addedUsername} added to the team by {username}.",values:{username:t,addedUsername:n}})},[qe.POST_TYPES.REMOVE_FROM_TEAM]:function(e){const t=vc(e.props.username);return h(v,{id:"api.team.remove_user_from_team.removed",defaultMessage:"{removedUsername} was removed from the team.",values:{removedUsername:t}})},[qe.POST_TYPES.HEADER_CHANGE]:function(e){if(!e.props.username)return null;const t={singleline:!0,channelNamesMap:e.props&&e.props.channel_mentions,mentionHighlight:!0},n=vc(e.props.username),s=e.props.old_header?bc(e.props.old_header,t,e):null,i=e.props.new_header?bc(e.props.new_header,t,e):null;return e.props.new_header?e.props.old_header?h(v,{id:"api.channel.post_update_channel_header_message_and_forget.updated_from",defaultMessage:"{username} updated the channel header <br></br><strong>From:</strong> {old} <br></br><strong>To:</strong> {new}",values:{username:n,old:s,new:i,strong:e=>h("strong",{children:e}),br:e=>m(k,{children:[h("br",{}),e]})}}):h(v,{id:"api.channel.post_update_channel_header_message_and_forget.updated_to",defaultMessage:"{username} updated the channel header to: {new}",values:{username:n,new:i}}):e.props.old_header?h(v,{id:"api.channel.post_update_channel_header_message_and_forget.removed",defaultMessage:"{username} removed the channel header (was: {old})",values:{username:n,old:s}}):null},[qe.POST_TYPES.DISPLAYNAME_CHANGE]:function(e){if(!(e.props.username&&e.props.old_displayname&&e.props.new_displayname))return null;const t=vc(e.props.username),n=e.props.old_displayname,s=e.props.new_displayname;return h(v,{id:"api.channel.post_update_channel_displayname_message_and_forget.updated_from",defaultMessage:"{username} updated the channel display name from: {old} to: {new}",values:{username:t,old:n,new:s}})},[qe.POST_TYPES.CONVERT_CHANNEL]:function(e){if(!e.props.username)return null;const t=vc(e.props.username);return h(v,{id:"api.channel.post_convert_channel_to_private.updated_from",defaultMessage:"{username} converted the channel from public to private",values:{username:t}})},[qe.POST_TYPES.PURPOSE_CHANGE]:function(e){if(!e.props.username)return null;const t=vc(e.props.username),n=e.props.old_purpose,s=e.props.new_purpose;return e.props.new_purpose?e.props.old_purpose?h(v,{id:"app.channel.post_update_channel_purpose_message.updated_from",defaultMessage:"{username} updated the channel purpose from: {old} to: {new}",values:{username:t,old:n,new:s}}):h(v,{id:"app.channel.post_update_channel_purpose_message.updated_to",defaultMessage:"{username} updated the channel purpose to: {new}",values:{username:t,new:s}}):e.props.old_purpose?h(v,{id:"app.channel.post_update_channel_purpose_message.removed",defaultMessage:"{username} removed the channel purpose (was: {old})",values:{username:t,old:n}}):null},[qe.POST_TYPES.CHANNEL_DELETED]:function(e){if(!e.props.username)return null;const t=vc(e.props.username);return h(v,{id:"api.channel.delete_channel.archived",defaultMessage:"{username} has archived the channel.",values:{username:t}})},[qe.POST_TYPES.CHANNEL_UNARCHIVED]:function(e){if(!e.props.username)return null;const t=vc(e.props.username);return h(v,{id:"api.channel.restore_channel.unarchived",defaultMessage:"{username} has unarchived the channel.",values:{username:t}})},[qe.POST_TYPES.ME]:function(e){return bc(e.message.replace(/^\*|\*$/g,""))}};class Ec extends f.PureComponent{constructor(){super(...arguments),u(this,"getOptions",gc(((e,t,n)=>l(o({},e),{disableGroupHighlight:t,mentionHighlight:n}))))}render(){var e,t,n;let{message:s}=this.props;const{post:i,mentionKeys:r}=this.props;if(i){const e=function(e,t,n){return e.props&&e.props.add_channel_member?(Ue(e),null):Cc[e.type]?Cc[e.type](e):e.type===qe.POST_TYPES.EPHEMERAL_ADD_TO_CHANNEL?yc(e):e.type===qe.POST_TYPES.COMBINED_USER_ACTIVITY?(e.props.user_activity,null):null}(i,this.props.channel,this.props.isUserCanManageMembers);if(e)return h("div",{children:e})}const a=!i||!i.message_source||i.message===i.message_source,o=i&&i.props&&i.props.channel_mentions;null==(e=this.props.pluginHooks)||e.forEach((e=>{e&&e.hook&&i&&(s=e.hook(i,s))}));let l=null==(t=this.props.options)?void 0:t.mentionHighlight;i&&i.props&&(l=!i.props.mentionHighlightDisabled);const c=this.getOptions(this.props.options,!0===(null==(n=null==i?void 0:i.props)?void 0:n.disable_group_highlight),l);return h(vo,{imageProps:this.props.imageProps,isRHS:this.props.isRHS,message:s,proxyImages:a,mentionKeys:r,options:c,channelNamesMap:o,hasPluginTooltips:this.props.hasPluginTooltips,imagesMetadata:this.props.post&&this.props.post.metadata&&this.props.post.metadata.images,postId:this.props.post&&this.props.post.id})}}u(Ec,"defaultProps",{isRHS:!1,pluginHooks:[],options:{}});var wc=p((function(){const e=C(Be,((e,t)=>t),((e,t,n)=>n?bo(e,n.team_id,n.id):yo(e)),((e,t,n)=>{var s,i;let r=e;return(null==(s=null==t?void 0:t.props)?void 0:s.disable_group_highlight)||(r=r.concat(n)),(null==(i=null==t?void 0:t.props)?void 0:i.mentionHighlightDisabled)&&(r=r.filter((e=>!["@all","@group","@here"].includes(e.key)))),r}));return(t,n)=>{const s=Ve(t,n.channelId);return{channel:s,pluginHooks:t.plugins.components.MessageWillFormat,hasPluginTooltips:Boolean(t.plugins.components.LinkTooltip),isUserCanManageMembers:s&&ze(t,s),mentionKeys:e(t,n.post,s)}}}))(Ec);const Sc=ve.Integrations.EXECUTE_CURRENT_COMMAND_ITEM_ID,_c=ve.KeyCodes,Ac=class extends f.PureComponent{constructor(e){super(e),u(this,"handleMentionKeyClick",((e,t)=>{if(this.props.isRHS!==t)return;let n="@"+e;this.props.value&&/[^\s]$/.test(this.props.value)&&(n=" "+n),this.addTextAtCaret(n,"")})),u(this,"getTextbox",(()=>{if(!this.inputRef.current)return null;const e=this.inputRef.current.getInput();return e.getDOMNode?e.getDOMNode():e})),u(this,"recalculateSize",(()=>{const e=this.inputRef.current.getInput();e.recalculateSize&&e.recalculateSize()})),u(this,"handleEmitClearSuggestions",((e=0)=>{setTimeout((()=>{this.clear()}),e)})),u(this,"preventSuggestionListClose",(()=>{this.preventSuggestionListCloseFlag=!0})),u(this,"handleFocusOut",(e=>{this.preventSuggestionListCloseFlag?this.preventSuggestionListCloseFlag=!1:this.container.contains(e.relatedTarget)||Ge()&&!e.relatedTarget||(this.props.forceSuggestionsWhenBlur||this.handleEmitClearSuggestions(),this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur())})),u(this,"handleFocusIn",(e=>{this.container.contains(e.relatedTarget)||this.preventSuggestionListCloseFlag||(this.setState({focused:!0}),(this.props.openOnFocus||this.props.openWhenEmpty)&&setTimeout((()=>{const e=this.getTextbox();if(e){const t=e.value.substring(0,e.selectionEnd);(this.props.openWhenEmpty||t.length>=this.props.requiredCharacters)&&this.pretext!==t&&this.handlePretextChanged(t)}})),this.props.onFocus&&this.props.onFocus())})),u(this,"handleChange",(e=>{const t=this.getTextbox(),n=t.value.substring(0,t.selectionEnd);this.composing||this.pretext===n||this.handlePretextChanged(n),this.props.onChange&&this.props.onChange(e)})),u(this,"handleCompositionStart",(()=>{this.composing=!0,this.props.onComposition&&this.props.onComposition()})),u(this,"handleCompositionUpdate",(e=>{if(!e.data)return;const t=this.getTextbox(),n=t.value.substring(0,t.selectionStart)+e.data;this.handlePretextChanged(n),this.props.onComposition&&this.props.onComposition()})),u(this,"handleCompositionEnd",(()=>{this.composing=!1,this.props.onComposition&&this.props.onComposition()})),u(this,"addTextAtCaret",((e,t)=>{const n=this.getTextbox(),s=n.selectionEnd,i=this.props.value,r=n.value.substring(0,n.selectionEnd);let a,o=!1;if(r.toLowerCase().endsWith(t.toLowerCase()))a=r.substring(0,r.length-t.length);else{const n=e.substring(t.length),s=Ac.findOverlap(r,n);o=0===s.length,a=r.substring(0,r.length-s.length-t.length)}const l=i.substring(s);let c;if(c=o?r:a+e+" "+l,n.value=c,this.props.onChange){const e={target:n};this.props.onChange(e)}window.requestAnimationFrame((()=>{n.value===c&&Ke(n,a.length+e.length+1)}))})),u(this,"replaceText",(e=>{const t=this.getTextbox();if(t.value=e,this.props.onChange){const e={target:t};this.props.onChange(e)}})),u(this,"handleCompleteWord",((e,t,n)=>{let s=e,i=!1;if(e.endsWith(Sc)&&(s=e.substring(0,e.length-Sc.length),i=!0),this.props.replaceAllInputOnSelect?this.replaceText(s):this.addTextAtCaret(s,t),this.props.onItemSelected){const e=this.state.items,t=this.state.terms;for(let n=0;n<t.length;n++)if(t[n]===s){this.props.onItemSelected(e[n]);break}}if(this.clear(),this.inputRef.current.focus(),i&&this.props.onKeyPress){let e=n;return n&&!ge(n,ve.KeyCodes.TAB)||(e=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:13}),n&&n.preventDefault()),this.props.onKeyPress(e),!0}if(!i)for(const r of this.props.providers)r.handleCompleteWord&&r.handleCompleteWord(s,t,this.handlePretextChanged);return!1})),u(this,"selectNext",(()=>{this.setSelectionByDelta(1)})),u(this,"selectPrevious",(()=>{this.setSelectionByDelta(-1)})),u(this,"setSelectionByDelta",(e=>{let t=this.state.terms.indexOf(this.state.selection);-1!==t?(t+=e,t<0?t=0:t>this.state.terms.length-1&&(t=this.state.terms.length-1),this.setState({selection:this.state.terms[t]})):this.setState({selection:""})})),u(this,"setSelection",(e=>{this.setState({selection:e})})),u(this,"clear",(()=>{this.state.cleared||(this.setState({cleared:!0,matchedPretext:[],terms:[],items:[],components:[],selection:"",suggestionBoxAlgn:{}}),this.handlePretextChanged(""))})),u(this,"hasSuggestions",(()=>this.state.items.some((e=>!e.loading)))),u(this,"handleKeyDown",(e=>{if((this.props.openWhenEmpty||this.props.value)&&this.hasSuggestions())if(ge(e,_c.UP))this.selectPrevious(),e.preventDefault();else if(ge(e,_c.DOWN))this.selectNext(),e.preventDefault();else if(ge(e,_c.ENTER)||this.props.completeOnTab&&ge(e,_c.TAB)){let t="";for(let e=0;e<this.state.terms.length;e++)this.state.terms[e]===this.state.selection&&(t=this.state.matchedPretext[e]);if(this.pretext.toLowerCase().endsWith(t.toLowerCase())){if(this.handleCompleteWord(this.state.selection,t,e))return}else clearTimeout(this.timeoutId),this.nonDebouncedPretextChanged(this.pretext,!0);this.props.onKeyDown&&this.props.onKeyDown(e),e.preventDefault()}else ge(e,_c.ESCAPE)?(this.clear(),this.setState({presentationType:"text"}),e.preventDefault(),e.stopPropagation()):this.props.onKeyDown&&this.props.onKeyDown(e);else this.props.onKeyDown&&this.props.onKeyDown(e)})),u(this,"handleSelect",(e=>{this.props.onSelect&&this.props.onSelect(e)})),u(this,"handleReceivedSuggestions",(e=>{const t=[],n=[];this.props.onSuggestionsReceived&&this.props.onSuggestionsReceived(e);for(let a=0;a<e.terms.length;a++)t.push(e.component),n.push(e.matchedPretext);const s=e.terms,i=e.items;let r=this.state.selection;return s.length>0?r=s[0]:this.state.selection&&(r=""),this.setState({cleared:!1,selection:r,terms:s,items:i,components:t,matchedPretext:n}),{selection:r,matchedPretext:e.matchedPretext}})),u(this,"handleReceivedSuggestionsAndComplete",(e=>{const{selection:t,matchedPretext:n}=this.handleReceivedSuggestions(e);t&&this.handleCompleteWord(t,n)})),u(this,"nonDebouncedPretextChanged",((e,t=!1)=>{this.pretext=e;let n=!1,s=this.handleReceivedSuggestions;t&&(s=this.handleReceivedSuggestionsAndComplete);for(const i of this.props.providers)if(n=i.handlePretextChanged(e,s)||n,n){if(void 0===this.state.suggestionBoxAlgn.pixelsToMoveX&&void 0===this.state.suggestionBoxAlgn.pixelsToMoveY&&["@",":","~","/"].includes(i.triggerCharacter)){const e=i.triggerCharacter,t=Ye(e),n=Xe(this.getTextbox(),t,this.props.listStyle);this.setState({suggestionBoxAlgn:n})}this.setState({presentationType:i.presentationType(),allowDividers:i.allowDividers()});break}n||this.clear()})),u(this,"debouncedPretextChanged",(e=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>this.nonDebouncedPretextChanged(e)),ve.SEARCH_TIMEOUT_MILLISECONDS)})),u(this,"handlePretextChanged",(e=>{this.pretext=e,this.debouncedPretextChanged(e)})),u(this,"blur",(()=>{this.inputRef.current.blur()})),u(this,"focus",(()=>{const e=this.inputRef.current.input;'""'===e.value||e.value.endsWith('""')?(e.selectionStart=e.value.length-1,e.selectionEnd=e.value.length-1):e.selectionStart=e.value.length,e.focus(),this.handleChange({target:this.inputRef.current})})),u(this,"setContainerRef",(e=>{this.container&&(this.container.removeEventListener("focusin",this.handleFocusIn),this.container.removeEventListener("focusout",this.handleFocusOut)),e&&(e.addEventListener("focusin",this.handleFocusIn),e.addEventListener("focusout",this.handleFocusOut)),this.container=e})),this.suggestionReadOut=f.createRef(),this.composing=!1,this.pretext="",this.timeoutId="",this.preventSuggestionListCloseFlag=!1,this.state={focused:!1,cleared:!0,matchedPretext:[],items:[],terms:[],components:[],selection:"",allowDividers:!0,presentationType:"text",suggestionBoxAlgn:{}},this.inputRef=f.createRef()}componentDidMount(){this.props.listenForMentionKeyClick&&We.addListener("mention_key_click",this.handleMentionKeyClick),this.handlePretextChanged(this.pretext)}componentWillUnmount(){We.removeListener("mention_key_click",this.handleMentionKeyClick)}componentDidUpdate(e){const{value:t}=this.props;if(""!==t||this.pretext===t){if(e.contextId!==this.props.contextId){const e=this.getTextbox(),t=e.value.substring(0,e.selectionEnd).toLowerCase();this.handlePretextChanged(t)}}else this.handlePretextChanged(t)}render(){const e=this.props,{listComponent:t,dateComponent:n,listStyle:s,renderNoResults:i}=e,r=c(e,["listComponent","dateComponent","listStyle","renderNoResults"]);return this.props.renderDividers&&this.state.allowDividers,Reflect.deleteProperty(r,"providers"),Reflect.deleteProperty(r,"onChange"),Reflect.deleteProperty(r,"onComposition"),Reflect.deleteProperty(r,"onItemSelected"),Reflect.deleteProperty(r,"completeOnTab"),Reflect.deleteProperty(r,"isRHS"),Reflect.deleteProperty(r,"requiredCharacters"),Reflect.deleteProperty(r,"openOnFocus"),Reflect.deleteProperty(r,"openWhenEmpty"),Reflect.deleteProperty(r,"onFocus"),Reflect.deleteProperty(r,"onBlur"),Reflect.deleteProperty(r,"containerClass"),Reflect.deleteProperty(r,"replaceAllInputOnSelect"),Reflect.deleteProperty(r,"renderDividers"),Reflect.deleteProperty(r,"contextId"),Reflect.deleteProperty(r,"listenForMentionKeyClick"),Reflect.deleteProperty(r,"wrapperHeight"),Reflect.deleteProperty(r,"forceSuggestionsWhenBlur"),Reflect.deleteProperty(r,"onSuggestionsReceived"),m("div",{ref:this.setContainerRef,className:this.props.containerClass,children:[h("div",{ref:this.suggestionReadOut,"aria-live":"polite",role:"alert",className:"sr-only"}),h(lo,l(o({ref:this.inputRef,autoComplete:"off"},r),{onInput:this.handleChange,onCompositionStart:this.handleCompositionStart,onCompositionUpdate:this.handleCompositionUpdate,onCompositionEnd:this.handleCompositionEnd,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect}))]})}static findOverlap(e,t){const n=e.toLowerCase(),s=t.toLowerCase();for(let i=s.length;i>0;i--){const e=s.substring(0,i);if(n.endsWith(e))return e}return""}};let kc=Ac;u(kc,"propTypes",{listComponent:y.func.isRequired,inputComponent:y.elementType,dateComponent:y.func,value:y.string.isRequired,providers:y.arrayOf(y.object).isRequired,listStyle:y.string,containerClass:y.string,renderDividers:y.bool,renderNoResults:y.bool,completeOnTab:y.bool,onFocus:y.func,onBlur:y.func,onChange:y.func,onKeyDown:y.func,onKeyPress:y.func,onComposition:y.func,onSelect:y.func,onSearchTypeSelected:y.func,onItemSelected:y.func,isRHS:y.bool,requiredCharacters:y.number,openOnFocus:y.bool,disabled:y.bool,openWhenEmpty:y.bool,replaceAllInputOnSelect:y.bool,contextId:y.string,listenForMentionKeyClick:y.bool,wrapperHeight:y.number,onSuggestionsReceived:y.func,forceSuggestionsWhenBlur:y.bool}),u(kc,"defaultProps",{listStyle:"top",containerClass:"",renderDividers:!1,renderNoResults:!1,completeOnTab:!0,isRHS:!1,requiredCharacters:1,openOnFocus:!1,openWhenEmpty:!1,replaceAllInputOnSelect:!1,listenForMentionKeyClick:!1,forceSuggestionsWhenBlur:!1});class Pc extends f.PureComponent{constructor(e){super(e),u(this,"getContent",(()=>oo(this.contentRef.current))),u(this,"scrollToItem",(e=>{const t=this.getContent();if(!t||0===t.length)return;const n=t[0].clientHeight;if(n<t[0].scrollHeight){const s=t.scrollTop(),i=parseInt(t.css("padding-top"),10),r=parseInt(t.css("padding-top"),10),a=oo(b.findDOMNode(this.itemRefs.get(e)));if(0===a.length)return;const o=a[0].offsetTop-parseInt(a.css("margin-top"),10),l=parseInt(a.css("margin-bottom"),10)+parseInt(a.css("padding-bottom"),10),c=a[0].offsetTop+a.height()+l;o-i<s?t.scrollTop(o-i):c+i+r>s+n&&t.scrollTop(c-n+i+r)}})),this.contentRef=f.createRef(),this.itemRefs=new Map,this.suggestionReadOut=f.createRef(),this.currentLabel="",this.currentItem={}}componentDidUpdate(e){this.props.selection!==e.selection&&this.props.selection&&this.scrollToItem(this.props.selection),$e(this.currentItem)||this.generateLabel(this.currentItem)}componentWillUnmount(){this.removeLabel()}announceLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML=this.currentLabel)}removeLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML="")}generateLabel(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=` ${e.first_name} ${e.last_name} ${e.nickname}`:e.nickname?this.currentLabel+=` ${e.nickname}`:(e.first_name||e.last_name)&&(this.currentLabel+=` ${e.first_name} ${e.last_name}`)):"mention.channels"===e.type&&(this.currentLabel=e.channel.display_name),this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}renderDivider(e){return h("div",{className:"suggestion-list__divider",children:h("span",{children:h(v,{id:"suggestion."+e})})},e+"-divider")}renderNoResults(){return h("div",{className:"suggestion-list__no-results",ref:this.contentRef,children:h($o,{id:"suggestion_list.no_matches",defaultMessage:"No items match __{value}__",values:{value:this.props.pretext||'""'}})},"list-no-results")}render(){if(!this.props.open||this.props.cleared)return null;const e=[];if(0===this.props.items.length){if(!this.props.renderNoResults)return null;e.push(this.renderNoResults())}let t;for(let o=0;o<this.props.items.length;o++){const n=this.props.items[o],s=this.props.terms[o],i=s===this.props.selection,r=this.props.components[o];this.props.renderDividers&&n.type!==t&&(e.push(this.renderDivider(n.type)),t=n.type),n.loading?e.push(h(Co,{},n.type)):(i&&(this.currentItem=n),e.push(h(r,{ref:e=>this.itemRefs.set(s,e),item:this.props.items[o],term:s,matchedPretext:this.props.matchedPretext[o],isSelection:i,onClick:this.props.onCompleteWord,onMouseMove:this.props.onItemHover},s)))}const n="suggestion-list suggestion-list--"+this.props.location,s="suggestion-list__content suggestion-list__content--"+this.props.location;let i=ve.SUGGESTION_LIST_MAXHEIGHT;this.props.wrapperHeight&&(i=Math.min(Qe()-(this.props.wrapperHeight+ve.POST_MODAL_PADDING),ve.SUGGESTION_LIST_MAXHEIGHT));const r={maxHeight:i},{pixelsToMoveX:a,pixelsToMoveY:l}=this.props.suggestionBoxAlgn,c=void 0!==a&&void 0!==l?{transform:`translate(${a}px, ${l}px)`}:{};return h("div",{className:n,children:h("div",{id:"suggestionList",role:"list",ref:this.contentRef,style:o(o({},r),c),className:s,onMouseDown:this.props.preventClose,children:e})})}}u(Pc,"propTypes",{ariaLiveRef:y.object,open:y.bool.isRequired,location:y.string,renderDividers:y.bool,renderNoResults:y.bool,onCompleteWord:y.func.isRequired,preventClose:y.func,onItemHover:y.func.isRequired,pretext:y.string.isRequired,cleared:y.bool.isRequired,matchedPretext:y.array.isRequired,items:y.array.isRequired,terms:y.array.isRequired,selection:y.string.isRequired,components:y.array.isRequired,wrapperHeight:y.number,suggestionBoxAlgn:y.object}),u(Pc,"defaultProps",{renderDividers:!1,renderNoResults:!1});var xc={textareaWrapper:"mqik-61974f66",textboxContainer:"mqik-38b2e3fb",formInput:"mqik-af7e39ef",formTextarea:"mqik-dc5b1731",formSelect:"mqik-b6d960be",formMultiselect:"mqik-258c30c5",customTextarea:"mqik-b0e6e88b",textboxInput:"mqik-b64a333e",textareaEmojiPicker:"mqik-a7943600",textareaCustomPlaceholder:"mqik-71931c66",badConnection:"mqik-11749422",customTextareaPreview:"mqik-efe8a2ea"};class Tc extends f.PureComponent{constructor(e){super(e),u(this,"suggestionProviders"),u(this,"wrapper"),u(this,"message"),u(this,"preview"),u(this,"handleChange",(e=>{this.props.onChange(e)})),u(this,"checkMessageLength",(e=>{if(this.props.handlePostError)if(e.length>this.props.characterLimit){const t=h(v,{id:"create_post.error_message",defaultMessage:"Your message is too long. Character count: {length}/{limit}",values:{length:e.length,limit:this.props.characterLimit}});this.props.handlePostError(t)}else this.props.handlePostError(null)})),u(this,"handleKeyDown",(e=>{var t,n;null==(n=(t=this.props).onKeyDown)||n.call(t,e)})),u(this,"handleSelect",(e=>{var t,n;null==(n=(t=this.props).onSelect)||n.call(t,e)})),u(this,"handleMouseUp",(e=>{var t,n;null==(n=(t=this.props).onMouseUp)||n.call(t,e)})),u(this,"handleKeyUp",(e=>{var t,n;null==(n=(t=this.props).onKeyUp)||n.call(t,e)})),u(this,"handleBlur",(e=>{var t,n;null==(n=(t=this.props).onBlur)||n.call(t,e)})),u(this,"handleFocus",(e=>{var t,n;null==(n=(t=this.props).onFocus)||n.call(t,e)})),u(this,"handleHeightChange",((e,t)=>{var n,s;null==(s=(n=this.props).onHeightChange)||s.call(n,e,t)})),u(this,"getInputBox",(()=>{var e;return null==(e=this.message.current)?void 0:e.getTextbox()})),u(this,"focus",(()=>{const e=this.getInputBox();e&&(e.focus(),Je(e),this.checkMessageLength(e.value))})),u(this,"blur",(()=>{var e;null==(e=this.getInputBox())||e.blur()})),u(this,"recalculateSize",(()=>{var e;null==(e=this.message.current)||e.recalculateSize()})),u(this,"focusTextbox",(()=>{})),this.suggestionProviders=[],this.checkMessageLength(e.value),this.wrapper=f.createRef(),this.message=f.createRef(),this.preview=f.createRef()}updateSuggestions(e){if(this.props.channelId!==e.channelId||this.props.currentUserId!==e.currentUserId||this.props.profilesInChannel!==e.profilesInChannel||this.props.autocompleteGroups!==e.autocompleteGroups){const e=this.suggestionProviders;for(let t=0;t<e.length;t++);}e.value!==this.props.value&&this.checkMessageLength(this.props.value)}componentDidUpdate(e){var t;!e.preview&&this.props.preview&&(null==(t=this.preview.current)||t.focus()),this.updateSuggestions(e)}render(){var e;let t,n=null;const s={[xc.textareaWrapper]:!0},i={[xc.customTextarea]:!0};this.props.emojiEnabled&&(i[xc.textareaEmojiPicker]=!0),this.props.badConnection&&(i[xc.badConnection]=!0),"string"!=typeof this.props.createMessage&&(i[xc.textareaCustomPlaceholder]=!0),this.wrapper.current&&(t=null==(e=this.getInputBox())?void 0:e.clientHeight),this.props.preview&&(i[xc.customTextareaPreview]=!0,s[xc.textareaWrapperPreview]=!0,n=h("div",{tabIndex:0,ref:this.preview,className:"form-control custom-textarea textbox-preview-area",onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onBlur:this.handleBlur,onFocus:this.handleFocus,children:h(wc,{isRHS:this.props.isRHS,message:this.props.value,mentionKeys:[],channelId:this.props.channelId})}));const r=this.props.styles||{};return m("div",{ref:this.wrapper,className:g(s,r.textboxWrapper),onClick:this.focusTextbox,children:[h(kc,{id:this.props.id,ref:this.message,className:g(xc.textboxInput,r.textboxInput,i),containerClass:g(xc.textboxContainer),spellCheck:"true",placeholder:this.props.createMessage,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,onSelect:this.handleSelect,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUp,onKeyUp:this.handleKeyUp,onComposition:this.props.onComposition,onBlur:this.handleBlur,onFocus:this.handleFocus,onHeightChange:this.handleHeightChange,style:{visibility:this.props.preview?"hidden":"visible"},inputComponent:this.props.inputComponent,listComponent:Pc,listStyle:this.props.suggestionListStyle,providers:this.suggestionProviders,channelId:this.props.channelId,value:this.props.value,renderDividers:!0,isRHS:this.props.isRHS,disabled:this.props.disabled,contextId:this.props.channelId,listenForMentionKeyClick:this.props.listenForMentionKeyClick,wrapperHeight:t,openWhenEmpty:this.props.openWhenEmpty}),n]})}}u(Tc,"defaultProps",{supportsCommands:!0,isRHS:!1,listenForMentionKeyClick:!1,inputComponent:Eo});const Nc={active:!0};var Mc=p((()=>{const e=Ze(),t=ea(),n=et();return(s,i)=>{const r=Ee(s),a=tt(s),o="true"===(null==a?void 0:a.IsLicensed)&&"true"===(null==a?void 0:a.LDAPGroups)&&Se(s,{channel:i.channelId,team:r,permission:ie.USE_GROUP_MENTIONS})?wo(s,r,i.channelId):null,l=e(s,i.channelId,Nc),c=t(s,l);return{currentUserId:le(s),currentTeamId:r,profilesInChannel:c,autocompleteGroups:o,priorityProfiles:n(s,i)}}}),(e=>({actions:E({autocompleteUsersInChannel:ta,autocompleteChannels:na,searchAssociatedGroupsForReference:pc},e)})),null,{forwardRef:!0})(Tc);var Ic="mqik-67c583b0",Oc="mqik-3a1587a3";const Rc=ve.KeyCodes;class Lc extends f.PureComponent{constructor(e){super(e),u(this,"setShowPreview",(e=>{this.props.actions.setShowPreview(e)})),u(this,"getContainer",(()=>this.editModalBody.current)),u(this,"toggleEmojiPicker",(()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker}),!this.state.showEmojiPicker&&this.editbox&&this.editbox.focus()})),u(this,"hideEmojiPicker",(()=>{this.setState({showEmojiPicker:!1}),this.editbox&&this.editbox.focus()})),u(this,"handleEmojiClick",(e=>{const t=e&&(e.name||e.aliases&&e.aliases[0]);if(t){if(""===this.state.editText)this.setState({editText:":"+t+": "});else{const{editText:e}=this.state,{firstPiece:n,lastPiece:s}=Fe(this.state.caretPosition,e),i=""===n?`:${t}: ${s}`:`${n} :${t}: ${s}`,r=""===n?`:${t}: `.length:`${n} :${t}: `.length,a=this.editbox.getInputBox();this.setState({editText:i,caretPosition:r},(()=>{Ke(a,r)}))}this.setState({showEmojiPicker:!1}),this.editbox&&this.editbox.focus()}})),u(this,"handleGifClick",(e=>{if(""===this.state.editText)this.setState({editText:e});else{const t=/\s+$/.test(this.state.editText)?this.state.editText+e:this.state.editText+" "+e;this.setState({editText:t})}this.setState({showEmojiPicker:!1}),this.editbox.focus()})),u(this,"getTarget",(()=>this.refs.editPostEmoji)),u(this,"handlePostError",(e=>{this.state.postError!==e&&this.setState({postError:e})})),u(this,"handleEdit",(async()=>{if(this.isSaveDisabled())return;const{actions:e,editingPost:t}=this.props,n={message:this.state.editText,id:t.postId,channel_id:t.post.channel_id};if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout((()=>{this.setState({errorClass:null})}),ve.ANIMATION_TIMEOUT);if(n.message===(t.post.message_source||t.post.message))return void this.handleHide();const s=t.post.file_ids&&t.post.file_ids.length>0;if(0===n.message.trim().length&&!s){this.handleHide(!1);const e={ModalId:se.DELETE_POST,dialogType:hc,dialogProps:{post:t.post,commentCount:t.commentCount,isRHS:t.isRHS}};return void this.props.actions.openModal(e)}e.addMessageIntoHistory(n.message);await e.editPost(n)&&window.scrollTo(0,0),this.handleHide()})),u(this,"handleChange",(e=>{const t=e.target.value;this.setState({editText:t})})),u(this,"handlePaste",(e=>{if(!e.clipboardData||!e.clipboardData.items||!this.props.canEditPost||"edit_textbox"!==e.target.id)return;const{clipboardData:t}=e,n=oc(t);if(!n)return;e.preventDefault();const{editText:s}=this.state;let i=s,r=this.state.caretPosition;if(a=n.className,/\b(js|blob|diff)-./.test(a)){const{formattedMessage:e,formattedCodeBlock:n}=uc(this.state.caretPosition,i,t);r=this.state.caretPosition+n.length,i=e}else i=cc(n,s.trim(),r),r=i.length-(s.length-r);var a;this.setState({editText:i,caretPosition:r},(()=>{Ke(this.editbox.getInputBox(),r)}))})),u(this,"handleEditKeyPress",(e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:n}=this.props,{allowSending:s,ignoreKeyPress:i}=nt(e,this.state.editText,t,n,Date.now(),this.lastChannelSwitchAt,this.state.caretPosition);if(i)return e.preventDefault(),void e.stopPropagation();s&&(e.preventDefault(),this.editbox.blur(),this.handleEdit())})),u(this,"handleMouseUpKeyUp",(e=>{const t=st(e.target);this.setState({caretPosition:t})})),u(this,"handleSelect",(e=>{it(this.editbox.getInputBox(),e)})),u(this,"handleKeyDown",(e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:n}=this.props,s=e.ctrlKey||e.metaKey,i=rt(e)&&!e.altKey&&!e.shiftKey,r=rt(e,!0)&&e.altKey,a=(t||n)&&ge(e,Rc.ENTER)&&s,o=ge(e,Rc.B)||ge(e,Rc.I),l=ge(e,Rc.K);at(e)?(e.stopPropagation(),this.setState({editText:ot(e)})):a?this.handleEdit():ge(e,Rc.ESCAPE)&&!this.state.showEmojiPicker?this.handleHide():(i&&o||r&&l)&&this.applyHotkeyMarkdown(e)})),u(this,"applyHotkeyMarkdown",(e=>{const t=lt(e);this.setState({editText:t.message},(()=>{const e=this.editbox.getInputBox();ct(e,t.selectionStart,t.selectionEnd)}))})),u(this,"handleHide",((e=!0)=>{this.refocusId=e?this.props.editingPost.refocusId:null,this.props.actions.hideEditPostModal()})),u(this,"handleCheckForChangesHide",(()=>{this.state.editText===this.props.editingPost.post.message&&this.handleHide()})),u(this,"handleEntered",(()=>{this.editbox&&(this.editbox.focus(),this.editbox.recalculateSize())})),u(this,"handleHeightChange",((e,t)=>{this.editbox&&this.setState({renderScrollbar:e>t,scrollbarWidth:ut(this.editbox.getInputBox())})})),u(this,"handleExit",(()=>{this.props.actions.setShowPreview(!1)})),u(this,"handleExited",(()=>{const e=this.refocusId;e&&setTimeout((()=>{const t=document.getElementById(e);t&&t.focus()})),this.refocusId=null,this.setState({editText:"",postError:"",errorClass:null,showEmojiPicker:!1,prevShowState:!1}),this.props.actions.setShowPreview(!1)})),u(this,"setEditboxRef",(e=>{this.editbox=e,this.editbox&&this.editbox.focus()})),u(this,"isSaveDisabled",(()=>{const e=this.props.editingPost.post;return e&&e.file_ids&&e.file_ids.length>0||""!==this.state.editText.trim()?!this.props.canEditPost:!this.props.canDeletePost})),this.state={editText:"",caretPosition:"".length,postError:"",errorClass:null,showEmojiPicker:!1,renderScrollbar:!1,scrollbarWidth:0,prevShowState:e.editingPost.show},this.editModalBody=f.createRef()}static getDerivedStateFromProps(e,t){return e.editingPost.show&&!t.prevShowState?{editText:e.editingPost.post.message_source||e.editingPost.post.message,prevShowState:e.editingPost.show}:null}componentDidMount(){document.addEventListener("paste",this.handlePaste)}componentWillUnmount(){document.removeEventListener("paste",this.handlePaste)}render(){this.props.intl;const e="edit-post-footer"+(this.state.postError?" has-error":"");let t=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");t=h("label",{className:e,children:this.state.postError})}const n=!!this.props.editingPost&&this.props.editingPost.show;return m(uo,{dialogClassName:"a11y__modal edit-modal",show:n,onHide:this.handleCheckForChangesHide,onEntered:this.handleEntered,onExit:this.handleExit,onExited:this.handleExited,"aria-labelledby":"editPostModalLabel",children:[h(ho,{closeButton:!1,children:h(fl,{componentClass:"h1",id:"editPostModalLabel",children:h(v,{id:"edit_post.edit",defaultMessage:"Edit {title}",values:{title:this.props.editingPost.title}})})}),h(po,{children:m("div",{className:g("post-create__container",Ic),ref:this.editModalBody,children:[h("div",{className:g("textarea-wrapper",Oc,{scroll:this.state.renderScrollbar}),style:this.state.renderScrollbar&&this.state.scrollbarWidth?{"--detected-scrollbar-width":`${this.state.scrollbarWidth}px`}:void 0,children:h(Mc,{tabIndex:0,onChange:this.handleChange,onKeyPress:this.handleEditKeyPress,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:this.state.editText,channelId:this.props.editingPost.post&&this.props.editingPost.post.channel_id,emojiEnabled:!1,createMessage:be("edit_post.editPost","Edit the post..."),supportsCommands:!1,suggestionListStyle:"bottom",id:"edit_textbox",ref:this.setEditboxRef,characterLimit:this.props.maxPostSize,preview:!1,useChannelMentions:this.props.useChannelMentions})}),h("div",{className:"post-create-footer",children:h("div",{className:e,children:t})})]})}),m(pl,{children:[h("button",{id:"editButton",type:"button",className:"u3-btn u3-btn-primary",disabled:this.isSaveDisabled(),onClick:this.handleEdit,children:h(v,{id:"edit_post.save",defaultMessage:"Save"})}),h("button",{type:"button",className:"u3-btn u3-btn-link",onClick:()=>this.handleHide(!0),children:h(v,{id:"edit_post.cancel",defaultMessage:"Cancel"})})]})]})}}u(Lc,"propTypes",{canEditPost:y.bool,canDeletePost:y.bool,codeBlockOnCtrlEnter:y.bool,ctrlSend:y.bool,config:y.object.isRequired,intl:Qo.isRequired,maxPostSize:y.number.isRequired,shouldShowPreview:y.bool.isRequired,useChannelMentions:y.bool.isRequired,editingPost:y.shape({post:y.object,postId:y.string,refocusId:y.string,commentCount:y.number,show:y.bool.isRequired,title:y.string,isRHS:y.bool}).isRequired,actions:y.shape({addMessageIntoHistory:y.func.isRequired,editPost:y.func.isRequired,hideEditPostModal:y.func.isRequired,openModal:y.func.isRequired,setShowPreview:y.func.isRequired}).isRequired});var Dc=S(Lc);var Fc=p((function(e){var t;const n=ue(e),s=dt(e),i=le(e),r=(null==(t=null==s?void 0:s.post)?void 0:t.channel_id)||B(e),a=Ee(e);let o=!1,l=!1;s&&s.post&&s.post.user_id===i?(o=Se(e,{channel:r,team:a,permission:ie.DELETE_POST}),l=Se(e,{channel:r,team:a,permission:ie.EDIT_POST})):(o=Se(e,{channel:r,team:a,permission:ie.DELETE_OTHERS_POSTS}),l=Se(e,{channel:r,team:a,permission:ie.EDIT_OTHERS_POSTS}));const c=Se(e,{channel:r,team:a,permission:ie.USE_CHANNEL_MENTIONS});return s.post=s.post||{},{canEditPost:l,canDeletePost:o,codeBlockOnCtrlEnter:ye(e,Ce.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:ye(e,Ce.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),config:n,editingPost:s,channelId:r,shouldShowPreview:rc(e),maxPostSize:parseInt(n.MaxPostSize||"0",10)||ve.DEFAULT_CHARACTER_LIMIT,useChannelMentions:c}}),(function(e){return{actions:E({addMessageIntoHistory:ht,editPost:ac,hideEditPostModal:pt,openModal:fe,setShowPreview:sc},e)}}))(Dc);var jc="mqik-e253eb5b",Hc="mqik-acb20569";class Uc extends f.PureComponent{constructor(e){super(e),u(this,"reportModalBody"),u(this,"editbox"),u(this,"getContainer",(()=>this.reportModalBody.current)),u(this,"handlePostError",(e=>{this.state.postError!==e&&this.setState({postError:e})})),u(this,"handleReport",(async()=>{if(this.state.sending)return;this.setState({sending:!0});const{actions:e,reportPost:t}=this.props;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout((()=>{this.setState({errorClass:null})}),ve.ANIMATION_TIMEOUT);await e.reportPost(t.postId||t.post.id,this.state.reasonText||"."),this.handleHide()})),u(this,"handleChange",(e=>{const t=e.target.value;this.setState({reasonText:t})})),u(this,"handleMouseUpKeyUp",(e=>{const t=st(e.target);this.setState({caretPosition:t})})),u(this,"handleHide",(()=>{this.props.actions.hideReportPostModal()})),u(this,"handleCheckForChangesHide",(()=>{this.handleHide()})),u(this,"handleEntered",(()=>{this.editbox&&(this.editbox.focus(),this.editbox.recalculateSize())})),u(this,"handleHeightChange",((e,t)=>{this.editbox&&this.setState({renderScrollbar:e>t,scrollbarWidth:ut(this.editbox.getInputBox())})})),u(this,"handleExit",(()=>{})),u(this,"handleExited",(()=>{this.setState({reasonText:"",postError:"",errorClass:null,showEmojiPicker:!1,prevShowState:!1})})),u(this,"setReportBoxRef",(e=>{this.editbox=e,this.editbox&&this.editbox.focus()})),this.state={reasonText:"",caretPosition:"".length,postError:"",errorClass:null,showEmojiPicker:!1,renderScrollbar:!1,scrollbarWidth:0,prevShowState:e.reportPost.show,sending:!1},this.reportModalBody=f.createRef()}static getDerivedStateFromProps(e,t){return e.reportPost.show&&!t.prevShowState?{prevShowState:e.reportPost.show,sending:!1}:null}render(){const e="edit-post-footer"+(this.state.postError?" has-error":"");let t=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");t=h("label",{className:e,children:this.state.postError})}const n=!!this.props.reportPost&&this.props.reportPost.show;return m(uo,{dialogClassName:"a11y__modal edit-modal",show:n,onHide:this.handleCheckForChangesHide,onEntered:this.handleEntered,onExit:this.handleExit,onExited:this.handleExited,"aria-labelledby":"editPostModalLabel",children:[h(ho,{closeButton:!1,children:h(fl,{componentClass:"h1",id:"editPostModalLabel",children:h(v,{id:"report_post.title",defaultMessage:"Báo cáo {title}",values:{title:`@${this.props.username}`}})})}),h(po,{children:m("div",{className:g("post-create__container",jc),ref:this.reportModalBody,children:[h("div",{className:g("textarea-wrapper",Hc,{scroll:this.state.renderScrollbar}),children:h(Mc,{rootId:"",onKeyPress:()=>{},onChange:this.handleChange,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onHeightChange:this.handleHeightChange,value:this.state.reasonText,channelId:this.props.reportPost.post&&this.props.reportPost.post.channel_id,emojiEnabled:!1,createMessage:be("report_post.reason","Nhập lý do..."),supportsCommands:!1,suggestionListStyle:"bottom",id:"report_textbox",ref:this.setReportBoxRef,characterLimit:this.props.maxPostSize,preview:!1,useChannelMentions:!1})}),h("div",{className:"post-create-footer",children:h("div",{className:e,children:t})})]})}),m(pl,{children:[h("button",{id:"editButton",type:"button",className:"u3-btn u3-btn-primary",disabled:this.state.sending,onClick:this.handleReport,children:this.state.sending?h(v,{id:"report_post.sending",defaultMessage:"Đang gửi..."}):h(v,{id:"report_post.submit",defaultMessage:"Gửi báo cáo"})}),h("button",{type:"button",className:"u3-btn u3-btn-link",onClick:()=>this.handleHide(),children:h(v,{id:"report_post.cancel",defaultMessage:"Hủy bỏ"})})]})]})}}u(Uc,"propTypes",{codeBlockOnCtrlEnter:y.bool,ctrlSend:y.bool,config:y.object.isRequired,intl:Qo.isRequired,maxPostSize:y.number.isRequired,username:y.string,reportPost:y.shape({post:y.object,postId:y.string,show:y.bool.isRequired,isRHS:y.bool}).isRequired,actions:y.shape({reportPost:y.func.isRequired,hideReportPostModal:y.func.isRequired,openModal:y.func.isRequired}).isRequired});var qc=S(Uc);var Bc=p((function(e){const t=ue(e),n=ft(e);n.post=n.post||{};let s="";if(n.post&&n.post.user_id){s=Me(e,n.post.user_id).username}return{codeBlockOnCtrlEnter:ye(e,Ce.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:ye(e,Ce.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),config:t,reportPost:n,username:s,maxPostSize:parseInt(t.MaxPostSize||"0",10)||ve.DEFAULT_CHARACTER_LIMIT}}),(function(e){return{actions:E({reportPost:mt,hideReportPostModal:gt,openModal:fe},e)}}))(qc);function Vc(e){return{type:q.SET_SHOW_NEXT_STEPS_VIEW,show:e}}function zc(e,t){return e.views.modals.modalState[t]&&e.views.modals.modalState[t].open}function Wc(e){return e.views.announcementBar.announcementBarState.announcementBarCount}var Gc=za.jsx;var Kc=d.exports.forwardRef((function(e,t){return Gc("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:Gc("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})}))})),Yc=za.jsx;var Xc=d.exports.forwardRef((function(e,t){return Yc("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:Yc("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}))})),$c=za.jsx;var Qc=d.exports.forwardRef((function(e,t){return $c("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:$c("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}))})),Jc=za.jsx;var Zc=d.exports.forwardRef((function(e,t){return Jc("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:Jc("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}))})),eu=za.jsx;var tu=d.exports.forwardRef((function(e,t){return eu("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:eu("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})}))}));class nu extends f.PureComponent{constructor(e){super(e),u(this,"membersList"),u(this,"handleShowDirectChannel",(e=>{const{actions:t}=this.props,n=e.id;n&&t.openDirectChannelToUserId(n).then((({data:e})=>{e&&je.push(this.props.teamUrl+"/group/"+e.name),this.closePopover()}))})),u(this,"closePopover",(()=>{this.setState({showPopover:!1})})),u(this,"showMembersModal",(e=>{e.preventDefault(),this.closePopover();const t={modalId:se.CHANNEL_MEMBERS,dialogProps:this.props,dialogType:So};this.props.actions.openModal(t)})),u(this,"handleGetProfilesInChannel",(e=>e.preventDefault())),u(this,"getTargetPopover",(()=>(this.membersList.current.focus(),this.refs.member_popover_target))),this.membersList=f.createRef(),this.state={showPopover:!1,users:e.users,statuses:e.statuses}}static getDerivedStateFromProps(e,t){return e.users!==t.users||e.statuses!==t.statuses?{users:e.users,statuses:e.statuses}:null}render(){this.props.channel.type,ve.DM_CHANNEL;const e=0!==this.props.channel.delete_at;if(this.props.channel.type!==ve.GM_CHANNEL&&!e){let e=h(v,{id:"members_popover.manageMembers",defaultMessage:"Manage Members"});!(this.props.channel.name===ve.DEFAULT_CHANNEL)&&this.props.manageMembers||(e=h(v,{id:"members_popover.viewMembers",defaultMessage:"View Members"})),this.showMembersModal}const t=this.props.memberCount;let n="-";t>0&&(n=(t>999?"99+":t).toString());const s=`${be("channel_header.channelMembers","Members")}`.toLowerCase();return h(d.exports.Fragment,{children:h("button",{id:"member_popover","aria-label":s,className:"u3-inline-flex  u3-items-center u3-px-0 member-popover__trigger channel-header__icon channel-header__icon--left channel-header__icon--wide "+(this.state.showPopover?"channel-header__icon--active":""),ref:"member_popover_target",onClick:this.handleGetProfilesInChannel,title:be("channel_header.channelMembers","Members"),children:m("span",{className:"u3-flex u3-items-center u3-text-gray-600",children:[h(tu,{className:"u3-h-4 u3-w-4 u3-text-gray-600 u3-mr-0.5"}),h("span",{children:n})]})})})}}u(nu,"propTypes",{channel:y.object.isRequired,statuses:y.object.isRequired,users:y.array.isRequired,memberCount:y.number,currentUserId:y.string.isRequired,teamUrl:y.string,manageMembers:y.bool.isRequired,actions:y.shape({openModal:y.func.isRequired,loadProfilesAndStatusesInChannel:y.func.isRequired,openDirectChannelToUserId:y.func.isRequired}).isRequired,sortedUsers:y.array});var su=p((function(){const e=Ze(),t=(e=>C(((t,n)=>e(t,n,!0)),vt,bt,((e,t,n)=>yt(e,t,n))))(e);return function(n,s){const i=Ct(n)[s.channel.id]||{},r=e(n,s.channel.id,{}),a=vt(n);return{currentUserId:le(n),memberCount:i.member_count,users:r,statuses:a,teamUrl:Et(n),manageMembers:ze(n,s.channel),sortedUsers:t(n,s.channel.id)}}}),(function(e){return{actions:E({openModal:fe,loadProfilesAndStatusesInChannel:wt,openDirectChannelToUserId:sa},e)}}))(nu);var iu={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function ru(e){function t(e,s,l,c,h){for(var p,f,m,g,C,w=0,S=0,_=0,A=0,k=0,I=0,R=m=p=0,D=0,F=0,j=0,H=0,U=l.length,q=U-1,B="",V="",z="",W="";D<U;){if(f=l.charCodeAt(D),D===q&&S+A+_+w!==0&&(0!==S&&(f=47===S?10:47),A=_=w=0,U++,q++),S+A+_+w===0){if(D===q&&(0<F&&(B=B.replace(d,"")),0<B.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:B+=l.charAt(D)}f=59}switch(f){case 123:for(p=(B=B.trim()).charCodeAt(0),m=1,H=++D;D<U;){switch(f=l.charCodeAt(D)){case 123:m++;break;case 125:m--;break;case 47:switch(f=l.charCodeAt(D+1)){case 42:case 47:e:{for(R=D+1;R<q;++R)switch(l.charCodeAt(R)){case 47:if(42===f&&42===l.charCodeAt(R-1)&&D+2!==R){D=R+1;break e}break;case 10:if(47===f){D=R+1;break e}}D=R}}break;case 91:f++;case 40:f++;case 34:case 39:for(;D++<q&&l.charCodeAt(D)!==f;);}if(0===m)break;D++}switch(m=l.substring(H,D),0===p&&(p=(B=B.replace(u,"").trim()).charCodeAt(0)),p){case 64:switch(0<F&&(B=B.replace(d,"")),f=B.charCodeAt(1)){case 100:case 109:case 115:case 45:F=s;break;default:F=M}if(H=(m=t(s,F,m,f,h+1)).length,0<O&&(C=o(3,m,F=n(M,B,j),s,x,P,H,f,h,c),B=F.join(""),void 0!==C&&0===(H=(m=C.trim()).length)&&(f=0,m="")),0<H)switch(f){case 115:B=B.replace(E,a);case 100:case 109:case 45:m=B+"{"+m+"}";break;case 107:m=(B=B.replace(v,"$1 $2"))+"{"+m+"}",m=1===N||2===N&&r("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=B+m,112===c&&(V+=m,m="")}else m="";break;default:m=t(s,n(s,B,j),m,c,h+1)}z+=m,m=j=F=R=p=0,B="",f=l.charCodeAt(++D);break;case 125:case 59:if(1<(H=(B=(0<F?B.replace(d,""):B).trim()).length))switch(0===R&&(p=B.charCodeAt(0),45===p||96<p&&123>p)&&(H=(B=B.replace(" ",":")).length),0<O&&void 0!==(C=o(1,B,s,e,x,P,V.length,c,h,c))&&0===(H=(B=C.trim()).length)&&(B="\0\0"),p=B.charCodeAt(0),f=B.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){W+=B+l.charAt(D);break}default:58!==B.charCodeAt(H-1)&&(V+=i(B,p,f,B.charCodeAt(2)))}j=F=R=p=0,B="",f=l.charCodeAt(++D)}}switch(f){case 13:case 10:47===S?S=0:1+p===0&&107!==c&&0<B.length&&(F=1,B+="\0"),0<O*L&&o(0,B,s,e,x,P,V.length,c,h,c),P=1,x++;break;case 59:case 125:if(S+A+_+w===0){P++;break}default:switch(P++,g=l.charAt(D),f){case 9:case 32:if(A+w+S===0)switch(k){case 44:case 58:case 9:case 32:g="";break;default:32!==f&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:A+S+w===0&&(F=j=1,g="\f"+g);break;case 108:if(A+S+w+T===0&&0<R)switch(D-R){case 2:112===k&&58===l.charCodeAt(D-3)&&(T=k);case 8:111===I&&(T=I)}break;case 58:A+S+w===0&&(R=D);break;case 44:S+_+A+w===0&&(F=1,g+="\r");break;case 34:case 39:0===S&&(A=A===f?0:0===A?f:A);break;case 91:A+S+_===0&&w++;break;case 93:A+S+_===0&&w--;break;case 41:A+S+w===0&&_--;break;case 40:if(A+S+w===0){if(0===p)switch(2*k+3*I){case 533:break;default:p=1}_++}break;case 64:S+_+A+w+R+m===0&&(m=1);break;case 42:case 47:if(!(0<A+w+_))switch(S){case 0:switch(2*f+3*l.charCodeAt(D+1)){case 235:S=47;break;case 220:H=D,S=42}break;case 42:47===f&&42===k&&H+2!==D&&(33===l.charCodeAt(H+2)&&(V+=l.substring(H,D+1)),g="",S=0)}}0===S&&(B+=g)}I=k,k=f,D++}if(0<(H=V.length)){if(F=s,0<O&&(void 0!==(C=o(2,V,F,e,x,P,H,c,h,c))&&0===(V=C).length))return W+V+z;if(V=F.join(",")+"{"+V+"}",N*T!=0){switch(2!==N||r(V,2)||(T=0),T){case 111:V=V.replace(y,":-moz-$1")+V;break;case 112:V=V.replace(b,"::-webkit-input-$1")+V.replace(b,"::-moz-$1")+V.replace(b,":-ms-input-$1")+V}T=0}}return W+V+z}function n(e,t,n){var i=t.trim().split(m);t=i;var r=i.length,a=e.length;switch(a){case 0:case 1:var o=0;for(e=0===a?"":e[0]+" ";o<r;++o)t[o]=s(e,t[o],n).trim();break;default:var l=o=0;for(t=[];o<r;++o)for(var c=0;c<a;++c)t[l++]=s(e[c]+" ",i[o],n).trim()}return t}function s(e,t,n){var s=t.charCodeAt(0);switch(33>s&&(s=(t=t.trim()).charCodeAt(0)),s){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,s){var a=e+";",o=2*t+3*n+4*s;if(944===o){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===N||2===N&&r(l,1)?"-webkit-"+l+l:l}if(0===N||2===N&&!r(a,1))return a;switch(o){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(k,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return p.test(a)?a.replace(h,":-webkit-")+a.replace(h,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(C,"tb");break;case 232:l=a.replace(C,"tb-rl");break;case 220:l=a.replace(C,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,o=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<o?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===A.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,s).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,n+s===211&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function r(e,t){var n=e.indexOf(1===t?":":"{"),s=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),R(2!==t?s:s.replace(_,"$1"),n,t)}function a(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function o(e,t,n,s,i,r,a,o,l,u){for(var d,h=0,p=t;h<O;++h)switch(d=I[h].call(c,e,p,n,s,i,r,a,o,l,u)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(R=null,e?"function"!=typeof e?N=1:(N=2,R=e):N=0),l}function c(e,n){var s=e;if(33>s.charCodeAt(0)&&(s=s.trim()),s=[s],0<O){var i=o(-1,n,s,s,x,P,0,0,0,0);void 0!==i&&"string"==typeof i&&(n=i)}var r=t(M,s,n,0,0);return 0<O&&(void 0!==(i=o(-2,r,s,s,x,P,r.length,0,0,0))&&(r=i)),"",T=0,P=x=1,r}var u=/^\0+/g,d=/[\0\r\f]/g,h=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,y=/:(read-only)/g,C=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,_=/[^]*?(:[rp][el]a[\w-]+)[^]*/,A=/stretch|:\s*\w+\-(?:conte|avail)/,k=/([^-])(image-set\()/,P=1,x=1,T=0,N=1,M=[],I=[],O=0,R=null,L=0;return c.use=function e(t){switch(t){case void 0:case null:O=I.length=0;break;default:switch(t.constructor){case Array:for(var n=0,s=t.length;n<s;++n)e(t[n]);break;case Function:I[O++]=t;break;case Boolean:L=0|!!t}}return e},c.set=l,void 0!==e&&l(e),c}var au,ou,lu={exports:{}},cu=lu.exports=function(e){var t="/*|*/",n=t+"}";function s(t){if(t)try{e(t+"}")}catch(n){}}return function(i,r,a,o,l,c,u,d,h,p){switch(i){case 1:if(0===h&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===d)return r+t;break;case 3:switch(d){case 102:case 112:return e(a[0]+r),"";default:return r+(0===p?t:"")}case-2:r.split(n).forEach(s)}}},uu=/[A-Z]|^ms/g,du=(au=function(e){return e.replace(uu,"-$&").toLowerCase()},ou={},function(e){return void 0===ou[e]&&(ou[e]=au(e)),ou[e]}),hu=function(e,t){return null==t||"boolean"==typeof t?"":1===iu[e]||45===e.charCodeAt(1)||isNaN(t)||0===t?t:t+"px"},pu=function e(t){for(var n=t.length,s=0,i="";s<n;s++){var r=t[s];if(null!=r){var a=void 0;switch(typeof r){case"boolean":break;case"function":a=e([r()]);break;case"object":if(Array.isArray(r))a=e(r);else for(var o in a="",r)r[o]&&o&&(a&&(a+=" "),a+=o);break;default:a=r}a&&(i&&(i+=" "),i+=a)}}return i},fu="undefined"!=typeof document;function mu(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key||""),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),(void 0!==e.container?e.container:document.head).appendChild(t),t}var gu=function(){function e(e){this.isSpeedy=!0,this.tags=[],this.ctr=0,this.opts=e}var t=e.prototype;return t.inject=function(){if(this.injected)throw new Error("already injected!");this.tags[0]=mu(this.opts),this.injected=!0},t.speedy=function(e){if(0!==this.ctr)throw new Error("cannot change speedy now");this.isSpeedy=!!e},t.insert=function(e,t){if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(this.tags[this.tags.length-1]);try{n.insertRule(e,n.cssRules.length)}catch(i){}}else{var s=mu(this.opts);this.tags.push(s),s.appendChild(document.createTextNode(e+(t||"")))}this.ctr++,this.ctr%65e3==0&&this.tags.push(mu(this.opts))},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0,this.injected=!1},e}();var vu=function(e,t){if(void 0!==e.__SECRET_EMOTION__)return e.__SECRET_EMOTION__;void 0===t&&(t={});var n,s,i=t.key||"css",r=cu((function(e){n+=e,fu&&o.insert(e,c)}));void 0!==t.prefix&&(s={prefix:t.prefix});var a={registered:{},inserted:{},nonce:t.nonce,key:i},o=new gu(t);fu&&o.inject();var l=new ru(s);l.use(t.stylisPlugins)(r);var c="";function u(e,t){if(null==e)return"";switch(typeof e){case"boolean":return"";case"function":if(void 0!==e.__emotion_styles){var n=e.toString();return n}return u.call(this,void 0===this?e():e(this.mergedProps,this.context),t);case"object":return f.call(this,e);default:var s=a.registered[e];return!1===t&&void 0!==s?s:e}}var d,h,p=new WeakMap;function f(e){if(p.has(e))return p.get(e);var t="";return Array.isArray(e)?e.forEach((function(e){t+=u.call(this,e,!1)}),this):Object.keys(e).forEach((function(n){"object"!=typeof e[n]?void 0!==a.registered[e[n]]?t+=n+"{"+a.registered[e[n]]+"}":t+=du(n)+":"+hu(n,e[n])+";":Array.isArray(e[n])&&"string"==typeof e[n][0]&&void 0===a.registered[e[n][0]]?e[n].forEach((function(e){t+=du(n)+":"+hu(n,e)+";"})):t+=n+"{"+u.call(this,e[n],!1)+"}"}),this),p.set(e,t),t}var m=/label:\s*([^\s;\n{]+)\s*;/g,g=function(e,t){return function(e){for(var t,n=e.length,s=n^n,i=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(t>>>16)&65535)<<16),s=1540483477*(65535&s)+((1540483477*(s>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:s^=(255&e.charCodeAt(i+2))<<16;case 2:s^=(255&e.charCodeAt(i+1))<<8;case 1:s=1540483477*(65535&(s^=255&e.charCodeAt(i)))+((1540483477*(s>>>16)&65535)<<16)}return s=1540483477*(65535&(s^=s>>>13))+((1540483477*(s>>>16)&65535)<<16),((s^=s>>>15)>>>0).toString(36)}(e+t)+t},v=function(e){var t=!0,n="",s="";null==e||void 0===e.raw?(t=!1,n+=u.call(this,e,!1)):n+=e[0];for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return r.forEach((function(s,i){n+=u.call(this,s,46===n.charCodeAt(n.length-1)),!0===t&&void 0!==e[i+1]&&(n+=e[i+1])}),this),h=n,n=n.replace(m,(function(e,t){return s+="-"+t,""})),d=g(n,s),n};function b(e,t){void 0===a.inserted[d]&&(n="",l(e,t),a.inserted[d]=n)}var y=function(){var e=v.apply(this,arguments),t=i+"-"+d;return void 0===a.registered[t]&&(a.registered[t]=h),b("."+t,e),t};function C(e,t){var n="";return t.split(" ").forEach((function(t){void 0!==a.registered[t]?e.push(t):n+=t+" "})),n}function E(e,t){var n=[],s=C(n,e);return n.length<2?e:s+y(n,t)}function w(e){a.inserted[e]=!0}if(fu){var S=document.querySelectorAll("[data-emotion-"+i+"]");Array.prototype.forEach.call(S,(function(e){o.tags[0].parentNode.insertBefore(e,o.tags[0]),e.getAttribute("data-emotion-"+i).split(" ").forEach(w)}))}var _={flush:function(){fu&&(o.flush(),o.inject()),a.inserted={},a.registered={}},hydrate:function(e){e.forEach(w)},cx:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E(pu(t))},merge:E,getRegisteredStyles:C,injectGlobal:function(){var e=v.apply(this,arguments);b("",e)},keyframes:function(){var e=v.apply(this,arguments),t="animation-"+d;return b("","@keyframes "+t+"{"+e+"}"),t},css:y,sheet:o,caches:a};return e.__SECRET_EMOTION__=_,_}("undefined"!=typeof global?global:{});vu.flush,vu.hydrate,vu.cx,vu.merge,vu.getRegisteredStyles;var bu=vu.injectGlobal;vu.keyframes;var yu=vu.css;vu.sheet,vu.caches;var Cu={exports:{}},Eu={exports:{}};(function(){var e,t,n,s,i,r;"undefined"!=typeof performance&&null!==performance&&performance.now?Eu.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(Eu.exports=function(){return(e()-i)/1e6},t=process.hrtime,s=(e=function(){var e;return 1e9*(e=t())[0]+e[1]})(),r=1e9*process.uptime(),i=s-r):Date.now?(Eu.exports=function(){return Date.now()-n},n=Date.now()):(Eu.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(x);for(var wu=Eu.exports,Su="undefined"==typeof window?x:window,_u=["moz","webkit"],Au="AnimationFrame",ku=Su["request"+Au],Pu=Su["cancel"+Au]||Su["cancelRequest"+Au],xu=0;!ku&&xu<_u.length;xu++)ku=Su[_u[xu]+"Request"+Au],Pu=Su[_u[xu]+"Cancel"+Au]||Su[_u[xu]+"CancelRequest"+Au];if(!ku||!Pu){var Tu=0,Nu=0,Mu=[];ku=function(e){if(0===Mu.length){var t=wu(),n=Math.max(0,16.666666666666668-(t-Tu));Tu=n+t,setTimeout((function(){var e=Mu.slice(0);Mu.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(Tu)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return Mu.push({handle:++Nu,callback:e,cancelled:!1}),Nu},Pu=function(e){for(var t=0;t<Mu.length;t++)Mu[t].handle===e&&(Mu[t].cancelled=!0)}}Cu.exports=function(e){return ku.call(Su,e)},Cu.exports.cancel=function(){Pu.apply(Su,arguments)},Cu.exports.polyfill=function(e){e||(e=Su),e.requestAnimationFrame=ku,e.cancelAnimationFrame=Pu};var Iu=Cu.exports,Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});var Ru=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Lu=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),Du=d.exports,Fu=Hu(Du),ju=Hu(T.exports);function Hu(e){return e&&e.__esModule?e:{default:e}}var Uu={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},qu=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],Bu=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},Vu=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),zu=function(){return Vu?"_"+Math.random().toString(36).substr(2,12):void 0},Wu=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputRef=function(e){n.input=e,"function"==typeof n.props.inputRef&&n.props.inputRef(e)},n.placeHolderSizerRef=function(e){n.placeHolderSizer=e},n.sizerRef=function(e){n.sizer=e},n.state={inputWidth:e.minWidth,inputId:e.id||zu()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Du.Component),Lu(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||zu()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(Bu(e,this.sizer),this.placeHolderSizer&&Bu(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return Vu&&e?Fu.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce((function(e,t){return null!=e?e:t})),t=Ru({},this.props.style);t.display||(t.display="inline-block");var n=Ru({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),s=function(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}(this.props,[]);return function(e){qu.forEach((function(t){return delete e[t]}))}(s),s.className=this.props.inputClassName,s.id=this.state.inputId,s.style=n,Fu.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),Fu.default.createElement("input",Ru({},s,{ref:this.inputRef})),Fu.default.createElement("div",{ref:this.sizerRef,style:Uu},e),this.props.placeholder?Fu.default.createElement("div",{ref:this.placeHolderSizerRef,style:Uu},this.props.placeholder):null)}}]),t}();Wu.propTypes={className:ju.default.string,defaultValue:ju.default.any,extraWidth:ju.default.oneOfType([ju.default.number,ju.default.string]),id:ju.default.string,injectStyles:ju.default.bool,inputClassName:ju.default.string,inputRef:ju.default.func,inputStyle:ju.default.object,minWidth:ju.default.oneOfType([ju.default.number,ju.default.string]),onAutosize:ju.default.func,onChange:ju.default.func,placeholder:ju.default.string,placeholderIsMinWidth:ju.default.bool,style:ju.default.object,value:ju.default.any},Wu.defaultProps={minWidth:1,injectStyles:!0};var Gu,Ku=Ou.default=Wu,Yu={exports:{}},Xu={exports:{}},$u={exports:{}};(Gu=$u).exports=function(e){return e&&e.__esModule?e:{default:e}},Gu.exports.__esModule=!0,Gu.exports.default=Gu.exports;var Qu={exports:{}};function Ju(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}!function(e,t){t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default}(Qu,Qu.exports),function(e,t){var n=$u.exports;t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,s.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var s=n(Qu.exports);e.exports=t.default}(Xu,Xu.exports);var Zu=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=Ju(e.className,t):e.setAttribute("class",Ju(e.className&&e.className.baseVal||"",t))},ed={};function td(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function nd(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function sd(e,t){try{var n=this.props,s=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,s)}finally{this.props=n,this.state=s}}td.__suppressDeprecationWarning=!0,nd.__suppressDeprecationWarning=!0,sd.__suppressDeprecationWarning=!0;var id=N(Object.freeze(Object.defineProperty({__proto__:null,polyfill:function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,s=null,i=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?s="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(s="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?i="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==s||null!==i){var r=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+r+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==s?"\n  "+s:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=td,t.componentWillReceiveProps=nd),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=sd;var o=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var s=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;o.call(this,e,t,s)}}return e}},Symbol.toStringTag,{value:"Module"})));ed.__esModule=!0,ed.default=ed.EXITING=ed.ENTERED=ed.ENTERING=ed.EXITED=ed.UNMOUNTED=void 0;var rd=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};s.get||s.set?Object.defineProperty(t,n,s):t[n]=e[n]}return t.default=e,t}(T.exports),ad=cd(d.exports),od=cd(M.exports),ld=id;function cd(e){return e&&e.__esModule?e:{default:e}}ed.UNMOUNTED="unmounted";ed.EXITED="exited";ed.ENTERING="entering";ed.ENTERED="entered";ed.EXITING="exiting";var ud=function(e){var t,n;function s(t,n){var s;s=e.call(this,t,n)||this;var i,r=n.transitionGroup,a=r&&!r.isMounting?t.enter:t.appear;return s.appearStatus=null,t.in?a?(i="exited",s.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",s.state={status:i},s.nextCallback=null,s}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=s.prototype;return i.getChildContext=function(){return{transitionGroup:null}},s.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null},i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,s=this.props.timeout;return e=t=n=s,null!=s&&"number"!=typeof s&&(e=s.exit,t=s.enter,n=void 0!==s.appear?s.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=od.default.findDOMNode(this);"entering"===t?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},i.performEnter=function(e,t){var n=this,s=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,r=this.getTimeouts(),a=i?r.appear:r.enter;t||s?(this.props.onEnter(e,i),this.safeSetState({status:"entering"},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a,(function(){n.safeSetState({status:"entered"},(function(){n.props.onEntered(e,i)}))}))}))):this.safeSetState({status:"entered"},(function(){n.props.onEntered(e)}))},i.performExit=function(e){var t=this,n=this.props.exit,s=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,s.exit,(function(){t.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(s){n&&(n=!1,t.nextCallback=null,e(s))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var s=null==t&&!this.props.addEndListener;e&&!s?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,s=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["children"]);if(delete s.in,delete s.mountOnEnter,delete s.unmountOnExit,delete s.appear,delete s.enter,delete s.exit,delete s.timeout,delete s.addEndListener,delete s.onEnter,delete s.onEntering,delete s.onEntered,delete s.onExit,delete s.onExiting,delete s.onExited,"function"==typeof n)return n(e,s);var i=ad.default.Children.only(n);return ad.default.cloneElement(i,s)},s}(ad.default.Component);function dd(){}ud.contextTypes={transitionGroup:rd.object},ud.childContextTypes={transitionGroup:function(){}},ud.propTypes={},ud.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:dd,onEntering:dd,onEntered:dd,onExit:dd,onExiting:dd,onExited:dd},ud.UNMOUNTED=0,ud.EXITED=1,ud.ENTERING=2,ud.ENTERED=3,ud.EXITING=4;var hd=(0,ld.polyfill)(ud);ed.default=hd,function(e,t){t.__esModule=!0,t.default=void 0,function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};s.get||s.set?Object.defineProperty(t,n,s):t[n]=e[n]}t.default=e}(T.exports);var n=a(Xu.exports),s=a(Zu),i=a(d.exports),r=a(ed);function a(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var l=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,n.default)(e,t)}))},c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},u=function(e){var t,n;function s(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).onEnter=function(e,n){var s=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),l(e,s),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var s=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,s),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var s=t.getClassNames("appear").doneClassName,i=t.getClassNames("enter").doneClassName,r=n?s+" "+i:i;t.removeClasses(e,n?"appear":"enter"),l(e,r),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),l(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),l(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,s="string"==typeof n,i=s?(s&&n?n+"-":"")+e:n[e];return{className:i,activeClassName:s?i+"-active":n[e+"Active"],doneClassName:s?i+"-done":n[e+"Done"]}},t}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=s.prototype;return a.removeClasses=function(e,t){var n=this.getClassNames(t),s=n.className,i=n.activeClassName,r=n.doneClassName;s&&c(e,s),i&&c(e,i),r&&c(e,r)},a.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,l(e,t))},a.render=function(){var e=o({},this.props);return delete e.classNames,i.default.createElement(r.default,o({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s}(i.default.Component);u.defaultProps={classNames:""},u.propTypes={};var h=u;t.default=h,e.exports=t.default}(Yu,Yu.exports);var pd={exports:{}},fd={exports:{}},md={__esModule:!0};md.getChildMapping=vd,md.mergeChildMappings=bd,md.getInitialChildMapping=function(e,t){return vd(e.children,(function(n){return(0,gd.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:yd(n,"appear",e),enter:yd(n,"enter",e),exit:yd(n,"exit",e)})}))},md.getNextChildMapping=function(e,t,n){var s=vd(e.children),i=bd(t,s);return Object.keys(i).forEach((function(r){var a=i[r];if((0,gd.isValidElement)(a)){var o=r in t,l=r in s,c=t[r],u=(0,gd.isValidElement)(c)&&!c.props.in;!l||o&&!u?l||!o||u?l&&o&&(0,gd.isValidElement)(c)&&(i[r]=(0,gd.cloneElement)(a,{onExited:n.bind(null,a),in:c.props.in,exit:yd(a,"exit",e),enter:yd(a,"enter",e)})):i[r]=(0,gd.cloneElement)(a,{in:!1}):i[r]=(0,gd.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:yd(a,"exit",e),enter:yd(a,"enter",e)})}})),i};var gd=d.exports;function vd(e,t){var n=Object.create(null);return e&&gd.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,gd.isValidElement)(e)?t(e):e}(e)})),n}function bd(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var s,i=Object.create(null),r=[];for(var a in e)a in t?r.length&&(i[a]=r,r=[]):r.push(a);var o={};for(var l in t){if(i[l])for(s=0;s<i[l].length;s++){var c=i[l][s];o[i[l][s]]=n(c)}o[l]=n(l)}for(s=0;s<r.length;s++)o[r[s]]=n(r[s]);return o}function yd(e,t,n){return null!=n[t]?n[t]:e.props[t]}!function(e,t){t.__esModule=!0,t.default=void 0;var n=a(T.exports),s=a(d.exports),i=id,r=md;function a(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},u=function(e){var t,n;function i(t,n){var s,i=(s=e.call(this,t,n)||this).handleExited.bind(l(l(s)));return s.state={handleExited:i,firstRender:!0},s}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=i.prototype;return a.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},a.componentDidMount=function(){this.appeared=!0,this.mounted=!0},a.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,t){var n=t.children,s=t.handleExited;return{children:t.firstRender?(0,r.getInitialChildMapping)(e,s):(0,r.getNextChildMapping)(e,n,s),firstRender:!1}},a.handleExited=function(e,t){var n=(0,r.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=o({},t.children);return delete n[e.key],{children:n}})))},a.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["component","childFactory"]),r=c(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r:s.default.createElement(t,i,r)},i}(s.default.Component);u.childContextTypes={transitionGroup:n.default.object.isRequired},u.propTypes={},u.defaultProps={component:"div",childFactory:function(e){return e}};var h=(0,i.polyfill)(u);t.default=h,e.exports=t.default}(fd,fd.exports),function(e,t){t.__esModule=!0,t.default=void 0,r(T.exports);var n=r(d.exports),s=M.exports,i=r(fd.exports);function r(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t,r;function a(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.handleLifecycle("onExited",1,n)},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=a.prototype;return o.handleLifecycle=function(e,t,i){var r,a=this.props.children,o=n.default.Children.toArray(a)[t];o.props[e]&&(r=o.props)[e].apply(r,i),this.props[e]&&this.props[e]((0,s.findDOMNode)(this))},o.render=function(){var e=this.props,t=e.children,s=e.in,r=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","in"]),a=n.default.Children.toArray(t),o=a[0],l=a[1];return delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,n.default.createElement(i.default,r,s?n.default.cloneElement(o,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):n.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(n.default.Component);a.propTypes={};var o=a;t.default=o,e.exports=t.default}(pd,pd.exports);var Cd=Sd(Yu.exports),Ed=Sd(pd.exports),wd=Sd(fd.exports);function Sd(e){return e&&e.__esModule?e:{default:e}}var _d={Transition:Sd(ed).default,TransitionGroup:wd.default,ReplaceTransition:Ed.default,CSSTransition:Cd.default};function Ad(e){return(Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pd(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function xd(e,t,n){return t&&Pd(e.prototype,t),n&&Pd(e,n),e}function Td(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nd(){return(Nd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){Td(e,t,n[t])}))}return e}function Id(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rd(e,t)}function Od(e){return(Od=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rd(e,t){return(Rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ld(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fd(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Dd(e):t}function jd(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Hd=function(){};function Ud(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function qd(e,t,n,s){var i=[t,s];if(n&&e)for(var r in n)n.hasOwnProperty(r)&&n[r]&&i.push("".concat(Ud(e,r)));return i.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var Bd=function(e){return Array.isArray(e)?e.filter(Boolean):"object"===Ad(e)&&null!==e?[e]:[]};function Vd(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function zd(e){return Vd(e)?window.pageYOffset:e.scrollTop}function Wd(e,t){Vd(e)?window.scrollTo(0,t):e.scrollTop=t}function Gd(e,t,n,s){return n*((e=e/s-1)*e*e+1)+t}function Kd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hd,i=zd(e),r=t-i,a=10,o=0;function l(){var t=Gd(o+=a,i,r,n);Wd(e,t),o<n?Iu(l):s(e)}l()}function Yd(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}function Xd(e){var t=e.maxHeight,n=e.menuEl,s=e.minHeight,i=e.placement,r=e.shouldScroll,a=e.isFixedPosition,o=e.theme.spacing,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,s=/(auto|scroll)/,i=document.documentElement;if("fixed"===t.position)return i;for(var r=e;r=r.parentElement;)if(t=getComputedStyle(r),(!n||"static"!==t.position)&&s.test(t.overflow+t.overflowY+t.overflowX))return r;return i}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect().height,d=n.getBoundingClientRect(),h=d.bottom,p=d.height,f=d.top,m=n.offsetParent.getBoundingClientRect().top,g=window.innerHeight,v=zd(l),b=parseInt(getComputedStyle(n).marginBottom,10),y=parseInt(getComputedStyle(n).marginTop,10),C=m-y,E=g-f,w=C+v,S=u-v-f,_=h-g+v+b,A=v+f-y,k=160;switch(i){case"auto":case"bottom":if(E>=p)return{placement:"bottom",maxHeight:t};if(S>=p&&!a)return r&&Kd(l,_,k),{placement:"bottom",maxHeight:t};if(!a&&S>=s||a&&E>=s)return r&&Kd(l,_,k),{placement:"bottom",maxHeight:a?E-b:S-b};if("auto"===i||a){var P=t,x=a?C:w;return x>=s&&(P=Math.min(x-b-o.controlHeight,t)),{placement:"top",maxHeight:P}}if("bottom"===i)return Wd(l,_),{placement:"bottom",maxHeight:t};break;case"top":if(C>=p)return{placement:"top",maxHeight:t};if(w>=p&&!a)return r&&Kd(l,A,k),{placement:"top",maxHeight:t};if(!a&&w>=s||a&&C>=s){var T=t;return(!a&&w>=s||a&&C>=s)&&(T=a?C-y:w-y),r&&Kd(l,A,k),{placement:"top",maxHeight:T}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}var $d=function(e){return"auto"===e?"bottom":e},Qd=function(e){function t(){var e,n;kd(this,t);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return Td(Dd(Dd(n=Fd(this,(e=Od(t)).call.apply(e,[this].concat(i))))),"state",{maxHeight:n.props.maxMenuHeight,placement:null}),Td(Dd(Dd(n)),"getPlacement",(function(e){var t=n.props,s=t.minMenuHeight,i=t.maxMenuHeight,r=t.menuPlacement,a=t.menuPosition,o=t.menuShouldScrollIntoView,l=t.theme,c=n.context.getPortalPlacement;if(e){var u="fixed"===a,d=Xd({maxHeight:i,menuEl:e,minHeight:s,placement:r,shouldScroll:o&&!u,isFixedPosition:u,theme:l});c&&c(d),n.setState(d)}})),Td(Dd(Dd(n)),"getUpdatedProps",(function(){var e=n.props.menuPlacement,t=n.state.placement||$d(e);return Md({},n.props,{placement:t,maxHeight:n.state.maxHeight})})),n}return Id(t,d.exports.Component),xd(t,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),t}();Td(Qd,"contextTypes",{getPortalPlacement:y.func});var Jd=function(e){var t=e.theme,n=t.spacing.baseUnit;return{color:t.colors.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px"),textAlign:"center"}},Zd=Jd,eh=Jd,th=function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.innerProps;return h("div",l(o({className:s(yu(i("noOptionsMessage",e)),{"menu-notice":!0,"menu-notice--no-options":!0},n)},r),{children:t}))};th.defaultProps={children:"No options"};var nh=function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.innerProps;return h("div",l(o({className:s(yu(i("loadingMessage",e)),{"menu-notice":!0,"menu-notice--loading":!0},n)},r),{children:t}))};nh.defaultProps={children:"Loading..."};var sh=function(e){function t(){var e,n;kd(this,t);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return Td(Dd(Dd(n=Fd(this,(e=Od(t)).call.apply(e,[this].concat(i))))),"state",{placement:null}),Td(Dd(Dd(n)),"getPortalPlacement",(function(e){var t=e.placement;t!==$d(n.props.menuPlacement)&&n.setState({placement:t})})),n}return Id(t,d.exports.Component),xd(t,[{key:"getChildContext",value:function(){return{getPortalPlacement:this.getPortalPlacement}}},{key:"render",value:function(){var e=this.props,t=e.appendTo,n=e.children,s=e.controlElement,i=e.menuPlacement,r=e.menuPosition,a=e.getStyles,o="fixed"===r;if(!t&&!o||!s)return null;var l=this.state.placement||$d(i),c=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(s),u=o?0:window.pageYOffset,d=c[l]+u,p=h("div",{className:yu(a("menuPortal",{offset:d,position:r,rect:c})),children:n});return t?M.exports.createPortal(p,t):p}}]),t}();Td(sh,"childContextTypes",{getPortalPlacement:y.func});var ih=Array.isArray,rh=Object.keys,ah=Object.prototype.hasOwnProperty;function oh(e,t){if(e===t)return!0;if(e&&t&&"object"==Ad(e)&&"object"==Ad(t)){var n,s,i,r=ih(e),a=ih(t);if(r&&a){if((s=e.length)!=t.length)return!1;for(n=s;0!=n--;)if(!oh(e[n],t[n]))return!1;return!0}if(r!=a)return!1;var o=e instanceof Date,l=t instanceof Date;if(o!=l)return!1;if(o&&l)return e.getTime()==t.getTime();var c=e instanceof RegExp,u=t instanceof RegExp;if(c!=u)return!1;if(c&&u)return e.toString()==t.toString();var d=rh(e);if((s=d.length)!==rh(t).length)return!1;for(n=s;0!=n--;)if(!ah.call(t,d[n]))return!1;for(n=s;0!=n--;)if(!("_owner"===(i=d[n])&&e.$$typeof||oh(e[i],t[i])))return!1;return!0}return e!=e&&t!=t}function lh(e,t){try{return oh(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}var ch=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],uh=function(e){for(var t=0;t<ch.length;t++)e=e.replace(ch[t].letters,ch[t].base);return e},dh=function(e){return e.replace(/^\s+|\s+$/g,"")},hh=function(e){return"".concat(e.label," ").concat(e.value)},ph=function(e){return h("span",o({className:yu({label:"a11yText",zIndex:9999,border:0,clip:"rect(1px, 1px, 1px, 1px)",height:1,width:1,position:"absolute",overflow:"hidden",padding:0,whiteSpace:"nowrap",backgroundColor:"red",color:"blue"})},e))},fh=function(e){function t(){return kd(this,t),Fd(this,Od(t).apply(this,arguments))}return Id(t,d.exports.Component),xd(t,[{key:"render",value:function(){var e=this.props;e.in,e.out,e.onExited,e.appear,e.enter,e.exit;var t=e.innerRef;e.emotion;var n=Ld(e,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return h("input",l(o({ref:t},n),{className:yu({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"})}))}}]),t}(),mh=function(e){function t(){return kd(this,t),Fd(this,Od(t).apply(this,arguments))}return Id(t,d.exports.Component),xd(t,[{key:"componentDidMount",value:function(){this.props.innerRef(M.exports.findDOMNode(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),t}(),gh=["boxSizing","height","overflow","paddingRight","position"],vh={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function bh(e){e.preventDefault()}function yh(e){e.stopPropagation()}function Ch(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function Eh(){return"ontouchstart"in window||navigator.maxTouchPoints}var wh=!("undefined"==typeof window||!window.document||!window.document.createElement),Sh=0,_h=function(e){function t(){var e,n;kd(this,t);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return Td(Dd(Dd(n=Fd(this,(e=Od(t)).call.apply(e,[this].concat(i))))),"originalStyles",{}),Td(Dd(Dd(n)),"listenerOptions",{capture:!1,passive:!1}),n}return Id(t,d.exports.Component),xd(t,[{key:"componentDidMount",value:function(){var e=this;if(wh){var t=this.props,n=t.accountForScrollbars,s=t.touchScrollTarget,i=document.body,r=i&&i.style;if(n&&gh.forEach((function(t){var n=r&&r[t];e.originalStyles[t]=n})),n&&Sh<1){var a=parseInt(this.originalStyles.paddingRight,10)||0,o=document.body?document.body.clientWidth:0,l=window.innerWidth-o+a||0;Object.keys(vh).forEach((function(e){var t=vh[e];r&&(r[e]=t)})),r&&(r.paddingRight="".concat(l,"px"))}i&&Eh()&&(i.addEventListener("touchmove",bh,this.listenerOptions),s&&(s.addEventListener("touchstart",Ch,this.listenerOptions),s.addEventListener("touchmove",yh,this.listenerOptions))),Sh+=1}}},{key:"componentWillUnmount",value:function(){var e=this;if(wh){var t=this.props,n=t.accountForScrollbars,s=t.touchScrollTarget,i=document.body,r=i&&i.style;Sh=Math.max(Sh-1,0),n&&Sh<1&&gh.forEach((function(t){var n=e.originalStyles[t];r&&(r[t]=n)})),i&&Eh()&&(i.removeEventListener("touchmove",bh,this.listenerOptions),s&&(s.removeEventListener("touchstart",Ch,this.listenerOptions),s.removeEventListener("touchmove",yh,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),t}();Td(_h,"defaultProps",{accountForScrollbars:!0});var Ah=function(e){function t(){var e,n;kd(this,t);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return Td(Dd(Dd(n=Fd(this,(e=Od(t)).call.apply(e,[this].concat(i))))),"state",{touchScrollTarget:null}),Td(Dd(Dd(n)),"getScrollTarget",(function(e){e!==n.state.touchScrollTarget&&n.setState({touchScrollTarget:e})})),Td(Dd(Dd(n)),"blurSelectInput",(function(){document.activeElement&&document.activeElement.blur()})),n}return Id(t,d.exports.PureComponent),xd(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isEnabled,s=this.state.touchScrollTarget;return n?m("div",{children:[h("div",{onClick:this.blurSelectInput,className:yu({position:"fixed",left:0,bottom:0,right:0,top:0})}),h(mh,{innerRef:this.getScrollTarget,children:t}),s?h(_h,{touchScrollTarget:s}):null]}):t}}]),t}(),kh=function(e){function t(){var e,n;kd(this,t);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return Td(Dd(Dd(n=Fd(this,(e=Od(t)).call.apply(e,[this].concat(i))))),"isBottom",!1),Td(Dd(Dd(n)),"isTop",!1),Td(Dd(Dd(n)),"scrollTarget",void 0),Td(Dd(Dd(n)),"touchStart",void 0),Td(Dd(Dd(n)),"cancelScroll",(function(e){e.preventDefault(),e.stopPropagation()})),Td(Dd(Dd(n)),"handleEventDelta",(function(e,t){var s=n.props,i=s.onBottomArrive,r=s.onBottomLeave,a=s.onTopArrive,o=s.onTopLeave,l=n.scrollTarget,c=l.scrollTop,u=l.scrollHeight,d=l.clientHeight,h=n.scrollTarget,p=t>0,f=u-d-c,m=!1;f>t&&n.isBottom&&(r&&r(e),n.isBottom=!1),p&&n.isTop&&(o&&o(e),n.isTop=!1),p&&t>f?(i&&!n.isBottom&&i(e),h.scrollTop=u,m=!0,n.isBottom=!0):!p&&-t>c&&(a&&!n.isTop&&a(e),h.scrollTop=0,m=!0,n.isTop=!0),m&&n.cancelScroll(e)})),Td(Dd(Dd(n)),"onWheel",(function(e){n.handleEventDelta(e,e.deltaY)})),Td(Dd(Dd(n)),"onTouchStart",(function(e){n.touchStart=e.changedTouches[0].clientY})),Td(Dd(Dd(n)),"onTouchMove",(function(e){var t=n.touchStart-e.changedTouches[0].clientY;n.handleEventDelta(e,t)})),Td(Dd(Dd(n)),"getScrollTarget",(function(e){n.scrollTarget=e})),n}return Id(t,d.exports.Component),xd(t,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(e){e&&(e.scrollHeight<=e.clientHeight||("function"==typeof e.addEventListener&&e.addEventListener("wheel",this.onWheel,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchmove",this.onTouchMove,!1)))}},{key:"stopListening",value:function(e){e.scrollHeight<=e.clientHeight||("function"==typeof e.removeEventListener&&e.removeEventListener("wheel",this.onWheel,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return h(mh,{innerRef:this.getScrollTarget,children:this.props.children})}}]),t}(),Ph=function(e){function t(){return kd(this,t),Fd(this,Od(t).apply(this,arguments))}return Id(t,d.exports.Component),xd(t,[{key:"render",value:function(){var e=this.props,t=e.isEnabled,n=Ld(e,["isEnabled"]);return t?h(kh,o({},n)):this.props.children}}]),t}();Td(Ph,"defaultProps",{isEnabled:!0});var xh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isSearchable,s=t.isMulti,i=t.label,r=t.isDisabled;switch(e){case"menu":return"Use Up and Down to choose options".concat(r?"":", press Enter to select the currently focused option",", press Escape to exit the menu, press Tab to select the option and exit the menu.");case"input":return"".concat(i||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}},Th=function(e,t){var n=t.value,s=t.isDisabled;if(n)switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.")}},Nh=function(e){return!!e.isDisabled},Mh=function(e){function t(){return kd(this,t),Fd(this,Od(t).apply(this,arguments))}return Id(t,d.exports.Component),xd(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,s=e.cx,i=e.isMulti,r=e.getStyles,a=e.hasValue;return h("div",{className:s(yu(r("valueContainer",this.props)),{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":a},n),children:t})}}]),t}(),Ih=function(e){var t=e.size,n=Ld(e,["size"]);return h("svg",o({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:yu({display:"inline-block",fill:"currentColor",lineHeight:1,stroke:"currentColor",strokeWidth:0})},n))},Oh=function(e){return h(Ih,l(o({size:20},e),{children:h("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"})}))},Rh=function(e){return h(Ih,l(o({size:20},e),{children:h("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})}))},Lh=function(e){var t=e.isFocused,n=e.theme,s=n.spacing.baseUnit,i=n.colors;return{label:"indicatorContainer",color:t?i.neutral60:i.neutral20,display:"flex",padding:2*s,transition:"color 150ms",":hover":{color:t?i.neutral80:i.neutral40}}},Dh=Lh,Fh=Lh,jh=!1,Hh=function(e){var t=e.color,n=e.delay,s=e.offset;return h("span",{className:yu({animationDuration:"1s",animationDelay:"".concat(n,"ms"),animationIterationCount:"infinite",animationName:"react-select-loading-indicator",animationTimingFunction:"ease-in-out",backgroundColor:t,borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":null,height:"1em",verticalAlign:"top",width:"1em"})})},Uh=function(e){var t=e.className,n=e.cx,s=e.getStyles,i=e.innerProps,r=e.isFocused,a=e.isRtl,c=e.theme.colors,u=r?c.neutral80:c.neutral20;return jh||(bu("@keyframes ","react-select-loading-indicator","{0%,80%,100%{opacity:0;}40%{opacity:1;}};"),jh=!0),m("div",l(o({},i),{className:n(yu(s("loadingIndicator",e)),{indicator:!0,"loading-indicator":!0},t),children:[h(Hh,{color:u,delay:0,offset:a}),h(Hh,{color:u,delay:160,offset:!0}),h(Hh,{color:u,delay:320,offset:!a})]}))};Uh.defaultProps={size:4};var qh=function(e){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:e?0:1,outline:0,padding:0,color:"inherit"}},Bh=function(e){var t=e.children,n=e.innerProps;return h("div",l(o({},n),{children:t}))},Vh=Bh,zh=Bh,Wh=function(e){function t(){return kd(this,t),Fd(this,Od(t).apply(this,arguments))}return Id(t,d.exports.Component),xd(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.innerProps;return h("div",l(o({},n),{children:t||h(Oh,{size:14})}))}}]),t}(),Gh=function(e){function t(){return kd(this,t),Fd(this,Od(t).apply(this,arguments))}return Id(t,d.exports.Component),xd(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,s=e.components,i=e.cx,r=e.data,a=e.getStyles,o=e.innerProps,l=e.isDisabled,c=e.removeProps,u=e.selectProps,d=s.Container,p=s.Label,f=s.Remove,g=Md({className:i(yu(a("multiValue",this.props)),{"multi-value":!0,"multi-value--is-disabled":l},n)},o),v={className:i(yu(a("multiValueLabel",this.props)),{"multi-value__label":!0},n)},b=Md({className:i(yu(a("multiValueRemove",this.props)),{"multi-value__remove":!0},n)},c);return m(d,{data:r,innerProps:g,selectProps:u,children:[h(p,{data:r,innerProps:v,selectProps:u,children:t}),h(f,{data:r,innerProps:b,selectProps:u})]})}}]),t}();Td(Gh,"defaultProps",{cropWithEllipsis:!0});var Kh,Yh={ClearIndicator:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.innerProps;return h("div",l(o({},r),{className:s(yu(i("clearIndicator",e)),{indicator:!0,"clear-indicator":!0},n),children:t||h(Oh,{})}))},Control:function(e){var t=e.children,n=e.cx,s=e.getStyles,i=e.className,r=e.isDisabled,a=e.isFocused,c=e.innerRef,u=e.innerProps,d=e.menuIsOpen;return h("div",l(o({ref:c,className:n(yu(s("control",e)),{control:!0,"control--is-disabled":r,"control--is-focused":a,"control--menu-is-open":d},i)},u),{children:t}))},DropdownIndicator:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.innerProps;return h("div",l(o({},r),{className:s(yu(i("dropdownIndicator",e)),{indicator:!0,"dropdown-indicator":!0},n),children:t||h(Rh,{})}))},DownChevron:Rh,CrossIcon:Oh,Group:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.Heading,a=e.headingProps,c=e.label,u=e.theme,d=e.selectProps;return m("div",{className:s(yu(i("group",e)),{group:!0},n),children:[h(r,l(o({},a),{selectProps:d,theme:u,getStyles:i,cx:s,children:c})),h("div",{children:t})]})},GroupHeading:function(e){var t=e.className,n=e.cx,s=e.getStyles,i=e.theme;e.selectProps;var r=Ld(e,["className","cx","getStyles","theme","selectProps"]);return h("div",o({className:n(yu(s("groupHeading",Md({theme:i},r))),{"group-heading":!0},t)},r))},IndicatorsContainer:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles;return h("div",{className:s(yu(i("indicatorsContainer",e)),{indicators:!0},n),children:t})},IndicatorSeparator:function(e){var t=e.className,n=e.cx,s=e.getStyles,i=e.innerProps;return h("span",l(o({},i),{className:n(yu(s("indicatorSeparator",e)),{"indicator-separator":!0},t)}))},Input:function(e){var t=e.className,n=e.cx,s=e.getStyles,i=e.innerRef,r=e.isHidden,a=e.isDisabled,l=e.theme;e.selectProps;var c=Ld(e,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]);return h("div",{className:yu(s("input",Md({theme:l},c))),children:h(Ku,o({className:n(null,{input:!0},t),inputRef:i,inputStyle:qh(r),disabled:a},c))})},LoadingIndicator:Uh,Menu:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.innerRef,a=e.innerProps,c=s(yu(i("menu",e)),{menu:!0},n);return h("div",l(o({className:c},a),{ref:r,children:t}))},MenuList:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.isMulti,a=e.innerRef;return h("div",{className:s(yu(i("menuList",e)),{"menu-list":!0,"menu-list--is-multi":r},n),ref:a,children:t})},MenuPortal:sh,LoadingMessage:nh,NoOptionsMessage:th,MultiValue:Gh,MultiValueContainer:Vh,MultiValueLabel:zh,MultiValueRemove:Wh,Option:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.isDisabled,a=e.isFocused,c=e.isSelected,u=e.innerRef,d=e.innerProps;return h("div",l(o({ref:u,className:s(yu(i("option",e)),{option:!0,"option--is-disabled":r,"option--is-focused":a,"option--is-selected":c},n)},d),{children:t}))},Placeholder:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.innerProps;return h("div",l(o({className:s(yu(i("placeholder",e)),{placeholder:!0},n)},r),{children:t}))},SelectContainer:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.innerProps,a=e.isDisabled,c=e.isRtl;return h("div",l(o({className:s(yu(i("container",e)),{"--is-disabled":a,"--is-rtl":c},n)},r),{children:t}))},SingleValue:function(e){var t=e.children,n=e.className,s=e.cx,i=e.getStyles,r=e.isDisabled,a=e.innerProps;return h("div",l(o({className:s(yu(i("singleValue",e)),{"single-value":!0,"single-value--is-disabled":r},n)},a),{children:t}))},ValueContainer:Mh},Xh=function(e){return Md({},Yh,e.components)},$h={clearIndicator:Fh,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":null,pointerEvents:t?"none":null,position:"relative"}},control:function(e){var t=e.isDisabled,n=e.isFocused,s=e.theme,i=s.colors,r=s.borderRadius,a=s.spacing;return{label:"control",alignItems:"center",backgroundColor:t?i.neutral5:i.neutral0,borderColor:t?i.neutral10:n?i.primary:i.neutral20,borderRadius:r,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(i.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?i.primary:i.neutral30}}},dropdownIndicator:Dh,group:function(e){var t=e.theme.spacing;return{paddingBottom:2*t.baseUnit,paddingTop:2*t.baseUnit}},groupHeading:function(e){var t=e.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*t.baseUnit,paddingRight:3*t.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e){var t=e.isDisabled,n=e.theme,s=n.spacing.baseUnit,i=n.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:t?i.neutral10:i.neutral20,marginBottom:2*s,marginTop:2*s,width:1}},input:function(e){var t=e.isDisabled,n=e.theme,s=n.spacing,i=n.colors;return{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,visibility:t?"hidden":"visible",color:i.neutral80}},loadingIndicator:function(e){var t=e.isFocused,n=e.size,s=e.theme,i=s.colors,r=s.spacing.baseUnit;return{label:"loadingIndicator",color:t?i.neutral60:i.neutral20,display:"flex",padding:2*r,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:eh,menu:function(e){var t,n=e.placement,s=e.theme,i=s.borderRadius,r=s.spacing,a=s.colors;return Td(t={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(n),"100%"),Td(t,"backgroundColor",a.neutral0),Td(t,"borderRadius",i),Td(t,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),Td(t,"marginBottom",r.menuGutter),Td(t,"marginTop",r.menuGutter),Td(t,"position","absolute"),Td(t,"width","100%"),Td(t,"zIndex",1),t},menuList:function(e){var t=e.maxHeight,n=e.theme.spacing.baseUnit;return{maxHeight:t,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(e){var t=e.rect,n=e.offset,s=e.position;return{left:t.left,position:s,top:n,width:t.width,zIndex:1}},multiValue:function(e){var t=e.theme,n=t.spacing,s=t.borderRadius;return{label:"multiValue",backgroundColor:t.colors.neutral10,borderRadius:s/2,display:"flex",margin:n.baseUnit/2,minWidth:0}},multiValueLabel:function(e){var t=e.theme,n=t.borderRadius,s=t.colors,i=e.cropWithEllipsis;return{borderRadius:n/2,color:s.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:i?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(e){var t=e.theme,n=t.spacing,s=t.borderRadius,i=t.colors;return{alignItems:"center",borderRadius:s/2,backgroundColor:e.isFocused&&i.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}}},noOptionsMessage:Zd,option:function(e){var t=e.isDisabled,n=e.isFocused,s=e.isSelected,i=e.theme,r=i.spacing,a=i.colors;return{label:"option",backgroundColor:s?a.primary:n?a.primary25:"transparent",color:t?a.neutral20:s?a.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*r.baseUnit,"px ").concat(3*r.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!t&&(s?a.primary:a.primary50)}}},placeholder:function(e){var t=e.theme,n=t.spacing;return{label:"placeholder",color:t.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(e){var t=e.isDisabled,n=e.theme,s=n.spacing,i=n.colors;return{label:"singleValue",color:t?i.neutral40:i.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2,maxWidth:"calc(100% - ".concat(2*s.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(e){var t=e.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(t.baseUnit/2,"px ").concat(2*t.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}},Qh={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Jh={backspaceRemovesValue:!0,blurInputOnSelect:Yd(),captureMenuScroll:!Yd(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){var n=Md({ignoreCase:!0,ignoreAccents:!0,stringify:hh,trim:!0,matchFrom:"any"},Kh),s=n.ignoreCase,i=n.ignoreAccents,r=n.stringify,a=n.trim,o=n.matchFrom,l=a?dh(t):t,c=a?dh(r(e)):r(e);return s&&(l=l.toLowerCase(),c=c.toLowerCase()),i&&(l=uh(l),c=uh(c)),"start"===o?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Nh,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0},Zh=1,ep=function(e){function t(e){var n;kd(this,t),Td(Dd(Dd(n=Fd(this,Od(t).call(this,e)))),"state",{ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]}),Td(Dd(Dd(n)),"blockOptionHover",!1),Td(Dd(Dd(n)),"isComposing",!1),Td(Dd(Dd(n)),"clearFocusValueOnUpdate",!1),Td(Dd(Dd(n)),"commonProps",void 0),Td(Dd(Dd(n)),"components",void 0),Td(Dd(Dd(n)),"hasGroups",!1),Td(Dd(Dd(n)),"initialTouchX",0),Td(Dd(Dd(n)),"initialTouchY",0),Td(Dd(Dd(n)),"inputIsHiddenAfterUpdate",void 0),Td(Dd(Dd(n)),"instancePrefix",""),Td(Dd(Dd(n)),"openAfterFocus",!1),Td(Dd(Dd(n)),"scrollToFocusedOptionOnUpdate",!1),Td(Dd(Dd(n)),"userIsDragging",void 0),Td(Dd(Dd(n)),"controlRef",null),Td(Dd(Dd(n)),"getControlRef",(function(e){n.controlRef=e})),Td(Dd(Dd(n)),"focusedOptionRef",null),Td(Dd(Dd(n)),"getFocusedOptionRef",(function(e){n.focusedOptionRef=e})),Td(Dd(Dd(n)),"menuListRef",null),Td(Dd(Dd(n)),"getMenuListRef",(function(e){n.menuListRef=e})),Td(Dd(Dd(n)),"inputRef",null),Td(Dd(Dd(n)),"getInputRef",(function(e){n.inputRef=e})),Td(Dd(Dd(n)),"cacheComponents",(function(e){n.components=Xh({components:e})})),Td(Dd(Dd(n)),"focus",n.focusInput),Td(Dd(Dd(n)),"blur",n.blurInput),Td(Dd(Dd(n)),"onChange",(function(e,t){var s=n.props;(0,s.onChange)(e,Md({},t,{name:s.name}))})),Td(Dd(Dd(n)),"setValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set-value",s=arguments.length>2?arguments[2]:void 0,i=n.props,r=i.closeMenuOnSelect,a=i.isMulti;n.onInputChange("",{action:"set-value"}),r&&(n.inputIsHiddenAfterUpdate=!a,n.onMenuClose()),n.clearFocusValueOnUpdate=!0,n.onChange(e,{action:t,option:s})})),Td(Dd(Dd(n)),"selectOption",(function(e){var t=n.props,s=t.blurInputOnSelect,i=t.isMulti,r=n.state.selectValue;if(i)if(n.isOptionSelected(e,r)){var a=n.getOptionValue(e);n.setValue(r.filter((function(e){return n.getOptionValue(e)!==a})),"deselect-option",e),n.announceAriaLiveSelection({event:"deselect-option",context:{value:n.getOptionLabel(e)}})}else n.isOptionDisabled(e,r)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e),isDisabled:!0}}):(n.setValue([].concat(jd(r),[e]),"select-option",e),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e)}}));else n.isOptionDisabled(e,r)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e),isDisabled:!0}}):(n.setValue(e,"select-option"),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e)}}));s&&n.blurInput()})),Td(Dd(Dd(n)),"removeValue",(function(e){var t=n.state.selectValue,s=n.getOptionValue(e);n.onChange(t.filter((function(e){return n.getOptionValue(e)!==s})),{action:"remove-value",removedValue:e}),n.announceAriaLiveSelection({event:"remove-value",context:{value:e?n.getOptionLabel(e):""}}),n.focusInput()})),Td(Dd(Dd(n)),"clearValue",(function(){var e=n.props.isMulti;n.onChange(e?[]:null,{action:"clear"})})),Td(Dd(Dd(n)),"popValue",(function(){var e=n.state.selectValue,t=e[e.length-1];n.announceAriaLiveSelection({event:"pop-value",context:{value:t?n.getOptionLabel(t):""}}),n.onChange(e.slice(0,e.length-1),{action:"pop-value",removedValue:t})})),Td(Dd(Dd(n)),"getOptionLabel",(function(e){return n.props.getOptionLabel(e)})),Td(Dd(Dd(n)),"getOptionValue",(function(e){return n.props.getOptionValue(e)})),Td(Dd(Dd(n)),"getStyles",(function(e,t){var s=$h[e](t);s.boxSizing="border-box";var i=n.props.styles[e];return i?i(s,t):s})),Td(Dd(Dd(n)),"getElementId",(function(e){return"".concat(n.instancePrefix,"-").concat(e)})),Td(Dd(Dd(n)),"getActiveDescendentId",(function(){var e=n.props.menuIsOpen,t=n.state,s=t.menuOptions,i=t.focusedOption;if(i&&e){var r=s.focusable.indexOf(i),a=s.render[r];return a&&a.key}})),Td(Dd(Dd(n)),"announceAriaLiveSelection",(function(e){var t=e.event,s=e.context;n.setState({ariaLiveSelection:Th(t,s)})})),Td(Dd(Dd(n)),"announceAriaLiveContext",(function(e){var t=e.event,s=e.context;n.setState({ariaLiveContext:xh(t,Md({},s,{label:n.props["aria-label"]}))})})),Td(Dd(Dd(n)),"onMenuMouseDown",(function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),n.focusInput())})),Td(Dd(Dd(n)),"onMenuMouseMove",(function(e){n.blockOptionHover=!1})),Td(Dd(Dd(n)),"onControlMouseDown",(function(e){var t=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?"INPUT"!==e.target.tagName&&n.onMenuClose():t&&n.openMenu("first"):(t&&(n.openAfterFocus=!0),n.focusInput()),"INPUT"!==e.target.tagName&&e.preventDefault()})),Td(Dd(Dd(n)),"onDropdownIndicatorMouseDown",(function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||n.props.isDisabled)){var t=n.props,s=t.isMulti,i=t.menuIsOpen;n.focusInput(),i?(n.inputIsHiddenAfterUpdate=!s,n.onMenuClose()):n.openMenu("first"),e.preventDefault(),e.stopPropagation()}})),Td(Dd(Dd(n)),"onClearIndicatorMouseDown",(function(e){e&&"mousedown"===e.type&&0!==e.button||(n.clearValue(),e.stopPropagation(),n.openAfterFocus=!1,setTimeout((function(){return n.focusInput()})))})),Td(Dd(Dd(n)),"onScroll",(function(e){"boolean"==typeof n.props.closeMenuOnScroll?e.target instanceof HTMLElement&&Vd(e.target)&&n.props.onMenuClose():"function"==typeof n.props.closeMenuOnScroll&&n.props.closeMenuOnScroll(e)&&n.props.onMenuClose()})),Td(Dd(Dd(n)),"onCompositionStart",(function(){n.isComposing=!0})),Td(Dd(Dd(n)),"onCompositionEnd",(function(){n.isComposing=!1})),Td(Dd(Dd(n)),"onTouchStart",(function(e){var t=e.touches.item(0);t&&(n.initialTouchX=t.clientX,n.initialTouchY=t.clientY,n.userIsDragging=!1)})),Td(Dd(Dd(n)),"onTouchMove",(function(e){var t=e.touches.item(0);if(t){var s=Math.abs(t.clientX-n.initialTouchX),i=Math.abs(t.clientY-n.initialTouchY);n.userIsDragging=s>5||i>5}})),Td(Dd(Dd(n)),"onTouchEnd",(function(e){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(e.target)&&n.menuListRef&&!n.menuListRef.contains(e.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)})),Td(Dd(Dd(n)),"onControlTouchEnd",(function(e){n.userIsDragging||n.onControlMouseDown(e)})),Td(Dd(Dd(n)),"onClearIndicatorTouchEnd",(function(e){n.userIsDragging||n.onClearIndicatorMouseDown(e)})),Td(Dd(Dd(n)),"onDropdownIndicatorTouchEnd",(function(e){n.userIsDragging||n.onDropdownIndicatorMouseDown(e)})),Td(Dd(Dd(n)),"handleInputChange",(function(e){var t=e.currentTarget.value;n.inputIsHiddenAfterUpdate=!1,n.onInputChange(t,{action:"input-change"}),n.onMenuOpen()})),Td(Dd(Dd(n)),"onInputFocus",(function(e){var t=n.props,s=t.isSearchable,i=t.isMulti;n.props.onFocus&&n.props.onFocus(e),n.inputIsHiddenAfterUpdate=!1,n.announceAriaLiveContext({event:"input",context:{isSearchable:s,isMulti:i}}),n.setState({isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1})),Td(Dd(Dd(n)),"onInputBlur",(function(e){n.menuListRef&&n.menuListRef.contains(document.activeElement)?n.inputRef.focus():(n.props.onBlur&&n.props.onBlur(e),n.onInputChange("",{action:"input-blur"}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1}))})),Td(Dd(Dd(n)),"onOptionHover",(function(e){n.blockOptionHover||n.state.focusedOption===e||n.setState({focusedOption:e})})),Td(Dd(Dd(n)),"shouldHideSelectedOptions",(function(){var e=n.props,t=e.hideSelectedOptions,s=e.isMulti;return void 0===t?s:t})),Td(Dd(Dd(n)),"onKeyDown",(function(e){var t=n.props,s=t.isMulti,i=t.backspaceRemovesValue,r=t.escapeClearsValue,a=t.inputValue,o=t.isClearable,l=t.isDisabled,c=t.menuIsOpen,u=t.onKeyDown,d=t.tabSelectsValue,h=t.openMenuOnFocus,p=n.state,f=p.focusedOption,m=p.focusedValue,g=p.selectValue;if(!(l||"function"==typeof u&&(u(e),e.defaultPrevented))){switch(n.blockOptionHover=!0,e.key){case"ArrowLeft":if(!s||a)return;n.focusValue("previous");break;case"ArrowRight":if(!s||a)return;n.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(m)n.removeValue(m);else{if(!i)return;s?n.popValue():o&&n.clearValue()}break;case"Tab":if(n.isComposing)return;if(e.shiftKey||!c||!d||!f||h&&n.isOptionSelected(f,g))return;n.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(c){if(!f)return;if(n.isComposing)return;n.selectOption(f);break}return;case"Escape":c?(n.inputIsHiddenAfterUpdate=!1,n.onInputChange("",{action:"menu-close"}),n.onMenuClose()):o&&r&&n.clearValue();break;case" ":if(a)return;if(!c){n.openMenu("first");break}if(!f)return;n.selectOption(f);break;case"ArrowUp":c?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":c?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!c)return;n.focusOption("pageup");break;case"PageDown":if(!c)return;n.focusOption("pagedown");break;case"Home":if(!c)return;n.focusOption("first");break;case"End":if(!c)return;n.focusOption("last");break;default:return}e.preventDefault()}}));var s=e.value;n.cacheComponents=gc(n.cacheComponents,lh).bind(Dd(Dd(n))),n.cacheComponents(e.components),n.instancePrefix="react-select-"+(n.props.instanceId||++Zh);var i=Bd(s),r=n.buildMenuOptions(e,i);return n.state.menuOptions=r,n.state.selectValue=i,n}return Id(t,d.exports.Component),xd(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.options,s=t.value,i=t.inputValue;if(this.cacheComponents(e.components),e.value!==s||e.options!==n||e.inputValue!==i){var r=Bd(e.value),a=this.buildMenuOptions(e,r),o=this.getNextFocusedValue(r),l=this.getNextFocusedOption(a.focusable);this.setState({menuOptions:a,selectValue:r,focusedOption:l,focusedValue:o})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(e){var t,n,s,i,r,a=this.props,o=a.isDisabled,l=a.menuIsOpen,c=this.state.isFocused;(c&&!o&&e.isDisabled||c&&l&&!e.menuIsOpen)&&this.focusInput(),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(t=this.menuListRef,n=this.focusedOptionRef,s=t.getBoundingClientRect(),i=n.getBoundingClientRect(),r=n.offsetHeight/3,i.bottom+r>s.bottom?Wd(t,Math.min(n.offsetTop+n.clientHeight-t.offsetHeight+r,t.scrollHeight)):i.top-r<s.top&&Wd(t,Math.max(n.offsetTop-r,0))),this.scrollToFocusedOptionOnUpdate=!1}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var e=this.props,t=e.isSearchable,n=e.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:t,isMulti:n}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this.state,n=t.menuOptions,s=t.selectValue,i=t.isFocused,r=this.props.isMulti,a="first"===e?0:n.focusable.length-1;if(!r){var o=n.focusable.indexOf(s[0]);o>-1&&(a=o)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.onMenuOpen(),this.setState({focusedValue:null,focusedOption:n.focusable[a]}),this.announceAriaLiveContext({event:"menu"})}},{key:"focusValue",value:function(e){var t=this.props,n=t.isMulti,s=t.isSearchable,i=this.state,r=i.selectValue,a=i.focusedValue;if(n){this.setState({focusedOption:null});var o=r.indexOf(a);a||(o=-1,this.announceAriaLiveContext({event:"value"}));var l=r.length-1,c=-1;if(r.length){switch(e){case"previous":c=0===o?0:-1===o?l:o-1;break;case"next":o>-1&&o<l&&(c=o+1)}-1===c&&this.announceAriaLiveContext({event:"input",context:{isSearchable:s,isMulti:n}}),this.setState({inputIsHidden:-1!==c,focusedValue:r[c]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state,s=n.focusedOption,i=n.menuOptions,r=i.focusable;if(r.length){var a=0,o=r.indexOf(s);s||(o=-1,this.announceAriaLiveContext({event:"menu"})),"up"===e?a=o>0?o-1:r.length-1:"down"===e?a=(o+1)%r.length:"pageup"===e?(a=o-t)<0&&(a=0):"pagedown"===e?(a=o+t)>r.length-1&&(a=r.length-1):"last"===e&&(a=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[a],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:Nh(r[a])}})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(Qh):Md({},Qh,this.props.theme):Qh}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.getStyles,n=this.setValue,s=this.selectOption,i=this.props,r=i.classNamePrefix,a=i.isMulti,o=i.isRtl,l=i.options,c=this.state.selectValue,u=this.hasValue();return{cx:qd.bind(null,r),clearValue:e,getStyles:t,getValue:function(){return c},hasValue:u,isMulti:a,isRtl:o,options:l,selectOption:s,setValue:n,selectProps:i,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(e){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var t=this.state,n=t.focusedValue,s=t.selectValue.indexOf(n);if(s>-1){if(e.indexOf(n)>-1)return n;if(s<e.length)return e[s]}return null}},{key:"getNextFocusedOption",value:function(e){var t=this.state.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(e,t)}},{key:"isOptionSelected",value:function(e,t){var n=this;if(t.indexOf(e)>-1)return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(e,t);var s=this.getOptionValue(e);return t.some((function(e){return n.getOptionValue(e)===s}))}},{key:"filterOption",value:function(e,t){return!this.props.filterOption||this.props.filterOption(e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,s=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:s})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"buildMenuOptions",value:function(e,t){var n=this,s=e.inputValue,i=void 0===s?"":s,r=e.options,a=function(e,s){var r=n.isOptionDisabled(e,t),a=n.isOptionSelected(e,t),o=n.getOptionLabel(e),l=n.getOptionValue(e);if(!(n.shouldHideSelectedOptions()&&a||!n.filterOption({label:o,value:l,data:e},i))){var c=r?void 0:function(){return n.onOptionHover(e)},u=r?void 0:function(){return n.selectOption(e)},d="".concat(n.getElementId("option"),"-").concat(s);return{innerProps:{id:d,onClick:u,onMouseMove:c,onMouseOver:c,tabIndex:-1},data:e,isDisabled:r,isSelected:a,key:d,label:o,type:"option",value:l}}};return r.reduce((function(e,t,s){if(t.options){n.hasGroups||(n.hasGroups=!0);var i=t.options.map((function(t,n){var i=a(t,"".concat(s,"-").concat(n));return i&&e.focusable.push(t),i})).filter(Boolean);if(i.length){var r="".concat(n.getElementId("group"),"-").concat(s);e.render.push({type:"group",key:r,data:t,options:i})}}else{var o=a(t,"".concat(s));o&&(e.render.push(o),e.focusable.push(t))}return e}),{render:[],focusable:[]})}},{key:"constructAriaLiveMessage",value:function(){var e=this.state,t=e.ariaLiveContext,n=e.selectValue,s=e.focusedValue,i=e.focusedOption,r=this.props,a=r.options,o=r.menuIsOpen,l=r.inputValue,c=r.screenReaderStatus,u=s?function(e){var t=e.focusedValue,n=e.getOptionLabel,s=e.selectValue;return"value ".concat(n(t)," focused, ").concat(s.indexOf(t)+1," of ").concat(s.length,".")}({focusedValue:s,getOptionLabel:this.getOptionLabel,selectValue:n}):"",d=i&&o?function(e){var t=e.focusedOption,n=e.getOptionLabel,s=e.options;return"option ".concat(n(t)," focused").concat(t.isDisabled?" disabled":"",", ").concat(s.indexOf(t)+1," of ").concat(s.length,".")}({focusedOption:i,getOptionLabel:this.getOptionLabel,options:a}):"",h=function(e){var t=e.inputValue,n=e.screenReaderMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}({inputValue:l,screenReaderMessage:c({count:this.countOptions()})});return"".concat(u," ").concat(d," ").concat(h," ").concat(t)}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,n=e.isSearchable,s=e.inputId,i=e.inputValue,r=e.tabIndex,a=this.components.Input,l=this.state.inputIsHidden,c=s||this.getElementId("input");if(!n)return h(fh,{id:c,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Hd,onFocus:this.onInputFocus,readOnly:!0,disabled:t,tabIndex:r,value:""});var u={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]},d=this.commonProps,p=d.cx,f=d.theme,m=d.selectProps;return h(a,o({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:p,getStyles:this.getStyles,id:c,innerRef:this.getInputRef,isDisabled:t,isHidden:l,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:m,spellCheck:"false",tabIndex:r,theme:f,type:"text",value:i},u))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.components,n=t.MultiValue,s=t.MultiValueContainer,i=t.MultiValueLabel,r=t.MultiValueRemove,a=t.SingleValue,c=t.Placeholder,u=this.commonProps,p=this.props,f=p.controlShouldRenderValue,m=p.isDisabled,g=p.isMulti,v=p.inputValue,b=p.placeholder,y=this.state,C=y.selectValue,E=y.focusedValue,w=y.isFocused;if(!this.hasValue()||!f)return v?null:d.exports.createElement(c,l(o({},u),{key:"placeholder",isDisabled:m,isFocused:w}),b);if(g)return C.map((function(t){var a=t===E;return d.exports.createElement(n,l(o({},u),{components:{Container:s,Label:i,Remove:r},isFocused:a,isDisabled:m,key:e.getOptionValue(t),removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},data:t}),e.formatOptionLabel(t,"value"))}));if(v)return null;var S=C[0];return h(a,l(o({},u),{data:S,isDisabled:m,children:this.formatOptionLabel(S,"value")}))}},{key:"renderClearIndicator",value:function(){var e=this.components.ClearIndicator,t=this.commonProps,n=this.props,s=n.isDisabled,i=n.isLoading,r=this.state.isFocused;if(!this.isClearable()||!e||s||!this.hasValue()||i)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return h(e,l(o({},t),{innerProps:a,isFocused:r}))}},{key:"renderLoadingIndicator",value:function(){var e=this.components.LoadingIndicator,t=this.commonProps,n=this.props,s=n.isDisabled,i=n.isLoading,r=this.state.isFocused;if(!e||!i)return null;return h(e,l(o({},t),{innerProps:{"aria-hidden":"true"},isDisabled:s,isFocused:r}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.components,t=e.DropdownIndicator,n=e.IndicatorSeparator;if(!t||!n)return null;var s=this.commonProps,i=this.props.isDisabled,r=this.state.isFocused;return h(n,l(o({},s),{isDisabled:i,isFocused:r}))}},{key:"renderDropdownIndicator",value:function(){var e=this.components.DropdownIndicator;if(!e)return null;var t=this.commonProps,n=this.props.isDisabled,s=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return h(e,l(o({},t),{innerProps:i,isDisabled:n,isFocused:s}))}},{key:"renderMenu",value:function(){var e=this,t=this.components,n=t.Group,s=t.GroupHeading,i=t.Menu,r=t.MenuList,a=t.MenuPortal,c=t.LoadingMessage,u=t.NoOptionsMessage,d=t.Option,p=this.commonProps,f=this.state,m=f.focusedOption,g=f.menuOptions,v=this.props,b=v.captureMenuScroll,y=v.inputValue,C=v.isLoading,E=v.loadingMessage,w=v.minMenuHeight,S=v.maxMenuHeight,_=v.menuIsOpen,A=v.menuPlacement,k=v.menuPosition,P=v.menuPortalTarget,x=v.menuShouldBlockScroll,T=v.menuShouldScrollIntoView,N=v.noOptionsMessage,M=v.onMenuScrollToTop,I=v.onMenuScrollToBottom;if(!_)return null;var O,R=function(t){var n=m===t.data;return t.innerRef=n?e.getFocusedOptionRef:void 0,h(d,l(o(o({},p),t),{isFocused:n,children:e.formatOptionLabel(t.data,"menu")}))};if(this.hasOptions())O=g.render.map((function(t){if("group"===t.type){t.type;var i=Ld(t,["type"]),r="".concat(t.key,"-heading");return h(n,l(o(o({},p),i),{Heading:s,headingProps:{id:r},label:e.formatGroupLabel(t.data),children:t.options.map((function(e){return R(e)}))}))}if("option"===t.type)return R(t)}));else if(C){var L=E({inputValue:y});if(null===L)return null;O=h(c,l(o({},p),{children:L}))}else{var D=N({inputValue:y});if(null===D)return null;O=h(u,l(o({},p),{children:D}))}var F={minMenuHeight:w,maxMenuHeight:S,menuPlacement:A,menuPosition:k,menuShouldScrollIntoView:T},j=h(Qd,l(o(o({},p),F),{children:function(t){var n=t.ref,s=t.placerProps,a=s.placement,c=s.maxHeight;return h(i,l(o(o({},p),F),{innerRef:n,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:C,placement:a,children:h(Ph,{isEnabled:b,onTopArrive:M,onBottomArrive:I,children:h(Ah,{isEnabled:x,children:h(r,l(o({},p),{innerRef:e.getMenuListRef,isLoading:C,maxHeight:c,children:O}))})})}))}}));return P||"fixed"===k?h(a,l(o({},p),{appendTo:P,controlElement:this.controlRef,menuPlacement:A,menuPosition:k,children:j})):j}},{key:"renderFormField",value:function(){var e=this,t=this.props,n=t.delimiter,s=t.isDisabled,i=t.isMulti,r=t.name,a=this.state.selectValue;if(r&&!s){if(i){if(n){var o=a.map((function(t){return e.getOptionValue(t)})).join(n);return h("input",{name:r,type:"hidden",value:o})}var l=a.length>0?a.map((function(t,n){return h("input",{name:r,type:"hidden",value:e.getOptionValue(t)},"i-".concat(n))})):h("input",{name:r,type:"hidden"});return h("div",{children:l})}var c=a[0]?this.getOptionValue(a[0]):"";return h("input",{name:r,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?m(ph,{"aria-live":"assertive",children:[m("p",{id:"aria-selection-event",children:[" ",this.state.ariaLiveSelection]}),m("p",{id:"aria-context",children:[" ",this.constructAriaLiveMessage()]})]}):null}},{key:"render",value:function(){var e=this.components,t=e.Control,n=e.IndicatorsContainer,s=e.SelectContainer,i=e.ValueContainer,r=this.props,a=r.className,c=r.id,u=r.isDisabled,d=r.menuIsOpen,h=this.state.isFocused,p=this.commonProps=this.getCommonProps();return m(s,l(o({},p),{className:a,innerProps:{id:c,onKeyDown:this.onKeyDown},isDisabled:u,isFocused:h,children:[this.renderLiveRegion(),m(t,l(o({},p),{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:u,isFocused:h,menuIsOpen:d,children:[m(i,l(o({},p),{isDisabled:u,children:[this.renderPlaceholderOrValue(),this.renderInput()]})),m(n,l(o({},p),{isDisabled:u,children:[this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator()]}))]})),this.renderMenu(),this.renderFormField()]}))}}]),t}();Td(ep,"defaultProps",Jh);var tp={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},np=function(e){var t,n;return n=t=function(t){function n(){var e,t;kd(this,n);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return Td(Dd(Dd(t=Fd(this,(e=Od(n)).call.apply(e,[this].concat(i))))),"select",void 0),Td(Dd(Dd(t)),"state",{inputValue:void 0!==t.props.inputValue?t.props.inputValue:t.props.defaultInputValue,menuIsOpen:void 0!==t.props.menuIsOpen?t.props.menuIsOpen:t.props.defaultMenuIsOpen,value:void 0!==t.props.value?t.props.value:t.props.defaultValue}),Td(Dd(Dd(t)),"onChange",(function(e,n){t.callProp("onChange",e,n),t.setState({value:e})})),Td(Dd(Dd(t)),"onInputChange",(function(e,n){var s=t.callProp("onInputChange",e,n);t.setState({inputValue:void 0!==s?s:e})})),Td(Dd(Dd(t)),"onMenuOpen",(function(){t.callProp("onMenuOpen"),t.setState({menuIsOpen:!0})})),Td(Dd(Dd(t)),"onMenuClose",(function(){t.callProp("onMenuClose"),t.setState({menuIsOpen:!1})})),t}return Id(n,d.exports.Component),xd(n,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(e){return void 0!==this.props[e]?this.props[e]:this.state[e]}},{key:"callProp",value:function(e){if("function"==typeof this.props[e]){for(var t,n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return(t=this.props)[e].apply(t,s)}}},{key:"render",value:function(){var t=this,n=this.props;n.defaultInputValue,n.defaultMenuIsOpen,n.defaultValue;var s=Ld(n,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return h(e,l(o({},s),{ref:function(e){t.select=e},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),n}(),Td(t,"defaultProps",tp),n},sp={cacheOptions:!1,defaultOptions:!1,filterOption:null},ip=function(e){var t,n;return n=t=function(t){function n(e){var t;return kd(this,n),Td(Dd(Dd(t=Fd(this,Od(n).call(this)))),"select",void 0),Td(Dd(Dd(t)),"lastRequest",void 0),Td(Dd(Dd(t)),"mounted",!1),Td(Dd(Dd(t)),"optionsCache",{}),Td(Dd(Dd(t)),"handleInputChange",(function(e,n){var s=t.props,i=s.cacheOptions,r=function(e,t,n){if(n){var s=n(e,t);if("string"==typeof s)return s}return e}(e,n,s.onInputChange);if(!r)return delete t.lastRequest,void t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(i&&t.optionsCache[r])t.setState({inputValue:r,loadedInputValue:r,loadedOptions:t.optionsCache[r],isLoading:!1,passEmptyOptions:!1});else{var a=t.lastRequest={};t.setState({inputValue:r,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},(function(){t.loadOptions(r,(function(e){t.mounted&&(e&&(t.optionsCache[r]=e),a===t.lastRequest&&(delete t.lastRequest,t.setState({isLoading:!1,loadedInputValue:r,loadedOptions:e||[],passEmptyOptions:!1})))}))}))}return r})),t.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:void 0!==e.inputValue?e.inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},t}return Id(n,d.exports.Component),xd(n,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.defaultOptions,n=this.state.inputValue;!0===t&&this.loadOptions(n,(function(t){if(e.mounted){var n=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:n})}}))}},{key:"componentWillReceiveProps",value:function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),e.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(e,t){var n=this.props.loadOptions;if(!n)return t();var s=n(e,t);s&&"function"==typeof s.then&&s.then(t,(function(){return t()}))}},{key:"render",value:function(){var t=this,n=this.props;n.loadOptions;var s=Ld(n,["loadOptions"]),i=this.state,r=i.defaultOptions,a=i.inputValue,c=i.isLoading,u=i.loadedInputValue,d=i.loadedOptions,p=i.passEmptyOptions?[]:a&&u?d:r||[];return h(e,l(o({},s),{ref:function(e){t.select=e},options:p,isLoading:c,onInputChange:this.handleInputChange}))}}]),n}(),Td(t,"defaultProps",sp),n};ip(np(ep));var rp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=String(e).toLowerCase(),s=String(t.value).toLowerCase(),i=String(t.label).toLowerCase();return s===n||i===n},ap=Md({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n){return!(!e||t.some((function(t){return rp(e,t)}))||n.some((function(t){return rp(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),op=function(e){var t,n;return n=t=function(t){function n(e){var t;kd(this,n),Td(Dd(Dd(t=Fd(this,Od(n).call(this,e)))),"select",void 0),Td(Dd(Dd(t)),"onChange",(function(e,n){var s=t.props,i=s.getNewOptionData,r=s.inputValue,a=s.isMulti,o=s.onChange,l=s.onCreateOption,c=s.value;if("select-option"!==n.action)return o(e,n);var u=t.state.newOption,d=Array.isArray(e)?e:[e];if(d[d.length-1]!==u)o(e,n);else if(l)l(r);else{var h=i(r,r),p={action:"create-option"};o(a?[].concat(jd(Bd(c)),[h]):h,p)}}));var s=e.options||[];return t.state={newOption:void 0,options:s},t}return Id(n,d.exports.Component),xd(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,s=e.formatCreateLabel,i=e.getNewOptionData,r=e.inputValue,a=e.isLoading,o=e.isValidNewOption,l=e.value,c=e.options||[],u=this.state.newOption;u=o(r,Bd(l),c)?i(r,s(r)):void 0,this.setState({newOption:u,options:!t&&a||!u?c:"first"===n?[u].concat(jd(c)):[].concat(jd(c),[u])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,n=Nd({},this.props),s=this.state.options;return h(e,l(o({},n),{ref:function(e){t.select=e},options:s,onChange:this.onChange}))}}]),n}(),Td(t,"defaultProps",ap),n};np(op(ep)),ip(np(op(ep)));var lp=function(e){return function(t){t.in,t.onExited,t.appear,t.enter,t.exit;var n=Ld(t,["in","onExited","appear","enter","exit"]);return h(e,o({},n))}},cp=function(e){var t=e.component,n=e.duration,s=void 0===n?1:n,i=e.in;e.onExited;var r=Ld(e,["component","duration","in","onExited"]),a={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(s,"ms")},exiting:{opacity:0},exited:{opacity:0}};return h(_d.Transition,{mountOnEnter:!0,unmountOnExit:!0,in:i,timeout:s,children:function(e){var n={style:Md({},a[e])};return h(t,o({innerProps:n},r))}})},up=function(e){function t(){var e,n;kd(this,t);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return Td(Dd(Dd(n=Fd(this,(e=Od(t)).call.apply(e,[this].concat(i))))),"duration",260),Td(Dd(Dd(n)),"rafID",void 0),Td(Dd(Dd(n)),"state",{width:"auto"}),Td(Dd(Dd(n)),"transition",{exiting:{width:0,transition:"width ".concat(n.duration,"ms ease-out")},exited:{width:0}}),Td(Dd(Dd(n)),"getWidth",(function(e){e&&isNaN(n.state.width)&&(n.rafID=window.requestAnimationFrame((function(){var t=e.getBoundingClientRect().width;n.setState({width:t})})))})),Td(Dd(Dd(n)),"getStyle",(function(e){return{overflow:"hidden",whiteSpace:"nowrap",width:e}})),Td(Dd(Dd(n)),"getTransition",(function(e){return n.transition[e]})),n}return Id(t,d.exports.Component),xd(t,[{key:"componentWillUnmount",value:function(){this.rafID&&window.cancelAnimationFrame(this.rafID)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,s=t.in,i=this.state.width;return h(_d.Transition,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:s,timeout:this.duration,children:function(t){var s=Md({},e.getStyle(i),e.getTransition(t));return h("div",{ref:e.getWidth,style:s,children:n})}})}}]),t}(),dp=function(e){return function(t){var n=t.in,s=t.onExited,i=Ld(t,["in","onExited"]);return h(up,{in:n,onExited:s,children:h(e,o({cropWithEllipsis:n},i))})}},hp=function(e){return function(t){return h(cp,o({component:e,duration:t.isMulti?260:1},t))}},pp=function(e){return function(t){return h(cp,o({component:e},t))}},fp=function(e){return function(t){return h(_d.TransitionGroup,o({component:e},t))}},mp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Xh({components:e}),n=t.Input,s=t.MultiValue,i=t.Placeholder,r=t.SingleValue,a=t.ValueContainer,o=Ld(t,["Input","MultiValue","Placeholder","SingleValue","ValueContainer"]);return Md({Input:lp(n),MultiValue:dp(s),Placeholder:hp(i),SingleValue:pp(r),ValueContainer:fp(a)},o)},gp=mp();gp.Input,gp.MultiValue,gp.Placeholder,gp.SingleValue,gp.ValueContainer,gc(mp,lh);var vp=np(ep);class bp extends f.PureComponent{render(){const e=this.props,{saving:t,disabled:n,savingMessage:s,defaultMessage:i,btnClass:r,extraClasses:a}=e,u=c(e,["saving","disabled","savingMessage","defaultMessage","btnClass","extraClasses"]);let d="save-button btn";return n&&!t||(d+=" "+r),a&&(d+=" "+a),h("button",l(o({type:"submit","data-testid":"saveSetting",id:"saveSetting",className:d,disabled:n},u),{children:t?h(Co,{text:s}):i}))}}u(bp,"defaultProps",{btnClass:"btn-primary",defaultMessage:h(v,{id:"save_button.save",defaultMessage:"Save"}),disabled:!1,extraClasses:"",savingMessage:h(v,{id:"save_button.saving",defaultMessage:"Saving"})});var yp="mqik-c2cc995f",Cp="mqik-d13c0f84",Ep="mqik-1dc5802d",wp="mqik-d484b42d",Sp="mqik-6f2202cd",_p="mqik-c8174adb",Ap="mqik-d76f319d",kp="mqik-4608ac90",Pp="mqik-81ce701b",xp="mqik-138c5be9",Tp="mqik-f061ac60";const Np=ve.KeyCodes;class Mp extends f.PureComponent{constructor(e){super(e),u(this,"toSelect",-1),u(this,"listRef",f.createRef()),u(this,"selectedItemRef",f.createRef()),u(this,"setSelected",(e=>{this.setState({selected:e})})),u(this,"handleArrowPress",(e=>{if(rt(e)&&e.shiftKey)return;const t=this.props.options;if(0===t.length)return;let n;switch(e.key){case Np.DOWN[0]:if(-1===this.state.selected){n=0;break}n=Math.min(this.state.selected+1,t.length-1);break;case Np.UP[0]:if(-1===this.state.selected){n=0;break}n=Math.max(this.state.selected-1,0);break;default:return}e.preventDefault(),this.setState({selected:n}),this.props.onSelect(t[n])})),u(this,"defaultOptionRenderer",((e,t,n,s)=>{let i="";return t&&(i="more-modal__row--selected"),h("div",{ref:t?this.selectedItemRef:e.value,className:i,onClick:()=>n(e),onMouseEnter:()=>s(e),children:e.label},"multiselectoption"+e.value)})),u(this,"select",(e=>{const t=this.props.options.indexOf(e);-1!==t&&this.state.selected!==t&&this.setSelected(t)})),this.state={selected:-1}}componentDidMount(){document.addEventListener("keydown",this.handleArrowPress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleArrowPress)}componentDidUpdate(e,t){var n;const s=this.props.options;if(s&&s.length>0&&this.state.selected>=0&&this.props.onSelect(s[this.state.selected]),t.selected===this.state.selected)return;const i=this.selectedItemRef.current||(null==(n=this.props.selectedItemRef)?void 0:n.current);if(this.listRef.current&&i){const e=i.getBoundingClientRect().top,t=i.getBoundingClientRect().bottom,n=this.listRef.current.getBoundingClientRect().top;t>this.listRef.current.getBoundingClientRect().bottom?i.scrollIntoView(!1):e<n&&i.scrollIntoView(!0)}}render(){const e=this.props.options;let t;if(this.props.loading)t=h("div",{"aria-hidden":!0,className:Pp,children:h(ne,{position:"relative"},"loading")});else if(null==e||0===e.length)t=h("div",{className:g(Pp,"no-channel-message"),children:h("p",{className:"primary-message",children:h($o,{id:"multiselect.list.notFound",defaultMessage:"No results found matching **{searchQuery}**",values:{searchQuery:this.props.query}})})},"no-users-found");else{let n;n=this.props.optionRenderer?this.props.optionRenderer:this.defaultOptionRenderer;const s=e.map(((e,t)=>n(e,this.state.selected===t,this.props.onAdd,this.select))),i=e[this.state.selected],r=this.props.ariaLabelRenderer(i);t=m("div",{className:g(_p,"more-modal__list"),children:[h("div",{className:g(Ap),"aria-live":"polite","aria-atomic":"true",children:r}),h("div",{ref:this.listRef,id:"multiSelectList",className:g(kp,"more-modal__options"),role:"presentation","aria-hidden":!0,children:s})]})}return h("div",{className:g(Sp,"multi-select__wrapper"),"aria-live":"polite",children:t})}}u(Mp,"defaultProps",{options:[],perPage:50,onAction:()=>null});const Ip=ve.KeyCodes;class Op extends f.PureComponent{constructor(e){super(e),u(this,"listRef",f.createRef()),u(this,"reactSelectRef",f.createRef()),u(this,"selected",null),u(this,"handleA11yActivateEvent",(()=>{this.setState({a11yActive:!0})})),u(this,"handleA11yDeactivateEvent",(()=>{this.setState({a11yActive:!1})})),u(this,"nextPage",(()=>{this.props.handlePageChange&&this.props.handlePageChange(this.state.page+1,this.state.page),this.listRef.current&&this.listRef.current.setSelected(0),this.setState({page:this.state.page+1})})),u(this,"prevPage",(()=>{0!==this.state.page&&(this.props.handlePageChange&&this.props.handlePageChange(this.state.page-1,this.state.page),this.listRef.current&&this.listRef.current.setSelected(0),this.setState({page:this.state.page-1}))})),u(this,"resetPaging",(()=>{this.setState({page:0})})),u(this,"onSelect",(e=>{this.selected=e})),u(this,"onAdd",(e=>{if(this.props.maxValues&&this.props.values.length>=this.props.maxValues)return;for(let n=0;n<this.props.values.length;n++)if(this.props.values[n].id===e.id)return;this.props.handleAdd(e),this.selected=null,this.reactSelectRef.current&&(this.reactSelectRef.current.select.handleInputChange({currentTarget:{value:""}}),this.reactSelectRef.current.focus());const t=this.props.submitImmediatelyOn;t&&t(e)&&this.props.handleSubmit([e])})),u(this,"onInput",((e,t)=>{t&&"input-blur"!==t.action&&"menu-close"!==t.action&&this.state.input!==e&&(this.setState({input:e}),this.listRef.current&&(""===e?this.listRef.current.setSelected(-1):this.listRef.current.setSelected(0)),this.selected=null,this.props.handleInput(e,this))})),u(this,"onInputKeyDown",(e=>{switch(e.key){case Ip.ENTER[0]:e.preventDefault()}})),u(this,"handleEnterPress",(e=>{switch(e.key){case Ip.ENTER[0]:if(null==this.selected)return void this.props.handleSubmit();this.onAdd(this.selected)}})),u(this,"handleOnClick",(e=>{e.preventDefault(),this.props.handleSubmit()})),u(this,"onChange",((e,t)=>{if("remove-value"!==t.action&&"pop-value"!==t.action)return;const n=[...this.props.values];for(let s=0;s<n.length;s++)if(n[s].id===t.removedValue.id){n.splice(s,1);break}this.props.handleDelete(n)})),u(this,"MultiValueRemove",(({children:e,innerProps:t})=>h("div",l(o({},t),{children:e||h(_o,{className:Ep})})))),u(this,"formatOptionLabel",(e=>{const t=_t(e.id,e.last_picture_update);return m(f.Fragment,{children:[h(io,{size:"sm",username:e.username,url:t}),h("div",{className:g(wp,"react-select__value__name"),children:At(e)})]})})),u(this,"valueRenderer",(e=>this.props.valueWithImage?h(Yh.MultiValueLabel,o({},e)):this.props.valueRenderer)),this.state={a11yActive:!1,page:0,input:""}}componentDidMount(){const e=this.reactSelectRef.current&&this.reactSelectRef.current.select.inputRef;document.addEventListener("keydown",this.handleEnterPress),e&&"function"==typeof e.addEventListener&&(e.addEventListener(St.ACTIVATE,this.handleA11yActivateEvent),e.addEventListener(St.DEACTIVATE,this.handleA11yDeactivateEvent),this.reactSelectRef.current.focus())}componentWillUnmount(){const e=this.reactSelectRef.current&&this.reactSelectRef.current.select.inputRef;e&&"function"==typeof e.addEventListener&&(e.removeEventListener(St.ACTIVATE,this.handleA11yActivateEvent),e.removeEventListener(St.DEACTIVATE,this.handleA11yDeactivateEvent)),document.removeEventListener("keydown",this.handleEnterPress)}render(){const e=Object.assign([...this.props.options]),{totalCount:t,users:n,values:s}=this.props;let i,r;this.props.numRemainingText?i=this.props.numRemainingText:null!=this.props.maxValues&&(i=h(v,{id:"multiselect.numRemaining",defaultMessage:"You can add {num, number} more. ",values:{num:this.props.maxValues-this.props.values.length}})),this.props.buttonSubmitText?r=this.props.buttonSubmitText:null!=this.props.maxValues&&(r=h(v,{id:"multiselect.go",defaultMessage:"Go"}));let a,o,l,c=[];this.props.noteText&&(l=m("div",{className:"multi-select__note",children:[h("div",{className:"note__icon",children:h(v,{id:"generic_icons.info",defaultMessage:"Info Icon",children:e=>h("span",{className:"fa fa-info",title:e})})}),h("div",{children:this.props.noteText})]}));const u={};for(let h=0;h<s.length;h++)u[s[h].id]=!0;for(let h=e.length-1;h>=0;h--)u[e[h].id]&&e.splice(h,1);if(e&&e.length>this.props.perPage){const t=this.state.page*this.props.perPage,n=t+this.props.perPage;c=e.slice(t,n),this.props.loading||(e.length>n&&(a=h("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,children:h(v,{id:"filtered_user_list.next",defaultMessage:"Next"})})),this.state.page>0&&(o=h("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.prevPage,children:h(v,{id:"filtered_user_list.prev",defaultMessage:"Previous"})})))}else c=e;let d,p;return"bottom"===this.props.saveButtonPosition?this.state.input&&(d=h(Mp,{ref:this.listRef,options:c,optionRenderer:this.props.optionRenderer,ariaLabelRenderer:this.props.ariaLabelRenderer,page:this.state.page,perPage:this.props.perPage,onPageChange:this.props.handlePageChange,onAdd:this.onAdd,onSelect:this.onSelect,loading:this.props.loading,query:this.state.input,selectedItemRef:this.props.selectedItemRef})):d=h(Mp,{ref:this.listRef,options:c,optionRenderer:this.props.optionRenderer,ariaLabelRenderer:this.props.ariaLabelRenderer,page:this.state.page,perPage:this.props.perPage,onPageChange:this.props.handlePageChange,onAdd:this.onAdd,onSelect:this.onSelect,loading:this.props.loading,selectedItemRef:this.props.selectedItemRef}),n&&n.length&&t&&(p=h(v,{id:"multiselect.numMembers",defaultMessage:"{memberOptions, number} of {totalCount, number} members",values:{memberOptions:c.length,totalCount:this.props.totalCount}})),m(f.Fragment,{children:[m("div",{className:"filtered-user-list",children:[m("div",{className:"filter-row filter-row--full",children:[m("div",{className:g(yp,"multi-select__container react-select"),children:[h(vp,{id:"selectItems",ref:this.reactSelectRef,isMulti:!0,options:this.props.options,styles:Dp,components:{Menu:Rp,IndicatorsContainer:Rp,MultiValueLabel:this.props.valueWithImage?Yh.MultiValueLabel:Lp(this.props.valueRenderer),MultiValueRemove:this.props.valueWithImage?this.MultiValueRemove:Yh.MultiValueRemove},isClearable:!1,openMenuOnFocus:!1,menuIsOpen:!1,onInputChange:this.onInput,onKeyDown:this.onInputKeyDown,onChange:this.onChange,value:this.props.values,formatOptionLabel:this.props.valueWithImage?this.formatOptionLabel:void 0,placeholder:this.props.placeholderText,inputValue:this.state.input,getOptionValue:e=>e.id,getOptionLabel:this.props.ariaLabelRenderer,"aria-label":this.props.placeholderText,className:this.state.a11yActive?"multi-select__focused":"",classNamePrefix:"react-select-auto react-select"}),"top"===this.props.saveButtonPosition&&h(bp,{id:"saveItems",saving:this.props.saving,disabled:this.props.saving,onClick:this.handleOnClick,defaultMessage:r,savingMessage:this.props.buttonSubmitLoadingText})]}),m("div",{id:"multiSelectHelpMemberInfo",className:g(Cp,"multi-select__help"),children:[i,p]})]}),d,h("div",{id:"multiSelectMessageNote",className:"multi-select__help",children:l}),"top"===this.props.saveButtonPosition&&m("div",{className:"filter-controls",children:[o,a]})]}),"bottom"===this.props.saveButtonPosition&&h("div",{className:g(xp,"channel-switcher__footer"),children:h(bp,{id:"saveItems",saving:this.props.saving,disabled:this.props.saving,onClick:this.handleOnClick,defaultMessage:r,savingMessage:this.props.buttonSubmitLoadingText,btnClass:g(Tp)})})]})}}u(Op,"defaultProps",{ariaLabelRenderer:function(e){if(!e)return null;return e.label},saveButtonPosition:"top",valueWithImage:!1});const Rp=()=>null,Lp=e=>t=>h("div",{className:"react-select__padded-component",children:h(e,o({},t))}),Dp={container:()=>({width:"100%"}),multiValueLabel:()=>({display:"inline-flex",alignItems:"center"}),multiValue:()=>({display:"flex",backgroundColor:"rgba(0,0,0,0.1)",margin:"2px",minWidth:"0",boxSizing:"border-box",borderRadius:"99px",overflow:"hidden"})};var Fp="mqik-e97bb61b",jp="mqik-393fa0fb",Hp="mqik-252e19fe",Up="mqik-3e89e5f7",qp="mqik-f38c10a7",Bp="mqik-d04671de",Vp="mqik-97489a5d",zp="mqik-f3588b91";class Wp extends f.PureComponent{constructor(e){super(e),u(this,"searchTimeoutId",0),u(this,"selectedItemRef",f.createRef()),u(this,"addValue",(e=>{const t=Object.assign([],this.state.values);-1===t.indexOf(e)&&t.push(e),this.setState({values:t})})),u(this,"onHide",(()=>{this.setState({show:!1}),this.props.actions.loadStatusesForProfilesList(this.props.profilesNotInCurrentChannel)})),u(this,"handleInviteError",(e=>{e&&this.setState({saving:!1,inviteError:e.message})})),u(this,"handleDelete",(e=>{this.setState({values:e})})),u(this,"setUsersLoadingState",(e=>{this.setState({loadingUsers:e})})),u(this,"handlePageChange",((e,t)=>{e>t&&(this.setUsersLoadingState(!0),this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,e+1,50).then((()=>this.setUsersLoadingState(!1))))})),u(this,"handleSubmit",(()=>{const{actions:e,channel:t}=this.props,n=this.state.values.map((e=>e.id));if(0!==n.length){if(this.props.skipCommit&&this.props.onAddCallback)return this.props.onAddCallback(this.state.values),this.setState({saving:!1,inviteError:void 0}),void this.onHide();this.setState({saving:!0}),e.addUsersToChannel(t.id,n).then((e=>{e.error?this.handleInviteError(e.error):(this.setState({saving:!1,inviteError:void 0}),this.onHide())}))}})),u(this,"search",(e=>{const t=e.trim();clearTimeout(this.searchTimeoutId),this.setState({term:t}),t&&(this.setUsersLoadingState(!0),this.searchTimeoutId=window.setTimeout((async()=>{const e={team_id:this.props.channel.team_id,not_in_channel_id:this.props.channel.id,group_constrained:this.props.channel.group_constrained};await this.props.actions.searchProfiles(t,e),this.setUsersLoadingState(!1)}),ve.SEARCH_TIMEOUT_MILLISECONDS),this.searchTimeoutId=window.setTimeout((async()=>{if(!t)return;const e={team_id:this.props.channel.team_id,not_in_channel_id:this.props.channel.id,group_constrained:this.props.channel.group_constrained};await this.props.actions.searchProfiles(t,e),this.setUsersLoadingState(!1)}),ve.SEARCH_TIMEOUT_MILLISECONDS))})),u(this,"renderAriaLabel",(e=>e?e.username:"")),u(this,"renderOption",((e,t,n,s)=>{let i="";return t&&(i="more-modal__row--selected"),m("div",{ref:t?this.selectedItemRef:e.id,className:g(jp,"more-modal__row clickable "+i),onClick:()=>n(e),onMouseMove:()=>s(e),children:[h(so,{src:Pe.getProfilePictureUrl(e.id,e.last_picture_update),status:this.props.userStatuses[e.id],size:"md",username:e.username,wrapperClass:Vp,statusClass:zp}),h("div",{className:g(Hp,"more-modal__details"),children:h("div",{className:g(Up,"more-modal__name"),children:kt(e)})}),h("div",{className:g(qp,"more-modal__actions"),children:h("div",{className:"more-modal__actions--round",children:h(Ao,{className:Bp})})})]},e.id)})),u(this,"render",(()=>{let e=null;this.state.inviteError&&(e=h("label",{className:"has-error control-label",children:this.state.inviteError}));const t=be("multiselect.add","Add"),n=be("multiselect.adding","Adding...");let s=Pt(this.props.profilesNotInCurrentChannel,this.state.term).filter((e=>0===e.delete_at&&!this.props.profilesNotInCurrentTeam.includes(e)&&void 0!==this.props.excludeUsers&&!this.props.excludeUsers[e.id])).map((e=>e));if(this.props.includeUsers){const e=Object.values(this.props.includeUsers);s=[...s,...e]}const i=h(Op,{options:s,optionRenderer:this.renderOption,selectedItemRef:this.selectedItemRef,values:this.state.values,ariaLabelRenderer:this.renderAriaLabel,saveButtonPosition:"bottom",perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:20,buttonSubmitText:t,buttonSubmitLoadingText:n,saving:this.state.saving,loading:this.state.loadingUsers,placeholderText:be("multiselect.placeholder","Search for people"),valueWithImage:!0},"addUsersToChannelKey");return m(uo,{dialogClassName:"",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,children:[h(ho,{closeButton:!0,onClose:this.onHide,children:h(v,{id:"channel_invite.addNewMembers",defaultMessage:"Add people to {channel}",values:{channel:this.props.channel.display_name}})}),h(po,{children:m("div",{className:Fp,children:[e,i]})})]})})),this.state={values:[],term:"",show:!0,saving:!1,loadingUsers:!0}}componentDidMount(){this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,0).then((()=>{this.setUsersLoadingState(!1)})),this.props.actions.getTeamStats(this.props.channel.team_id),this.props.actions.loadStatusesForProfilesList(this.props.profilesNotInCurrentChannel)}}u(Wp,"defaultProps",{includeUsers:{},excludeUsers:{},skipCommit:!1});var Gp=p((function(e,t){let n;return t.channelId&&t.teamId&&(n=xt()),(e,t)=>{let s,i;n?(s=n(e,t.channelId),i=Tt(e,t.teamId)):(s=Nt(e),i=Mt(e));return{profilesNotInCurrentChannel:s,profilesNotInCurrentTeam:i,userStatuses:vt(e)}}}),(function(e){return{actions:E({addUsersToChannel:ia,getProfilesNotInChannel:It,getTeamStats:Ot,loadStatusesForProfilesList:Rt,searchProfiles:Lt},e)}}))(Wp);class Kp extends f.PureComponent{render(){const{error:e=null,errors:t=[],iconClassName:n,margin:s,textClassName:i,type:r}=this.props;if(!e&&0===t.length)return null;let a=e;if(!a)for(const o of t)o&&(a=o);return a?h("div","modal"===r?{className:"form-group",children:h("label",{className:"col-sm-12 has-error",children:a})}:"backstage"===r?{className:"pull-left has-error",children:h("label",{className:"control-label",children:a})}:s?{className:"form-group has-error",children:h("label",{className:"control-label",children:a})}:{className:`col-sm-12 ${i||"has-error"}`,children:m("label",{className:"control-label",children:[h("i",{className:`fa ${n||"fa-exclamation-circle"}`})," ",a]})}):null}}u(Kp,"defaultProps",{error:null,errors:[]});var Yp="mqik-b850d275",Xp="mqik-02cab614",$p="mqik-aa52bda4",Qp="mqik-afd93447";const Jp=e=>{const t=d.exports.useRef(null),n=d.exports.useRef(null),[s,i]=d.exports.useState(!1),[r,a]=d.exports.useState(!1),o=e.delay&&e.delay<50?100:e.delay||100;let l;const c=ra.exports.debounce((()=>{a(!0)}),o);d.exports.useEffect((()=>{s?(a(!1),c.cancel(),l?l.update():t.current&&n.current&&(l=Ka(t.current,n.current,{placement:e.placement,strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,e.offset||8]}},{name:"delay",enabled:!0,phase:"afterWrite",fn({state:e}){c()}}]}))):!s&&l&&l.destroy()}),[s]);const u=m("div",{role:"tooltip",ref:n,className:g(Yp,{[Xp]:s,[$p]:r}),children:[e.content,h("div",{className:g(Qp,{[Xp]:s,[$p]:r}),"data-popper-arrow":!0})]});return m(d.exports.Fragment,{children:[f.cloneElement(e.children,{ref:t,onMouseEnter:function(){i(!0)},onMouseLeave:function(){i(!1)}}),s?u:null]})};var Zp={settingPicture:"mqik-fc5852ff",settingList:"mqik-b349bf98",settingListItem:"mqik-586c99da",imgRender:"mqik-a63ea2c9",imgPreview:"mqik-1bba61d5",helpText:"mqik-f7a58cd8",btn:"mqik-4b7393fd",btnPrimary:"mqik-35c56268",btnLink:"mqik-01f4a8aa",btnDisabled:"mqik-77766c64",settingActions:"mqik-da477596",settingError:"mqik-ed1fd79d",blobView:"mqik-df9c31d6",imgContainer:"mqik-d2c13fdf",imgRemove:"mqik-804aa4d2"};class ef extends d.exports.PureComponent{constructor(e){super(e),u(this,"settingList"),u(this,"selectInput"),u(this,"confirmButton"),u(this,"previewBlob"),u(this,"handleCancel",(e=>{this.setState({removeSrc:!1,setDefaultSrc:!1}),this.props.updateSection(e)})),u(this,"handleFileSelected",(()=>{this.confirmButton.current&&this.confirmButton.current.focus()})),u(this,"handleSave",(e=>{e.preventDefault(),this.props.loadingPicture||(this.state.removeSrc?this.props.onRemove():this.state.setDefaultSrc?this.props.onSetDefault():this.props.onSubmit())})),u(this,"handleRemoveSrc",(e=>{e.preventDefault(),this.setState({removeSrc:!0}),this.focusFirstElement()})),u(this,"handleSetDefaultSrc",(e=>{e.preventDefault(),this.setState({setDefaultSrc:!0}),this.focusFirstElement()})),u(this,"handleFileChange",(e=>{this.setState({removeSrc:!1,setDefaultSrc:!1}),this.props.onFileChange(e)})),u(this,"handleInputFile",(()=>{var e;this.selectInput.current&&(this.selectInput.current.value="",null==(e=this.selectInput.current)||e.click())})),u(this,"setPicture",(e=>{if(e){this.previewBlob=URL.createObjectURL(e);var t=new FileReader;t.onload=e=>{const t=ko(e.target.result),n=Po(t);this.setState({image:this.previewBlob,orientationStyles:n})},t.readAsArrayBuffer(e)}})),u(this,"renderImg",(()=>{const e=this.props.imageContext;if(this.props.file){const t=o({backgroundImage:"url("+this.state.image+")"},this.state.orientationStyles);return h("div",{className:g(Zp.imgPreview,`${e}-img-preview`),children:h("div",{alt:`${e} image preview`,style:t,className:g(Zp.blobView,`${e}-img-preview`)})})}if(this.state.setDefaultSrc)return h("img",{loading:"lazy",className:`${e}-img`,alt:`${e} image`,src:this.props.defaultImageSrc});if(this.props.src&&!this.state.removeSrc){const t=h("img",{loading:"lazy",className:`${e}-img`,alt:`${e} image`,src:this.props.src});if(!this.props.onRemove&&!this.props.onSetDefault)return t;let n,s;return this.props.onRemove?(n=h(v,{id:"setting_picture.remove_channel",defaultMessage:"Xóa ảnh nhóm"}),s=this.handleRemoveSrc):this.props.onSetDefault&&(n=h(v,{id:"setting_picture.remove_channel_picture",defaultMessage:"Ảnh mặc định"}),s=this.handleSetDefaultSrc),m("div",{className:g(Zp.imgContainer,`${e}-img__container`),children:[h("div",{className:g(Zp.imgPreview,"img-preview__image"),"aria-hidden":!0,children:t}),h(Jp,{placement:"top",content:n,children:h("button",{"data-testid":"removeSettingPicture",className:g(Zp.imgRemove,`${e}-img__remove`),onClick:s,children:h("span",{"aria-hidden":!0,children:"×"})})})]})}return null})),this.settingList=f.createRef(),this.selectInput=f.createRef(),this.confirmButton=f.createRef(),this.state={image:null,removeSrc:!1,setDefaultSrc:!1}}focusFirstElement(){this.settingList.current&&this.settingList.current.focus()}componentDidMount(){this.focusFirstElement(),this.selectInput.current&&this.selectInput.current.addEventListener("input",this.handleFileSelected)}componentDidUpdate(e){e.file!==this.props.file&&this.setPicture(this.props.file)}componentWillUnmount(){this.previewBlob&&URL.revokeObjectURL(this.previewBlob),this.selectInput.current&&this.selectInput.current.removeEventListener("input",this.handleFileSelected)}render(){const e=this.renderImg();let t,n,s={[Zp.btn]:!0},i=!1;return this.props.submitActive||this.state.removeSrc||this.state.setDefaultSrc?s[Zp.btnPrimary]=!0:(s[Zp.btnDisabled]=!0,i=!0),e&&(t=h("div",{className:g(Zp.settingListItem,Zp.imgRender,Zp.imgDefault,"setting-list-item"),role:"presentation",children:e})),this.props.onSubmit&&(n=m(d.exports.Fragment,{children:[h("input",{"data-testid":"uploadPicture",ref:this.selectInput,className:g("u3-hidden"),accept:".jpg,.png,.bmp",type:"file",onChange:this.handleFileChange,disabled:this.props.loadingPicture,"aria-hidden":!0,tabIndex:-1}),h("button",{"data-testid":"inputSettingPictureButton",className:g(Zp.btn,Zp.btnPrimary,Zp.btnFile),disabled:this.props.loadingPicture,onClick:this.handleInputFile,"aria-label":be("setting_picture.select_image","Chọn ảnh"),children:h(v,{id:"setting_picture.select_image",defaultMessage:"Chọn ảnh"})}),h("button",{tabIndex:i?-1:0,"data-testid":"saveSettingPicture",disabled:i,ref:this.confirmButton,className:g(s),onClick:this.handleSave,"aria-label":this.props.loadingPicture?be("setting_picture.uploading","Uploading..."):be("setting_picture.save","Save"),children:this.props.loadingPicture?h(Co,{text:be("setting_picture.uploading","Uploading...")}):h(v,{id:"setting_picture.save",defaultMessage:"Save"})})]})),m("section",{className:g(Zp.settingPicture,"section-max form-horizontal"),children:[h("h4",{className:"col-xs-12 section-title",children:this.props.title}),h("div",{className:"col-xs-offset-3 col-xs-8",children:m("div",{className:g(Zp.settingList,"setting-list"),ref:this.settingList,tabIndex:-1,"aria-label":this.props.title,"aria-describedby":"setting-picture__helptext",children:[t,h("div",{id:"setting-picture__helptext",className:g(Zp.settingListItem,Zp.helpText,"setting-list-item pt-3"),children:this.props.helpText}),m("div",{className:g(Zp.settingListItem,"setting-list-item"),children:[h("hr",{}),m("div",{className:Zp.settingActions,children:[h("div",{className:Zp.settingError,children:h(Kp,{errors:[this.props.clientError,this.props.serverError],type:"modal"})}),n,h("button",{"data-testid":"cancelSettingPicture",className:g(Zp.btn,Zp.btnLink),onClick:this.handleCancel,"aria-label":be("setting_picture.cancel","Cancel"),children:h(v,{id:"setting_picture.cancel",defaultMessage:"Cancel"})})]})]})]})})]})}}u(ef,"defaultProps",{imageContext:"profile"}),u(ef,"propTypes",{clientError:y.string,serverError:y.string,src:y.string,defaultImageSrc:y.string,file:y.object,loadingPicture:y.bool,submitActive:y.bool,onRemove:y.func,onSetDefault:y.func,onSubmit:y.func,title:y.string,onFileChange:y.func,updateSection:y.func,imageContext:y.string,maxFileSize:y.number,helpText:y.object});var tf="mqik-4d21f8f0";const nf=I({maxLength:{id:te("rename_channel.maxLength"),defaultMessage:"This field must be less than {maxLength, number} characters"},url:{id:te("rename_channel.url"),defaultMessage:"URL"},defaultError:{id:te("rename_channel.defaultError"),defaultMessage:" - Cannot be changed for the default channel"},displayNameHolder:{id:te("rename_channel.displayNameHolder"),defaultMessage:"Enter display name"},groupPicture:{id:te("rename_channel.groupPicture"),defaultMessage:"Hình đại diện"},validImage:{id:te("user.settings.general.validImage"),defaultMessage:"Only BMP, JPG or PNG images may be used for profile pictures"},imageTooLarge:{id:te("user.settings.general.imageTooLarge"),defaultMessage:"Unable to upload profile image. File is too large."}});class sf extends f.PureComponent{constructor(e){super(e),u(this,"submitActive"),u(this,"setError",(e=>{this.setState({serverError:e.message})})),u(this,"unsetError",(()=>{this.setState({serverError:""})})),u(this,"handleHide",(e=>{e&&e.preventDefault(),this.setState({serverError:"",urlErrors:[],invalid:!1,show:!1})})),u(this,"onSaveSuccess",(()=>{this.handleHide(),this.unsetError()})),u(this,"handleCancel",(e=>{this.handleHide(e)})),u(this,"setDefaultPicture",(()=>{this.setState({loadingPicture:!0}),this.props.actions.removeChannelImage(this.props.channel.id).then((({data:e,error:t})=>{e?(this.submitActive=!1,this.onSaveSuccess()):t&&this.setState({serverError:t.message})}))})),u(this,"updatePicture",(e=>{e.target.files&&e.target.files[0]?(this.submitActive=!0,this.setState({clientError:null,pictureFile:e.target.files[0]})):this.setState({pictureFile:null})})),u(this,"submitPicture",(()=>{if(!this.state.pictureFile)return;if(!this.submitActive)return;const{formatMessage:e}=this.props.intl,t=this.state.pictureFile;Dt.includes(t.type)?t.size>this.props.maxFileSize?this.setState({clientError:e(nf.imageTooLarge),serverError:""}):(this.setState({loadingPicture:!0}),this.props.actions.setChannelImage(this.props.channel.id,t).then((({data:e,error:t})=>{e?(this.submitActive=!1,this.onSaveSuccess()):t&&this.setState({serverError:t.message})}))):this.setState({clientError:e(nf.validImage),serverError:""})})),this.submitActive=!1,this.state={serverError:"",urlErrors:[],invalid:!1,show:!0,pictureFile:null,loadingPicture:!1}}render(){const{channel:e,maxFileSize:t}=this.props,{pictureFile:n,serverError:s,clientError:i,loadingPicture:r}=this.state,a=e.last_picture_update>0?this.setDefaultPicture:null,o=h($o,{id:"setting_picture.help.channel",defaultMessage:"Cài đặt ảnh cho nhóm, chấp nhận ảnh PNG, JPG, JPEG hoặc BMP. Sử dụng hình vuông và có nền."}),l=Ft(e.id,e.last_picture_update);return m(uo,{dialogClassName:"a11y__modal settings-modal",show:this.state.show,onHide:this.handleCancel,onExited:this.props.onHide,"aria-labelledby":"channelEditImageModalLabel",className:"channel__edit_image",children:[h(ho,{closeButton:!0,onClose:this.handleCancel,children:h(v,{id:"update_channel_image.title",defaultMessage:"Cập nhật ảnh nhóm"})}),h(po,{children:h("div",{className:tf,children:h(ef,{title:"",onSubmit:this.submitPicture,onSetDefault:a,src:l,defaultImageSrc:jt(this.props.channel.id),serverError:s,clientError:i,updateSection:e=>{e.preventDefault(),this.handleCancel()},file:n,onFileChange:this.updatePicture,submitActive:this.submitActive,loadingPicture:r,maxFileSize:t,helpText:o,imageContext:"group"})})})]})}}var rf=S(sf);var af=p(C((e=>{const t=ue(e);return{maxFileSize:parseInt(t.MaxFileSize,10)}}),(e=>o({},e))),(function(e){return{actions:E({removeChannelImage:Ht,setChannelImage:Ut},e)}}))(rf);var of="mqik-00c5a579",lf="mqik-3e7fa4ad",cf="mqik-0638ac2a",uf="mqik-f28058bc",df="mqik-f995f5df",hf="mqik-034046f4",pf="mqik-e3a7b3dd",ff="mqik-e56b14ef";class mf extends f.PureComponent{constructor(e){super(e),u(this,"purpose"),u(this,"handleEntering",(()=>{Je(this.purpose)})),u(this,"onHide",(()=>{this.setState({show:!1})})),u(this,"handleKeyDown",(e=>{const{ctrlSend:t}=this.props;at(e)?(e.preventDefault(),this.setState({purpose:ot(e)})):t&&ge(e,ve.KeyCodes.ENTER)&&e.ctrlKey?(e.preventDefault(),this.handleSave(e)):t||!ge(e,ve.KeyCodes.ENTER)||e.shiftKey||e.altKey||(e.preventDefault(),this.handleSave(e))})),u(this,"handleSave",(async e=>{const{channel:t,actions:{patchChannel:n}}=this.props,{purpose:s}=this.state;if(!t)return;this.setState({requestStarted:!0});const{data:i,error:r}=await n(t.id,{purpose:s});this.setState({serverError:r,requestStarted:!1}),i&&this.onHide()})),u(this,"handleChange",(e=>{e.preventDefault(),this.setState({purpose:e.target.value})})),u(this,"getPurpose",(e=>{this.purpose=e})),this.state={purpose:e.channel.purpose||"",serverError:null,show:!0,submitted:!1,requestStarted:!1}}render(){let e=null;const{formatMessage:t}=this.props.intl;this.state.serverError&&(e=m("div",{className:"form-group has-error",children:[h("br",{}),h("label",{className:"control-label",children:this.state.serverError.message})]}));let n=h("span",{children:h(v,{id:"edit_channel_purpose_modal.title1",defaultMessage:"Edit Purpose"})});this.props.channel.display_name&&(n=m("span",{children:[h(v,{id:"edit_channel_purpose_modal.title2",defaultMessage:"Edit Purpose for "}),h("span",{className:"name",children:this.props.channel.display_name})]}));let s=h(v,{id:"edit_channel_purpose_modal.body",defaultMessage:'Describe how this channel should be used. This text appears in the channel list in the "More..." menu and helps others decide whether to join.'});"P"===this.props.channel.type&&(s=h(v,{id:"edit_channel_private_purpose_modal.body",defaultMessage:'This text appears in the \\"View Info\\" modal of the private channel.'}));const i=t({id:"edit_channel_purpose_modal.title1",defaultMessage:"Edit Purpose"}).toLowerCase();return m(uo,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,"aria-labelledby":"editChannelPurposeModalLabel",className:"channel__edit_image",children:[h(ho,{closeButton:!0,onClose:this.onHide,children:n}),h(po,{children:m("div",{className:of,children:[h("p",{className:lf,children:s}),h("textarea",{ref:this.getPurpose,className:g(cf,uf,"form-control no-resize"),rows:6,maxLength:250,value:this.state.purpose,onKeyDown:this.handleKeyDown,onChange:this.handleChange,"aria-label":i}),e]})}),h(pl,{children:m("div",{className:df,children:[h("button",{type:"button",className:g(hf,ff,"btn btn-link cancel-button"),onClick:this.onHide,children:h(v,{id:"edit_channel_purpose_modal.cancel",defaultMessage:"Cancel"})}),h("button",{type:"button",className:g(hf,pf,"btn btn-primary save-button"),disabled:this.state.requestStarted,onClick:this.handleSave,children:h(v,{id:"edit_channel_purpose_modal.save",defaultMessage:"Save"})})]})})]})}}u(mf,"propTypes",{onHide:y.func.isRequired,channel:y.object,ctrlSend:y.bool.isRequired,intl:y.any,actions:y.shape({patchChannel:y.func.isRequired}).isRequired});var gf=S(mf);var vf=p((function(e){return{ctrlSend:ye(e,ve.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")}}),(function(e){return{actions:{patchChannel:E(qt,e)}}}))(gf);var bf={channelRenameModal:"mqik-ea4828cb",formGroup:"mqik-69c31780",controlLabel:"mqik-3b283972",formControl:"mqik-a91de201",formUrl:"mqik-88b0e34c",urlHelpText:"mqik-49d7c76c",renameActions:"mqik-10e26d8b",btn:"mqik-fb7ad513",btnPrimary:"mqik-1888034f",btnLink:"mqik-fd12526c"};const yf=I({maxLength:{id:te("rename_channel.maxLength"),defaultMessage:"This field must be less than {maxLength, number} characters"},url:{id:te("rename_channel.url"),defaultMessage:"URL"},defaultError:{id:te("rename_channel.defaultError"),defaultMessage:" - Cannot be changed for the default channel"},displayNameHolder:{id:te("rename_channel.displayNameHolder"),defaultMessage:"Enter display name"},groupPicture:{id:te("rename_channel.groupPicture"),defaultMessage:"Hình đại diện"},validImage:{id:te("user.settings.general.validImage"),defaultMessage:"Only BMP, JPG or PNG images may be used for profile pictures"},imageTooLarge:{id:te("user.settings.general.imageTooLarge"),defaultMessage:"Unable to upload profile image. File is too large."}});class Cf extends f.PureComponent{constructor(e){super(e),u(this,"textbox"),u(this,"submitActive"),u(this,"setError",(e=>{this.setState({serverError:e.message})})),u(this,"unsetError",(()=>{this.setState({serverError:""})})),u(this,"handleEntering",(()=>{Je(this.textbox)})),u(this,"handleHide",(e=>{e&&e.preventDefault(),this.setState({serverError:"",urlErrors:[],displayNameError:"",invalid:!1,show:!1})})),u(this,"handleSubmit",(async e=>{e&&e.preventDefault();const t=Object.assign({},this.props.channel),n=t.name,s=t.display_name,i=l(o({},this.state),{serverError:""}),{formatMessage:r}=this.props.intl,{actions:{patchChannel:a}}=this.props;t.display_name=this.state.displayName.trim(),!t.display_name||t.display_name.length<ve.MIN_CHANNELNAME_LENGTH?(i.displayNameError=h(v,{id:"rename_channel.minLength",defaultMessage:"Display name must have at least {minLength, number} characters.",values:{minLength:ve.MIN_CHANNELNAME_LENGTH}}),i.invalid=!0):t.display_name.length>ve.MAX_CHANNELNAME_LENGTH?(i.displayNameError=r(yf.maxLength,{maxLength:ve.MAX_CHANNELNAME_LENGTH}),i.invalid=!0):i.displayNameError="",t.name=this.state.channelName.trim();const c=Bt(t.name);if(c.length>0&&(i.invalid=!0),i.urlErrors=c,this.setState(i),i.invalid)return;if(n===t.name&&s===t.display_name)return void this.onSaveSuccess();const{data:u,error:d}=await a(t.id,t);u?this.onSaveSuccess():d&&this.setError(d)})),u(this,"onSaveSuccess",(()=>{this.handleHide(),this.props.actions.selectChannel(this.props.channel.id),this.unsetError()})),u(this,"handleCancel",(e=>{this.setState({displayName:this.props.channel.display_name,channelName:this.props.channel.name}),this.handleHide(e)})),u(this,"onNameChange",(e=>{const t=e.target.value.trim().replace(/[^A-Za-z0-9-_]/g,"").toLowerCase();this.setState({channelName:t})})),u(this,"onDisplayNameChange",(e=>{this.setState({displayName:e.target.value})})),u(this,"getTextbox",(e=>{this.textbox=e})),u(this,"setDefaultPicture",(()=>{})),u(this,"updatePicture",(e=>{e.target.files&&e.target.files[0]?(this.setState({pictureFile:e.target.files[0]}),this.submitActive=!0,this.setState({clientError:null})):this.setState({pictureFile:null})})),u(this,"submitPicture",(()=>{if(!this.state.pictureFile)return;if(!this.submitActive)return;const{formatMessage:e}=this.props.intl,t=this.state.pictureFile;Dt.includes(t.type)?t.size>this.props.maxFileSize?this.setState({clientError:e(yf.imageTooLarge),serverError:""}):this.setState({loadingPicture:!0}):this.setState({clientError:e(yf.validImage),serverError:""})})),this.submitActive=!1,this.state={displayName:e.channel.display_name,channelName:e.channel.name,serverError:"",urlErrors:[],displayNameError:"",invalid:!1,show:!0,pictureFile:null,loadingPicture:!1}}render(){let e=null;this.state.displayNameError&&(e=h("p",{className:"input__help error",children:this.state.displayNameError}));let t=null,n=null,s="input-group input-group--limit";this.state.urlErrors.length>0?(t=h("p",{className:"input__help error",children:this.state.urlErrors}),s+=" has-error"):n=h("p",{className:"input__help",children:h(v,{id:"change_url.helpText",defaultMessage:"You can use lowercase letters, numbers, dashes, and underscores."})});let i=null;this.state.serverError&&(i=h("div",{className:"form-group has-error",children:h("label",{className:"control-label",children:this.state.serverError})}));const{formatMessage:r}=this.props.intl;let a=r(yf.url),o=!1;this.props.channel.name===ve.DEFAULT_CHANNEL&&(a+=r(yf.defaultError),o=!0);return m(uo,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.handleCancel,onExited:this.props.onHide,"aria-labelledby":"editChannelPurposeModalLabel",className:"channel__edit_image",children:[h(ho,{closeButton:!0,onClose:this.handleCancel,children:h(v,{id:"rename_channel.title",defaultMessage:"Edit Group Info"})}),h(po,{children:m("div",{className:bf.channelRenameModal,children:[m("div",{className:g(bf.formGroup,"form-group"),children:[h("label",{className:g(bf.controlLabel,"control-label"),children:h(v,{id:"rename_channel.displayName",defaultMessage:"Display Name"})}),h(co,{onChange:this.onDisplayNameChange,type:"text",ref:this.getTextbox,id:"display_name",className:g(bf.formControl,"form-control"),placeholder:yf.displayNameHolder,value:this.state.displayName,maxLength:ve.MAX_CHANNELNAME_LENGTH,"aria-label":r({id:"rename_channel.displayName",defaultMessage:"Display Name"}).toLowerCase()}),e]}),m("div",{className:g(bf.formGroup,"u3-hidden form-group"),children:[h("label",{className:g(bf.controlLabel,"control-label"),children:a}),m("div",{className:g(bf.urlInput,s),children:[h("span",{className:"input-group-addon",children:""}),h("input",{onChange:this.onNameChange,type:"text",className:g(bf.formControl,"form-control"),id:"channel_name",value:this.state.channelName,maxLength:ve.MAX_CHANNELNAME_LENGTH,readOnly:o,"aria-label":r({id:"rename_channel.title",defaultMessage:"Rename Channel"}).toLowerCase()})]})]}),m("div",{className:g(bf.formGroup,bf.formUrl,"form-group"),children:[h("label",{className:g(bf.controlLabel,"control-label")}),m("div",{className:g(bf.urlHelpText,"form-control"),children:[n,t]})]}),i]})}),h(pl,{children:m("div",{className:bf.renameActions,children:[h("button",{type:"button",className:g(bf.btn,bf.btnLink,"btn btn-link"),onClick:this.handleCancel,children:h(v,{id:"rename_channel.cancel",defaultMessage:"Cancel"})}),h("button",{onClick:this.handleSubmit,type:"submit",id:"save-button",className:g(bf.btn,bf.btnPrimary,"btn btn-primary"),children:h(v,{id:"rename_channel.save",defaultMessage:"Save"})})]})})]})}}var Ef=S(Cf);var wf=p(C((e=>{const t=ue(e),n=e.entities.teams.currentTeamId,s=ke(e,n);return{currentTeamUrl:`${Vt()}/${s.name}`,team:s,maxFileSize:parseInt(t.MaxFileSize,10)}}),(e=>o({},e))),(function(e){return{actions:E({patchChannel:qt,selectChannel:zt},e)}}))(Ef);var Sf="mqik-9841dc84",_f="mqik-c237b5fe",Af="mqik-0ea1b868";const kf=xo((({onClick:e,ariaLabel:t,text:n,extraText:s,id:i,buttonClass:r,isDangerous:a,activeClass:o})=>h(To.Item,{children:({active:l})=>m("button",{"data-testid":i,id:i,"aria-label":t,className:g("style--none",l&&o?o:"",r,{"MenuItem__with-help":s,[Sf]:a,[Af]:l}),onClick:e,children:[n&&h("span",{className:_f,children:n}),s&&h("span",{className:"MenuItem__help-text",children:s})]})})));kf.displayName="MenuItemAction";class Pf extends f.PureComponent{constructor(){super(...arguments),u(this,"handleLeave",(e=>{e.preventDefault();const{channel:t,actions:{leaveChannel:n}}=this.props;t.type===ve.PRIVATE_CHANNEL?aa(t):n(t.id)}))}render(){const{channel:e,isDefault:t,isGuestUser:n,id:s}=this.props;return h(kf,{id:s,show:(!t||n)&&e.type!==ve.DM_CHANNEL&&e.type!==ve.GM_CHANNEL,onClick:this.handleLeave,text:be("channel_header.leave","Leave Channel"),buttonClass:g("u3-text-left"),isDangerous:!0})}}u(Pf,"defaultProps",{isDefault:!0,isGuestUser:!1});var xf=p(null,(e=>({actions:E({leaveChannel:oa},e)})))(Pf);class Tf extends f.PureComponent{constructor(){super(...arguments),u(this,"handleClose",(e=>{e.preventDefault();const{channel:t,currentUser:n,currentTeam:s,redirectChannel:i,actions:{savePreferences:r,leaveDirectChannel:a}}=this.props;let o,l;t.type===ve.DM_CHANNEL?(l=ve.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,o=t.teammate_id):(l=ve.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,o=t.id),a(t.name),r(n.id,[{user_id:n.id,category:l,name:o,value:"false"}]),this.props.actions.selectChannel(""),this.props.actions.removeChatId(t.id)}))}render(){const{id:e,channel:t}=this.props;let n;return t.type===ve.DM_CHANNEL?n=be("center_panel.direct.closeDirectMessage","Close Direct Message"):t.type===ve.GM_CHANNEL&&(n=be("center_panel.direct.closeGroupMessage","Close Group Message")),h(kf,{id:e,show:t.type===ve.DM_CHANNEL||t.type===ve.GM_CHANNEL,onClick:this.handleClose,text:n})}}var Nf=p((e=>({currentTeam:oe(e),redirectChannel:Wt(e,Ee(e))})),(e=>({actions:E({savePreferences:Gt,leaveDirectChannel:la,removeChatId:cl,selectChannel:zt},e)})))(Tf);class Mf extends f.PureComponent{constructor(){super(...arguments),u(this,"handleClose",(()=>{this.props.actions.goToLastViewedChannel()}))}render(){return h(kf,{show:this.props.isArchived,onClick:this.handleClose,text:be("center_panel.archived.closeChannel","Close Channel")})}}var If=p(null,(e=>({actions:E({goToLastViewedChannel:ca},e)})))(Mf);var Of="mqik-fdf1db3d",Rf="mqik-dca22d1a",Lf="mqik-4051370b";var Df=p((()=>{const e=Kt();return(t,n)=>{const s=e(t,{id:n.channelId}),i=Yt(t)[s.id];return{user:xe(t),channel:s,isDefault:Xt(s),isFavorite:$t(t,s.id),isMuted:Qt(i),isReadonly:Jt(t,s),isArchived:0!==s.delete_at,penultimateViewedChannelName:ua(t)||Wt(t,Ee(t)),pluginMenuItems:t.plugins.components.ChannelHeader||[],isLicensedForLDAPGroups:"true"===t.entities.general.license.LDAPGroups}}}))((e=>{const{user:t,channel:n,isPrivate:s,isArchived:i,isDefault:r,isGroupConstrained:a,isReadonly:o,penultimateViewedChannelName:l}=e,c=s?ie.MANAGE_PRIVATE_CHANNEL_MEMBERS:ie.MANAGE_PUBLIC_CHANNEL_MEMBERS,u=s?ie.MANAGE_PRIVATE_CHANNEL_PROPERTIES:ie.MANAGE_PUBLIC_CHANNEL_PROPERTIES,d=ie.MANAGE_TEAM;return h("div",{className:Of,children:h(To,{as:"div",className:Rf,children:m(To.Items,{id:`dropdown_${n.id}`,static:!0,className:g(Lf,"u3-right-0"),children:[m("div",{className:"u3-py-1",children:[h(No,{channelId:n.id,teamId:n.team_id,permissions:[c],children:h(Mo,{id:"channelAddMembers",show:n.type!==ve.DM_CHANNEL&&n.type!==ve.GM_CHANNEL&&!i&&!r&&!a,modalId:se.CHANNEL_INVITE,dialogType:Gp,dialogProps:{channel:n},text:be("navbar.addMembers","Add Members")})}),m(No,{channelId:n.id,teamId:n.team_id,permissions:[c],children:[h(Mo,{id:"channelViewMembers",show:n.type!==ve.DM_CHANNEL&&n.type!==ve.GM_CHANNEL&&(i||r),modalId:se.CHANNEL_MEMBERS,dialogType:So,dialogProps:{channel:n},text:be("channel_header.viewMembers","View Members")}),h(Mo,{id:"channelManageMembers",show:n.type!==ve.DM_CHANNEL&&n.type!==ve.GM_CHANNEL&&!i&&!r,modalId:se.CHANNEL_MEMBERS,dialogType:So,dialogProps:{channel:n},text:be("channel_header.manageMembers","Manage Members")})]}),h(No,{channelId:n.id,teamId:n.team_id,permissions:[c],invert:!0,children:h(Mo,{id:"channelViewMembers",show:n.type!==ve.DM_CHANNEL&&n.type!==ve.GM_CHANNEL&&!i&&!r,modalId:se.CHANNEL_MEMBERS,dialogType:So,dialogProps:{channel:n},text:be("channel_header.viewMembers","View Members")})})]}),h("div",{className:"u3-py-1",children:m(No,{channelId:n.id,teamId:n.team_id,permissions:[u],children:[h(Mo,{id:"channelEditImage",show:n.type!==ve.DM_CHANNEL&&n.type!==ve.GM_CHANNEL&&!i&&!o,modalId:se.EDIT_CHANNEL_IMAGE,dialogType:af,dialogProps:{channel:n},text:be("channel_header.setImage","Đổi ảnh nhóm")}),h(Mo,{id:"channelEditPurpose",show:!i&&!o&&n.type!==ve.DM_CHANNEL&&n.type!==ve.GM_CHANNEL,modalId:se.EDIT_CHANNEL_PURPOSE,dialogType:vf,dialogProps:{channel:n},text:be("channel_header.setPurpose","Edit Purpose")}),h(Mo,{id:"channelRename",show:!i&&n.type!==ve.DM_CHANNEL&&n.type!==ve.GM_CHANNEL,modalId:se.RENAME_CHANNEL,dialogType:wf,dialogProps:{channel:n},text:be("channel_header.rename","Rename")})]})}),m("div",{className:"u3-py-1",children:[h(xf,{id:"channelLeaveChannel",channel:n,isDefault:r,isGuestUser:!1}),h(Nf,{id:"channelCloseMessage",channel:n,currentUser:t}),h(If,{isArchived:i})]}),h(No,{channelId:n.id,teamId:n.team_id,permissions:[d],children:h("div",{className:"u3-py-1",children:h(Mo,{id:"channelUnarchiveChannel",show:i&&!r&&n.type!==ve.DM_CHANNEL&&n.type!==ve.GM_CHANNEL,modalId:se.UNARCHIVE_CHANNEL,dialogType:Gp,dialogProps:{channel:n},text:be("channel_header.unarchive","Unarchive Channel")})})})]})})})}));var Ff={chatHeader:"mqik-c14fd364",chatHeaderContent:"mqik-f25c897c",chatHeaderImage:"mqik-a134108d",chatHeaderInfo:"mqik-81944d98",chatHeaderTitle:"mqik-a49f794d",btnTitleActive:"mqik-c799b264",heading:"mqik-4762a60e",btnMute:"mqik-1b755ee9",chatHeaderDescription:"mqik-b7735136",icon:"mqik-168b09da",headerPuposeText:"mqik-6cc7fd46",textPurpose:"mqik-518c48a8",statusText:"mqik-78b56591",chatHeaderActions:"mqik-270cc6c3",iconAction:"mqik-c35c4d17",trashIcon:"mqik-4d4bff64",popoverPurpose:"mqik-758e5092"};var jf=_(p((function(){const e=Ze(),t=Xa(),n=Kt();return function(s,i){const r=n(s,{id:i.channelId})||{},a=xe(s),o=nn(s).length>1;let l,c,u,d;if(r&&r.type===G.DM_CHANNEL){const e=sn(a.id,r.name);l=Me(s,e),d=Ie(s,e),u=l&&t(s,l.id)}else r&&r.type===G.GM_CHANNEL&&(c=e(s,r.id,void 0));const h=Ne(s)||{member_count:0,guest_count:0,pinnedpost_count:0};return{teamId:Ee(s),channel:r,channelMember:rn(s),currentUser:a,dmUser:l,gmMembers:c,rhsState:an(s),rhsOpen:on(s),isFavorite:ln(s),isReadOnly:cn(s),isMuted:un(s),isQuickSwitcherOpen:zc(s,se.QUICK_SWITCH),hasGuests:h.guest_count>0,pinnedPostsCount:h.pinnedpost_count,hasMoreThanOneTeam:o,teammateNameDisplaySetting:bt(s),currentRelativeTeamUrl:Et(s),isLegacySidebar:!1,announcementBarCount:Wc(s),customStatus:u,contactName:d,isCustomStatusEnabled:$a(s)}}}),(e=>({actions:E({favoriteChannel:dn,unfavoriteChannel:hn,showFlaggedPosts:pn,showPinnedPosts:fn,showChannelFiles:mn,showMentions:gn,closeRightHandSide:vn,getCustomEmojisInText:bn,updateChannelNotifyProps:yn,goToLastViewedChannel:ca,openModal:fe,closeModal:me,minimalChat:ul,largeChat:dl,closeChat:cl,selectChannel:zt},e)})))((e=>{const{channel:t,dmUser:n,channelIsArchived:s,isMinimal:i,currentUser:r,contactName:a,teammateNameDisplaySetting:o,gmMembers:l,isMuted:c}=e,{formatMessage:u}=O(),[p,b]=d.exports.useState(!1),y=w(),C=()=>{const{actions:t,channel:n,channelMember:s,currentUser:i}=e;if(!s||!i||!n)return;const r={mark_unread:tn.ALL};t.updateChannelNotifyProps(i.id,n.id,r)};let E=t.display_name,S=null;s&&(S=h(Io,{className:g(Ff.icon,Ff.trashIcon)}));const _=t.type===ve.DM_CHANNEL,A=t.type===ve.GM_CHANNEL;if(_){const e=n.id;E=r.id===e?h(v,{id:"channel_header.directchannel.you",defaultMessage:"{displayname} (you) ",values:{displayname:a||Zt(n,o)}}):a||Zt(n,o)+" "}if(A){const e={};for(const t of l){if(t.id===r.id)continue;const n=Zt(t,o);e[n]||(e[n]=[]),e[n].push(t)}E=t.display_name.split(", ").map(((t,n)=>{if(!e[t])return t;const s=e[t].shift();return m(f.Fragment,{children:[n>0&&", ",t]},s.id)}))}let k,P,x,T,N;!_||n.delete_at||n.is_bot||(k=h(ro,{status:t.status}),P=h("span",{className:Ff.statusText,children:h(v,{id:`status_dropdown.set_${t.status}`,defaultMessage:en(t.status)})})),_||(x=h(su,{channel:t})),t.purpose&&(T=h(Ya,{placement:"bottom-start",trigger:"click",content:h("div",{className:Ff.popoverPurpose,children:t.purpose}),toggleFocus:()=>{},children:m("span",{className:Ff.headerPuposeText,children:[h(Zc,{className:Ff.icon}),h("span",{className:Ff.textPurpose,children:t.purpose})]})})),c&&(N=h("button",{onClick:C,className:g("style--none color--link channel-header__mute inactive",Ff.btnMute),"aria-label":u({id:"generic_icons.muted",defaultMessage:"Muted Icon"}),children:h(Qc,{className:g(Ff.icon,Ff.muteIcon)})}));let M=h(Ya,{placement:"bottom-start",trigger:"click",content:h(Df,{channelId:t.id}),toggleFocus:b,children:h("button",{className:g("channel-header__trigger style--none",{[Ff.btnTitleActive]:p}),"aria-label":u({id:"channel_header.menuAriaLabel",defaultMessage:"Channel Menu"}).toLowerCase(),children:m("p",{className:Ff.heading,children:[S,E]})})}),I=h(so,{src:Pe.getChannelPictureUrl(t.id,t.last_picture_update),size:"xl",status:"",wrapperClass:"ChannelHeader_img",newStatusIcon:!1});return _&&(I=h(so,{src:Pe.getProfilePictureUrl(n.id,n.last_picture_update),size:"xl",status:"",wrapperClass:"ChannelHeader_img",newStatusIcon:!1})),h(d.exports.Fragment,{children:h("div",{className:Ff.chatHeader,children:m("div",{className:Ff.chatHeaderContent,children:[h("div",{className:Ff.chatHeaderImage,children:I}),m("div",{className:Ff.chatHeaderInfo,children:[m("div",{className:Ff.chatHeaderTitle,children:[M,N]}),m("div",{className:Ff.chatHeaderDescription,children:[k,P,x,T]})]}),m("div",{className:Ff.chatHeaderActions,children:[h("button",i?{className:g(Ff.btn,Ff.btnLarge),onClick:()=>{e.actions.largeChat(t.id),e.actions.selectChannel(t.id)},children:h(Xc,{className:Ff.iconAction})}:{className:g(Ff.btn,Ff.btnMinimal),onClick:()=>{e.actions.minimalChat(t.id),e.actions.selectChannel("")},children:h(Kc,{className:Ff.iconAction})}),h("button",{className:g(Ff.btn,Ff.btnClose),onClick:()=>{e.actions.closeChat(t.id),e.actions.selectChannel(""),y.push(`/${e.preData?e.preData.match.params.team:e.match.params.team}`)},children:h(Ga,{className:Ff.iconAction})})]})]})})})})));function Hf(e){return async(t,n)=>{const s=n().plugins.components.MessageWillBePosted;if(!s||0===s.length)return{data:e};let i=e;for(const e of s){const t=await e.hook(i);if(t){if(t.error)return{error:t.error};i=t.post}}return{data:i}}}function Uf(e,t){return async(n,s)=>{const i=s().plugins.components.SlashCommandWillBePosted;if(!i||0===i.length)return{data:{message:e,args:t}};let r=e,a=t;for(const e of i){const t=await e.hook(r,a);if(t){if(t.error)return{error:t.error};if(r=t.message,a=t.args,0===Object.keys(t).length)break}}return{data:{message:r,args:a}}}}var qf=za.jsx;var Bf=d.exports.forwardRef((function(e,t){return qf("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:qf("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}))}));var Vf="mqik-de908ffc",zf="mqik-94cd44df",Wf="mqik-eb37ba2c",Gf="mqik-1c1afc1d",Kf="mqik-d18b0e6c",Yf="mqik-0ec3e68e",Xf="mqik-d153216a",$f="mqik-4674f388",Qf="mqik-af23b4c9";var Jf="mqik-accd587a",Zf="mqik-3380b6f5",em="mqik-59103f65",tm="mqik-7a9d5faa",nm="mqik-eb3b3e1e",sm="mqik-4525d3fb",im="mqik-34e4e128",rm="mqik-8d472c40",am="mqik-e4fb467c",om="mqik-d35328d6",lm="mqik-d2befceb",cm="mqik-4426fa21",um="mqik-35ead99c",dm="mqik-339f0244",hm="mqik-89120dbd";class pm extends f.PureComponent{render(){return m("div",{className:g(Jf,"emoji-picker__header modal-header"),children:[m("button",{type:"button",className:"close emoji-picker__header-close-button",onClick:this.props.handleEmojiPickerClose,children:[h("span",{"aria-hidden":"true",children:"×"}),h("span",{className:"sr-only",children:h(v,{id:"emoji_picker.close",defaultMessage:"Close"})})]}),h("h4",{className:"modal-title emoji-picker__header-title",children:h(v,{id:"emoji_picker.header",defaultMessage:"Emoji Picker"})})]})}}u(pm,"propTypes",{handleEmojiPickerClose:y.func.isRequired});const fm=(e,t,n,s)=>"custom"===n.category&&"custom"!==s.category?1:"custom"===s.category&&"custom"!==n.category?-1:e.localeCompare(t),mm=e=>"thumbsup"===e||"+1"===e?1:0,gm=e=>"thumbsdown"===e||"-1"===e?-1:0,vm={thumbsdown:mm,"-1":mm,thumbsup:gm,"+1":gm},bm=(e,t)=>e?"name"in e?e.name:t&&e.aliases.find((e=>e.startsWith(t)))||e.aliases[0]:"";function ym(e){const t=[];let n=0;for(const s of e.matchAll(R())){const i=s[0],r=s.index;s.index!==n&&t.push(e.substring(n,r)),t.push(h("span",{className:"emoji",children:i},r)),n=r+i.length}return n<e.length&&t.push(e.substring(n)),1===t.length?t[0]:t}var Cm,Em,wm="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";(Em=Cm||(Cm={})).ChannelSearch="ChannelSearch",Em.Mentions="Mentions",Em.FlaggedPosts="FlaggedPosts",Em.PinnedPosts="PinnedPosts",Em.ChannelFiles="ChannelFiles",Em.ChannelFilesFiltered="ChannelFilesFiltered",Em.Contacts="Contacts";var Sm="mqik-5263cf4c",_m="mqik-0b05176c",Am="mqik-6fafb171",km="mqik-b459d680";const Pm={[Cm.ChannelSearch]:{id:te("no_results.channel_search.title")},[Cm.Mentions]:{id:te("no_results.mentions.title")},[Cm.FlaggedPosts]:{id:te("no_results.flagged_posts.title")},[Cm.PinnedPosts]:{id:te("no_results.pinned_posts.title")},[Cm.ChannelFiles]:{id:te("no_results.channel_files.title")},[Cm.ChannelFilesFiltered]:{id:te("no_results.channel_files_filtered.title")},[Cm.Contacts]:{id:te("no_results.contact_search.title")}},xm={[Cm.ChannelSearch]:{id:te("no_results.channel_search.subtitle")},[Cm.Mentions]:{id:te("no_results.mentions.subtitle")},[Cm.FlaggedPosts]:{id:te("no_results.flagged_posts.subtitle")},[Cm.PinnedPosts]:{id:te("no_results.pinned_posts.subtitle")},[Cm.ChannelFiles]:{id:te("no_results.channel_files.subtitle")},[Cm.ChannelFilesFiltered]:{id:te("no_results.channel_files_filtered.subtitle")},[Cm.Contacts]:{id:te("no_results.channel_search.subtitle")}},Tm=({expanded:e,style:t,variant:n,iconGraphic:s=null,titleValues:i,title:r=(n?h(v,l(o({},Pm[n]),{values:i})):null),subtitleValues:a,subtitle:c=(n?h(v,l(o({},xm[n]),{values:a})):null)})=>{let u=m("div",{className:g(_m,"no-results__wrapper"),style:t,children:[s,r?h("div",{className:g(Am,"no-results__title",{"only-title":!c}),children:r}):null,c?h("div",{className:g(km,"no-results__subtitle"),children:c}):null]});return e&&(u=h("div",{className:g(Sm,"no-results__holder"),children:u})),u};
/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */
function Nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Mm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(n),!0).forEach((function(t){Rm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Im(e){return(Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Om(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Rm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var s,i,r=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return r}(e,t)||Fm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dm(e){return function(e){if(Array.isArray(e))return jm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fm(e,t){if(e){if("string"==typeof e)return jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jm(e,t):void 0}}function jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Hm=function(){},Um={},qm={},Bm=null,Vm={mark:Hm,measure:Hm};try{"undefined"!=typeof window&&(Um=window),"undefined"!=typeof document&&(qm=document),"undefined"!=typeof MutationObserver&&(Bm=MutationObserver),"undefined"!=typeof performance&&(Vm=performance)}catch(dT){}var zm=(Um.navigator||{}).userAgent,Wm=void 0===zm?"":zm,Gm=Um,Km=qm,Ym=Bm,Xm=Vm;Gm.document;var $m=!!Km.documentElement&&!!Km.head&&"function"==typeof Km.addEventListener&&"function"==typeof Km.createElement,Qm=~Wm.indexOf("MSIE")||~Wm.indexOf("Trident/"),Jm=["HTML","HEAD","STYLE","SCRIPT"],Zm=function(){try{return!0}catch(dT){return!1}}(),eg={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},tg={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},ng={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sg={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},ig=/fa[srltdbk\-\ ]/,rg=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,ag={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},og=[1,2,3,4,5,6,7,8,9,10],lg=og.concat([11,12,13,14,15,16,17,18,19,20]),cg=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],ug="duotone-group",dg="swap-opacity",hg="primary",pg="secondary",fg=[].concat(Dm(Object.keys(tg)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",ug,dg,hg,pg]).concat(og.map((function(e){return"".concat(e,"x")}))).concat(lg.map((function(e){return"w-".concat(e)}))),mg=Gm.FontAwesomeConfig||{};if(Km&&"function"==typeof Km.querySelector){[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Lm(e,2),n=t[0],s=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Km.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));null!=i&&(mg[s]=i)}))}var gg=Mm(Mm({},{familyPrefix:"fa",styleDefault:"solid",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0}),mg);gg.autoReplaceSvg||(gg.observeMutations=!1);var vg={};Object.keys(gg).forEach((function(e){Object.defineProperty(vg,e,{enumerable:!0,set:function(t){gg[e]=t,bg.forEach((function(e){return e(vg)}))},get:function(){return gg[e]}})})),Gm.FontAwesomeConfig=vg;var bg=[];var yg=16,Cg={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Eg(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function wg(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function Sg(e){return e.classList?wg(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function _g(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ag(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function kg(e){return e.size!==Cg.size||e.x!==Cg.x||e.y!==Cg.y||e.rotate!==Cg.rotate||e.flipX||e.flipY}function Pg(){var e="fa",t="svg-inline--fa",n=vg.familyPrefix,s=vg.replacementClass,i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(n!==e||s!==t){var r=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),o=new RegExp("\\.".concat(t),"g");i=i.replace(r,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(o,".".concat(s))}return i}var xg=!1;function Tg(){vg.autoAddCss&&!xg&&(!function(e){if(e&&$m){var t=Km.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Km.head.childNodes,s=null,i=n.length-1;i>-1;i--){var r=n[i],a=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(s=r)}Km.head.insertBefore(t,s)}}(Pg()),xg=!0)}var Ng={mixout:function(){return{dom:{css:Pg,insertCss:Tg}}},hooks:function(){return{beforeDOMElementCreation:function(){Tg()},beforeI2svg:function(){Tg()}}}},Mg=Gm||{};Mg.___FONT_AWESOME___||(Mg.___FONT_AWESOME___={}),Mg.___FONT_AWESOME___.styles||(Mg.___FONT_AWESOME___.styles={}),Mg.___FONT_AWESOME___.hooks||(Mg.___FONT_AWESOME___.hooks={}),Mg.___FONT_AWESOME___.shims||(Mg.___FONT_AWESOME___.shims=[]);var Ig=Mg.___FONT_AWESOME___,Og=[],Rg=!1;function Lg(e){$m&&(Rg?setTimeout(e,0):Og.push(e))}function Dg(e){var t=e.tag,n=e.attributes,s=void 0===n?{}:n,i=e.children,r=void 0===i?[]:i;return"string"==typeof e?_g(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(_g(e[n]),'" ')}),"").trim()}(s),">").concat(r.map(Dg).join(""),"</").concat(t,">")}function Fg(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}$m&&((Rg=(Km.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Km.readyState))||Km.addEventListener("DOMContentLoaded",(function e(){Km.removeEventListener("DOMContentLoaded",e),Rg=1,Og.map((function(e){return e()}))})));var jg=function(e,t,n,s){var i,r,a,o=Object.keys(e),l=o.length,c=void 0!==s?function(e,t){return function(n,s,i,r){return e.call(t,n,s,i,r)}}(t,s):t;for(void 0===n?(i=1,a=e[o[0]]):(i=0,a=n);i<l;i++)a=c(a,e[r=o[i]],r,e);return a};function Hg(e){var t=function(e){for(var t=[],n=0,s=e.length;n<s;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<s){var r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function Ug(e){return Object.keys(e).reduce((function(t,n){var s=e[n];return!!s.icon?t[s.iconName]=s.icon:t[n]=s,t}),{})}function qg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.skipHooks,i=void 0!==s&&s,r=Ug(t);"function"!=typeof Ig.hooks.addPack||i?Ig.styles[e]=Mm(Mm({},Ig.styles[e]||{}),r):Ig.hooks.addPack(e,Ug(t)),"fas"===e&&qg("fa",t)}var Bg=Ig.styles,Vg=Ig.shims,zg=Object.values(ng),Wg=null,Gg={},Kg={},Yg={},Xg={},$g={},Qg=Object.keys(eg);function Jg(e,t){var n,s=t.split("-"),i=s[0],r=s.slice(1).join("-");return i!==e||""===r||(n=r,~fg.indexOf(n))?null:r}var Zg,ev=function(){var e=function(e){return jg(Bg,(function(t,n,s){return t[s]=jg(n,e,{}),t}),{})};Gg=e((function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter((function(e){return"number"==typeof e})).forEach((function(t){e[t.toString(16)]=n}));return e})),Kg=e((function(e,t,n){(e[n]=n,t[2])&&t[2].filter((function(e){return"string"==typeof e})).forEach((function(t){e[t]=n}));return e})),$g=e((function(e,t,n){var s=t[2];return e[n]=n,s.forEach((function(t){e[t]=n})),e}));var t="far"in Bg||vg.autoFetchSvg,n=jg(Vg,(function(e,n){var s=n[0],i=n[1],r=n[2];return"far"!==i||t||(i="fas"),"string"==typeof s&&(e.names[s]={prefix:i,iconName:r}),"number"==typeof s&&(e.unicodes[s.toString(16)]={prefix:i,iconName:r}),e}),{names:{},unicodes:{}});Yg=n.names,Xg=n.unicodes,Wg=rv(vg.styleDefault)};function tv(e,t){return(Gg[e]||{})[t]}function nv(e,t){return($g[e]||{})[t]}function sv(e){return Yg[e]||{prefix:null,iconName:null}}function iv(){return Wg}Zg=function(e){Wg=rv(e.styleDefault)},bg.push(Zg),ev();function rv(e){var t=tg[e]||tg[eg[e]],n=e in Ig.styles?e:null;return t||n||null}function av(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.skipLookups,s=void 0!==n&&n,i=null,r=e.reduce((function(e,t){var n=Jg(vg.familyPrefix,t);if(Bg[t]?(t=zg.includes(t)?sg[t]:t,i=t,e.prefix=t):Qg.indexOf(t)>-1?(i=t,e.prefix=rv(t)):n?e.iconName=n:t!==vg.replacementClass&&e.rest.push(t),!s&&e.prefix&&e.iconName){var r="fa"===i?sv(e.iconName):{},a=nv(e.prefix,e.iconName);r.prefix&&(i=null),e.iconName=r.iconName||a||e.iconName,e.prefix=r.prefix||e.prefix,"far"!==e.prefix||Bg.far||!Bg.fas||vg.autoFetchSvg||(e.prefix="fas")}return e}),{prefix:null,iconName:null,rest:[]});return"fa"!==r.prefix&&"fa"!==i||(r.prefix=iv()||"fas"),r}var ov=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,s;return t=e,(n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=Mm(Mm({},e.definitions[t]||{}),i[t]),qg(t,i[t]);var n=ng[t];n&&qg(n,i[t]),ev()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var s=n[t],i=s.prefix,r=s.iconName,a=s.icon,o=a[2];e[i]||(e[i]={}),o.length>0&&o.forEach((function(t){"string"==typeof t&&(e[i][t]=a)})),e[i][r]=a})),e}}])&&Om(t.prototype,n),s&&Om(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}(),lv=[],cv={},uv={},dv=Object.keys(uv);function hv(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];var r=cv[e]||[];return r.forEach((function(e){t=e.apply(null,[t].concat(s))})),t}function pv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var i=cv[e]||[];i.forEach((function(e){e.apply(null,n)}))}function fv(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return uv[e]?uv[e].apply(null,t):void 0}function mv(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||iv();if(t)return t=nv(n,t)||t,Fg(gv.definitions,n,t)||Fg(Ig.styles,n,t)}var gv=new ov,vv={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $m?(pv("beforeI2svg",e),fv("pseudoElements2svg",e),fv("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===vg.autoReplaceSvg&&(vg.autoReplaceSvg=!0),vg.observeMutations=!0,Lg((function(){yv({autoReplaceSvgRoot:t}),pv("watch",e)}))}},bv={noAuto:function(){vg.autoReplaceSvg=!1,vg.observeMutations=!1,pv("noAuto")},config:vg,dom:vv,parse:{icon:function(e){if(null===e)return null;if("object"===Im(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:nv(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=rv(e[0]);return{prefix:n,iconName:nv(n,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(vg.familyPrefix,"-"))>-1||e.match(ig))){var s=av(e.split(" "),{skipLookups:!0});return{prefix:s.prefix||iv(),iconName:nv(s.prefix,s.iconName)||s.iconName}}if("string"==typeof e){var i=iv();return{prefix:i,iconName:nv(i,e)||e}}}},library:gv,findIconDefinition:mv,toHtml:Dg},yv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,n=void 0===t?Km:t;(Object.keys(Ig.styles).length>0||vg.autoFetchSvg)&&$m&&vg.autoReplaceSvg&&bv.dom.i2svg({node:n})};function Cv(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return Dg(e)}))}}),Object.defineProperty(e,"node",{get:function(){if($m){var t=Km.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Ev(e){var t=e.icons,n=t.main,s=t.mask,i=e.prefix,r=e.iconName,a=e.transform,o=e.symbol,l=e.title,c=e.maskId,u=e.titleId,d=e.extra,h=e.watchable,p=void 0!==h&&h,f=s.found?s:n,m=f.width,g=f.height,v="fak"===i,b=[vg.replacementClass,r?"".concat(vg.familyPrefix,"-").concat(r):""].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),y={children:[],attributes:Mm(Mm({},d.attributes),{},{"data-prefix":i,"data-icon":r,class:b,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},C=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};p&&(y.attributes["data-fa-i2svg"]=""),l&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||Eg())},children:[l]}),delete y.attributes.title);var E=Mm(Mm({},y),{},{prefix:i,iconName:r,main:n,mask:s,maskId:c,transform:a,symbol:o,styles:Mm(Mm({},C),d.styles)}),w=s.found&&n.found?fv("generateAbstractMask",E)||{children:[],attributes:{}}:fv("generateAbstractIcon",E)||{children:[],attributes:{}},S=w.children,_=w.attributes;return E.children=S,E.attributes=_,o?function(e){var t=e.prefix,n=e.iconName,s=e.children,i=e.attributes,r=e.symbol,a=!0===r?"".concat(t,"-").concat(vg.familyPrefix,"-").concat(n):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Mm(Mm({},i),{},{id:a}),children:s}]}]}(E):function(e){var t=e.children,n=e.main,s=e.mask,i=e.attributes,r=e.styles,a=e.transform;if(kg(a)&&n.found&&!s.found){var o={x:n.width/n.height/2,y:.5};i.style=Ag(Mm(Mm({},r),{},{"transform-origin":"".concat(o.x+a.x/16,"em ").concat(o.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(E)}function wv(e){var t=e.content,n=e.width,s=e.height,i=e.transform,r=e.title,a=e.extra,o=e.watchable,l=void 0!==o&&o,c=Mm(Mm(Mm({},a.attributes),r?{title:r}:{}),{},{class:a.classes.join(" ")});l&&(c["data-fa-i2svg"]="");var u=Mm({},a.styles);kg(i)&&(u.transform=function(e){var t=e.transform,n=e.width,s=void 0===n?16:n,i=e.height,r=void 0===i?16:i,a=e.startCentered,o=void 0!==a&&a,l="";return l+=o&&Qm?"translate(".concat(t.x/yg-s/2,"em, ").concat(t.y/yg-r/2,"em) "):o?"translate(calc(-50% + ".concat(t.x/yg,"em), calc(-50% + ").concat(t.y/yg,"em)) "):"translate(".concat(t.x/yg,"em, ").concat(t.y/yg,"em) "),l+="scale(".concat(t.size/yg*(t.flipX?-1:1),", ").concat(t.size/yg*(t.flipY?-1:1),") "),l+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:s}),u["-webkit-transform"]=u.transform);var d=Ag(u);d.length>0&&(c.style=d);var h=[];return h.push({tag:"span",attributes:c,children:[t]}),r&&h.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),h}function Sv(e){var t=e.content,n=e.title,s=e.extra,i=Mm(Mm(Mm({},s.attributes),n?{title:n}:{}),{},{class:s.classes.join(" ")}),r=Ag(s.styles);r.length>0&&(i.style=r);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var _v=Ig.styles;function Av(e){var t=e[0],n=e[1],s=Lm(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(vg.familyPrefix,"-").concat(ug)},children:[{tag:"path",attributes:{class:"".concat(vg.familyPrefix,"-").concat(pg),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(vg.familyPrefix,"-").concat(hg),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var kv={found:!1,width:512,height:512};function Pv(e,t){var n=t;return"fa"===t&&null!==vg.styleDefault&&(t=iv()),new Promise((function(s,i){if(fv("missingIconAbstract"),"fa"===n){var r=sv(e)||{};e=r.iconName||e,t=r.prefix||t}if(e&&t&&_v[t]&&_v[t][e])return s(Av(_v[t][e]));!function(e,t){Zm||vg.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),s(Mm(Mm({},kv),{},{icon:vg.showMissingIcons&&e&&fv("missingIconAbstract")||{}}))}))}var xv=function(){},Tv=vg.measurePerformance&&Xm&&Xm.mark&&Xm.measure?Xm:{mark:xv,measure:xv},Nv=function(e){Tv.mark("".concat('FA "6.1.1"'," ").concat(e," ends")),Tv.measure("".concat('FA "6.1.1"'," ").concat(e),"".concat('FA "6.1.1"'," ").concat(e," begins"),"".concat('FA "6.1.1"'," ").concat(e," ends"))},Mv=function(e){return Tv.mark("".concat('FA "6.1.1"'," ").concat(e," begins")),function(){return Nv(e)}},Iv=function(){};function Ov(e){return"string"==typeof(e.getAttribute?e.getAttribute("data-fa-i2svg"):null)}function Rv(e){return Km.createElementNS("http://www.w3.org/2000/svg",e)}function Lv(e){return Km.createElement(e)}function Dv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ceFn,s=void 0===n?"svg"===e.tag?Rv:Lv:n;if("string"==typeof e)return Km.createTextNode(e);var i=s(e.tag);Object.keys(e.attributes||[]).forEach((function(t){i.setAttribute(t,e.attributes[t])}));var r=e.children||[];return r.forEach((function(e){i.appendChild(Dv(e,{ceFn:s}))})),i}var Fv={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(Dv(e),t)})),null===t.getAttribute("data-fa-i2svg")&&vg.keepOriginalSource){var n=Km.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~Sg(t).indexOf(vg.replacementClass))return Fv.replace(e);var s=new RegExp("".concat(vg.familyPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===vg.replacementClass||t.match(s)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var r=n.map((function(e){return Dg(e)})).join("\n");t.setAttribute("data-fa-i2svg",""),t.innerHTML=r}};function jv(e){e()}function Hv(e,t){var n="function"==typeof t?t:Iv;if(0===e.length)n();else{var s=jv;"async"===vg.mutateApproach&&(s=Gm.requestAnimationFrame||jv),s((function(){var t=!0===vg.autoReplaceSvg?Fv.replace:Fv[vg.autoReplaceSvg]||Fv.replace,s=Mv("mutate");e.map(t),s(),n()}))}}var Uv=!1;function qv(){Uv=!0}function Bv(){Uv=!1}var Vv=null;function zv(e){if(Ym&&vg.observeMutations){var t=e.treeCallback,n=void 0===t?Iv:t,s=e.nodeCallback,i=void 0===s?Iv:s,r=e.pseudoElementsCallback,a=void 0===r?Iv:r,o=e.observeMutationsRoot,l=void 0===o?Km:o;Vv=new Ym((function(e){if(!Uv){var t=iv();wg(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!Ov(e.addedNodes[0])&&(vg.searchPseudoElements&&a(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&vg.searchPseudoElements&&a(e.target.parentNode),"attributes"===e.type&&Ov(e.target)&&~cg.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute("data-prefix"):null,n=e.getAttribute?e.getAttribute("data-icon"):null;return t&&n}(e.target)){var s=av(Sg(e.target)),r=s.prefix,o=s.iconName;e.target.setAttribute("data-prefix",r||t),o&&e.target.setAttribute("data-icon",o)}else(l=e.target)&&l.classList&&l.classList.contains&&l.classList.contains(vg.replacementClass)&&i(e.target);var l}))}})),$m&&Vv.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Wv(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),s=n[0],i=n.slice(1);return s&&i.length>0&&(e[s]=i.join(":").trim()),e}),{})),n}function Gv(e){var t,n,s=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",a=av(Sg(e));return a.prefix||(a.prefix=iv()),s&&i&&(a.prefix=s,a.iconName=i),a.iconName&&a.prefix||a.prefix&&r.length>0&&(a.iconName=(t=a.prefix,n=e.innerText,(Kg[t]||{})[n]||tv(a.prefix,Hg(e.innerText)))),a}function Kv(e){var t=wg(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),s=e.getAttribute("data-fa-title-id");return vg.autoA11y&&(n?t["aria-labelledby"]="".concat(vg.replacementClass,"-title-").concat(s||Eg()):(t["aria-hidden"]="true",t.focusable="false")),t}function Yv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=Gv(e),s=n.iconName,i=n.prefix,r=n.rest,a=Kv(e),o=hv("parseNodeAttributes",{},e),l=t.styleParser?Wv(e):[];return Mm({iconName:s,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Cg,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:l,attributes:a}},o)}var Xv=Ig.styles;function $v(e){var t="nest"===vg.autoReplaceSvg?Yv(e,{styleParser:!1}):Yv(e);return~t.extra.classes.indexOf("fa-layers-text")?fv("generateLayersText",e,t):fv("generateSvgReplacementMutation",e,t)}function Qv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!$m)return Promise.resolve();var n=Km.documentElement.classList,s=function(e){return n.add("".concat("fontawesome-i2svg","-").concat(e))},i=function(e){return n.remove("".concat("fontawesome-i2svg","-").concat(e))},r=vg.autoFetchSvg?Object.keys(eg):Object.keys(Xv),a=[".".concat("fa-layers-text",":not([").concat("data-fa-i2svg","])")].concat(r.map((function(e){return".".concat(e,":not([").concat("data-fa-i2svg","])")}))).join(", ");if(0===a.length)return Promise.resolve();var o=[];try{o=wg(e.querySelectorAll(a))}catch(dT){}if(!(o.length>0))return Promise.resolve();s("pending"),i("complete");var l=Mv("onTree"),c=o.reduce((function(e,t){try{var n=$v(t);n&&e.push(n)}catch(dT){Zm||"MissingIcon"===dT.name&&console.error(dT)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){Hv(n,(function(){s("active"),s("complete"),i("pending"),"function"==typeof t&&t(),l(),e()}))})).catch((function(e){l(),n(e)}))}))}function Jv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$v(e).then((function(e){e&&Hv([e],t)}))}var Zv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,s=void 0===n?Cg:n,i=t.symbol,r=void 0!==i&&i,a=t.mask,o=void 0===a?null:a,l=t.maskId,c=void 0===l?null:l,u=t.title,d=void 0===u?null:u,h=t.titleId,p=void 0===h?null:h,f=t.classes,m=void 0===f?[]:f,g=t.attributes,v=void 0===g?{}:g,b=t.styles,y=void 0===b?{}:b;if(e){var C=e.prefix,E=e.iconName,w=e.icon;return Cv(Mm({type:"icon"},e),(function(){return pv("beforeDOMElementCreation",{iconDefinition:e,params:t}),vg.autoA11y&&(d?v["aria-labelledby"]="".concat(vg.replacementClass,"-title-").concat(p||Eg()):(v["aria-hidden"]="true",v.focusable="false")),Ev({icons:{main:Av(w),mask:o?Av(o.icon):{found:!1,width:null,height:null,icon:{}}},prefix:C,iconName:E,transform:Mm(Mm({},Cg),s),symbol:r,title:d,maskId:c,titleId:p,extra:{attributes:v,styles:y,classes:m}})}))}},eb={mixout:function(){return{icon:(e=Zv,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(t||{}).icon?t:mv(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:mv(i||{})),e(s,Mm(Mm({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=Qv,e.nodeCallback=Jv,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?Km:t,s=e.callback;return Qv(n,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,s=t.title,i=t.titleId,r=t.prefix,a=t.transform,o=t.symbol,l=t.mask,c=t.maskId,u=t.extra;return new Promise((function(t,d){Promise.all([Pv(n,r),l.iconName?Pv(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var d=Lm(l,2),h=d[0],p=d[1];t([e,Ev({icons:{main:h,mask:p},prefix:r,iconName:n,transform:a,symbol:o,maskId:c,title:s,titleId:i,extra:u,watchable:!0})])})).catch(d)}))},e.generateAbstractIcon=function(e){var t,n=e.children,s=e.attributes,i=e.main,r=e.transform,a=Ag(e.styles);return a.length>0&&(s.style=a),kg(r)&&(t=fv("generateAbstractTransformGrouping",{main:i,transform:r,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:s}}}},tb={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,s=void 0===n?[]:n;return Cv({type:"layer"},(function(){pv("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(vg.familyPrefix,"-layers")].concat(Dm(s)).join(" ")},children:n}]}))}}}},nb={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,s=void 0===n?null:n,i=t.classes,r=void 0===i?[]:i,a=t.attributes,o=void 0===a?{}:a,l=t.styles,c=void 0===l?{}:l;return Cv({type:"counter",content:e},(function(){return pv("beforeDOMElementCreation",{content:e,params:t}),Sv({content:e.toString(),title:s,extra:{attributes:o,styles:c,classes:["".concat(vg.familyPrefix,"-layers-counter")].concat(Dm(r))}})}))}}}},sb={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,s=void 0===n?Cg:n,i=t.title,r=void 0===i?null:i,a=t.classes,o=void 0===a?[]:a,l=t.attributes,c=void 0===l?{}:l,u=t.styles,d=void 0===u?{}:u;return Cv({type:"text",content:e},(function(){return pv("beforeDOMElementCreation",{content:e,params:t}),wv({content:e,transform:Mm(Mm({},Cg),s),title:r,extra:{attributes:c,styles:d,classes:["".concat(vg.familyPrefix,"-layers-text")].concat(Dm(o))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,s=t.transform,i=t.extra,r=null,a=null;if(Qm){var o=parseInt(getComputedStyle(e).fontSize,10),l=e.getBoundingClientRect();r=l.width/o,a=l.height/o}return vg.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,wv({content:e.innerHTML,width:r,height:a,transform:s,title:n,extra:i,watchable:!0})])}}},ib=new RegExp('"',"ug"),rb=[1105920,1112319];function ab(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((function(s,i){if(null!==e.getAttribute(n))return s();var r,a,o,l=wg(e.children).filter((function(e){return e.getAttribute("data-fa-pseudo-element")===t}))[0],c=Gm.getComputedStyle(e,t),u=c.getPropertyValue("font-family").match(rg),d=c.getPropertyValue("font-weight"),h=c.getPropertyValue("content");if(l&&!u)return e.removeChild(l),s();if(u&&"none"!==h&&""!==h){var p=c.getPropertyValue("content"),f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(u[2])?tg[u[2].toLowerCase()]:ag[d],m=function(e){var t,n,s,i,r,a=e.replace(ib,""),o=(n=0,i=(t=a).length,(r=t.charCodeAt(n))>=55296&&r<=56319&&i>n+1&&(s=t.charCodeAt(n+1))>=56320&&s<=57343?1024*(r-55296)+s-56320+65536:r),l=o>=rb[0]&&o<=rb[1],c=2===a.length&&a[0]===a[1];return{value:Hg(c?a[0]:a),isSecondary:l||c}}(p),g=m.value,v=m.isSecondary,b=u[0].startsWith("FontAwesome"),y=tv(f,g),C=y;if(b){var E=(a=Xg[r=g],o=tv("fas",r),a||(o?{prefix:"fas",iconName:o}:null)||{prefix:null,iconName:null});E.iconName&&E.prefix&&(y=E.iconName,f=E.prefix)}if(!y||v||l&&l.getAttribute("data-prefix")===f&&l.getAttribute("data-icon")===C)s();else{e.setAttribute(n,C),l&&e.removeChild(l);var w={iconName:null,title:null,titleId:null,prefix:null,transform:Cg,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},S=w.extra;S.attributes["data-fa-pseudo-element"]=t,Pv(y,f).then((function(i){var r=Ev(Mm(Mm({},w),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:C,extra:S,watchable:!0})),a=Km.createElement("svg");"::before"===t?e.insertBefore(a,e.firstChild):e.appendChild(a),a.outerHTML=r.map((function(e){return Dg(e)})).join("\n"),e.removeAttribute(n),s()})).catch(i)}}else s()}))}function ob(e){return Promise.all([ab(e,"::before"),ab(e,"::after")])}function lb(e){return!(e.parentNode===document.head||~Jm.indexOf(e.tagName.toUpperCase())||e.getAttribute("data-fa-pseudo-element")||e.parentNode&&"svg"===e.parentNode.tagName)}function cb(e){if($m)return new Promise((function(t,n){var s=wg(e.querySelectorAll("*")).filter(lb).map(ob),i=Mv("searchPseudoElements");qv(),Promise.all(s).then((function(){i(),Bv(),t()})).catch((function(){i(),Bv(),n()}))}))}var ub=!1,db=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),s=n[0],i=n.slice(1).join("-");if(s&&"h"===i)return e.flipX=!0,e;if(s&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(s){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},hb={mixout:function(){return{parse:{transform:function(e){return db(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=db(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,s=e.containerWidth,i=e.iconWidth,r={transform:"translate(".concat(s/2," 256)")},a="translate(".concat(32*n.x,", ").concat(32*n.y,") "),o="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:r,inner:{transform:"".concat(a," ").concat(o," ").concat(l)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:Mm({},c.outer),children:[{tag:"g",attributes:Mm({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:Mm(Mm({},t.icon.attributes),c.path)}]}]}}}},pb={x:0,y:0,width:"100%",height:"100%"};function fb(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var mb,gb={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),s=n?av(n.split(" ").map((function(e){return e.trim()}))):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=iv()),e.mask=s,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,s=e.attributes,i=e.main,r=e.mask,a=e.maskId,o=e.transform,l=i.width,c=i.icon,u=r.width,d=r.icon,h=function(e){var t=e.transform,n=e.containerWidth,s=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},r="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(r," ").concat(a," ").concat(o)},path:{transform:"translate(".concat(s/2*-1," -256)")}}}({transform:o,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:Mm(Mm({},pb),{},{fill:"white"})},f=c.children?{children:c.children.map(fb)}:{},m={tag:"g",attributes:Mm({},h.inner),children:[fb(Mm({tag:c.tag,attributes:Mm(Mm({},c.attributes),h.path)},f))]},g={tag:"g",attributes:Mm({},h.outer),children:[m]},v="mask-".concat(a||Eg()),b="clip-".concat(a||Eg()),y={tag:"mask",attributes:Mm(Mm({},pb),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,g]},C={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:(t=d,"g"===t.tag?t.children:[t])},y]};return n.push(C,{tag:"rect",attributes:Mm({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(v,")")},pb)}),{children:n,attributes:s}}}};mb={mixoutsTo:bv}.mixoutsTo,lv=[Ng,eb,tb,nb,sb,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=cb,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?Km:t;vg.searchPseudoElements&&cb(n)}}},{mixout:function(){return{dom:{unwatch:function(){qv(),ub=!0}}}},hooks:function(){return{bootstrap:function(){zv(hv("mutationObserverCallbacks",{}))},noAuto:function(){Vv&&Vv.disconnect()},watch:function(e){var t=e.observeMutationsRoot;ub?Bv():zv(hv("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},hb,gb,{provides:function(e){var t=!1;Gm.matchMedia&&(t=Gm.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:Mm(Mm({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=Mm(Mm({},s),{},{attributeName:"opacity"}),r={tag:"circle",attributes:Mm(Mm({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||r.children.push({tag:"animate",attributes:Mm(Mm({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Mm(Mm({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(r),e.push({tag:"path",attributes:Mm(Mm({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Mm(Mm({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:Mm(Mm({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Mm(Mm({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),s=null!==n&&(""===n||n);return e.symbol=s,e}}}}],cv={},Object.keys(uv).forEach((function(e){-1===dv.indexOf(e)&&delete uv[e]})),lv.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"==typeof t[e]&&(mb[e]=t[e]),"object"===Im(t[e])&&Object.keys(t[e]).forEach((function(n){mb[e]||(mb[e]={}),mb[e][n]=t[e][n]}))})),e.hooks){var n=e.hooks();Object.keys(n).forEach((function(e){cv[e]||(cv[e]=[]),cv[e].push(n[e])}))}e.provides&&e.provides(uv)}));var vb=bv.dom,bb={prefix:"far",iconName:"face-smile",icon:[512,512,[128578,"smile"],"f118","M256 352C293.2 352 319.2 334.5 334.4 318.1C343.3 308.4 358.5 307.7 368.3 316.7C378 325.7 378.6 340.9 369.6 350.6C347.7 374.5 309.7 400 256 400C202.3 400 164.3 374.5 142.4 350.6C133.4 340.9 133.1 325.7 143.7 316.7C153.5 307.7 168.7 308.4 177.6 318.1C192.8 334.5 218.8 352 256 352zM208.4 208C208.4 225.7 194 240 176.4 240C158.7 240 144.4 225.7 144.4 208C144.4 190.3 158.7 176 176.4 176C194 176 208.4 190.3 208.4 208zM304.4 208C304.4 190.3 318.7 176 336.4 176C354 176 368.4 190.3 368.4 208C368.4 225.7 354 240 336.4 240C318.7 240 304.4 225.7 304.4 208zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z"]};bv.library.add({prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]},bb,{prefix:"fas",iconName:"clover",icon:[512,512,[],"e139","M512 302.3c0 35.29-28.99 63.91-64.28 63.91c-38.82 0-88.7-22.75-122.4-40.92c18.17 33.7 40.92 83.57 40.92 122.4c0 35.29-28.61 63.91-63.91 63.91c-18.1 0-34.45-7.52-46.09-19.63C244.6 504.3 228 512 209.7 512c-35.29 0-63.91-28.99-63.91-64.28c0-38.82 22.75-88.7 40.92-122.4c-33.7 18.17-83.57 40.92-122.4 40.92c-35.29 0-63.91-28.61-63.91-63.91c0-18.1 7.52-34.45 19.63-46.09C7.676 244.6 0 228 0 209.7c0-35.29 28.99-63.91 64.28-63.91c38.82 0 88.7 22.75 122.4 40.92C168.5 152.1 145.8 103.1 145.8 64.28c0-35.29 28.61-63.91 63.91-63.91c18.1 0 34.45 7.52 46.09 19.63C267.4 7.676 283.1 0 302.3 0c35.29 0 63.91 28.99 63.91 64.28c0 38.82-22.75 88.7-40.92 122.4c33.7-18.17 83.57-40.92 122.4-40.92c35.29 0 63.91 28.61 63.91 63.91c0 18.1-7.52 34.45-19.63 46.09C504.3 267.4 512 283.1 512 302.3z"]},{prefix:"fas",iconName:"utensils",icon:[448,512,[61685,127860,"cutlery"],"f2e7","M221.6 148.7C224.7 161.3 224.8 174.5 222.1 187.2C219.3 199.1 213.6 211.9 205.6 222.1C191.1 238.6 173 249.1 151.1 254.1V472C151.1 482.6 147.8 492.8 140.3 500.3C132.8 507.8 122.6 512 111.1 512C101.4 512 91.22 507.8 83.71 500.3C76.21 492.8 71.1 482.6 71.1 472V254.1C50.96 250.1 31.96 238.9 18.3 222.4C10.19 212.2 4.529 200.3 1.755 187.5C-1.019 174.7-.8315 161.5 2.303 148.8L32.51 12.45C33.36 8.598 35.61 5.197 38.82 2.9C42.02 .602 45.97-.4297 49.89 .0026C53.82 .4302 57.46 2.303 60.1 5.259C62.74 8.214 64.18 12.04 64.16 16V160H81.53L98.62 11.91C99.02 8.635 100.6 5.621 103.1 3.434C105.5 1.248 108.7 .0401 111.1 .0401C115.3 .0401 118.5 1.248 120.9 3.434C123.4 5.621 124.1 8.635 125.4 11.91L142.5 160H159.1V16C159.1 12.07 161.4 8.268 163.1 5.317C166.6 2.366 170.2 .474 174.1 .0026C178-.4262 181.1 .619 185.2 2.936C188.4 5.253 190.6 8.677 191.5 12.55L221.6 148.7zM448 472C448 482.6 443.8 492.8 436.3 500.3C428.8 507.8 418.6 512 408 512C397.4 512 387.2 507.8 379.7 500.3C372.2 492.8 368 482.6 368 472V352H351.2C342.8 352 334.4 350.3 326.6 347.1C318.9 343.8 311.8 339.1 305.8 333.1C299.9 327.1 295.2 320 291.1 312.2C288.8 304.4 287.2 296 287.2 287.6L287.1 173.8C288 136.9 299.1 100.8 319.8 70.28C340.5 39.71 369.8 16.05 404.1 2.339C408.1 .401 414.2-.3202 419.4 .2391C424.6 .7982 429.6 2.62 433.9 5.546C438.2 8.472 441.8 12.41 444.2 17.03C446.7 21.64 447.1 26.78 448 32V472z"]},{prefix:"far",iconName:"futbol",icon:[512,512,[9917,"futbol-ball","soccer-ball"],"f1e3","M177.1 228.6L207.9 320h96.5l29.62-91.38L256 172.1L177.1 228.6zM255.1 0C114.6 0 .0001 114.6 .0001 256S114.6 512 256 512s255.1-114.6 255.1-255.1S397.4 0 255.1 0zM435.2 361.1l-103.9-1.578l-30.67 99.52C286.2 462.2 271.3 464 256 464s-30.19-1.773-44.56-4.93L180.8 359.6L76.83 361.1c-14.93-25.35-24.79-54.01-27.8-84.72L134.3 216.4L100.7 118.1c19.85-22.34 44.32-40.45 72.04-52.62L256 128l83.29-62.47c27.72 12.17 52.19 30.27 72.04 52.62L377.7 216.4l85.23 59.97C459.1 307.1 450.1 335.8 435.2 361.1z"]},{prefix:"fas",iconName:"plane-departure",icon:[640,512,[128747],"f5b0","M484.6 62C502.6 52.8 522.6 48 542.8 48H600.2C627.2 48 645.9 74.95 636.4 100.2C618.2 148.9 582.1 188.9 535.6 212.2L262.8 348.6C258.3 350.8 253.4 352 248.4 352H110.7C101.4 352 92.5 347.9 86.42 340.8L13.34 255.6C6.562 247.7 9.019 235.5 18.33 230.8L50.49 214.8C59.05 210.5 69.06 210.2 77.8 214.1L135.1 239.1L234.6 189.7L87.64 95.2C77.21 88.49 78.05 72.98 89.14 67.43L135 44.48C150.1 36.52 169.5 35.55 186.1 41.8L381 114.9L484.6 62zM0 480C0 462.3 14.33 448 32 448H608C625.7 448 640 462.3 640 480C640 497.7 625.7 512 608 512H32C14.33 512 0 497.7 0 480z"]},{prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"]},{prefix:"fas",iconName:"icons",icon:[512,512,["heart-music-camera-bolt"],"f86d","M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"]},{prefix:"far",iconName:"flag",icon:[512,512,[61725,127988],"f024","M476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87c-34.63 0-77.87 8.003-137.2 32.05V24C48 10.75 37.25 0 24 0S0 10.75 0 24v464C0 501.3 10.75 512 24 512s24-10.75 24-24v-104c53.59-23.86 96.02-31.81 132.8-31.81c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0zM464 319.8c-30.31 10.82-58.08 16.1-84.6 16.1c-30.8 0-58.31-7-87.44-14.41c-32.01-8.141-68.29-17.37-111.1-17.37c-42.35 0-85.99 9.09-132.8 27.73V84.14l18.03-7.301c47.39-19.2 86.38-28.54 119.2-28.54c28.24 .0039 49.12 6.711 73.31 14.48c25.38 8.148 54.13 17.39 90.58 17.39c35.43 0 72.24-8.496 114.9-26.61V319.8z"]},{prefix:"fas",iconName:"sliders",icon:[512,512,["sliders-h"],"f1de","M0 416C0 398.3 14.33 384 32 384H86.66C99 355.7 127.2 336 160 336C192.8 336 220.1 355.7 233.3 384H480C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H233.3C220.1 476.3 192.8 496 160 496C127.2 496 99 476.3 86.66 448H32C14.33 448 0 433.7 0 416V416zM192 416C192 398.3 177.7 384 160 384C142.3 384 128 398.3 128 416C128 433.7 142.3 448 160 448C177.7 448 192 433.7 192 416zM352 176C384.8 176 412.1 195.7 425.3 224H480C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H425.3C412.1 316.3 384.8 336 352 336C319.2 336 291 316.3 278.7 288H32C14.33 288 0 273.7 0 256C0 238.3 14.33 224 32 224H278.7C291 195.7 319.2 176 352 176zM384 256C384 238.3 369.7 224 352 224C334.3 224 320 238.3 320 256C320 273.7 334.3 288 352 288C369.7 288 384 273.7 384 256zM480 64C497.7 64 512 78.33 512 96C512 113.7 497.7 128 480 128H265.3C252.1 156.3 224.8 176 192 176C159.2 176 131 156.3 118.7 128H32C14.33 128 0 113.7 0 96C0 78.33 14.33 64 32 64H118.7C131 35.75 159.2 16 192 16C224.8 16 252.1 35.75 265.3 64H480zM160 96C160 113.7 174.3 128 192 128C209.7 128 224 113.7 224 96C224 78.33 209.7 64 192 64C174.3 64 160 78.33 160 96z"]},{prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"]}),vb.watch();class yb extends f.Component{constructor(){super(...arguments),u(this,"handleClick",(e=>{e.preventDefault(),this.props.enable&&this.props.onCategoryClick(this.props.category)}))}shouldComponentUpdate(e){return e.selected!==this.props.selected||e.enable!==this.props.enable}render(){let e={[Zf]:!0};return this.props.selected&&(e[em]=!0),this.props.enable||(e[tm]=!0),h("span",{role:"button",className:g(e),onClick:this.handleClick,"aria-label":this.props.category,children:this.props.icon})}}u(yb,"propTypes",{category:y.string.isRequired,icon:y.node.isRequired,onCategoryClick:y.func.isRequired,selected:y.bool.isRequired,enable:y.bool.isRequired});class Cb extends f.Component{constructor(){super(...arguments),u(this,"emojiItemRef",(e=>{this.emojiItem=e})),u(this,"emojiName",(()=>{const{formatMessage:e}=this.props.intl;return e({id:"emoji_picker_item.emoji_aria_label",defaultMessage:"{emojiName} emoji"},{emojiName:this.props.emoji.aliases[0].replace(/_/g," ")})})),u(this,"handleMouseOver",(()=>{this.props.isSelected||this.props.onItemOver(this.props.categoryIndex,this.props.emojiIndex)})),u(this,"handleMouseOverThrottle",da(this.handleMouseOver,150,{leading:!0,trailing:!0})),u(this,"handleClick",(()=>{this.props.onItemClick(this.props.emoji)}))}shouldComponentUpdate(e){return e.isSelected!==this.props.isSelected}componentDidUpdate(e){if(!e.isSelected&&this.props.isSelected){const e=this.emojiItem.offsetTop,t=e+this.emojiItem.offsetHeight,{containerRef:n,containerTop:s,containerBottom:i}=this.props;e<s?n.scrollTop=e-10:t>i&&(n.scrollTop=t-n.offsetHeight+10)}}render(){const{emoji:e}=this.props;let t={[im]:!0};this.props.isSelected&&(t[rm]=!0);let n,s="emojisprite";return s+=" emoji-category-"+e.category+"-"+e.batch,s+=" emoji-"+e.filename,e.category&&e.batch?n=h("img",{alt:"emoji image","data-testid":e.aliases,onMouseOver:this.handleMouseOverThrottle,src:wm,className:s,onClick:this.handleClick,id:"emoji-"+e.filename,"aria-label":this.emojiName(),role:"button",loading:"lazy"}):(console.info("emoji",e),n=h("img",{alt:"custom emoji image",onMouseOver:this.handleMouseOver,src:Cn(e),className:"emoji-category--custom",onClick:this.handleClick,loading:"lazy"})),h("div",{className:g(t),ref:this.emojiItemRef,children:h("div",{"data-testid":"emojiItem",children:n})})}}u(Cb,"propTypes",{emoji:y.object.isRequired,onItemOver:y.func.isRequired,onItemClick:y.func.isRequired,category:y.string.isRequired,isSelected:y.bool,categoryIndex:y.number.isRequired,emojiIndex:y.number.isRequired,containerRef:y.any,containerTop:y.number.isRequired,containerBottom:y.number.isRequired,intl:Qo.isRequired});var Eb=S(Cb);class wb extends f.PureComponent{constructor(){super(...arguments),u(this,"divRef",(e=>{this.div=e}))}componentDidMount(){this.updateOffsetFrame=window.requestAnimationFrame((()=>{this.props.updateCategoryOffset(this.props.categoryName,this.div.offsetTop)}))}componentWillUnmount(){this.updateOffsetFrame&&window.cancelAnimationFrame(this.updateOffsetFrame)}render(){return m("div",{ref:this.divRef,"data-ref":"icons-section",children:[h("div",{className:g(nm),children:h("div",{className:g(sm),id:`emojipickercat-${this.props.categoryName}`,children:h(v,{id:"emoji_picker."+this.props.categoryName})})}),h("div",{className:g(nm),children:this.props.children})]})}}u(wb,"propTypes",{categoryName:y.string.isRequired,children:y.any,updateCategoryOffset:y.func.isRequired});class Sb extends f.PureComponent{render(){const e=this.props.emoji;if(e){let t,n,s;return e.aliases&&e.category&&e.batch?(t=e.aliases[0],t=t.replace(/\-/g," "),t=t.replace(/_/g," "),n=e.aliases,s=h("span",{className:cm,children:h("img",{id:"emojiPickerSpritePreview",alt:"emoji category image",src:wm,loading:"lazy",className:"emojisprite-preview emoji-category-"+e.category+"-"+e.batch+" emoji-"+e.filename})})):(t=e.name.replace(/\-/g," "),t=t.replace(/_/g," "),n=[e.name],s=h("img",{id:"emojiPickerSpritePreview",alt:"emoji preview image",className:"emoji-picker__preview-image",src:Cn(e),loading:"lazy"})),m("div",{className:g(am,"emoji-picker__preview"),children:[h("div",{className:g(lm,"emoji-picker__preview-image-box"),children:s}),m("div",{className:g(um,"emoji-picker__preview-image-label-box"),children:[h("span",{className:g(dm),children:t}),h("span",{id:"emojiPickerAliasesPreview",className:g(hm),children:":"+n.join(": :")+":"})]})]})}return h("div",{className:g(am,om,"emoji-picker__preview emoji-picker__preview-placeholder"),children:h(v,{id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"})})}}u(Sb,"propTypes",{emoji:y.object});const _b={height:290},Ab={recent:{name:"recent",className:"fa-regular fa-clock",id:te("emoji_picker.recent"),message:"Recently Used",offset:0}},kb={people:{name:"people",className:"fa-regular fa-face-smile",id:te("emoji_picker.people"),message:"People",offset:0}},Pb=l(o({},kb),{nature:{name:"nature",className:"fa-solid fa-clover",id:te("emoji_picker.nature"),message:"Nature",offset:0},foods:{name:"foods",className:"fa-solid fa-utensils",id:te("emoji_picker.foods"),message:"Foods",offset:0},activity:{name:"activity",className:"fa-regular fa-futbol",id:te("emoji_picker.activity"),message:"Activity",offset:0},places:{name:"places",className:"fa-solid fa-plane-departure",id:te("emoji_picker.places"),message:"Places",offset:0},objects:{name:"objects",className:"fa-solid fa-lightbulb",id:te("emoji_picker.objects"),message:"Objects",offset:0},symbols:{name:"symbols",className:"fa-solid fa-icons",id:te("emoji_picker.symbols"),message:"Symbols",offset:0},flags:{name:"flags",className:"fa-regular fa-flag",id:te("emoji_picker.flags"),message:"Flags",offset:0},custom:{name:"custom",className:"fa-solid fa-sliders",id:te("emoji_picker.custom"),message:"Custom",offset:0}});function xb(e){return e.filename||e.id}const Tb=class extends f.PureComponent{constructor(e){super(e),u(this,"renderAllCategories",(()=>{const e=this.props.recentEmojis.length?o(o({},Ab),Pb):Pb;this.setState((t=>({categories:o(o({},e),t.categories),renderAllCategories:!0})))})),u(this,"loadMoreCustomEmojis",(async()=>{if(!this.props.customEmojisEnabled||this.loadingMoreEmojis)return;this.loadingMoreEmojis=!0;const{data:e}=await this.props.actions.getCustomEmojis(this.props.customEmojiPage,200);if(e){if(e.length<200)return this.missingPages=!1,void(this.loadingMoreEmojis=!1);await this.props.actions.incrementEmojiPickerPage(),this.loadingMoreEmojis=!1}else this.loadingMoreEmojis=!1})),u(this,"lastVisibleEmojiRef",(e=>{this.lastVisibleEmoji=e})),u(this,"emojiPickerContainerRef",(e=>{this.emojiPickerContainer=e})),u(this,"emojiSearchInput",(e=>{this.searchInput=e})),u(this,"handleCategoryClick",(e=>{console.info("onCategoryClick",e,this.state.categories[e].offset),this.setState({cursor:[Object.keys(this.state.categories).indexOf(e),0]}),this.updateEmojisToShow(this.state.categories[e].offset),this.emojiPickerContainer.scrollTop=this.state.categories[e].offset})),u(this,"handleFilterChange",(e=>{e.preventDefault();const t=e.target.value.toLowerCase().replace(/^:|:$/g,"");this.props.customEmojisEnabled&&t&&""!==t.trim()&&this.props.actions.searchCustomEmojis(t),this.props.handleFilterChange(t),this.setState((()=>({cursor:[-1,-1]})))})),u(this,"handleItemOver",((e,t)=>{this.setState({cursor:[e,t]})})),u(this,"handleItemClick",(e=>{this.props.onEmojiClick(e)})),u(this,"handleCategoryKeyDown",(e=>{switch(e.key){case"ArrowRight":e.preventDefault(),this.selectNextEmoji(),this.searchInput.focus();break;case"ArrowLeft":e.preventDefault(),this.selectPrevEmoji(),this.searchInput.focus();break;case"ArrowUp":e.preventDefault(),this.selectPrevEmoji(9),this.searchInput.focus();break;case"ArrowDown":e.preventDefault(),this.selectNextEmoji(9),this.searchInput.focus()}})),u(this,"handleKeyDown",(e=>{switch(e.key){case"ArrowRight":(-1!==this.state.cursor[0]||-1!==this.state.cursor[1]||e.target.selectionStart+1>this.props.filter.length)&&(e.preventDefault(),this.selectNextEmoji());break;case"ArrowLeft":this.state.cursor[0]>0||this.state.cursor[1]>0?(e.preventDefault(),this.selectPrevEmoji()):0===this.state.cursor[0]&&0===this.state.cursor[1]&&(this.setState({cursor:[-1,-1]}),e.target.selectionStart=this.props.filter.length,e.target.selectionEnd=this.props.filter.length,e.preventDefault(),this.searchInput.focus());break;case"ArrowUp":e.preventDefault(),e.shiftKey?e.target.selectionStart=0:-1===this.state.cursor[0]?(e.target.selectionStart=0,e.target.selectionEnd=0):0===this.state.cursor[0]&&this.state.cursor[1]<9?(this.setState({cursor:[-1,-1]}),e.target.selectionStart=this.props.filter.length,e.target.selectionEnd=this.props.filter.length,this.searchInput.focus()):this.selectPrevEmoji(9);break;case"ArrowDown":e.preventDefault(),e.shiftKey?e.target.selectionEnd=this.props.filter.length:this.props.filter&&0===e.target.selectionStart?(e.target.selectionStart=this.props.filter.length,e.target.selectionEnd=this.props.filter.length):this.selectNextEmoji(9);break;case"Enter":e.preventDefault(),this.getCurrentEmojiByCursor(this.state.cursor)&&this.props.onEmojiClick(this.getCurrentEmojiByCursor(this.state.cursor))}})),u(this,"handleScroll",(()=>{this.emojiPickerContainer&&this.updateEmojisToShow(this.emojiPickerContainer.scrollTop)})),u(this,"emojiCurrentResultsItems",((e,t,n)=>{const{cursor:s,emojisToShow:i}=this.state;let r=n;return t.map(((t,n)=>{let a;return r++,r===i&&(a=this.lastVisibleEmojiRef),r>=i?h("div",{className:"emoji-picker__item",ref:a,children:h("img",{alt:"emoji image",src:wm,className:"emojisprite",loading:"lazy"})},r):h(Eb,{emoji:t,onItemOver:this.handleItemOver,onItemClick:this.handleItemClick,onItemUnmount:t,category:t.category,isSelected:s[0]===e&&s[1]===n,categoryIndex:e,emojiIndex:n,containerRef:this.emojiPickerContainer,containerTop:this.state.divTopOffset,containerBottom:this.state.divTopOffset+this.divHeight},t.filename+":"+n)}))})),u(this,"updateCategoryOffset",((e,t)=>{"searchResults"!==e&&this.setState((n=>({categories:l(o({},n.categories),{[e]:l(o({},n.categories[e]),{offset:t})})})))})),this.handleScrollThrottle=ha(this.handleScroll,100,{leading:!1,trailing:!0}),this.divHeight=0,this.missingPages=!0,this.loadingMoreEmojis=!1;const t=e.recentEmojis.length?o(o({},Ab),kb):kb;this.state={allEmojis:{},categories:t,cursor:[-1,-1],divTopOffset:0,emojisToShow:1476,renderAllCategories:!1}}static getEmojis(e,t){const{categories:n,allEmojis:s}=t,i=e.emojiMap,r=i.customEmojis;for(const a of Object.keys(n)){let t=[];if("recent"===a&&e.recentEmojis.length){t=[...e.recentEmojis].reverse().filter((e=>i.has(e))).map((e=>i.get(e)))}else{t=(En.get(a)||[]).map((e=>wn[e])),"custom"===a&&(t=t.concat([...r.values()]))}n[a].emojiIds=t.map((e=>xb(e)));for(let e=0;e<t.length;e++){const n=t[e],i=xb(n);s[i]=l(o({},n),{visible:!1,offset:null}),n.filename||(s[i]=l(o({},s[i]),{aliases:[n.name],category:"custom",filename:i}))}}return{categories:n,allEmojis:s}}static getDerivedStateFromProps(e,t){let n={emojiMap:e.emojiMap};if(JSON.stringify(Object.keys(t.categories))!==t.categoryKeys||e.emojiMap!==t.emojiMap){const{categories:s,allEmojis:i}=Tb.getEmojis(e,t);n=l(o({},n),{categories:s,allEmojis:i,categoryKeys:JSON.stringify(Object.keys(s))})}return n}componentDidMount(){0===this.props.customEmojiPage&&this.loadMoreCustomEmojis(),window.requestAnimationFrame((()=>{this.searchInput&&this.searchInput.focus(),this.renderAllCategoriesFrame=window.requestAnimationFrame((()=>{this.renderAllCategories()}))})),this.emojiPickerContainer&&(this.divHeight=this.emojiPickerContainer.offsetHeight);const e=document.getElementById("root");e&&e.classList.add("emoji-picker--active")}updateEmojisToShow(e){if(e!==this.state.divTopOffset&&(this.setState({divTopOffset:e}),this.lastVisibleEmoji)){const t=this.lastVisibleEmoji.offsetTop-(e+290+75);if(t<=0){const e=135+Math.ceil(t/30*9*-1);this.setState((t=>({emojisToShow:t.emojisToShow+e})))}}}componentWillUnmount(){this.renderAllCategoriesFrame&&window.cancelAnimationFrame(this.renderAllCategoriesFrame);const e=document.getElementById("root");e&&e.classList.remove("emoji-picker--active")}componentDidUpdate(e){if(this.props.visible&&!e.visible&&this.searchInput.focus(),!this.missingPages||!this.emojiPickerContainer)return;this.emojiPickerContainer.scrollHeight-this.state.divTopOffset-this.emojiPickerContainer.clientHeight<=500&&this.loadMoreCustomEmojis()}selectNextEmoji(e=1){const{cursor:t}=this.state;let n=[t[0],t[1]+e];this.getCurrentEmojiByCursor(n)?this.setState({cursor:n}):(n=[t[0]+1,0],this.getCurrentEmojiByCursor(n)&&this.setState({cursor:n}))}selectPrevEmoji(e=1){const{cursor:t}=this.state;let n=[t[0],t[1]-e];if(this.getCurrentEmojiByCursor(n))this.setState({cursor:n});else if(0!==t[0]){const e=this.getCategoryByIndex(t[0]-1),s=this.state.categories[e.name].emojiIds.length-1;n=[t[0]-1,s],this.getCurrentEmojiByCursor(n)&&this.setState({cursor:n})}}getCategoryByIndex(e){return this.props.filter&&0!==e?null:this.getCategoriesByKey(Object.keys(this.state.categories)[e])}getCurrentEmojiByCursor(e){const t=this.getCategoryByIndex(e[0]);return t?this.getEmojisByCategory(t)[e[1]]:null}getCategoriesByKey(e){return this.props.filter?{id:"searchResults",name:"searchResults"}:this.state.categories[e]}sortEmojis(e){const{recentEmojis:t}=this.props,n=[],s=[];Object.values(e).forEach((e=>{let i=s;for(let s=0;s<e.aliases.length;s++)t.includes(e.aliases[s].toLowerCase())&&(i=n);i.push(e)}));const i=(e,t)=>function(e,t,n){const s=bm(e,n),i=bm(t,n),r=s.startsWith(n);return r===i.startsWith(n)?s in vm&&vm[s](i)||fm(s,i,e,t):r?-1:1}(e,t,this.props.filter);return n.sort(i),s.sort(i),[...n,...s]}getEmojisByCategory(e){if(this.props.filter){const e=Object.values(this.state.allEmojis).filter((e=>{for(let t=0;t<e.aliases.length;t++)if(e.aliases[t].toLowerCase().includes(this.props.filter))return!0;return!1}));return this.sortEmojis(e)}return this.state.categories[e.name].emojiIds.map((e=>this.state.allEmojis[e]))}getCurrentEmojiName(){const e=this.getCurrentEmojiByCursor(this.state.cursor);return e?e.aliases[0].replace(/_/g," "):""}getCurrentEmojiCategoryName(){const e=Object.keys(this.state.categories);let t=e[0];for(let n=e.length-1;n>=0;n--){const s=this.state.categories[e[n]];if(s.offset&&this.state.divTopOffset>s.offset-20){t=e[n];break}}return t}emojiCategories(){const e=this.props.recentEmojis.length?o(o({},Ab),Pb):Pb,t=Object.keys(e),n=this.props.filter?t[0]:this.getCurrentEmojiCategoryName(),s=t.map((t=>{const s=e[t];return console.info("!this.props.filter",!this.props.filter),h(yb,{category:s.name,icon:h(v,{id:s.id,defaultMessage:s.message,children:e=>h("i",{className:s.className,title:e})}),onCategoryClick:this.handleCategoryClick,selected:n===s.name,enable:!this.props.filter},"header-"+s.name)}));return h("div",{className:g(Wf),onKeyDown:this.handleCategoryKeyDown,children:s})}emojiSearch(){return m("div",{className:Kf,children:[h("span",{className:g(Yf,"fa-solid fa-magnifying-glass")}),h(v,{id:"emoji_picker.search_emoji",defaultMessage:"Search for an emoji",children:e=>h(co,{id:"emojiPickerSearch","aria-label":e,ref:this.emojiSearchInput,className:Xf,"data-testid":"emojiInputSearch",type:"text",onChange:this.handleFilterChange,onKeyDown:this.handleKeyDown,autoComplete:"off",placeholder:{id:te("emoji_picker.search"),defaultMessage:"Search Emoji"},value:this.props.filter})})]})}emojiCurrentResults(){const{filter:e}=this.props,t=e?["searchResults"]:Object.keys(this.state.categories);let n=0,s=[];for(let i=0;i<t.length;i++){const e=this.getCategoriesByKey(t[i]),r=this.getEmojisByCategory(e),a=this.emojiCurrentResultsItems(i,r,n);if(n+=a.length,s=[...s,h(wb,{categoryName:e.name,updateCategoryOffset:this.updateCategoryOffset,role:"application",children:a},e.id)],0===a.length)return h(Tm,{variant:Cm.ChannelSearch,titleValues:{channelName:`"${this.props.filter}"`}})}return h("div",{ref:this.emojiPickerContainerRef,onScroll:this.handleScrollThrottle,className:$f,style:l(o({},_b),{overflowY:this.state.renderAllCategories?"auto":"hidden"}),children:h("div",{className:Qf,children:s})})}render(){return m("div",{className:Gf,role:"application",children:[h("div",{"aria-live":"assertive",className:"sr-only",children:h(v,{id:"emoji_picker_item.emoji_aria_label",defaultMessage:"{emojiName} emoji",values:{emojiName:this.getCurrentEmojiName()}})}),this.emojiSearch(),this.emojiCategories(),this.emojiCurrentResults(),h(Sb,{emoji:this.getCurrentEmojiByCursor(this.state.cursor)})]})}};let Nb=Tb;u(Nb,"propTypes",{listHeight:y.number,onEmojiClose:y.func.isRequired,onEmojiClick:y.func.isRequired,customEmojisEnabled:y.bool,emojiMap:y.object.isRequired,recentEmojis:y.array.isRequired,customEmojiPage:y.number.isRequired,visible:y.bool,actions:y.shape({getCustomEmojis:y.func.isRequired,searchCustomEmojis:y.func.isRequired,incrementEmojiPickerPage:y.func.isRequired}).isRequired,filter:y.string.isRequired,handleFilterChange:y.func.isRequired}),u(Nb,"defaultProps",{listHeight:245,customEmojiPage:0,customEmojisEnabled:!1});var Mb=p((function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Sn(e),recentEmojis:_n(e)}}),(function(e){return{actions:E({getCustomEmojis:An,searchCustomEmojis:kn,incrementEmojiPickerPage:Pn},e)}}))(Nb),Ib=e=>{const[t,n]=d.exports.useState("");return m("div",{className:zf,children:[h(pm,{handleEmojiPickerClose:()=>{e.onEmojiClose()}}),h(Mb,{onEmojiClose:e.onEmojiClose,onEmojiClick:e.onEmojiClick,customEmojis:e.customEmojis,filter:t,handleFilterChange:n})]})},Ob=e=>h("div",{className:Vf,children:h(Ib,{enableGifPicker:e.enableGifPicker,onEmojiClose:e.onHide,onEmojiClick:e.onEmojiClick,onGifClick:e.onGifClick})}),Rb=za.jsx;var Lb=d.exports.forwardRef((function(e,t){return Rb("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:Rb("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}))})),Db=za.jsx;var Fb=d.exports.forwardRef((function(e,t){return Db("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:Db("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}))}));class jb extends f.PureComponent{render(){const{canDownload:e,children:t,compactDisplay:n,fileInfo:s,handleImageClick:i,iconClass:r}=this.props,a=s.name,o=Oo(a);let l;return l=n?m("a",{id:"file-attachment-link",href:"#",onClick:i,className:"post-image__name",rel:"noopener noreferrer",children:[h(Fb,{className:"icon"}),o]}):e?h("div",{className:r||"post-image__name",children:h("a",{href:Ro(s.id),"aria-label":be("view_image_popover.download","Download").toLowerCase(),download:a,target:"_blank",rel:"noopener noreferrer",children:t||o})}):h("span",{className:"post-image__name u3-block u3-whitespace-nowrap u3-overflow-ellipsis u3-text-sm u3-mr-3 u3-overflow-hidden",children:o}),l}}var Hb="mqik-3ee96595",Ub="mqik-312828d4",qb="mqik-ffa562df",Bb="mqik-0968d6ac",Vb="mqik-6754df96",zb="mqik-a30aa549",Wb="mqik-436fa8ee",Gb="mqik-11934687",Kb="mqik-5043b508";class Yb extends f.PureComponent{constructor(){super(...arguments),u(this,"handleRemove",(()=>{this.props.handleRemove(this.props.clientId)}))}render(){let e,t,n=0;const{fileInfo:s,clientId:i}=this.props;let r="0%";if(s){n=s.percent?s.percent:0,r=`${n.toFixed(0)}%`;const i=Lo(s.type);xn(i),e=m("div",{className:"u3-text-xs",children:[h(jb,{fileInfo:s,compactDisplay:!1,canDownload:!1}),h("span",{className:"post-image__uploadingTxt",children:100===n?h(v,{id:"create_post.fileProcessing",defaultMessage:"Processing..."}):h(f.Fragment,{children:h(v,{id:"admin.plugin.uploading",defaultMessage:"Uploading..."})})})]}),n&&(t=h("div",{className:"u3-absolute u3-bottom-0 u3-left-0 u3-w-full",children:h("div",{className:"u3-overflow-hidden u3-h-0.5 u3-text-xs u3-flex u3-rounded u3-bg-blue-200",children:h("div",{style:{width:`${n}%`},className:"u3-shadow-none u3-flex u3-flex-col u3-text-center u3-whitespace-nowrap u3-text-white u3-justify-center u3-bg-blue-500"})})}))}return m("div",{ref:i,className:g(Ub,"file-preview post-image__column"),"data-client-id":i,children:[h("div",{className:qb,children:h("span",{className:"u3-block u3-text-center u3-py-2",children:r})}),m("div",{className:Vb,children:[h("div",{className:zb,children:h("div",{className:"post-image__detail u3-text-sm",children:e})}),h("a",{className:Kb,onClick:this.handleRemove,children:h(Ga,{className:"u3-w-3 u3-h-3"})})]}),t]},i)}}class Xb extends f.PureComponent{constructor(){super(...arguments),u(this,"handleRemove",(e=>{this.props.onRemove(e)}))}render(){const e=[];if(this.props.fileInfos.forEach((t=>{var n;const s=Tn(t.extension);let i,r="file-preview post-image__column";if(s===Nn.SVG&&this.props.enableSVGs)i=h("img",{alt:"file preview",className:"post-image normal",src:Do(t.id),loading:"lazy"});else if(s===Nn.IMAGE){let e="post-image";t.width&&t.width<ve.THUMBNAIL_WIDTH&&t.height&&t.height<ve.THUMBNAIL_HEIGHT?e+=" small":e+=" normal";let s=Fo(t.id,null==(n=t.preview_path)?void 0:n.replace("_preview.jpg","_thumb.jpg"));Mn(t.extension)&&!t.has_preview_image&&(s=Do(t.id)),i=h("div",{className:g(Bb,e),style:{backgroundImage:`url(${s})`,backgroundSize:"cover"}})}else r+=" custom-file",i=h("div",{className:"file-icon "+xn(s),children:h(Lb,{className:"u3-w-8 u3-h-8 u3-text-blue-500 u3-m-1"})});e.push(m("div",{className:g(Ub,r),children:[h("div",{className:qb,children:i}),m("div",{className:Vb,children:[h("div",{className:zb,children:m("div",{className:"post-image__detail u3-px-0.5",children:[h(jb,{fileInfo:t,compactDisplay:!1,canDownload:!1}),t.extension&&h("span",{className:Wb,children:t.extension.toUpperCase()}),h("span",{className:Gb,children:In(t.size)})]})}),h("a",{className:Kb,onClick:this.handleRemove.bind(this,t.id),children:h(Ga,{className:"u3-w-3 u3-h-3"})})]})]},t.id))})),this.props.uploadsInProgress&&this.props.uploadsProgressPercent){const t=this.props.uploadsProgressPercent;this.props.uploadsInProgress.forEach((n=>{const s=t[n];s&&e.push(h(Yb,{clientId:n,fileInfo:s,handleRemove:this.handleRemove},n))}))}return h("div",{className:g(Hb,"file-preview__container"),ref:"container",children:e})}}u(Xb,"defaultProps",{fileInfos:[],uploadsInProgress:[],uploadsProgressPercent:{}});var $b=p((function(e){return{enableSVGs:"true"===ue(e).EnableSVGs}}))(Xb),Qb={exports:{}},Jb={exports:{}};!function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}Jb.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<s.length;i++)if((n=s[i])===t||n.fn===t){s.splice(i,1);break}return 0===s.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){s=0;for(var i=(n=n.slice(0)).length;s<i;++s)n[s].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}();var Zb=sy;sy.default=sy,sy.stable=oy,sy.stableStringify=oy;var ey=[],ty=[];function ny(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function sy(e,t,n,s){var i;void 0===s&&(s=ny()),ry(e,"",0,[],void 0,0,s);try{i=0===ty.length?JSON.stringify(e,t,n):JSON.stringify(e,cy(t),n)}catch(a){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==ey.length;){var r=ey.pop();4===r.length?Object.defineProperty(r[0],r[1],r[3]):r[0][r[1]]=r[2]}}return i}function iy(e,t,n,s){var i=Object.getOwnPropertyDescriptor(s,n);void 0!==i.get?i.configurable?(Object.defineProperty(s,n,{value:e}),ey.push([s,n,t,i])):ty.push([t,n,e]):(s[n]=e,ey.push([s,n,t]))}function ry(e,t,n,s,i,r,a){var o;if(r+=1,"object"==typeof e&&null!==e){for(o=0;o<s.length;o++)if(s[o]===e)return void iy("[Circular]",e,t,i);if(void 0!==a.depthLimit&&r>a.depthLimit)return void iy("[...]",e,t,i);if(void 0!==a.edgesLimit&&n+1>a.edgesLimit)return void iy("[...]",e,t,i);if(s.push(e),Array.isArray(e))for(o=0;o<e.length;o++)ry(e[o],o,o,s,e,r,a);else{var l=Object.keys(e);for(o=0;o<l.length;o++){var c=l[o];ry(e[c],c,o,s,e,r,a)}}s.pop()}}function ay(e,t){return e<t?-1:e>t?1:0}function oy(e,t,n,s){void 0===s&&(s=ny());var i,r=ly(e,"",0,[],void 0,0,s)||e;try{i=0===ty.length?JSON.stringify(r,t,n):JSON.stringify(r,cy(t),n)}catch(o){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==ey.length;){var a=ey.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function ly(e,t,n,s,i,r,a){var o;if(r+=1,"object"==typeof e&&null!==e){for(o=0;o<s.length;o++)if(s[o]===e)return void iy("[Circular]",e,t,i);try{if("function"==typeof e.toJSON)return}catch(d){return}if(void 0!==a.depthLimit&&r>a.depthLimit)return void iy("[...]",e,t,i);if(void 0!==a.edgesLimit&&n+1>a.edgesLimit)return void iy("[...]",e,t,i);if(s.push(e),Array.isArray(e))for(o=0;o<e.length;o++)ly(e[o],o,o,s,e,r,a);else{var l={},c=Object.keys(e).sort(ay);for(o=0;o<c.length;o++){var u=c[o];ly(e[u],u,o,s,e,r,a),l[u]=e[u]}if(void 0===i)return l;ey.push([i,t,e]),i[t]=l}s.pop()}}function cy(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(ty.length>0)for(var s=0;s<ty.length;s++){var i=ty[s];if(i[1]===t&&i[0]===n){n=i[2],ty.splice(s,1);break}}return e.call(this,t,n)}}var uy="undefined"!=typeof Symbol&&Symbol,dy=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var s=Object.getOwnPropertySymbols(e);if(1!==s.length||s[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0},hy="Function.prototype.bind called on incompatible ",py=Array.prototype.slice,fy=Object.prototype.toString,my=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==fy.call(t))throw new TypeError(hy+t);for(var n,s=py.call(arguments,1),i=function(){if(this instanceof n){var i=t.apply(this,s.concat(py.call(arguments)));return Object(i)===i?i:this}return t.apply(e,s.concat(py.call(arguments)))},r=Math.max(0,t.length-s.length),a=[],o=0;o<r;o++)a.push("$"+o);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var l=function(){};l.prototype=t.prototype,n.prototype=new l,l.prototype=null}return n},gy=Function.prototype.bind||my,vy=gy.call(Function.call,Object.prototype.hasOwnProperty),by=SyntaxError,yy=Function,Cy=TypeError,Ey=function(e){try{return yy('"use strict"; return ('+e+").constructor;")()}catch(dT){}},wy=Object.getOwnPropertyDescriptor;if(wy)try{wy({},"")}catch(dT){wy=null}var Sy=function(){throw new Cy},_y=wy?function(){try{return Sy}catch(e){try{return wy(arguments,"callee").get}catch(t){return Sy}}}():Sy,Ay="function"==typeof uy&&"function"==typeof Symbol&&"symbol"==typeof uy("foo")&&"symbol"==typeof Symbol("bar")&&dy(),ky=Object.getPrototypeOf||function(e){return e.__proto__},Py={},xy="undefined"==typeof Uint8Array?undefined:ky(Uint8Array),Ty={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":Ay?ky([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":Py,"%AsyncGenerator%":Py,"%AsyncGeneratorFunction%":Py,"%AsyncIteratorPrototype%":Py,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":yy,"%GeneratorFunction%":Py,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ay?ky(ky([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Ay?ky((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Ay?ky((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ay?ky(""[Symbol.iterator]()):undefined,"%Symbol%":Ay?Symbol:undefined,"%SyntaxError%":by,"%ThrowTypeError%":_y,"%TypedArray%":xy,"%TypeError%":Cy,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},Ny=function e(t){var n;if("%AsyncFunction%"===t)n=Ey("async function () {}");else if("%GeneratorFunction%"===t)n=Ey("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=Ey("async function* () {}");else if("%AsyncGenerator%"===t){var s=e("%AsyncGeneratorFunction%");s&&(n=s.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=ky(i.prototype))}return Ty[t]=n,n},My={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Iy=gy,Oy=vy,Ry=Iy.call(Function.call,Array.prototype.concat),Ly=Iy.call(Function.apply,Array.prototype.splice),Dy=Iy.call(Function.call,String.prototype.replace),Fy=Iy.call(Function.call,String.prototype.slice),jy=Iy.call(Function.call,RegExp.prototype.exec),Hy=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Uy=/\\(\\)?/g,qy=function(e){var t=Fy(e,0,1),n=Fy(e,-1);if("%"===t&&"%"!==n)throw new by("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new by("invalid intrinsic syntax, expected opening `%`");var s=[];return Dy(e,Hy,(function(e,t,n,i){s[s.length]=n?Dy(i,Uy,"$1"):t||e})),s},By=function(e,t){var n,s=e;if(Oy(My,s)&&(s="%"+(n=My[s])[0]+"%"),Oy(Ty,s)){var i=Ty[s];if(i===Py&&(i=Ny(s)),void 0===i&&!t)throw new Cy("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:s,value:i}}throw new by("intrinsic "+e+" does not exist!")},Vy=function(e,t){if("string"!=typeof e||0===e.length)throw new Cy("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new Cy('"allowMissing" argument must be a boolean');if(null===jy(/^%?[^%]*%?$/g,e))throw new by("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=qy(e),s=n.length>0?n[0]:"",i=By("%"+s+"%",t),r=i.name,a=i.value,o=!1,l=i.alias;l&&(s=l[0],Ly(n,Ry([0,1],l)));for(var c=1,u=!0;c<n.length;c+=1){var d=n[c],h=Fy(d,0,1),p=Fy(d,-1);if(('"'===h||"'"===h||"`"===h||'"'===p||"'"===p||"`"===p)&&h!==p)throw new by("property names with quotes must have matching quotes");if("constructor"!==d&&u||(o=!0),Oy(Ty,r="%"+(s+="."+d)+"%"))a=Ty[r];else if(null!=a){if(!(d in a)){if(!t)throw new Cy("base intrinsic for "+e+" exists, but the property is not available.");return}if(wy&&c+1>=n.length){var f=wy(a,d);a=(u=!!f)&&"get"in f&&!("originalValue"in f.get)?f.get:a[d]}else u=Oy(a,d),a=a[d];u&&!o&&(Ty[r]=a)}}return a},zy={exports:{}};!function(e){var t=gy,n=Vy,s=n("%Function.prototype.apply%"),i=n("%Function.prototype.call%"),r=n("%Reflect.apply%",!0)||t.call(i,s),a=n("%Object.getOwnPropertyDescriptor%",!0),o=n("%Object.defineProperty%",!0),l=n("%Math.max%");if(o)try{o({},"a",{value:1})}catch(dT){o=null}e.exports=function(e){var n=r(t,i,arguments);if(a&&o){var s=a(n,"length");s.configurable&&o(n,"length",{value:1+l(0,e.length-(arguments.length-1))})}return n};var c=function(){return r(t,s,arguments)};o?o(e.exports,"apply",{value:c}):e.exports.apply=c}(zy);var Wy=Vy,Gy=zy.exports,Ky=Gy(Wy("String.prototype.indexOf")),Yy=N(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),Xy="function"==typeof Map&&Map.prototype,$y=Object.getOwnPropertyDescriptor&&Xy?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Qy=Xy&&$y&&"function"==typeof $y.get?$y.get:null,Jy=Xy&&Map.prototype.forEach,Zy="function"==typeof Set&&Set.prototype,eC=Object.getOwnPropertyDescriptor&&Zy?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,tC=Zy&&eC&&"function"==typeof eC.get?eC.get:null,nC=Zy&&Set.prototype.forEach,sC="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,iC="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,rC="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,aC=Boolean.prototype.valueOf,oC=Object.prototype.toString,lC=Function.prototype.toString,cC=String.prototype.match,uC=String.prototype.slice,dC=String.prototype.replace,hC=String.prototype.toUpperCase,pC=String.prototype.toLowerCase,fC=RegExp.prototype.test,mC=Array.prototype.concat,gC=Array.prototype.join,vC=Array.prototype.slice,bC=Math.floor,yC="function"==typeof BigInt?BigInt.prototype.valueOf:null,CC=Object.getOwnPropertySymbols,EC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,wC="function"==typeof Symbol&&"object"==typeof Symbol.iterator,SC="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===wC||"symbol")?Symbol.toStringTag:null,_C=Object.prototype.propertyIsEnumerable,AC=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function kC(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||fC.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var s=e<0?-bC(-e):bC(e);if(s!==e){var i=String(s),r=uC.call(t,i.length+1);return dC.call(i,n,"$&_")+"."+dC.call(dC.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}}return dC.call(t,n,"$&_")}var PC=Yy,xC=PC.custom,TC=RC(xC)?xC:null;function NC(e,t,n){var s="double"===(n.quoteStyle||t)?'"':"'";return s+e+s}function MC(e){return dC.call(String(e),/"/g,"&quot;")}function IC(e){return!("[object Array]"!==FC(e)||SC&&"object"==typeof e&&SC in e)}function OC(e){return!("[object RegExp]"!==FC(e)||SC&&"object"==typeof e&&SC in e)}function RC(e){if(wC)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!EC)return!1;try{return EC.call(e),!0}catch(dT){}return!1}var LC=Object.prototype.hasOwnProperty||function(e){return e in this};function DC(e,t){return LC.call(e,t)}function FC(e){return oC.call(e)}function jC(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,s=e.length;n<s;n++)if(e[n]===t)return n;return-1}function HC(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,s="... "+n+" more character"+(n>1?"s":"");return HC(uC.call(e,0,t.maxStringLength),t)+s}return NC(dC.call(dC.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,UC),"single",t)}function UC(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+hC.call(t.toString(16))}function qC(e){return"Object("+e+")"}function BC(e){return e+" { ? }"}function VC(e,t,n,s){return e+" ("+t+") {"+(s?zC(n,s):gC.call(n,", "))+"}"}function zC(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+gC.call(e,","+n)+"\n"+t.prev}function WC(e,t){var n=IC(e),s=[];if(n){s.length=e.length;for(var i=0;i<e.length;i++)s[i]=DC(e,i)?t(e[i],e):""}var r,a="function"==typeof CC?CC(e):[];if(wC){r={};for(var o=0;o<a.length;o++)r["$"+a[o]]=a[o]}for(var l in e)DC(e,l)&&(n&&String(Number(l))===l&&l<e.length||wC&&r["$"+l]instanceof Symbol||(fC.call(/[^\w$]/,l)?s.push(t(l,e)+": "+t(e[l],e)):s.push(l+": "+t(e[l],e))));if("function"==typeof CC)for(var c=0;c<a.length;c++)_C.call(e,a[c])&&s.push("["+t(a[c])+"]: "+t(e[a[c]],e));return s}var GC=Vy,KC=function(e,t){var n=Wy(e,!!t);return"function"==typeof n&&Ky(e,".prototype.")>-1?Gy(n):n},YC=function e(t,n,s,i){var r=n||{};if(DC(r,"quoteStyle")&&"single"!==r.quoteStyle&&"double"!==r.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(DC(r,"maxStringLength")&&("number"==typeof r.maxStringLength?r.maxStringLength<0&&r.maxStringLength!==1/0:null!==r.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!DC(r,"customInspect")||r.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(DC(r,"indent")&&null!==r.indent&&"\t"!==r.indent&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(DC(r,"numericSeparator")&&"boolean"!=typeof r.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=r.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return HC(t,r);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var l=String(t);return o?kC(t,l):l}if("bigint"==typeof t){var c=String(t)+"n";return o?kC(t,c):c}var u=void 0===r.depth?5:r.depth;if(void 0===s&&(s=0),s>=u&&u>0&&"object"==typeof t)return IC(t)?"[Array]":"[Object]";var d=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=gC.call(Array(e.indent+1)," ")}return{base:n,prev:gC.call(Array(t+1),n)}}(r,s);if(void 0===i)i=[];else if(jC(i,t)>=0)return"[Circular]";function h(t,n,a){if(n&&(i=vC.call(i)).push(n),a){var o={depth:r.depth};return DC(r,"quoteStyle")&&(o.quoteStyle=r.quoteStyle),e(t,o,s+1,i)}return e(t,r,s+1,i)}if("function"==typeof t&&!OC(t)){var p=function(e){if(e.name)return e.name;var t=cC.call(lC.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),f=WC(t,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(f.length>0?" { "+gC.call(f,", ")+" }":"")}if(RC(t)){var m=wC?dC.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):EC.call(t);return"object"!=typeof t||wC?m:qC(m)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var g="<"+pC.call(String(t.nodeName)),v=t.attributes||[],b=0;b<v.length;b++)g+=" "+v[b].name+"="+NC(MC(v[b].value),"double",r);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+pC.call(String(t.nodeName))+">"}if(IC(t)){if(0===t.length)return"[]";var y=WC(t,h);return d&&!function(e){for(var t=0;t<e.length;t++)if(jC(e[t],"\n")>=0)return!1;return!0}(y)?"["+zC(y,d)+"]":"[ "+gC.call(y,", ")+" ]"}if(function(e){return!("[object Error]"!==FC(e)||SC&&"object"==typeof e&&SC in e)}(t)){var C=WC(t,h);return"cause"in Error.prototype||!("cause"in t)||_C.call(t,"cause")?0===C.length?"["+String(t)+"]":"{ ["+String(t)+"] "+gC.call(C,", ")+" }":"{ ["+String(t)+"] "+gC.call(mC.call("[cause]: "+h(t.cause),C),", ")+" }"}if("object"==typeof t&&a){if(TC&&"function"==typeof t[TC]&&PC)return PC(t,{depth:u-s});if("symbol"!==a&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!Qy||!e||"object"!=typeof e)return!1;try{Qy.call(e);try{tC.call(e)}catch(g){return!0}return e instanceof Map}catch(dT){}return!1}(t)){var E=[];return Jy.call(t,(function(e,n){E.push(h(n,t,!0)+" => "+h(e,t))})),VC("Map",Qy.call(t),E,d)}if(function(e){if(!tC||!e||"object"!=typeof e)return!1;try{tC.call(e);try{Qy.call(e)}catch(t){return!0}return e instanceof Set}catch(dT){}return!1}(t)){var w=[];return nC.call(t,(function(e){w.push(h(e,t))})),VC("Set",tC.call(t),w,d)}if(function(e){if(!sC||!e||"object"!=typeof e)return!1;try{sC.call(e,sC);try{iC.call(e,iC)}catch(g){return!0}return e instanceof WeakMap}catch(dT){}return!1}(t))return BC("WeakMap");if(function(e){if(!iC||!e||"object"!=typeof e)return!1;try{iC.call(e,iC);try{sC.call(e,sC)}catch(g){return!0}return e instanceof WeakSet}catch(dT){}return!1}(t))return BC("WeakSet");if(function(e){if(!rC||!e||"object"!=typeof e)return!1;try{return rC.call(e),!0}catch(dT){}return!1}(t))return BC("WeakRef");if(function(e){return!("[object Number]"!==FC(e)||SC&&"object"==typeof e&&SC in e)}(t))return qC(h(Number(t)));if(function(e){if(!e||"object"!=typeof e||!yC)return!1;try{return yC.call(e),!0}catch(dT){}return!1}(t))return qC(h(yC.call(t)));if(function(e){return!("[object Boolean]"!==FC(e)||SC&&"object"==typeof e&&SC in e)}(t))return qC(aC.call(t));if(function(e){return!("[object String]"!==FC(e)||SC&&"object"==typeof e&&SC in e)}(t))return qC(h(String(t)));if(!function(e){return!("[object Date]"!==FC(e)||SC&&"object"==typeof e&&SC in e)}(t)&&!OC(t)){var S=WC(t,h),_=AC?AC(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",k=!_&&SC&&Object(t)===t&&SC in t?uC.call(FC(t),8,-1):A?"Object":"",P=(_||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(k||A?"["+gC.call(mC.call([],k||[],A||[]),": ")+"] ":"");return 0===S.length?P+"{}":d?P+"{"+zC(S,d)+"}":P+"{ "+gC.call(S,", ")+" }"}return String(t)},XC=GC("%TypeError%"),$C=GC("%WeakMap%",!0),QC=GC("%Map%",!0),JC=KC("WeakMap.prototype.get",!0),ZC=KC("WeakMap.prototype.set",!0),eE=KC("WeakMap.prototype.has",!0),tE=KC("Map.prototype.get",!0),nE=KC("Map.prototype.set",!0),sE=KC("Map.prototype.has",!0),iE=function(e,t){for(var n,s=e;null!==(n=s.next);s=n)if(n.key===t)return s.next=n.next,n.next=e.next,e.next=n,n},rE=String.prototype.replace,aE=/%20/g,oE="RFC3986",lE={default:oE,formatters:{RFC1738:function(e){return rE.call(e,aE,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:oE},cE=lE,uE=Object.prototype.hasOwnProperty,dE=Array.isArray,hE=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),pE=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)void 0!==e[s]&&(n[s]=e[s]);return n},fE={arrayToObject:pE,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],s=0;s<t.length;++s)for(var i=t[s],r=i.obj[i.prop],a=Object.keys(r),o=0;o<a.length;++o){var l=a[o],c=r[l];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:r,prop:l}),n.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(dE(n)){for(var s=[],i=0;i<n.length;++i)void 0!==n[i]&&s.push(n[i]);t.obj[t.prop]=s}}}(t),e},decode:function(e,t,n){var s=e.replace(/\+/g," ");if("iso-8859-1"===n)return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch(dT){return s}},encode:function(e,t,n,s,i){if(0===e.length)return e;var r=e;if("symbol"==typeof e?r=Symbol.prototype.toString.call(e):"string"!=typeof e&&(r=String(e)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var a="",o=0;o<r.length;++o){var l=r.charCodeAt(o);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===cE.RFC1738&&(40===l||41===l)?a+=r.charAt(o):l<128?a+=hE[l]:l<2048?a+=hE[192|l>>6]+hE[128|63&l]:l<55296||l>=57344?a+=hE[224|l>>12]+hE[128|l>>6&63]+hE[128|63&l]:(o+=1,l=65536+((1023&l)<<10|1023&r.charCodeAt(o)),a+=hE[240|l>>18]+hE[128|l>>12&63]+hE[128|l>>6&63]+hE[128|63&l])}return a},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(dE(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(t(e[s]));return n}return t(e)},merge:function e(t,n,s){if(!n)return t;if("object"!=typeof n){if(dE(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(s&&(s.plainObjects||s.allowPrototypes)||!uE.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var i=t;return dE(t)&&!dE(n)&&(i=pE(t,s)),dE(t)&&dE(n)?(n.forEach((function(n,i){if(uE.call(t,i)){var r=t[i];r&&"object"==typeof r&&n&&"object"==typeof n?t[i]=e(r,n,s):t.push(n)}else t[i]=n})),t):Object.keys(n).reduce((function(t,i){var r=n[i];return uE.call(t,i)?t[i]=e(t[i],r,s):t[i]=r,t}),i)}},mE=function(){var e,t,n,s={assert:function(e){if(!s.has(e))throw new XC("Side channel does not contain "+YC(e))},get:function(s){if($C&&s&&("object"==typeof s||"function"==typeof s)){if(e)return JC(e,s)}else if(QC){if(t)return tE(t,s)}else if(n)return function(e,t){var n=iE(e,t);return n&&n.value}(n,s)},has:function(s){if($C&&s&&("object"==typeof s||"function"==typeof s)){if(e)return eE(e,s)}else if(QC){if(t)return sE(t,s)}else if(n)return function(e,t){return!!iE(e,t)}(n,s);return!1},set:function(s,i){$C&&s&&("object"==typeof s||"function"==typeof s)?(e||(e=new $C),ZC(e,s,i)):QC?(t||(t=new QC),nE(t,s,i)):(n||(n={key:{},next:null}),function(e,t,n){var s=iE(e,t);s?s.value=n:e.next={key:t,next:e.next,value:n}}(n,s,i))}};return s},gE=fE,vE=lE,bE=Object.prototype.hasOwnProperty,yE={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},CE=Array.isArray,EE=String.prototype.split,wE=Array.prototype.push,SE=function(e,t){wE.apply(e,CE(t)?t:[t])},_E=Date.prototype.toISOString,AE=vE.default,kE={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:gE.encode,encodeValuesOnly:!1,format:AE,formatter:vE.formatters[AE],indices:!1,serializeDate:function(e){return _E.call(e)},skipNulls:!1,strictNullHandling:!1},PE={},xE=function e(t,n,s,i,r,a,o,l,c,u,d,h,p,f,m){for(var g,v=t,b=m,y=0,C=!1;void 0!==(b=b.get(PE))&&!C;){var E=b.get(t);if(y+=1,void 0!==E){if(E===y)throw new RangeError("Cyclic object value");C=!0}void 0===b.get(PE)&&(y=0)}if("function"==typeof o?v=o(n,v):v instanceof Date?v=u(v):"comma"===s&&CE(v)&&(v=gE.maybeMap(v,(function(e){return e instanceof Date?u(e):e}))),null===v){if(i)return a&&!p?a(n,kE.encoder,f,"key",d):n;v=""}if("string"==typeof(g=v)||"number"==typeof g||"boolean"==typeof g||"symbol"==typeof g||"bigint"==typeof g||gE.isBuffer(v)){if(a){var w=p?n:a(n,kE.encoder,f,"key",d);if("comma"===s&&p){for(var S=EE.call(String(v),","),_="",A=0;A<S.length;++A)_+=(0===A?"":",")+h(a(S[A],kE.encoder,f,"value",d));return[h(w)+(CE(v)&&1===S.length?"[]":"")+"="+_]}return[h(w)+"="+h(a(v,kE.encoder,f,"value",d))]}return[h(n)+"="+h(String(v))]}var k,P=[];if(void 0===v)return P;if("comma"===s&&CE(v))k=[{value:v.length>0?v.join(",")||null:void 0}];else if(CE(o))k=o;else{var x=Object.keys(v);k=l?x.sort(l):x}for(var T="comma"===s&&CE(v)&&1===v.length?n+"[]":n,N=0;N<k.length;++N){var M=k[N],I="object"==typeof M&&void 0!==M.value?M.value:v[M];if(!r||null!==I){var O=CE(v)?"function"==typeof s?s(T,M):T:T+(c?"."+M:"["+M+"]");m.set(t,y);var R=mE();R.set(PE,m),SE(P,e(I,O,s,i,r,a,o,l,c,u,d,h,p,f,R))}}return P},TE=fE,NE=Object.prototype.hasOwnProperty,ME=Array.isArray,IE={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:TE.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},OE=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},RE=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},LE=function(e,t,n,s){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,r=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(i),o=a?i.slice(0,a.index):i,l=[];if(o){if(!n.plainObjects&&NE.call(Object.prototype,o)&&!n.allowPrototypes)return;l.push(o)}for(var c=0;n.depth>0&&null!==(a=r.exec(i))&&c<n.depth;){if(c+=1,!n.plainObjects&&NE.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+i.slice(a.index)+"]"),function(e,t,n,s){for(var i=s?t:RE(t,n),r=e.length-1;r>=0;--r){var a,o=e[r];if("[]"===o&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var l="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(l,10);n.parseArrays||""!==l?!isNaN(c)&&o!==l&&String(c)===l&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(a=[])[c]=i:"__proto__"!==l&&(a[l]=i):a={0:i}}i=a}return i}(l,t,n,s)}},DE={formats:lE,parse:function(e,t){var n=function(e){if(!e)return IE;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?IE.charset:e.charset;return{allowDots:void 0===e.allowDots?IE.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:IE.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:IE.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:IE.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:IE.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:IE.comma,decoder:"function"==typeof e.decoder?e.decoder:IE.decoder,delimiter:"string"==typeof e.delimiter||TE.isRegExp(e.delimiter)?e.delimiter:IE.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:IE.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:IE.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:IE.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:IE.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:IE.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){var n,s={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=t.parameterLimit===1/0?void 0:t.parameterLimit,a=i.split(t.delimiter,r),o=-1,l=t.charset;if(t.charsetSentinel)for(n=0;n<a.length;++n)0===a[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===a[n]?l="utf-8":"utf8=%26%2310003%3B"===a[n]&&(l="iso-8859-1"),o=n,n=a.length);for(n=0;n<a.length;++n)if(n!==o){var c,u,d=a[n],h=d.indexOf("]="),p=-1===h?d.indexOf("="):h+1;-1===p?(c=t.decoder(d,IE.decoder,l,"key"),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,p),IE.decoder,l,"key"),u=TE.maybeMap(RE(d.slice(p+1),t),(function(e){return t.decoder(e,IE.decoder,l,"value")}))),u&&t.interpretNumericEntities&&"iso-8859-1"===l&&(u=OE(u)),d.indexOf("[]=")>-1&&(u=ME(u)?[u]:u),NE.call(s,c)?s[c]=TE.combine(s[c],u):s[c]=u}return s}(e,n):e,i=n.plainObjects?Object.create(null):{},r=Object.keys(s),a=0;a<r.length;++a){var o=r[a],l=LE(o,s[o],n,"string"==typeof e);i=TE.merge(i,l,n)}return!0===n.allowSparse?i:TE.compact(i)},stringify:function(e,t){var n,s=e,i=function(e){if(!e)return kE;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||kE.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=vE.default;if(void 0!==e.format){if(!bE.call(vE.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=vE.formatters[n],i=kE.filter;return("function"==typeof e.filter||CE(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:kE.addQueryPrefix,allowDots:void 0===e.allowDots?kE.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:kE.charsetSentinel,delimiter:void 0===e.delimiter?kE.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:kE.encode,encoder:"function"==typeof e.encoder?e.encoder:kE.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:kE.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:kE.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:kE.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:kE.strictNullHandling}}(t);"function"==typeof i.filter?s=(0,i.filter)("",s):CE(i.filter)&&(n=i.filter);var r,a=[];if("object"!=typeof s||null===s)return"";r=t&&t.arrayFormat in yE?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var o=yE[r];n||(n=Object.keys(s)),i.sort&&n.sort(i.sort);for(var l=mE(),c=0;c<n.length;++c){var u=n[c];i.skipNulls&&null===s[u]||SE(a,xE(s[u],u,o,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,l))}var d=a.join(i.delimiter),h=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}};function FE(e){return(FE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jE=function(e){return null!==e&&"object"===FE(e)};function HE(e){return(HE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var UE=jE,qE=BE;function BE(e){if(e)return function(e){for(var t in BE.prototype)Object.prototype.hasOwnProperty.call(BE.prototype,t)&&(e[t]=BE.prototype[t]);return e}(e)}BE.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},BE.prototype.parse=function(e){return this._parser=e,this},BE.prototype.responseType=function(e){return this._responseType=e,this},BE.prototype.serialize=function(e){return this._serializer=e,this},BE.prototype.timeout=function(e){if(!e||"object"!==HE(e))return this._timeout=e,this._responseTimeout=0,this._uploadTimeout=0,this;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;case"upload":this._uploadTimeout=e.upload;break;default:console.warn("Unknown timeout option",t)}return this},BE.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var VE=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),zE=new Set([408,413,429,500,502,503,504,521,522,524]);BE.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(s){console.error(s)}if(t&&t.status&&zE.has(t.status))return!0;if(e){if(e.code&&VE.has(e.code))return!0;if(e.timeout&&"ECONNABORTED"===e.code)return!0;if(e.crossDomain)return!0}return!1},BE.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},BE.prototype.then=function(e,t){var n=this;if(!this._fullfilledPromise){var s=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){s.on("abort",(function(){if(!(n._maxRetries&&n._maxRetries>n._retries))if(n.timedout&&n.timedoutError)t(n.timedoutError);else{var e=new Error("Aborted");e.code="ABORTED",e.status=n.status,e.method=n.method,e.url=n.url,t(e)}})),s.end((function(n,s){n?t(n):e(s)}))}))}return this._fullfilledPromise.then(e,t)},BE.prototype.catch=function(e){return this.then(void 0,e)},BE.prototype.use=function(e){return e(this),this},BE.prototype.ok=function(e){if("function"!=typeof e)throw new Error("Callback required");return this._okCallback=e,this},BE.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},BE.prototype.get=function(e){return this._header[e.toLowerCase()]},BE.prototype.getHeader=BE.prototype.get,BE.prototype.set=function(e,t){if(UE(e)){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},BE.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},BE.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(UE(e)){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.field(n,e[n]);return this}if(Array.isArray(t)){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&this.field(e,t[s]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=String(t)),this._getFormData().append(e,t),this},BE.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},BE.prototype._auth=function(e,t,n,s){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(s("".concat(e,":").concat(t))));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer ".concat(e))}return this},BE.prototype.withCredentials=function(e){return void 0===e&&(e=!0),this._withCredentials=e,this},BE.prototype.redirects=function(e){return this._maxRedirects=e,this},BE.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw new TypeError("Invalid argument");return this._maxResponseSize=e,this},BE.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},BE.prototype.send=function(e){var t=UE(e),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(t&&UE(this._data))for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this._data[s]=e[s]);else"string"==typeof e?(n||this.type("form"),(n=this._header["content-type"])&&(n=n.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===n?this._data?"".concat(this._data,"&").concat(e):e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||n||this.type("json"),this},BE.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},BE.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.includes("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.slice(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.slice(0,t)+"?"+n.join("&")}}},BE.prototype._appendQueryString=function(){console.warn("Unsupported")},BE.prototype._timeoutError=function(e,t,n){if(!this._aborted){var s=new Error("".concat(e+t,"ms exceeded"));s.timeout=t,s.code="ECONNABORTED",s.errno=n,this.timedout=!0,this.timedoutError=s,this.abort(),this.callback(s)}},BE.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))};var WE={};function GE(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return KE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KE(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var s=0,i=function(){};return{s:i,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw r}}}}function KE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}WE.type=function(e){return e.split(/ *; */).shift()},WE.params=function(e){var t,n={},s=GE(e.split(/ *; */));try{for(s.s();!(t=s.n()).done;){var i=t.value.split(/ *= */),r=i.shift(),a=i.shift();r&&a&&(n[r]=a)}}catch(o){s.e(o)}finally{s.f()}return n},WE.parseLinks=function(e){var t,n={},s=GE(e.split(/ *, */));try{for(s.s();!(t=s.n()).done;){var i=t.value.split(/ *; */),r=i[0].slice(1,-1);n[i[1].split(/ *= */)[1].slice(1,-1)]=r}}catch(a){s.e(a)}finally{s.f()}return n},WE.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e};var YE=WE,XE=$E;function $E(e){if(e)return function(e){for(var t in $E.prototype)Object.prototype.hasOwnProperty.call($E.prototype,t)&&(e[t]=$E.prototype[t]);return e}(e)}function QE(e){return function(e){if(Array.isArray(e))return JE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return JE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JE(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function ZE(){this._defaults=[]}$E.prototype.get=function(e){return this.header[e.toLowerCase()]},$E.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=YE.type(t);var n=YE.params(t);for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(this[s]=n[s]);this.links={};try{e.link&&(this.links=YE.parseLinks(e.link))}catch(i){}},$E.prototype._setStatusProperties=function(e){var t=e/100|0;this.statusCode=e,this.status=this.statusCode,this.statusType=t,this.info=1===t,this.ok=2===t,this.redirect=3===t,this.clientError=4===t,this.serverError=5===t,this.error=(4===t||5===t)&&this.toError(),this.created=201===e,this.accepted=202===e,this.noContent=204===e,this.badRequest=400===e,this.unauthorized=401===e,this.notAcceptable=406===e,this.forbidden=403===e,this.notFound=404===e,this.unprocessableEntity=422===e},["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(e){ZE.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this._defaults.push({fn:e,args:n}),this}})),ZE.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,QE(t.args))}))};var ew=ZE;!function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s;"undefined"!=typeof window?s=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),s=void 0):s=self;var i=Jb.exports,r=Zb,a=DE,o=qE,l=jE,c=XE,u=ew;function d(){}e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1===arguments.length?new t.Request("GET",e):new t.Request(e,n)};var h=t=e.exports;t.Request=y,h.getXHR=function(){if(s.XMLHttpRequest&&(!s.location||"file:"!==s.location.protocol||!s.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(i){}throw new Error("Browser-only version of superagent could not find XHR")};var p="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function f(e){if(!l(e))return e;var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&m(t,n,e[n]);return t.join("&")}function m(e,t,n){if(void 0!==n)if(null!==n)if(Array.isArray(n))n.forEach((function(n){m(e,t,n)}));else if(l(n))for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&m(e,"".concat(t,"[").concat(s,"]"),n[s]);else e.push(encodeURI(t)+"="+encodeURIComponent(n));else e.push(encodeURI(t))}function g(e){for(var t,n,s={},i=e.split("&"),r=0,a=i.length;r<a;++r)-1===(n=(t=i[r]).indexOf("="))?s[decodeURIComponent(t)]="":s[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return s}function v(e){return/[/+]json($|[^-\w])/i.test(e)}function b(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.headers=function(e){for(var t,n,s,i,r=e.split(/\r?\n/),a={},o=0,l=r.length;o<l;++o)-1!==(t=(n=r[o]).indexOf(":"))&&(s=n.slice(0,t).toLowerCase(),i=p(n.slice(t+1)),a[s]=i);return a}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function y(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,s=null;try{s=new b(n)}catch(i){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=i,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",s);try{n._isResponseOK(s)||(e=new Error(s.statusText||s.text||"Unsuccessful HTTP response"))}catch(i){e=i}e?(e.original=t,e.response=s,e.status=s.status,n.callback(e,s)):n.callback(null,s)}))}function C(e,t,n){var s=h("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&s.send(t),n&&s.end(n),s}h.serializeObject=f,h.parseString=g,h.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":a.stringify,"application/json":r},h.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},c(b.prototype),b.prototype._parseBody=function(e){var t=h.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&v(this.type)&&(t=h.parse["application/json"]),t&&e&&(e.length>0||e instanceof Object)?t(e):null)},b.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,s="cannot ".concat(t," ").concat(n," (").concat(this.status,")"),i=new Error(s);return i.status=this.status,i.method=t,i.url=n,i},h.Response=b,i(y.prototype),o(y.prototype),y.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},y.prototype.accept=function(e){return this.set("Accept",h.types[e]||e),this},y.prototype.auth=function(e,t,s){1===arguments.length&&(t=""),"object"===n(t)&&null!==t&&(s=t,t=""),s||(s={type:"function"==typeof btoa?"basic":"auto"});var i=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,s,i)},y.prototype.query=function(e){return"string"!=typeof e&&(e=f(e)),e&&this._query.push(e),this},y.prototype.attach=function(e,t,n){if(t){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},y.prototype._getFormData=function(){return this._formData||(this._formData=new s.FormData),this._formData},y.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},y.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},y.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},y.prototype.ca=y.prototype.agent,y.prototype.buffer=y.prototype.ca,y.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},y.prototype.pipe=y.prototype.write,y.prototype._isHost=function(e){return e&&"object"===n(e)&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},y.prototype.end=function(e){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||d,this._finalizeQueryString(),this._end()},y.prototype._setUploadTimeout=function(){var e=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){e._timeoutError("Upload timeout of ",e._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},y.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var e=this;this.xhr=h.getXHR();var t=this.xhr,n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4===n){var s;try{s=t.status}catch(i){s=0}if(!s){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var s=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100,100===n.percent&&clearTimeout(e._uploadTimeoutTimer)),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.addEventListener("progress",s.bind(null,"download")),t.upload&&t.upload.addEventListener("progress",s.bind(null,"upload"))}catch(o){}t.upload&&this._setUploadTimeout();try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(l){return this.callback(l)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],r=this._serializer||h.serialize[i?i.split(";")[0]:""];!r&&v(i)&&(r=h.serialize["application/json"]),r&&(n=r(n))}for(var a in this.header)null!==this.header[a]&&Object.prototype.hasOwnProperty.call(this.header,a)&&t.setRequestHeader(a,this.header[a]);this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0===n?null:n)},h.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,n){var s=new h.Request(e,t);return this._setDefaults(s),n&&s.end(n),s}})),u.prototype.del=u.prototype.delete,h.get=function(e,t,n){var s=h("GET",e);return"function"==typeof t&&(n=t,t=null),t&&s.query(t),n&&s.end(n),s},h.head=function(e,t,n){var s=h("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&s.query(t),n&&s.end(n),s},h.options=function(e,t,n){var s=h("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&s.send(t),n&&s.end(n),s},h.del=C,h.delete=C,h.patch=function(e,t,n){var s=h("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&s.send(t),n&&s.end(n),s},h.post=function(e,t,n){var s=h("POST",e);return"function"==typeof t&&(n=t,t=null),t&&s.send(t),n&&s.end(n),s},h.put=function(e,t,n){var s=h("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&s.send(t),n&&s.end(n),s}}(Qb,Qb.exports);var tw=Qb.exports;function nw(e,t,n,s,i){return s=>(s({type:On.UPLOAD_FILES_REQUEST}),tw.post(Pe.getFilesRoute()).set(Pe.getOptions({method:"post"}).headers).field("channel_id",n).field("client_ids",i).attach("files",e,t).accept("application/json"))}function sw(e,t,n,s,i,{err:r,res:a}){return(e,t)=>{if(r){let o;o=a&&a.body&&a.body.id?a.body:0!==r.status&&r.status?{message:be("channel_loader.unknown_error","We received an unexpected status code from the server.")+" ("+r.status+")"}:{message:be("file_upload.generic_error","There was a problem uploading your files.")},Rn(r,e,t);const l={type:On.UPLOAD_FILES_FAILURE,clientIds:[i],channelId:n,rootId:s,error:r};return e(L([l,Ln(r)])),{error:o}}const c=a.body.file_infos.map(((e,t)=>l(o({},e),{clientId:a.body.client_ids[t]})));return e(L([{type:On.RECEIVED_UPLOAD_FILES,data:c,channelId:n,rootId:s},{type:On.UPLOAD_FILES_SUCCESS}])),{data:a.body}}}class iw{constructor(e){u(this,"action"),u(this,"timer"),this.action=e,this.timer=-1,this.fire=this.fire.bind(this)}fire(){this.action(),this.timer=-1}fireAfter(e){this.timer>=0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.fire,e)}cancel(){window.clearTimeout(this.timer)}}var rw="mqik-f0b05e65",aw="mqik-eb5d77c1",ow="mqik-346338e0";const lw=I({limited:{id:te("file_upload.limited"),defaultMessage:"Uploads limited to {count, number} files maximum. Please use additional posts for more files."},filesAbove:{id:te("file_upload.filesAbove"),defaultMessage:"Files above {max}MB could not be uploaded: {filenames}"},fileAbove:{id:te("file_upload.fileAbove"),defaultMessage:"File above {max}MB could not be uploaded: {filename}"},zeroBytesFiles:{id:te("file_upload.zeroBytesFiles"),defaultMessage:"You are uploading empty files: {filenames}"},zeroBytesFile:{id:te("file_upload.zeroBytesFile"),defaultMessage:"You are uploading an empty file: {filename}"},pasted:{id:te("file_upload.pasted"),defaultMessage:"Image Pasted at "},uploadFile:{id:te("file_upload.upload_files"),defaultMessage:"Upload files"}});class cw extends d.exports.PureComponent{constructor(e){super(e),u(this,"fileUploadSuccess",((e,t,n)=>{if(e){this.props.onFileUpload(e.file_infos,e.client_ids,t,n);const i=Object.assign({},this.state.requests);for(var s=0;s<e.client_ids.length;s++)Reflect.deleteProperty(i,e.client_ids[s]);this.setState({requests:i})}})),u(this,"fileUploadFail",((e,t,n,s)=>{this.props.onUploadError(e,t,n,s)})),u(this,"pluginUploadFiles",(e=>{this.props.onUploadError(null),this.uploadFiles(e)})),u(this,"checkPluginHooksAndUploadFiles",(e=>{this.props.onUploadError(null);let t=Array.from(e).sort(((e,t)=>e.name.localeCompare(t.name,this.props.locale,{numeric:!0})));const n=this.props.pluginFilesWillUploadHooks;for(const s of n){const e=s.hook(t,this.pluginUploadFiles);e.message&&this.props.onUploadError(e.message),t=e.files}t&&this.uploadFiles(t)})),u(this,"uploadFiles",(e=>{const{channelId:t,rootId:n}=this.props,s=ve.MAX_UPLOAD_FILES-this.props.fileCount;let i=0;const r=[],a=[],c=[];for(let f=0;f<e.length&&i<s;f++){if(e[f].size>this.props.maxFileSize){r.push(e[f]);continue}0===e[f].size&&a.push(e[f]);const s=Dn(),u=this.props.actions.uploadFile(e[f],e[f].name,t,n,s);u.on("progress",(t=>{this.props.onUploadProgress({clientId:s,name:e[f].name,percent:t.percent,type:e[f].type})})),u.end(((i,r)=>{const{error:a,data:o}=this.props.actions.handleFileUploadEnd(e[f],e[f].name,t,n,s,{err:i,res:r});a?this.fileUploadFail(a,s,t,n):o&&this.fileUploadSuccess(o,t,n)})),this.setState({requests:l(o({},this.state.requests),{[s]:u})}),c.push(s),i+=1}this.props.onUploadStart(c,t);const{formatMessage:u}=this.props.intl,d=[];if(e.length>s&&d.push(u(lw.limited,{count:ve.MAX_UPLOAD_FILES})),r.length>1){var h=r.map((e=>e.name)).join(", ");d.push(u(lw.filesAbove,{max:this.props.maxFileSize/1048576,filenames:h}))}else r.length>0&&d.push(u(lw.fileAbove,{max:this.props.maxFileSize/1048576,filename:r[0].name}));if(a.length>1){var p=a.map((e=>e.name)).join(", ");d.push(u(lw.zeroBytesFiles,{filenames:p}))}else a.length>0&&d.push(u(lw.zeroBytesFile,{filename:a[0].name}));d.length>0&&this.props.onUploadError(d.join(", "))})),u(this,"handleChange",(e=>{e.target.files.length>0&&(this.checkPluginHooksAndUploadFiles(e.target.files),Fn(e.target)),this.props.onFileUploadChange()})),u(this,"handleDrop",(e=>{if(!this.props.canUploadFiles)return void this.props.onUploadError(be("file_upload.disabled","File attachments are disabled."));this.props.onUploadError(null);const t=e.dataTransfer.items||[],n=e.dataTransfer.files,s=[];Array.from(n).forEach(((e,n)=>{const i=t[n];i&&i.webkitGetAsEntry&&(null===i.webkitGetAsEntry()||i.webkitGetAsEntry().isDirectory)||s.push(e)}));const i=e.dataTransfer.types;if(i){if(jn(e.dataTransfer))return;if(i.includes&&!i.includes("Files"))return;if(i.contains&&!i.contains("Files"))return}0!==s.length?(s.length&&this.checkPluginHooksAndUploadFiles(s),this.props.onFileUploadChange()):this.props.onUploadError(be("file_upload.drag_folder","Folders cannot be uploaded. Please drag all files separately."))})),u(this,"registerDragEvents",((e,t)=>{const n=this,s=document.querySelector(t),i=new iw((()=>{s&&s.classList.add("u3-hidden")}));let r={};r=this.props.canUploadFiles?{enter(e){var t=e.detail.dataTransfer;!jn(t)&&qn(t)&&s&&s.classList.remove("u3-hidden")},leave(e){var t=e.detail.dataTransfer;!jn(t)&&qn(t)&&s&&s.classList.add("u3-hidden"),i.cancel()},over(){i.fireAfter(500)},drop(e){s&&s.classList.add("u3-hidden"),i.cancel(),n.handleDrop(e.detail)}}:{drop(e){n.handleDrop(e.detail)}},this.unbindDragsterEvents=function(e,t){const n=()=>{},s={enter:n,leave:n,over:n,drop:n},i=Object.assign(s,t),r=document.querySelector(e);if(!r)return n;let a=!1,o=!1;const l=e=>{if(a)return void(o=!0);a=!0;const t=new CustomEvent("dragster:enter",{detail:e});r.dispatchEvent(t),e.preventDefault()},c=e=>{if(o?o=!1:a&&(a=!1),!a&&!o){const t=new CustomEvent("dragster:leave",{detail:e});r.dispatchEvent(t)}e.preventDefault()},u=e=>{const t=new CustomEvent("dragster:over",{detail:e});r.dispatchEvent(t),e.preventDefault()},d=e=>{if(o?o=!1:a&&(a=!1),!a&&!o){const t=new CustomEvent("dragster:drop",{detail:e});r.dispatchEvent(t)}e.preventDefault()};return r.addEventListener("dragenter",l),r.addEventListener("dragleave",c),r.addEventListener("dragover",u),r.addEventListener("drop",d),r.addEventListener("dragster:enter",i.enter),r.addEventListener("dragster:leave",i.leave),r.addEventListener("dragster:over",i.over),r.addEventListener("dragster:drop",i.drop),()=>{r.removeEventListener("dragenter",l),r.removeEventListener("dragleave",c),r.removeEventListener("dragover",u),r.removeEventListener("drop",d),r.removeEventListener("dragster:enter",i.enter),r.removeEventListener("dragster:leave",i.leave),r.removeEventListener("dragster:over",i.over),r.removeEventListener("dragster:drop",i.drop)}}(e,r)})),u(this,"containsEventTarget",((e,t)=>e&&e.contains(t))),u(this,"pasteUpload",(e=>{const{formatMessage:t}=this.props.intl;if(!e.clipboardData||!e.clipboardData.items||oc(e.clipboardData))return;const n=this.props.getTarget(),s=b.findDOMNode(n);if(!this.containsEventTarget(s,e.target))return;this.props.onUploadError(null);const i=[];for(let o=0;o<e.clipboardData.items.length;o++){const t=e.clipboardData.items[o];"file"===t.kind&&i.push(t)}if(i&&i.length>0){if(!this.props.canUploadFiles)return void this.props.onUploadError(be("file_upload.disabled","File attachments are disabled."));e.preventDefault();const n=[];for(let e=0;e<i.length;e++){const s=i[e].getAsFile();if(!s)continue;var r=new Date;let o=r.getHours();o=o<10?`0${o}`:`${o}`;let l=r.getMinutes();l=l<10?`0${l}`:`${l}`;var a="";s.name?s.name.includes(".")&&(a=s.name.substr(s.name.lastIndexOf("."))):i[e].type.includes("/")&&(a="."+i[e].type.split("/")[1].toLowerCase());const c=t(lw.pasted)+r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+o+"-"+l+a,u=new Blob([s],{type:s.type});u.name=c,n.push(u)}n.length>0&&(this.checkPluginHooksAndUploadFiles(n),this.props.onFileUploadChange())}})),u(this,"keyUpload",(e=>{if(rt(e)&&ge(e,ve.KeyCodes.U)){if(e.preventDefault(),!this.props.canUploadFiles)return void this.props.onUploadError(be("file_upload.disabled","File attachments are disabled."));const t="post"===this.props.postType&&"post_textbox"===document.activeElement.id,n="comment"===this.props.postType&&"reply_textbox"===document.activeElement.id;(t||n)&&(this.fileInput.current.focus(),this.fileInput.current.click())}})),u(this,"cancelUpload",(e=>{const t=Object.assign({},this.state.requests),n=t[e];n&&(n.abort(),Reflect.deleteProperty(t,e),this.setState({requests:t}))})),u(this,"handleMaxUploadReached",(e=>{e&&e.preventDefault();const{onUploadError:t}=this.props,{formatMessage:n}=this.props.intl;t(n(lw.limited,{count:ve.MAX_UPLOAD_FILES}))})),u(this,"toggleMenu",(e=>{this.setState({menuOpen:e})})),u(this,"handleLocalFileUploaded",(e=>{ve.MAX_UPLOAD_FILES-this.props.fileCount>0?this.props.onClick&&this.props.onClick():this.handleMaxUploadReached(e),this.setState({menuOpen:!1})})),u(this,"simulateInputClick",(e=>{e.preventDefault(),e.stopPropagation(),this.fileInput.current.click()})),this.state={requests:{},menuOpen:!1},this.fileInput=f.createRef()}componentDidMount(){"post"===this.props.postType?this.registerDragEvents(".row.main",".center-file-overlay"):"comment"===this.props.postType&&this.registerDragEvents(".post-right__container",".right-file-overlay"),document.addEventListener("paste",this.pasteUpload),document.addEventListener("keydown",this.keyUpload)}componentWillUnmount(){document.removeEventListener("paste",this.pasteUpload),document.removeEventListener("keydown",this.keyUpload),this.unbindDragsterEvents&&this.unbindDragsterEvents()}render(){const{formatMessage:e}=this.props.intl;let t=!0;Hn()&&(t=!1);let n="";Un()&&(n="image/*");const s=ve.MAX_UPLOAD_FILES-this.props.fileCount;let i;const r=e({id:"accessibility.button.attachment",defaultMessage:"attachment"});return i=0===this.props.pluginFileUploadMethods.length?m(d.exports.Fragment,{children:[h("button",{type:"button",id:"fileUploadButton","aria-label":r,className:g(aw,"style--none post-action icon icon--attachment"),onClick:this.simulateInputClick,onTouchEnd:this.simulateInputClick,children:h(Fb,{className:ow})}),h("input",{id:"fileUploadInput",tabIndex:-1,"aria-label":e(lw.uploadFile),ref:this.fileInput,type:"file",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:n})]}):h("div",{children:h("input",{tabIndex:-1,"aria-label":e(lw.uploadFile),ref:this.fileInput,type:"file",className:"file-attachment-menu-item-input",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:n})}),this.props.canUploadFiles||(i=null),h("div",{className:g(rw,"file-upload-container","style--none",{"btn-file__disabled":s<=0}),children:i})}}u(cw,"propTypes",{channelId:y.string.isRequired,rootId:y.string,fileCount:y.number.isRequired,getTarget:y.func.isRequired,intl:Qo.isRequired,locale:y.string.isRequired,onClick:y.func,onFileUpload:y.func,onFileUploadChange:y.func,onUploadError:y.func,onUploadStart:y.func,postType:y.string,maxFileSize:y.number,canUploadFiles:y.bool.isRequired,pluginFileUploadMethods:y.arrayOf(y.object),pluginFilesWillUploadHooks:y.arrayOf(y.object),onUploadProgress:y.func.isRequired,actions:y.shape({uploadFile:y.func.isRequired,handleFileUploadEnd:y.func.isRequired}).isRequired}),u(cw,"defaultProps",{pluginFileUploadMethods:[],pluginFilesWillUploadHooks:[]});const uw=S(cw,{forwardRef:!0});uw.displayName="injectIntl(FileUpload)";var dw=p((function(e){const t=ue(e);return{maxFileSize:parseInt(t.MaxFileSize,10),canUploadFiles:jo(t),locale:Bn(e),pluginFileUploadMethods:e.plugins.components.FileUploadMethod,pluginFilesWillUploadHooks:e.plugins.components.FilesWillUploadHook}}),(function(e){return{actions:E({uploadFile:nw,handleFileUploadEnd:sw},e)}}),null,{forwardRef:!0})(uw),hw=e=>h("svg",{"aria-hidden":"true",focusable:"false",className:g(e.className),role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",children:h("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z"})});const pw=f.forwardRef(((e,t)=>{const n=e,{component:s,title:{id:i,defaultMessage:r,values:a},className:u}=n,d=c(n,["component","title","className"]),{formatMessage:p}=O();return h("span",l(o({className:g("u3-inline-block",u)},d),{ref:t,title:p({id:i,defaultMessage:r},a),children:s}))}));pw.displayName="LocalizedIcon";class fw extends f.PureComponent{constructor(){super(...arguments),u(this,"renderSlashCommandError",(()=>{if(!this.props.submittedMessage)return this.props.error.message;const e=this.props.submittedMessage.split(" ")[0];return m(f.Fragment,{children:[h(v,{id:"message_submit_error.invalidCommand",defaultMessage:"Command with a trigger of ''{command}'' not found. ",values:{command:e}}),h("a",{href:"#",onClick:this.props.handleSubmit,children:h(v,{id:"message_submit_error.sendAsMessageLink",defaultMessage:"Click here to send as a message."})})]})}))}render(){const e=this.props.error;if(!e)return null;let t=e.message;return Vn(e)&&(t=this.renderSlashCommandError()),h("div",{className:"has-error",children:h("label",{className:"control-label",children:t})})}}var mw={postCreateForm:"mqik-dc323ff4",postCreateMain:"mqik-3ca5ac62",postCreateTextbox:"mqik-82fe072f",postCreateActions:"mqik-243bef8e",sendButtonClass:"mqik-629e5f8f",sendButtonActive:"mqik-2a364c18",sendButtonDisabled:"mqik-2df3cc0c",emojiBtn:"mqik-0b0c2b5c",emojiBtnActive:"mqik-15140fd0",emojiIcon:"mqik-803861b0",customReadOnlyText:"mqik-eaeeabbb",createPostComplex:"mqik-0f628631"};const gw=ve.KeyCodes;class vw extends f.PureComponent{constructor(e){super(e),u(this,"lastBlurAt"),u(this,"lastChannelSwitchAt"),u(this,"draftsForChannel"),u(this,"lastOrientation"),u(this,"saveDraftFrame"),u(this,"topDiv"),u(this,"textboxRef"),u(this,"fileUploadRef"),u(this,"createPostControlsRef"),u(this,"setShowPreview",(e=>{this.props.actions.setShowPreview(e)})),u(this,"setOrientationListeners",(()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.addEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.addEventListener("orientationchange",this.onOrientationChange)})),u(this,"removeOrientationListeners",(()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.removeEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.removeEventListener("orientationchange",this.onOrientationChange)})),u(this,"onOrientationChange",(()=>{if(!Wn())return;let e="portrait";window.orientation&&(e=90===Math.abs(window.orientation)?"landscape":"portrait"),window.screen.orientation&&(e=window.screen.orientation.type.split("-")[0]),this.lastOrientation&&e!==this.lastOrientation&&"post_textbox"===(document.activeElement||{}).id&&this.textboxRef.current.blur(),this.lastOrientation=e})),u(this,"handlePostError",(e=>{this.setState({postError:e})})),u(this,"toggleEmojiPicker",(e=>{this.setState({showEmojiPicker:e})})),u(this,"hideEmojiPicker",(()=>{this.handleEmojiClose()})),u(this,"doSubmit",(async e=>{const t=this.props.currentChannel.id;if(e&&e.preventDefault(),this.props.draft.uploadsInProgress.length>0||this.state.submitting)return;let n=this.state.message,s=!0;const i=this.state.serverError;i&&Vn(i)&&i.submittedMessage===n&&(n=i.submittedMessage,s=!0);const r={file_ids:[]};if(r.message=n,0===r.message.trim().length&&0===this.props.draft.fileInfos.length)return;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout((()=>{this.setState({errorClass:null})}),ve.ANIMATION_TIMEOUT);this.props.actions.addMessageIntoHistory(this.state.message),this.setState({submitting:!0,serverError:null});const a=Gn.exec(r.message);if(0!==r.message.indexOf("/")||s)if(a&&this.props.emojiMap.has(a[2]))this.sendReaction(a),this.setState({message:""});else{const{error:e}=await this.sendMessage(r);e||this.setState({message:""})}else{this.setState({message:"",postError:null});let e={};e.channel_id=t,e.team_id=this.props.currentTeamId;const n=await this.props.actions.runSlashCommandWillBePostedHooks(r.message,e);n.error?this.setState({serverError:l(o({},n.error),{submittedMessage:r.message}),message:r.message}):!n.data.message&&n.data.args}this.setState({submitting:!1,postError:null}),cancelAnimationFrame(this.saveDraftFrame),this.props.actions.setDraft(zn.DRAFT+t,null),this.draftsForChannel[t]=null;const c=Date.now()-this.lastBlurAt<150;this.focusTextbox(c)})),u(this,"handleNotifyAllConfirmation",(e=>{this.hideNotifyAllModal(),this.doSubmit(e)})),u(this,"hideNotifyAllModal",(()=>{this.setState({showConfirmModal:!1})})),u(this,"showNotifyAllModal",(()=>{this.setState({showConfirmModal:!0})})),u(this,"getStatusFromSlashCommand",(()=>{const{message:e}=this.state,t=e.split(" ");return t.length>0?t[0].substring(1):""})),u(this,"isStatusSlashCommand",(e=>"online"===e||"away"===e||"dnd"===e||"offline"===e)),u(this,"handleSubmit",(async e=>{e&&e.preventDefault(),Kn()&&this.focusTextbox(!0);const{currentChannel:t,userIsOutOfOffice:n,channelMemberCountsByGroup:s,currentChannelMembersCount:i}=this.props,r=this.props.enableConfirmNotificationsToChannel&&this.props.useChannelMentions;let a=0,o=0,l=[];const c=!Yn(this.state.message);if(r&&i>ve.NOTIFY_ALL_MEMBERS&&!c&&(a=i-1,l=["@all","@group"],this.props.isTimezoneEnabled)){const{data:e}=await this.props.actions.getChannelTimezones(this.props.currentChannel.id);o=e?e.length:0}if(a>0)return this.setState({channelTimezoneCount:o,memberNotifyCount:a,mentions:l}),void this.showNotifyAllModal();const u=this.getStatusFromSlashCommand();if(n&&this.isStatusSlashCommand(u)){const e={ModalId:se.RESET_STATUS,dialogType:h("div",{children:"ResetStatusModal"}),dialogProps:{newStatus:u}};return this.props.actions.openModal(e),void this.setState({message:""})}await this.doSubmit(e)})),u(this,"sendMessage",(async e=>{const{actions:t,currentChannel:n,currentUserId:s,draft:i,useChannelMentions:r,replyData:a}=this.props;let o=e;o.channel_id=n.id;const l=Jn(),c=s;o.pending_post_id=`${c}:${l}`,o.user_id=c,o.create_at=l,o.parent_id=this.state.parentId,o.metadata={},o.props={disable_group_highlight:!0},a&&(o.root_id=a.rootId,o.parent_id=a.postId),!r&&Yn(o.message,{checkAllMentions:!0})&&(o.props.mentionHighlightDisabled=!0);const u=await t.runMessageWillBePostedHooks(o);return u.error?(this.setState({serverError:u.error,submitting:!1}),u):(o=u.data,t.onSubmitPost(o,i.fileInfos),t.scrollPostListToBottom(),this.setState({submitting:!1}),{data:!0})})),u(this,"focusTextbox",((e=!1)=>{const t=this.props.readOnlyChannel||!this.props.canPost;this.textboxRef.current&&t?this.textboxRef.current.blur():!this.textboxRef.current||!e&&ee()||this.textboxRef.current.focus()})),u(this,"postMsgKeyPress",(e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:n}=this.props,{allowSending:s,withClosedCodeBlock:i,ignoreKeyPress:r,message:a}=nt(e,this.state.message,t,n,Date.now(),this.lastChannelSwitchAt,this.state.caretPosition);if(r)return e.preventDefault(),void e.stopPropagation();s&&(e.persist&&e.persist(),this.textboxRef.current&&this.textboxRef.current.blur(),i&&a?this.setState({message:a},(()=>this.handleSubmit(e))):this.handleSubmit(e),this.setShowPreview(!1)),this.emitTypingEvent()})),u(this,"emitTypingEvent",(()=>{const e=this.props.currentChannel.id;pa(e,"")})),u(this,"handleChange",(e=>{const t=e.target.value,n=this.props.currentChannel.id;let s=this.state.serverError;Vn(s)&&(s=null),this.setState({message:t,serverError:s});const i=l(o({},this.props.draft),{message:t});cancelAnimationFrame(this.saveDraftFrame),this.saveDraftFrame=requestAnimationFrame((()=>{this.props.actions.setDraft(zn.DRAFT+n,i)})),this.draftsForChannel[n]=i})),u(this,"pasteHandler",(e=>{if(!e.clipboardData||!e.clipboardData.items||"post_textbox"!==e.target.id)return;const{clipboardData:t}=e,n=oc(t);if(!n)return;e.preventDefault();let s=this.state.message;const i=s.length;s=cc(n,s.trim(),this.state.caretPosition);const r=s.length-(i-this.state.caretPosition);this.setMessageAndCaretPostion(s,r)})),u(this,"handleFileUploadChange",(()=>{this.focusTextbox()})),u(this,"handleUploadStart",((e,t)=>{const n=[...this.props.draft.uploadsInProgress,...e],s=l(o({},this.props.draft),{uploadsInProgress:n});this.props.actions.setDraft(zn.DRAFT+t,s),this.draftsForChannel[t]=s,this.focusTextbox()})),u(this,"handleUploadProgress",(({clientId:e,name:t,percent:n,type:s})=>{const i=l(o({},this.state.uploadsProgressPercent),{[e]:{percent:n,name:t,type:s}});this.setState({uploadsProgressPercent:i})})),u(this,"handleFileUploadComplete",((e,t,n)=>{const s=o({},this.draftsForChannel[n]);for(let i=0;i<t.length;i++)if(s.uploadsInProgress){const e=s.uploadsInProgress.indexOf(t[i]);-1!==e&&(s.uploadsInProgress=s.uploadsInProgress.filter(((t,n)=>e!==n)))}s.fileInfos&&(s.fileInfos=Ho(s.fileInfos.concat(e),this.props.locale)),this.draftsForChannel[n]=s,this.props.actions.setDraft(zn.DRAFT+n,s)})),u(this,"handleUploadError",((e,t,n)=>{const s=o({},this.draftsForChannel[n]);let i=e;if("string"==typeof e&&(i=new Error(e)),-1!==t&&s.uploadsInProgress){const e=s.uploadsInProgress.indexOf(t);if(-1!==e){const t=s.uploadsInProgress.filter(((t,n)=>e!==n)),i=l(o({},s),{uploadsInProgress:t});this.props.actions.setDraft(zn.DRAFT+n,i),this.draftsForChannel[n]=i}}this.setState({serverError:i})})),u(this,"removePreview",(e=>{let t={};const n=o({},this.props.draft),s=this.props.currentChannel.id;this.setState({serverError:null});let i=n.fileInfos.findIndex((t=>t.id===e));if(-1===i){if(i=n.uploadsInProgress.indexOf(e),-1!==i){const s=n.uploadsInProgress.filter(((e,t)=>i!==t));t=l(o({},n),{uploadsInProgress:s}),this.fileUploadRef.current&&this.fileUploadRef.current&&this.fileUploadRef.current.cancelUpload(e)}}else{const e=n.fileInfos.filter(((e,t)=>i!==t));t=l(o({},n),{fileInfos:e})}this.props.actions.setDraft(zn.DRAFT+s,t),this.draftsForChannel[s]=t,this.handleFileUploadChange()})),u(this,"focusTextboxIfNecessary",(e=>{this.props.rhsExpanded||document.getElementsByClassName("channel-switch-modal").length||Xn(e,document.activeElement)&&this.focusTextbox()})),u(this,"documentKeyHandler",(e=>{const t=e.ctrlKey||e.metaKey,n=t&&ge(e,gw.FORWARD_SLASH),s=t&&e.shiftKey&&ge(e,gw.BACK_SLASH);if(n)return e.preventDefault(),void fa();s?this.reactToLastMessage(e):this.focusTextboxIfNecessary(e)})),u(this,"getFileCount",(()=>{const e=this.props.draft;return e.fileInfos.length+e.uploadsInProgress.length})),u(this,"getFileUploadTarget",(()=>this.textboxRef.current?this.textboxRef.current:null)),u(this,"getCreatePostControls",(()=>this.createPostControlsRef.current)),u(this,"handleMouseUpKeyUp",(e=>{const t=st(e.target);this.setState({caretPosition:t})})),u(this,"handleSelect",(e=>{it(this.textboxRef.current.getInputBox(),e)})),u(this,"handleKeyDown",(e=>{const t=e.ctrlKey||e.metaKey,n=0===this.state.message.length,s=0===this.props.draft.message.length,i=(this.props.ctrlSend||this.props.codeBlockOnCtrlEnter)&&ge(e,gw.ENTER)&&t,r=!t&&!e.altKey&&!e.shiftKey&&ge(e,gw.UP),a=!t&&!e.altKey&&e.shiftKey&&ge(e,gw.UP),o=rt(e)&&!e.altKey&&!e.shiftKey,l=ge(e,gw.B)||ge(e,gw.I),c=rt(e,!0)&&e.altKey,u=ge(e,gw.K);at(e)?this.setState({message:ot(e)}):i?this.postMsgKeyPress(e):r&&n?this.editLastPost(e):a&&n?this.replyToLastPost(e):o&&s&&ge(e,gw.UP)?this.loadPrevMessage(e):o&&s&&ge(e,gw.DOWN)?this.loadNextMessage(e):(o&&l||c&&u)&&this.applyHotkeyMarkdown(e)})),u(this,"editLastPost",(e=>{e.preventDefault();const t=this.props.currentUsersLatestPost;if(!t)return;let n;n=t.root_id&&t.root_id.length>0?be("create_post.comment",qe.MESSAGE_TYPES.COMMENT):be("create_post.post",qe.MESSAGE_TYPES.POST),this.textboxRef.current&&this.textboxRef.current.blur(),this.props.actions.setEditingPost(t.id,this.props.commentCountForPost,"post_textbox",n)})),u(this,"replyToLastPost",(e=>{e.preventDefault();const t=this.props.latestReplyablePostId,n=document.getElementById("reply_textbox");n&&n.focus(),t&&this.props.actions.selectPostFromRightHandSideSearchByPostId(t)})),u(this,"loadPrevMessage",(e=>{e.preventDefault(),this.props.actions.moveHistoryIndexBack(qe.MESSAGE_TYPES.POST).then((()=>this.fillMessageFromHistory()))})),u(this,"loadNextMessage",(e=>{e.preventDefault(),this.props.actions.moveHistoryIndexForward(qe.MESSAGE_TYPES.POST).then((()=>this.fillMessageFromHistory()))})),u(this,"applyHotkeyMarkdown",(e=>{const t=lt(e);this.setState({message:t.message},(()=>{const e=this.textboxRef.current.getInputBox();ct(e,t.selectionStart,t.selectionEnd)}))})),u(this,"reactToLastMessage",(e=>{e.preventDefault();const{rhsExpanded:t,actions:{emitShortcutReactToLastPostFrom:n}}=this.props,s=0===document.getElementsByClassName($n.MODAL).length,i=0===document.getElementsByClassName($n.POPUP).length;!t&&s&&i&&n(Qn.CENTER)})),u(this,"handleBlur",(()=>{this.lastBlurAt=Date.now(),this.setState({textboxActive:!1})})),u(this,"handleFocus",(()=>{this.setState({textboxActive:!0})})),u(this,"showPostDeletedModal",(()=>{this.setState({showPostDeletedModal:!0})})),u(this,"hidePostDeletedModal",(()=>{this.setState({showPostDeletedModal:!1})})),u(this,"handleEmojiClose",(()=>{this.setState({showEmojiPicker:!1})})),u(this,"setMessageAndCaretPostion",((e,t)=>{const n=this.textboxRef.current.getInputBox();this.setState({message:e,caretPosition:t},(()=>{Ke(n,t)}))})),u(this,"handleEmojiClick",(e=>{const t=e.name||e.aliases[0];if(t){if(""===this.state.message)this.setState({message:":"+t+": "});else{const{message:e}=this.state,{firstPiece:n,lastPiece:s}=Fe(this.state.caretPosition,e),i=""===n?`:${t}: ${s}`:`${n} :${t}: ${s}`,r=""===n?`:${t}: `.length:`${n} :${t}: `.length;this.setMessageAndCaretPostion(i,r)}this.handleEmojiClose()}})),u(this,"handleGifClick",(e=>{if(""===this.state.message)this.setState({message:e});else{const t=/\s+$/.test(this.state.message)?this.state.message+e:this.state.message+" "+e;this.setState({message:t})}this.handleEmojiClose()})),u(this,"handleHeightChange",((e,t)=>{this.setState({renderScrollbar:e>t}),window.requestAnimationFrame((()=>{this.textboxRef.current&&this.setState({scrollbarWidth:ut(this.textboxRef.current.getInputBox())})}))})),this.state={message:this.props.draft.message,caretPosition:this.props.draft.message.length,submitting:!1,showPostDeletedModal:!1,showEmojiPicker:!1,showConfirmModal:!1,channelTimezoneCount:0,uploadsProgressPercent:{},renderScrollbar:!1,scrollbarWidth:0,currentChannel:e.currentChannel,mentions:[],memberNotifyCount:0,textboxActive:!1,postError:null,serverError:null,errorClass:null,parentId:null,xsend:!1},this.lastBlurAt=0,this.lastChannelSwitchAt=0,this.draftsForChannel={},this.lastOrientation=null,this.saveDraftFrame=()=>{},this.topDiv=f.createRef(),this.textboxRef=f.createRef(),this.fileUploadRef=f.createRef(),this.createPostControlsRef=f.createRef()}static getDerivedStateFromProps(e,t){let n={currentChannel:e.currentChannel};return e.currentChannel.id!==t.currentChannel.id&&(n=l(o({},n),{message:e.draft.message,submitting:!1,serverError:null})),n}componentDidMount(){const{actions:e}=this.props;this.onOrientationChange(),e.setShowPreview(!1),e.clearDraftUploads(zn.DRAFT,((e,t)=>t?l(o({},t),{uploadsInProgress:[]}):t)),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.documentKeyHandler),this.setOrientationListeners()}componentDidUpdate(e,t){const{currentChannel:n,actions:s}=this.props;e.currentChannel.id!==n.id&&(this.lastChannelSwitchAt=Date.now(),this.focusTextbox()),n.id!==e.currentChannel.id&&s.setShowPreview(!1),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox()}componentWillUnmount(){if(document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.documentKeyHandler),this.removeOrientationListeners(),this.saveDraftFrame){const e=this.props.currentChannel.id;this.props.actions.setDraft(zn.DRAFT+e,this.draftsForChannel[e]),cancelAnimationFrame(this.saveDraftFrame)}}sendReaction(e){const t=this.props.currentChannel.id,n=e[1],s=e[2],i=this.props.latestReplyablePostId;i&&"+"===n?this.props.actions.addReaction(i,s):i&&"-"===n&&this.props.actions.removeReaction(i,s),this.props.actions.setDraft(zn.DRAFT+t,null),this.draftsForChannel[t]=null}fillMessageFromHistory(){const e=this.props.messageInHistoryItem;e&&this.setState({message:e})}createTutorialTip(){}shouldEnableSendButton(){return 0!==this.state.message.trim().length||0!==this.props.draft.fileInfos.length}render(){const{currentChannel:e,draft:t,fullWidthTextBox:n,customReadOnlyText:s,canPost:i,channelBlocked:r,userGuest:a}=this.props,o=this.props.readOnlyChannel||!i,{formatMessage:l}=this.props.intl,{renderScrollbar:c,channelTimezoneCount:u,mentions:d,memberNotifyCount:p,xsend:f}=this.state,v=be("accessibility.sections.centerFooter","message input complimentary region");d.includes("@all")||d.includes("@group")||d.length>0&&(1===d.length?d[0]:(d.slice(0,-1).join(", "),d[d.length-1]));let b=null;this.state.serverError&&(b=h(fw,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));let y,C=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");C=h("label",{className:g(mw.errorLabel,e),children:this.state.postError})}!o&&(t.fileInfos.length>0||t.uploadsInProgress.length>0)&&(y=h($b,{fileInfos:t.fileInfos,onRemove:this.removePreview,uploadsInProgress:t.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent}));let E="post-create-footer";C&&(E+=" has-error");let w="";n||(w="center");let S="send-button theme";this.shouldEnableSendButton()||(S+=" disabled");let _="";this.props.canUploadFiles||(_=" post-create--attachment-disabled");let A=h("div",{className:"u3-w-3 u3-h-3"});o||this.props.shouldShowPreview||(A=h(dw,{ref:this.fileUploadRef,fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,postType:"post",channelId:e.id}));let k=null;const P=l({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();let x;!this.props.enableEmojiPicker||o||this.props.shouldShowPreview||(k=h(Ya,{placement:"top-end",trigger:"click",content:h(Ob,{target:this.getCreatePostControls,onHide:this.hideEmojiPicker,onEmojiClose:this.handleEmojiClose,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:this.props.enableGifPicker}),target:this.getCreatePostControls,toggleFocus:this.toggleEmojiPicker,lockInnerFeedback:!0,children:h("button",{type:"button","aria-label":P,className:g(mw.emojiBtn,"emoji-picker__container","post-action",{"post-action--active":this.state.showEmojiPicker,[mw.emojiBtnActive]:this.state.showEmojiPicker}),children:h(hw,{id:"emojiPickerButton",className:mw.emojiIcon})})})),o?(x=be("create_post.read_only","This channel is read-only. Only members with permission can post here."),s&&a&&(x=h("p",{className:mw.customReadOnlyText,children:h($o,{id:"create_post.read_only_custom",defaultMessage:s,disableLinks:!1})})),r&&(x=h("p",{className:mw.customReadOnlyText,children:h($o,{id:"create_post.channel_blocked",defaultMessage:"Không có quyền để chat. Liên hệ Admin để được hỗ trợ.",disableLinks:!1})}))):x=l({id:"create_post.write",defaultMessage:"Write to {channelDisplayName}"},{channelDisplayName:e.display_name});let T="";return c&&(T=" scroll"),m("form",{id:"create_post",ref:this.topDiv,className:g(mw.postCreateForm,w),onSubmit:this.handleSubmit,children:[h("div",{className:g(mw.postCreateMain,"post-create"+_+T,{"textbox-active":this.state.textboxActive}),style:this.state.renderScrollbar&&this.state.scrollbarWidth?{"--detected-scrollbar-width":`${this.state.scrollbarWidth}px`}:void 0,ref:this.createPostControlsRef,children:m("div",{role:"application","aria-label":v,tabIndex:-1,className:g(mw.postCreateTextbox,"post-body__cell a11y__region"),"data-a11y-sort-order":"2",children:[A,h(Mc,{rootId:this.props.currentUsersLatestPost?this.props.currentUsersLatestPost.root_id:"",onChange:this.handleChange,onKeyPress:this.postMsgKeyPress,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:o?"":this.state.message,onBlur:this.handleBlur,onFocus:this.handleFocus,emojiEnabled:this.props.enableEmojiPicker,createMessage:x,channelId:e.id,id:"post_textbox",ref:this.textboxRef,disabled:o,characterLimit:this.props.maxPostSize,preview:this.props.shouldShowPreview,badConnection:this.props.badConnection,listenForMentionKeyClick:!0,useChannelMentions:this.props.useChannelMentions}),m("span",{className:g(mw.postCreateActions,"post-body__actions"),children:[k,h("a",{role:"button",tabIndex:0,"aria-label":l({id:"create_post.send_message",defaultMessage:"Send a message"}),className:g(mw.sendButtonClass,S,{[mw.sendButtonDisabled]:o,[mw.sendButtonActive]:f}),onClick:this.handleSubmit,children:h(pw,{className:"u3-transform u3-rotate-90",title:{id:te("create_post.icon"),defaultMessage:"Create a post"},component:h(Bf,{className:"u3-w-6 u3-h-6"})})})]})]})}),m("div",{id:"postCreateFooter",role:"form",className:E,children:[h("div",{className:"d-flex justify-content-between"}),m("div",{className:mw.createPostComplex,children:[C,y,b]})]})]})}}u(vw,"defaultProps",{latestReplyablePostId:""});var bw=S(vw);function yw(e,t){return n=>{n(Ts(e,t))}}var Cw=p((function(){const e=Kt(),t=Zn(),n=es(qe.MESSAGE_TYPES.POST);return(s,i)=>{const r=ue(s),a=e(s,{id:i.channelId})||{},o=ts(s,zn.DRAFT,a.id),l=ns(s,a.id),c=ss(s,l),u=is(s),d=rs(s,a.id)?rs(s,a.id).member_count:1,h="true"===r.EnableTutorial,p=as(s,ls.TUTORIAL_STEP,le(s),os.FINISHED),f="true"===r.EnableEmojiPicker,m="true"===r.EnableGifPicker,g="true"===r.EnableConfirmNotificationsToChannel,v=le(s),b=xe(s),y=cs(s,v)===us.OUT_OF_OFFICE,C=ma(s)>1,E="true"===r.ExperimentalTimezone,w=ds(s),S=Se(s,{channel:a.id,team:a.team_id,permission:ie.CREATE_POST}),_=Se(s,{channel:a.id,team:a.team_id,permission:ie.USE_CHANNEL_MENTIONS}),A=hs(s,ls.CATEGORY_CHANNEL_BLOCK,a.id,!1),k=ps(b),P=fs(s,a.id),x=Ee(s),T=ga(s,i.channelId);return{currentTeamId:x,currentChannel:a,currentChannelMembersCount:d,currentUserId:v,codeBlockOnCtrlEnter:ye(s,Ce.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:ye(s,ls.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),fullWidthTextBox:hs(s,ls.CATEGORY_DISPLAY_SETTINGS,ls.CHANNEL_DISPLAY_MODE,ls.CHANNEL_DISPLAY_MODE_DEFAULT)===ls.CHANNEL_DISPLAY_MODE_FULL_SCREEN,showTutorialTip:h&&p===os.POST_POPOVER,messageInHistoryItem:n(s),draft:o,commentCountForPost:t(s,{post:c}),latestReplyablePostId:u,locale:Bn(s),currentUsersLatestPost:ms(s,c.id),readOnlyChannel:i.readOnlyChannel||!gs(s)&&"true"===r.ExperimentalTownSquareIsReadOnly&&a.name===ve.DEFAULT_CHANNEL,canUploadFiles:jo(r),enableEmojiPicker:f,enableGifPicker:m,enableConfirmNotificationsToChannel:g,maxPostSize:parseInt(r.MaxPostSize||"0",10)||ve.DEFAULT_CHARACTER_LIMIT,userIsOutOfOffice:y,rhsExpanded:vs(s),emojiMap:Sn(s),badConnection:C,isTimezoneEnabled:E,shortcutReactToLastPostEmittedFrom:w,canPost:S,useChannelMentions:_,channelBlocked:A,shouldShowPreview:ic(s),channelMemberCountsByGroup:P,userGuest:k,customReadOnlyText:r.CustomReadOnlyText,replyData:T||null}}}),(function(e){return{actions:E({addMessageIntoHistory:ht,onSubmitPost:yw,moveHistoryIndexBack:bs,moveHistoryIndexForward:ys,addReaction:Cs,removeReaction:Es,setDraft:ws,clearDraftUploads:Ss,selectPostFromRightHandSideSearchByPostId:_s,setEditingPost:As,emitShortcutReactToLastPostFrom:ks,openModal:fe,getChannelTimezones:Ps,runMessageWillBePostedHooks:Hf,runSlashCommandWillBePostedHooks:Uf,scrollPostListToBottom:va,setShowPreview:nc,getChannelMemberCountsByGroup:xs},e)}}))(bw);var Ew={fileOverlay:"mqik-2f227fd2",overlayIndent:"mqik-2988dc4b",rightFileOverlay:"mqik-726b55ee",overlayFiles:"mqik-340def93",overlayCircle:"mqik-9ac0afaf",overlayLogo:"mqik-83477c83",fa:"mqik-ec2ba334"};const ww=e=>h("div",{className:g(Ew.fileOverlay,"u3-hidden",{[Ew.rightFileOverlay]:"right"===e.overlayType,[Ew.centerFileOverlay]:"center"===e.overlayType}),children:h("div",{className:Ew.overlayIndent,children:m("div",{className:Ew.overlayCircle,children:[h("img",{className:Ew.overlayFiles,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAABrCAMAAAAW2X0YAAAC9FBMVEUAAAAAAAAAAAD////Ozs4AAAABAQHPz8/GxsYAAADMzMwAAADv7+/6+vri4uIAAAAAAAD7+/v////+/v78/Pz29vbNzc0AAAAAAAAAAAD9/f3+/v7+/v77+/v29vafn58AAAAAAABCQkL+/v7+/v7r6+vz8/MAAADJycn6+vr8/Pz9/f38/Pz39/f6+vr8/Pz8/Pzo6OjKysq4uLjd3d3////+/v739/f39/f19fXMzMzLy8umpqb////29vb39/f7+/vR0dHMzMzGxsYAAADd3d3JycmmpqYAAAD39/ft7e3Gxsa9vb2tra34+Pi2trbU1NTi4uLw8PD7+/v29vb29vbm5ub19fX7+/vY2Njx8fHW1tbCwsLm5ubt7e3z8/N9fX35+fnp6enPz8/m5ubg4ODa2trU1NTW1tbk5OSysrLq6urPz8/BwcFjY2P9/f3Kysr19fW/v7/k5OSZmZnMzMwAAAC9vb3Hx8dAQECioqK7u7uvr6/w8PCxsbHc3Ny4uLikpKQLCwuoqKjHx8fOzs7u7u7w8PCsrKzT09OPj4+Tk5OXl5eZmZmenp61tbUAAADR0dG1tbX8/Pze3t6zs7OxsbGbm5ugoKC9vb0AAACBgYHq6uqnp6elpaXExMSrq6sAAAD4+PjZ2dmcnJzk5OTv7++kpKStra3n5+e4uLi/v7+JiYmhoaHIyMjAwMDJycm7u7v19fXg4OC3t7cdHR3S0tLw8PCRkZHb29vZ2dmtra2Tk5Pm5ube3t7CwsLr6+vU1NTf39/4+Pj19fXa2trw8PDr6+vz8/O3t7fS0tLKysrGxsbExMS4uLidnZ1zc3MmJiYAAAAAAAAAAAAAAAACAgK5ubmtra2GhoY/Pz8AAAAAAAAAAAC/v7+cnJxfX18FBQUAAAAAAAAAAAAAAADW1ta5ubmEhIQ1NTUAAAAAAAAAAADl5eWkpKTz8/Pg4OBtbW3f39/Z2dmVlZUICAhFRUUjIyPb29tpaWmMjIxycnKq81rdAAAA/HRSTlMAAQL/gAMF/4MI/wQVPxEHDE2zj2Q0CgkQBn2th1cnBAsSDKuoGyAUnLS0oHBBRnOms48k2rGWOWyzs3AXsCksWrOpWA2ztEUWQ7O1uIyzubOzs7T/tXYlVrO1sz+zt7YOnrizuLOzt7y5LbRJRR6zoZRgaP+vDz57Gf//M4n/XE4wFLO0ZH3///+3tbSzs7MKT////7Wzs7OzDiT//7mzsxOa////tbOzcLP/ublEs/+0jmM4FrmEuLtXuSpqXrV6UrqWsrWPgJI8vb/AwLCQbUk9NTEvLbGWdFI4KiebeFU7JCIgHp96VjUcGhilWqyIOYVrPSAoI24uOTKpTH4gAAALmklEQVR4AdTUg34sMRzF8T3pnSnWqW3bbWrbtq1r883vpEydzczq9wbfT/4nNpMBxPcA2EIjgESo9IaECAGargSIjNJIKAhA9Gg1QEyUnRA4nK7gXhPsbo8iICZK14iX0ti4+ITgIYiemKQIMATJySmUl5qWnpEJICiArGxFABfk5NKb8lK8+QgUAgApiAdgI8meQkUAr6i4hAqVlpX7fxIwclRUVtHqmlpAMwHg1YkCXn2DXycBIKGxqYHymhlradXcZgCiQKgtLb3dD5MAkNnRGdtGb+pirLsnp1cZ8LzA+knAqMCbkkvF+hhj/UUDg+qA5wWWTgKAa6iylD5smANGRscUARICCybBjz4+roE+1fgVYEIRICG4mUSn2iT40bd3prXR55o0D5AR8HJTvAXwBQGjfG9KHn2pKbMAeQGvtHKIT0Ly6J1lpfS1pq0AyAt4DXGNCS8bAJtx9LFUphkTgNkHzc1QydrmCfD80S8spqVS2ZZEgLmW5Z6At7L6lIAfV36FePQSrVkHWN+QfYJiVrRJ8PjoG5u2qK8tWwfY3iimcg0z1mO/LwAyYuupSjuWAXalb2iPse5WOwQBQPKpWvv9OweHlgCO1uckAV2MsRadiABiT96iSo2Pz60fBRYwznjH4hNA06ObqFolAQecMF6NromA5KzTsAH0scvO7AQi4DxcABc77LK3m9o9QPa7MAE0s+ve6wQCIOmDlYCPr6UOWGPXfbr7SkH0xM9fwgSwxG76KjyBPbr3W6qlgO8/nu+7CcAMu+vn3RNobk/2L0sBvyOe77cJwDS7SfxKQYwR/AkLwBQT+msnNwJjBP/CAnDxnzmzfFMbj6Lwuutdd5fMum9YrTAf2D4UWGXYKgt1z7rvOHDHh0AtTA06Rt3d+19thPs0c0NCPqQPvHXvCzm/nDmJhEM+YjodpXoI/nuzvgKzW9vmrAI3CIHENJ9Ou55juhN0eC7Q2fVbt1uBxal0Bnt648vAFcG3knH1KH1Hz7Eegr6f+j0XGJAkqfN6YnDISWBWarg5KyNiLh9tATesEudEb1HfArqG1m/wXKBLFdh4PXHbJieBzalYEwgJpYAqrYo/6E5CvZvRg5aZI1u8FthqzsLGbdJ2B4FUaocRYjGaL6JKqTm8qvZI8ZD2FlCb2Am18Y+GwX2IO7cPagOEfgF1SdKYg8D4hOkUCkwb7UF0EYmdTz+iHkTUJiahJgHEnlWgESvHWpwFiK9+26p+vUuSpG2DDgKzSMBg1RyfEYndsQjYMkkCRpv4BGrRi4hzQOUtVBl+y43AmCRtvX6jpLHVQWCRKsAIJpRWPRJlm0h88us9VwTUNrEHahBGlWZQEXtQQxGcLyH1Jd8uqXR3SRp/OQgstAhQJHK2kdjzDL0DRgj2Qg0KqFICDTG2W0bE7A4ngd8HBgc3SSY6bQUmHO7EgWm9PYhYBs7eh59+hNqEFoJ94EwMNWR6O8UyYqbkIPDVNmlgl2TmNvv7ABNgfDmnF/PA2feTegqZKvV+511OKKKOH4goZtKz7AVukzibbAUOmAQic8DKKEaB8fz+mbca9wFqEwfBCR8aKAAQL5UDABDLpA8dthMY/E2ysN1NmSvLCbCQQxEYBykC1CYePgL2UG4RWwGCiCjHAWA4nTpqJzAkWRlzI1BEq8Fb2AqcIw/3UQQqbeIYOFBGosU4TzEE8FY6dchOYECysm2wtkAEEWU/HzFRAc6x9XQFUQhGbAc6MVlGAmMAsGwUsScITcXUuNcfD4SwikEWE8BYMEIRuBKCb6AaYaWAZnZX/kqMQtNu7wVGUUNOgglBloPA+MYcAb1N9P1UdaDLIyNHL1QzNH1RXaBruz1dzgKrKGtmgzBmgbP8pz69yplDsBKsRNDCMuMMxTYS8HJWmYMVzKlV0AecleYIUJtY40ogrt1aSohJuoQ8E6DTumd0WmBqB3gLGGueueduErjSJo6DlSJyeo1DKSdAU85zgV4563uL9R6RSrCJdQ+bI+A00JWRIwsAsn6RhukY9U5AFMBCEkeB87PWI0jAcaBLooUwwLTWGABk06lhLwVsyGMIGI/9aj5EHQc6ES20UbugKnGVBYoYAcafagTMVxANdCeqtmhOiW45mfRJb8bd2Yvm2QsEsAicvytVmqCB7g+woqCFYOXAywx79HxgPJUZpoPHwjQsA+dfNQLs/2870IXRQrLy88MtngmkM4jFfFSsWqX9wHjzPx4Bh4FOkFFHziFRBg1/VPDqCc3RJctaUadVSQSBoHtzEBinpvQIc6U+DVbiiFhQEoLgo9t88So8YkoUsYKc9Zl30jlYAk7/T1SlCceBLuAXQadlFA0iHguc0U6hQEjfg5Ddi33YDJwN1CMI1wNduBU1QiTg2SXkz6rvMax6S9+DdCgSWQwD4+zITOoRhOuB7kv9OtpNAp6G2GgR+kRKFBR/lR6xk3qECfcD3blRRJ/HAhOH0hm6dkIB/SOoorl7MVaYegQ/SFd+AjWZk/A8xAvPKyUkiuWkCBChSMSB8Qn1CA4NdPV50D31ZS9QJBADwLhAVZpBA129BDQiMTqJKpEQMec4yRFsoKuLAPFWfFgmiZ4C5oHzB01yDBro6ihACOE2ikSVSa5Kj2ADXV0FiKDfiIQIjIvVegQf6BpAwIjE7rjzJEfwga5BBBh8kmPQQPdKYwssoB5hG4JTDS3AJzmCD3SNK8AnOYIPdI0q8B6f5KxtYuRsIwtcsusRfKBrVAE+yVWr1N83ssBlmyrNB7pGFXiOHu1x+EDnTkBo+eHw/4zbtQECMQAAwBVYgXm+psR1CmQorE337hq3PXDXK5Mm7rFsx33l+UEYxUmaZntpmsRRGPi5+4ZjW9v/X6+v67XPLeh2QPd3Bto9MLHsJ0ZRVlEUwTjNED5CWRrDfVBVFob9zJqAXvvfDMy+rCNeD+h+2h8MDcB2cmdFKOMQwnhf+ggLqZTSSkmJ0b4W4n0EZ5SsJve2YNBq/PsBYrEr3gog4waj8EQTIkiAy6+Q2DgxKAww0NCAwVxRc7UqFFSLAKXQATgAN5ABAzAUtllhLQAUANKkbXNpu+7u2raFvT95N+bt/E8t9oGqC9/3v+97iS8St6Y4iBZ0aqzDCLorq2sTHJ+cnh0ewrnDwQP3YlBG7QpROSiyoxRGAbOAH5yeHK/9xupKlz2A54kiAqSgU+B10Fle6kqcz1ycScOkwDyX1KO27/bD0AGEYd/121E0GBQwjjSVpjq7mDnvVlha7gTqT2hoJUdBCzoV1iEGQdC5/LF5lR4dZZK5PPXEBepOr2Xatqhg22av54AMN6mmUeQ52Cq92vx52ekEAe/8sZIjS1RV0CkkzH4fjsZZVsChl/LQ45q5EIal67qGgD8tA4SYLdARu76UATogIaOdrVdwEDy8+Hslxy7oCD583L7OkXsiuXstUwjL0jX66aP8j6ZblhBmy5uoKOUwbhZuN1SfIU2v5JgFHcXct/m7bELej/uSvC0MSp6KMIQtRfRjP8FR5Nfbi4wveb64ygjgI7WioHu6u3MP5Os1I7Pq9ZC8RslTERqK6HmYbhCRF9nD/L5i/b1RPEewCrqXB8OFG5nWQVR7HsibwkDfPGEB3YQi4smKKvIxRII8yJBXewT8gu7tItv0FOpISBEkEuTVHgGzoJvbl6YH9mj6kJheAWUk3KTK9dRIfMVKTh0CUtDNbu2MxtWWR9+g6S216fkiMBL1JPIcI6Gu5JQF3catND3eXXHRM03/6EiUZRWJe4wEebWn8pDj7/5r0z8+EsODOhLvFM8RpKB7tj//QJcl0/QNRGIPX+3xPPT502hc5H8sS5vtmwYiUdztvWc5CBep58oLSzQ93zfNRSJqx57gCtAMM3T9RPGE0CBoJHw/dky4DTMvt4QJ1zls0zcvwnE8U1jsW70mB9i86fmRELYko3GJ1NKbNz0/EjqSYV+E+N/k1XR+AWSp9BXRFCxOAAAAAElFTkSuQmCC",alt:"Files",loading:"lazy"}),m("span",{children:[h(v,{id:"generic_icons.upload",defaultMessage:"Upload Icon",children:e=>h("i",{className:"fa fa-upload",title:e})}),h(v,{id:"upload_overlay.info",defaultMessage:"Drop a file to upload it."})]}),h("img",{className:Ew.overlayLogo,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAAAkCAYAAAF3QH8aAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAA26ADAAQAAAABAAAAJAAAAAARfPeIAAANUUlEQVR4Ae1dC9BVVRWWV4JApGEmalJSRtNU0yCEQ0FqWkOlo6NmjUlSaSLjmE4+oowBG9FsMs0QwiTsYVTYOKJmxiQ0JdBjhEkZUEwJTCzEQOJ5+779r3VmnXX3vvf89+G9t+6aWXet9a3Hfpx7Xvuc+/8HHZSgUqm0CpxRIqxxcNZSqXQTdVY2cnisJfifj+GFMC3OYOjHiCS8jB+gmVoI+m7xz4A+FHyC+gpLJIVRSaFshIqrFP8LImfYeOqe+nhAbVuQWB+Q+poi2aChaU1phEVNI5eorriV1JUQd6fqvZJswCaoDfkEcdqgF3tE6e+CfcP4cvnESX17RPknCxGF2KBebLrRgi8Bdhj4ZfAIYAMgjwQH6tU2RvI0FrWkhapJ5lSLKeRHndyRxnZGdS0k9ki1KQWba7G20XUAkIt9p9SneMoGPp4x1k9dMZHPqV/kRdZPveFkGnytLw7fZvoVV51S6AKRK0X+E/IMH08b+DxwOBCKHVI0tikytFDlQxtmmHTsX0ZfYXSqT0rMHpGac6XGCX4W7KXUe0O9OrKjAR599ica2ImjyJCEryVw8lCZ6E1qYAwfrLNNSbI1YH7dY9bfcp2dM/QY9LPB+wymX6sHidkOa4zFUrrPTcU1FK/UQeuDvkjsfdoB539W7P6Q3A+3gNeBvwruCw7EXCoi74eanXC1bsNkaFEa80WtD/rNzqZ5PD+ko1Q5sCnGVt81dGp91VUq3nDJBkixwj2erPNXqw35eerMsVJ1xWFnBzfnuwv2bIvF2q8bYwNC2VUG7IEKUkpnLzQ61Tt0EE7ugW8IeC+DtINW13hgx6q/KZKNViPpzI2M045pZyT3CMiN1MX/YCxOc7zP4tX07KtQLbBoI726Yi7SKGI4Ec2oW7D58jD0JzvqsXM10qO+MuqM9pi3EdMPzOvTG7yva1eZAUxaQ8g2g4JPm6ILrc/qJiY7Rll/LTpqTpK6t9WS3+ic3l5Z1tv+vTwsxAiF31ig+F9MzKcxkacaO6jAwgqE4rBza2ewTwPzzDnCxHAP/Rq4v8FegH2y2pDhLhRyN/AD4M/QBzkXvIC6EuyDwfPU7iiJjueoaOeRdItNtHnAOUmeuHITCI6fiHOnCTqfTtgfFIx77etEv6Ins+dcI9gwkY9LXu6uAL7cHgd7qcT/MFLr44p1jJTBZKJox5FwYpYExebBnGV8XG4LxBgonxNTr3rU/JH4bWy2MqD14TxZEyDLzo3Avi3+bOnD5AaXtPNvibte/R0lpfNeVLzSQ/AVPsEOGr7p6pdJ+q7aKjUe9nrBtkmshlBO1jiVwP5qAtYprhK+heKPbTjeuVnKHa61RkdIOwrRs5UX2O+P+KOQHSwC/qBBiqtNqRilx2GHO0rI34G3in+LxOrh8C3AR1mf1gS2QPD1ilkJX7gHYozFO05H/3dwEPVSbOCoOdTisLknjrNYPTpq8VZmoK8BjOfJQR6nDZyLOyS9iImFdQaGQSwPQ6n94+jOGGnYcI9gmNs7pb8V+4mB8HFbLXsen5C92rcqFcfyf+HEpNe7p6FEfsPB5lVk9DBlJxUx88FrwW+weFevMgOYsEbQKm0GxSabgrsUj0kT19kXCLHBNROzE1ePbvto61jc6oh5l4kLT2itv1YdNcNhvtb8Rua14rzB2wC+AHMOmK8BrQT3mjCJ2SqHS37M2EWWzUx4RXUwvWi36uG5YpV2dppvu1WPSPUZQUtsoOo2XjGV1kcd+AD1qYzE3AnflywOm5f01yoGnasxD6lNCVvpB1D0Bn449EfBJ7nYxcBOtFhH6Oh0jop0GgkcbI5sXs7RYxzj/Hy7IEfqB3hYzoEVEeMLLtpQstUO45/icmkeBZ6juMZKjQBbrCN0HYzIW4p22uXlLiSMb5noYXVDaxv/3apHfO+BbyP9xqcrG3w+v5U+UD/w+KCZD81RqS5jX+Ix9bW91I6LzO0RlTrv8rKJZY7xTVBda8EOLxxB8pHKVOuHrnvPWqmTW0SGv4/EM5fEd0MDQX87+KMESYqrBLQrOEqlicREpzhXYzpGms5TnVS04y4vN0nGdzp0XTu8lbWN7yToY9UWH+NJp4LfHLRSKTwR0H4JFoRiVqrfYtSBnym+ZyD5AkkgH9cRtnZe5EtFOo3YwS4vtdG4J51rYk9Rne1AH+TsmWLfKnKP7w/wP4lvjfdJzeCu5EOAnlOXxuLaHpMJsKLqMycbrLodqGKQVxE3tqrZYxQFJO5CtSGfsjXFz/OXpX6RmOD3uOTzCbil7Ol4LL5tMTsC1VOdhd9OqoYHaXOM4ybisJ8wWGqvfD1ieKVHChdEkIcES14kgs5XNUk8f5E22nalreDwuPiycyyC9sdiOgILI8x/jNKOA+a6YCHSHEqT8LDYen6i6xGNhT6RgNCXXa59kMr3PMZI3F6J04sR/kglIy0GGX2wa/yfypI6TTGDqEu14zaFNhGHfajBsvMIsOyCAPoBiT3cxFI9RXCeR7mhPiD2ddBJq2kr9UDh88eKWal+i3WcroOoU+7wA0e9t1oM9nFgXmg0bEkOtY63bVAHxr3SvrmVC4EvUA7sNEMHUafk2mTbE8Y4Wcb5t7bvbKUOYhBH17nBlleq304+jJN7IWl6O/WrrfqCyeEXYjlnqUXEReKOeR2irTZetzOdMwP4kk9r0Q4WazZ62kVgX/BDJoEXqL8HT6x1ppF7AdjTJgBl1021ttHN685Abgbw5QoP//23rkV22Y0JO8sdoEJ/arpkQb1liZpn5yaoDQz0k4+I+XzkHW3QnW4Xap2BxBeuZXBqHOjQbxKd4oO43FpZqobiiP9eotbTGtMuEv3ku/ieujsdNlDDloHaZWO7fvBlnFngEbEfPFqMMRIbXuCBXi/tTBTg7wb4DC66CO1zEMfF76keF3sk/P0SvlbB97uG52Ce+Wul0eDhztc123kGsMGKUOH3ilJjRSO5H66mGq2Qrz9eTaXem8pVHImfTCUb/G0abyX8J4AfN3Gq8k9KTbCx1IHdowEic7+9BOb78hKwsldCgV0j+SmxDY4B0uZdLuh52NE/sgT8Shd7sR9D127wDLgJ9ybfu2rY0ZO1wOFdLt+Q2qnhwa8/UdRQyv3WgM6zbpTge5+Lpbk3gk22BeDvA74vEudzJ7m8UcjhjmApLL4A8ItS12kufO8GXwVeB07RH+H4OZgvasw3uXzQtg9sabb6VcI5DGx/cc/4X6m/K5s0A5zlClTzal+qu2hrYoX2ShXy9HUwm/4Fa4h+jq8BnI82/M5xO7BrJceKy2w+HHdYJ/RJ6of+sPGVvX0F33jjp7oSfKPDsvfigfPd/J+C9b0Nhr7MD0PZG1jaDysRd76JpcodMndpDPvPdBhabmt09SbNgJnwmHpUo5tFI0fGGlIs1R78N2iMkR+CzrOAp2wBAY5B4BddwH1sB9jHHE7zNu0D9DHOn+1QwC8zPu4c79Q8K4F/x8RZ9T8wjrOxMR0x37RJ0CvubKyBmMUu51taG/g85+OlZrgM1ZiubNIMuIn3ZnhVspFNo4HrfSPWTrWFmK/YONHPYzz0B5yP9z+DxbfW+bK/SAX8WOejGf4SoORe7PzjYPNgscHgu6C/ifExgo8/ieB9naUtMHJ/dCKWSwxxPANbKrKzDUTCdpsE/b3gzzqMl+EjU2138QbPgJv8mHlPo5pEcf/FKWsv1RYCv1gWLK8FAeeXa5vz81LJ32vxS/4a2wZs/6XcoH74YpeZgAPxsvQsjU1JxMTOnizwiVSOxRG3gMGGqu5szEf8aSaH6lZn0zzdttXVmzwDkQ2QgpbAkbv2L9I15BwCLrQSyYZTNeHyZxmGz9R46DzrVKJX4Cxb7AG2wiXxkjA8woH8iPNths37xOyyCzpXFX8JHqt9UQnsIrClp6wBfYrGpiRi7nY5hXY21kNe6hKWJWel2uziTZoBtyFT5gw4yp5jAeMN/YfBXOkbC54MvhTMm3x/6QSoOqWGicypkezbbTz8V0diCHEHGm1jqQPjSuMzYE/ZK1tw/NY4N0EPfw8M8mDwL4yPanamgD7b+RZIm3McXnHJHbGLXHzZ6qIfl9rI4/iedfk0H9CYrnwVZyCyIWIQV8Tmg3nftBC8BmxXzGA2hmJDR+VDwXsiLWy28fBz6TtG37dxqiNweiwY2HNgPbvxgGJ3uFgKFzsmmLp+aX+R+igR+2tXJFvAsHESG1uFPcPHpWz2y7W1G/awVHwXb+IMuA3RcrPSUNG5y8FPSif/AVn2V5GBnSl+K5LvTyKoP5hnzdVgLnbwUq/sfgoYL4fPA/8MPBfMS0Q+6C474+sY4BsJjp1RRwBfDybx8jZb/tdclfANAfPgprQdSnTlU3OsRKw/w15q/Z2sJye+XQeFjbEKfRvTJv1bjVeRev9vE9uk8+3WDWxbfh959tc/gHYA+lDM8Svt1tda+hMuPWpJbGHOOLS9ooXta9PLobAvXWrcDFyOUrqjseqa/5UdrXFT1IJKOAryN2O811gF3gFuNrENtsU2O/Eg1YKtVFuTmN/DwYWe69XWQmuy/gtNdruFDFJIxwAAAABJRU5ErkJggg==",width:"100",alt:"Logo",loading:"lazy"})]})})});var Sw=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_w=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),Aw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kw=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Pw=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],s=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){i=!0,r=l}finally{try{!s&&o.return&&o.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},xw=void 0;xw="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var Tw=null,Nw=null,Mw=xw.clearTimeout,Iw=xw.setTimeout,Ow=xw.cancelAnimationFrame||xw.mozCancelAnimationFrame||xw.webkitCancelAnimationFrame,Rw=xw.requestAnimationFrame||xw.mozRequestAnimationFrame||xw.webkitRequestAnimationFrame;function Lw(e){var t=void 0,n=void 0,s=void 0,i=void 0,r=void 0,a=void 0,o=void 0,l="undefined"!=typeof document&&document.attachEvent;if(!l){a=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,s=t.lastElementChild,i=n.firstElementChild;s.scrollLeft=s.scrollWidth,s.scrollTop=s.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},r=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},o=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;a(this),this.__resizeRAF__&&Tw(this.__resizeRAF__),this.__resizeRAF__=Nw((function(){r(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}};var c=!1,u="";s="animationstart";var d="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),p=document.createElement("fakeelement");if(void 0!==p.style.animationName&&(c=!0),!1===c)for(var f=0;f<d.length;f++)if(void 0!==p.style[d[f]+"AnimationName"]){u="-"+d[f].toLowerCase()+"-",s=h[f],c=!0;break}t="@"+u+"keyframes "+(n="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",i=u+"animation: 1ms "+n+"; "}return{addResizeListener:function(r,c){if(l)r.attachEvent("onresize",c);else{if(!r.__resizeTriggers__){var u=r.ownerDocument,d=xw.getComputedStyle(r);d&&"static"===d.position&&(r.style.position="relative"),function(n){if(!n.getElementById("detectElementResize")){var s=(t||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=n.head||n.getElementsByTagName("head")[0],a=n.createElement("style");a.id="detectElementResize",a.type="text/css",null!=e&&a.setAttribute("nonce",e),a.styleSheet?a.styleSheet.cssText=s:a.appendChild(n.createTextNode(s)),r.appendChild(a)}}(u),r.__resizeLast__={},r.__resizeListeners__=[],(r.__resizeTriggers__=u.createElement("div")).className="resize-triggers";var h=u.createElement("div");h.className="expand-trigger",h.appendChild(u.createElement("div"));var p=u.createElement("div");p.className="contract-trigger",r.__resizeTriggers__.appendChild(h),r.__resizeTriggers__.appendChild(p),r.appendChild(r.__resizeTriggers__),a(r),r.addEventListener("scroll",o,!0),s&&(r.__resizeTriggers__.__animationListener__=function(e){e.animationName===n&&a(r)},r.__resizeTriggers__.addEventListener(s,r.__resizeTriggers__.__animationListener__))}r.__resizeListeners__.push(c)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",o,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(s,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(dT){}}}}}null==Ow||null==Rw?(Tw=Mw,Nw=function(e){return Iw(e,20)}):(Tw=function(e){var t=Pw(e,2),n=t[0],s=t[1];Ow(n),Mw(s)},Nw=function(e){var t=Rw((function(){Mw(n),e()})),n=Iw((function(){Ow(t),e()}),20);return[t,n]});var Dw=function(e){function t(){var e,n,s;Sw(this,t);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=s=kw(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),s.state={height:s.props.defaultHeight||0,width:s.props.defaultWidth||0},s._onResize=function(){var e=s.props,t=e.disableHeight,n=e.disableWidth,i=e.onResize;if(s._parentNode){var r=s._parentNode.offsetHeight||0,a=s._parentNode.offsetWidth||0,o=window.getComputedStyle(s._parentNode)||{},l=parseInt(o.paddingLeft,10)||0,c=parseInt(o.paddingRight,10)||0,u=parseInt(o.paddingTop,10)||0,d=parseInt(o.paddingBottom,10)||0,h=r-u-d,p=a-l-c;(!t&&s.state.height!==h||!n&&s.state.width!==p)&&(s.setState({height:r-u-d,width:a-l-c}),i({height:r,width:a}))}},s._setRef=function(e){s._autoSizer=e},kw(s,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.exports.PureComponent),_w(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=Lw(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,s=e.disableHeight,i=e.disableWidth,r=e.style,a=this.state,o=a.height,l=a.width,c={overflow:"visible"},u={},h=!1;return s||(0===o&&(h=!0),c.height=0,u.height=o),i||(0===l&&(h=!0),c.width=0,u.width=l),d.exports.createElement("div",{className:n,ref:this._setRef,style:Aw({},c,r)},!h&&t(u))}}]),t}();Dw.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};var Fw=function(e,t){return e===t};function jw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fw,n=void 0,s=[],i=void 0,r=!1,a=function(e,n){return t(e,s[n])},o=function(){for(var t=arguments.length,o=Array(t),l=0;l<t;l++)o[l]=arguments[l];return r&&n===this&&o.length===s.length&&o.every(a)?i:(r=!0,n=this,s=o,i=e.apply(this,o))};return o}function Hw(){var e=window.navigator.userAgent;return-1!==e.indexOf("Safari")&&-1===e.indexOf("Chrome")}var Uw=Hw(),qw={display:"inline",width:"0px",height:"0px",zIndex:"-1",overflow:"hidden",margin:"0px",padding:"0px"},Bw={position:"absolute",flex:"0 0 auto",overflow:"hidden",visibility:"hidden",zIndex:"-1",width:"100%",height:"100%",left:"0px",top:"0px"},Vw={flex:"0 0 auto",overflow:"hidden",zIndex:"-1",visibility:"hidden",left:"-9px",bottom:"-8px",right:"-8px",top:"-9px"},zw={position:"absolute",flex:"0 0 auto",visibility:"hidden",overflow:"scroll",zIndex:"-1",width:"100%",height:"100%"},Ww={position:"absolute",height:"200%",width:"200%"},Gw=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this)._node=null,t._resizeSensorExpand=f.createRef(),t._resizeSensorShrink=f.createRef(),t._positionScrollbarsRef=null,t._measureItemAnimFrame=null,t.positionScrollBars=function(e,n){void 0===e&&(e=t.props.size),void 0===n&&(n=t.props.width),t._positionScrollbarsRef&&window.cancelAnimationFrame(t._positionScrollbarsRef),t._positionScrollbarsRef=window.requestAnimationFrame((function(){t._resizeSensorExpand.current.scrollTop=e+27,t._resizeSensorShrink.current.scrollTop=2*e+17}))},t.scrollingDiv=function(e){e.target.offsetHeight!==t.props.size&&t._measureItem(e.target.offsetWidth!==t.props.width)},t.renderItems=function(){var e=t.props.item,n={position:"absolute",left:"0",top:"0",height:t.props.size+27+"px",width:"100%"};return m("div",{style:{position:"relative"},children:[e,h("div",{style:qw,children:h("div",{dir:"ltr",style:Bw,children:m("div",{style:Vw,children:[h("div",{style:zw,ref:t._resizeSensorExpand,onScroll:t.scrollingDiv,children:h("div",{style:n})}),h("div",{style:zw,ref:t._resizeSensorShrink,onScroll:t.scrollingDiv,children:h("div",{style:Ww})})]})})})]})},t._measureItem=function(e){var n=t.props,s=n.handleNewMeasurements,i=n.size,r=n.itemId,a=t._node;if(a&&a.ownerDocument&&a.ownerDocument.defaultView&&a instanceof a.ownerDocument.defaultView.HTMLElement){var o=Math.ceil(a.offsetHeight);i!==o&&s(r,o,e)}},t}D(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._node=M.exports.findDOMNode(this),Uw&&this.props.size?this._measureItemAnimFrame=window.requestAnimationFrame((function(){e._measureItem(!1)})):this._measureItem(!1),this.props.size&&this.positionScrollBars()},n.componentDidUpdate=function(e){(0===e.size&&0!==this.props.size||e.size!==this.props.size)&&this.positionScrollBars()},n.componentWillUnmount=function(){this._positionScrollbarsRef&&window.cancelAnimationFrame(this._positionScrollbarsRef),this._measureItemAnimFrame&&window.cancelAnimationFrame(this._measureItemAnimFrame);var e=this.props,t=e.onUnmount,n=e.itemId,s=e.index;t&&t(n,s)},n.render=function(){return this.renderItems()},t}(d.exports.Component),Kw=function(e,t,n){var s=n.itemOffsetMap,i=n.itemSizeMap,r=e.itemData;return i[r[t]]?{offset:s[r[t]]||0,size:i[r[t]]||0}:{offset:0,size:0}},Yw=function(e,t,n){return Kw(e,t,n).offset},Xw=function(e,t,n){var s=n.totalMeasuredSize,i=e.itemData;return t<=s?function(e,t,n,s,i){for(var r=s;s<=n;)i-Kw(e,s,t).offset<=0&&(r=s),s++;return r}(e,n,i.length,0,t):0},$w=function(e,t,n){return Kw(e,t,n).size},Qw=function(e){function t(t){var n;return(n=e.call(this,t)||this)._listMetaData={itemOffsetMap:{},itemSizeMap:{},totalMeasuredSize:0,atBottom:!0},n._itemStyleCache={},n._outerRef=void 0,n._scrollCorrectionInProgress=!1,n._scrollByCorrection=null,n._keepScrollPosition=!1,n._keepScrollToBottom=!1,n._mountingCorrections=0,n._correctedInstances=0,n.state={scrollDirection:"backward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1,scrollDelta:0,scrollHeight:0,localOlderPostsToRender:[]},n.scrollBy=function(e,t){return function(){var s=n._outerRef;"function"==typeof s.scrollBy&&t?s.scrollBy(0,t):e&&(s.scrollTop=e),n._scrollCorrectionInProgress=!1}},n._callOnItemsRendered=jw((function(e,t,s,i){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:s,visibleStopIndex:i})})),n._callOnScroll=jw((function(e,t,s,i,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:s,scrollHeight:i,clientHeight:r})})),n._commitHook=function(){if(!n.state.scrolledToInitIndex&&Object.keys(n._listMetaData.itemOffsetMap).length){var e=n.props.initScrollToIndex(),t=e.index,s=e.position,i=e.offset;n.scrollToItem(t,s,i),n.setState({scrolledToInitIndex:!0}),0===t?n._keepScrollToBottom=!0:n._keepScrollPosition=!0}},n._dataChange=function(){n._listMetaData.totalMeasuredSize<n.props.height&&n.props.canLoadMorePosts()},n._heightChange=function(e,t){t+e>=n._listMetaData.totalMeasuredSize-10&&n.scrollToItem(0,"end")},n._widthChange=function(e,t){t+e>=n._listMetaData.totalMeasuredSize-10&&n.scrollToItem(0,"end")},n._getItemStyle=function(e){var t,s=n.props.itemData,i=n._itemStyleCache;return i.hasOwnProperty(s[e])?t=i[s[e]]:i[s[e]]=t={left:0,top:Yw(n.props,e,n._listMetaData),height:$w(n.props,e,n._listMetaData),width:"100%"},t},n._correctScroll=function(){var e=n.state.scrollOffset,t=n._outerRef;t&&(t.scrollTop=e,n._scrollCorrectionInProgress=!1,n._correctedInstances=0,n._mountingCorrections=0)},n._generateOffsetMeasurements=function(){var e=n._listMetaData,t=e.itemOffsetMap,s=e.itemSizeMap,i=n.props.itemData;n._listMetaData.totalMeasuredSize=0;for(var r=i.length-1;r>=0;r--){var a=t[i[r+1]]||0,o=s[i[r+1]]||0;t[i[r]]=a+o,n._listMetaData.totalMeasuredSize+=s[i[r]]||0,delete n._itemStyleCache[i[r]]}},n._handleNewMeasurements=function(e,t,s){var i=n._listMetaData.itemSizeMap,r=n.props.itemData.findIndex((function(t){return t===e})),a=i[e]||0;if(a!==t)if(i[e]=t,n.state.scrolledToInitIndex){var o=n._outerRef;if((n.props.height+o.scrollTop>=n._listMetaData.totalMeasuredSize-10||n._keepScrollToBottom)&&n.props.correctScrollToBottom)return n._generateOffsetMeasurements(),n.scrollToItem(0,"end"),void n.forceUpdate();if(s||n._keepScrollPosition){var l=t-a,c=n._getRangeToRender(n.state.scrollOffset)[2];if(n._generateOffsetMeasurements(),r<c+1)return;return n._scrollCorrectionInProgress=!0,void n.setState((function(e){var t;return t=0===n._mountingCorrections?l:e.scrollDelta+l,n._mountingCorrections++,{scrollOffset:e.scrollOffset+l,scrollDelta:t}}),(function(){n._correctedInstances++,n._mountingCorrections===n._correctedInstances&&n._correctScroll()}))}n._generateOffsetMeasurements()}else n._generateOffsetMeasurements()},n._onItemRowUnmount=function(e,t){var s=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n).props;if(s.itemData[t]!==e&&!s.itemData.includes(e)){delete n._listMetaData.itemSizeMap[e],delete n._listMetaData.itemOffsetMap[e];var i=n._outerRef,r=i.offsetHeight+i.scrollTop>=n._listMetaData.totalMeasuredSize-10;n._generateOffsetMeasurements(),r&&n.scrollToItem(0,"end"),n.forceUpdate()}},n._renderItems=function(){var e=n.props,t=e.children,s=e.direction,i=e.itemData,r=e.loaderId,a=n.innerRefWidth,o=n._getRangeToRender(),l=o[0],c=o[1],u=i.length,h=[];if(u>0)for(var p=u-1;p>=0;p--){var f=Kw(n.props,p,n._listMetaData).size,m=n.state.localOlderPostsToRender,g=m[0],v=m[1],b=p>=g&&p<v+1&&g===c+1,y=i[p]===r,C=i[p],E=n._getItemStyle(p);if(p>=l&&p<c+1||b||y){var w=d.exports.createElement(t,{data:i,itemId:C});h.push(d.exports.createElement(Gw,{direction:s,handleNewMeasurements:n._handleNewMeasurements,index:p,item:w,key:C,size:f,itemId:C,width:a,onUnmount:n._onItemRowUnmount,itemCount:u}))}else h.push(d.exports.createElement("div",{key:C,style:E}))}return h},n._onScrollVertical=function(e){if(n.state.scrolledToInitIndex){var t=e.currentTarget,s=t.scrollTop,i=t.scrollHeight;n._scrollCorrectionInProgress?n.state.scrollUpdateWasRequested&&n.setState((function(){return{scrollUpdateWasRequested:!1}})):(i!==n.state.scrollHeight&&n.setState({scrollHeight:i}),n.setState((function(e){return e.scrollOffset===s?null:{scrollDirection:e.scrollOffset<s?"forward":"backward",scrollOffset:s,scrollUpdateWasRequested:!1,scrollHeight:i,scrollTop:s,scrollDelta:0}})))}},n._outerRefSetter=function(e){var t=n.props.outerRef;n.innerRefWidth=n.props.innerRef.current.clientWidth,n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n}D(t,e),t.getDerivedStateFromProps=function(e,t){return Jw(e),null};var n=t.prototype;return n.scrollTo=function(e,t,n){var s=this;void 0===n&&(n=!1),this._scrollCorrectionInProgress=!0,this.setState((function(n){return{scrollDirection:n.scrollOffset>=e?"backward":"forward",scrollOffset:e,scrollUpdateWasRequested:!0,scrollByValue:t}}),(function(){n?s._scrollByCorrection=window.requestAnimationFrame(s.scrollBy(s.state.scrollOffset,s.state.scrollByValue)):s.scrollBy(s.state.scrollOffset,s.state.scrollByValue)()})),this.forceUpdate()},n.scrollToItem=function(e,t,n){void 0===t&&(t="auto"),void 0===n&&(n=0);var s=this.state.scrollOffset,i=this._outerRef;if(0!==e||"end"!==t){var r=function(e,t,n,s,i){var r=e.height,a=Kw(e,t,i),o=i.totalMeasuredSize,l=Math.max(0,a.offset+a.size-r),c=Math.max(0,a.offset);switch(n){case"start":return c;case"end":return l;case"center":return Math.round(c-r/2+a.size/2);case"auto":default:return s>=c&&s<=l?o-(s+r):s-c<l-s?c:l}}(this.props,e,t,s,this._listMetaData);if(!r)!$w(this.props,e,this._listMetaData)&&this.props.scrollToFailed&&(this.state.scrolledToInitIndex?this.props.scrollToFailed(e):console.warn("Failed to do initial scroll correction",this.props.initRangeToRender,e));this.scrollTo(r+n)}else this.scrollTo(i.scrollHeight-this.props.height)},n.componentDidMount=function(){var e=this.props.initialScrollOffset;"number"==typeof e&&null!==this._outerRef&&(this._outerRef.scrollTop=e);this._commitHook()},n.getSnapshotBeforeUpdate=function(e,t){if(t.localOlderPostsToRender[0]!==this.state.localOlderPostsToRender[0]||t.localOlderPostsToRender[1]!==this.state.localOlderPostsToRender[1]){var n=this._outerRef;return{previousScrollTop:n.scrollTop,previousScrollHeight:n.scrollHeight}}return null},n.componentDidUpdate=function(e,t,n){if(this.state.scrolledToInitIndex){var s=this.state,i=s.scrollDirection,r=s.scrollOffset,a=s.scrollUpdateWasRequested,o=s.scrollHeight,l=t.scrollDirection,c=t.scrollOffset,u=t.scrollUpdateWasRequested,d=t.scrollHeight;i===l&&r===c&&a===u&&o===d||this._callPropsCallbacks(),t.scrolledToInitIndex||(this._keepScrollPosition=!1,this._keepScrollToBottom=!1)}if(this._commitHook(),e.itemData!==this.props.itemData&&this._dataChange(),e.height!==this.props.height&&this._heightChange(e.height,t.scrollOffset),t.scrolledToInitIndex!==this.state.scrolledToInitIndex&&this._dataChange(),e.width!==this.props.width&&(this.innerRefWidth=this.props.innerRef.current.clientWidth,this._widthChange(e.height,t.scrollOffset)),t.localOlderPostsToRender[0]!==this.state.localOlderPostsToRender[0]||t.localOlderPostsToRender[1]!==this.state.localOlderPostsToRender[1]){var h=this._outerRef.scrollHeight,p=n.previousScrollTop+(h-n.previousScrollHeight);this.scrollTo(p,p-n.previousScrollTop,!0)}},n.componentWillUnmount=function(){this._scrollByCorrection&&window.cancelAnimationFrame(this._scrollByCorrection)},n.render=function(){var e=this.props,t=e.className,n=e.innerRef,s=e.innerTagName,i=e.outerTagName,r=e.style,a=e.innerListStyle,o=this._onScrollVertical,l=this._renderItems();return d.exports.createElement(i,{className:t,onScroll:o,ref:this._outerRefSetter,style:F({WebkitOverflowScrolling:"touch",overflowY:"auto",overflowAnchor:"none",willChange:"transform",width:"100%"},r)},d.exports.createElement(s,{children:l,ref:n,style:a}))},n._callPropsCallbacks=function(){var e=this.props,t=e.itemData,n=e.height,s=this.state,i=s.scrollDirection,r=s.scrollOffset,a=s.scrollUpdateWasRequested,o=s.scrollHeight,l=t.length;if("function"==typeof this.props.onItemsRendered&&l>0){var c=this._getRangeToRender(),u=c[0],d=c[1],h=c[2],p=c[3];if(this._callOnItemsRendered(u,d,h,p),"backward"===i&&r<1e3&&d!==l-1)!$w(this.props,d+1,this._listMetaData).size&&this.state.scrolledToInitIndex&&this.setState((function(e){return e.localOlderPostsToRender[0]!==d+1?{localOlderPostsToRender:[d+1,d+50]}:null}))}"function"==typeof this.props.onScroll&&this._callOnScroll(i,r,a,o,n)},n._getRangeToRender=function(e,t){var n=this.props,s=n.itemData,i=n.overscanCountForward,r=n.overscanCountBackward,a=this.state,o=a.scrollDirection,l=a.scrollOffset,c=s.length;if(0===c)return[0,0,0,0];for(var u=e>=0?e:l,d=Xw(this.props,u,this._listMetaData),h=function(e,t,n,s){for(var i=e.itemData,r=t,a=n+e.height,o=Kw(e,r,s),l=o.offset+(o.size||0);r>0&&l<=a;){var c=Kw(e,r,s);l=c.offset+c.size,r--}return r>=i.length?0:r}(this.props,d,u,this._listMetaData),p="backward"===o?r:Math.max(1,i),f="forward"===o?r:Math.max(1,i),m=Math.max(0,h-p),g=Math.max(0,Math.min(c-1,d+f));!$w(this.props,g,this._listMetaData)&&g>0&&this._listMetaData.totalMeasuredSize>this.props.height;)g--;return!this.state.scrolledToInitIndex&&this.props.initRangeToRender.length?this.props.initRangeToRender:[m,g,d,h]},t}(d.exports.PureComponent);Qw.defaultProps={innerTagName:"div",itemData:void 0,outerTagName:"div",overscanCountForward:30,overscanCountBackward:10};var Jw=function(e){e.children,e.itemSize};var Zw="mqik-0320c9fa",eS="mqik-f63140b7",tS="mqik-11cd2054";const nS=[Ja,Za];class sS extends f.PureComponent{render(){const{isMobile:e,createAt:t,isScrolling:n,isRhsPost:s,toastPresent:i}=this.props;if(!e||0===t)return null;const r=g("post-list__timestamp",Zw,{[eS]:n,rhs:s,toastAdjustment:i});return h("div",{className:r,"data-testid":"floatingTimestamp",children:h("span",{className:tS,children:h(Qa,{value:t,useTime:!1,ranges:nS})})})}}var iS=p((function(e,t){let n=t.postId;if(Ns(n)){const e=Ms(n);n=e[e.length-1]}const s=ss(e,n),i=ba(e);return{createAt:s?s.create_at:0,toastPresent:i}}))(sS);var rS="mqik-c5fc2b9f",aS="mqik-2d0ee789";class oS extends f.PureComponent{constructor(){super(...arguments),u(this,"getProfilePictureURL",(()=>{const{post:e,user:t}=this.props;return t&&t.id===e.user_id?_t(t.id,t.last_picture_update):e.user_id?_t(e.user_id):""})),u(this,"getStatus",((e,t,n)=>e||t||n&&n.is_bot?"":this.props.status)),u(this,"getPostIconURL",((e,t,n)=>{const{enablePostIconOverride:s,hasImageProxy:i,post:r}=this.props,a=r.props;let o="",l="";return a&&(o=a.override_icon_url,l=a.use_user_icon),this.props.compactDisplay?"":!t&&n&&!l&&s?o&&""!==o?Is(o,i):ve.DEFAULT_WEBHOOK_LOGO:e}))}render(){const{compactDisplay:e,isBusy:t,isRHS:n,post:s,user:i,isBot:r}=this.props,a=Os(s),o=Rs(s);if(a&&!e&&!o&&!r)return h(ya,{className:"u3-w-6 u3-h-6"});const l=Ls(s),c=!l&&!o,u=this.getProfilePictureURL(),d=this.getPostIconURL(u,l,o),p=s.props?s.props.override_icon_emoji:"",f=s.props?s.props.override_username:"",m="string"==typeof p&&""!==p,g=this.getStatus(l,o,i);return h(so,{hasMention:c,isBusy:t,isRHS:n,size:"md",src:d,profileSrc:u,isEmoji:m,status:g,userId:null==i?void 0:i.id,channelId:s.channel_id,username:null==i?void 0:i.username,overwriteIcon:this.props.overwriteIcon,overwriteName:f,wrapperClass:rS,statusClass:aS})}}u(oS,"defaultProps",{status:us.OFFLINE});var lS=p((function(e,t){const n=ue(e),s=Me(e,t.userId),i="true"===n.EnablePostIconOverride&&t.post&&t.post.props&&t.post.props.override_icon_url;let r;return i&&(r=Pe.getAbsoluteUrl(i)),{enablePostIconOverride:"true"===n.EnablePostIconOverride,overwriteIcon:r,hasImageProxy:"true"===n.HasImageProxy,status:cs(e,t.userId),isBot:Boolean(s&&s.is_bot),user:s}}))(oS);const cS=f.createContext({handlePopupOpened:null});var uS=za.jsx;var dS=d.exports.forwardRef((function(e,t){return uS("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:uS("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}))}));const hS=[Ja,Za];class pS extends f.PureComponent{constructor(){super(...arguments),u(this,"handleClick",(()=>{Kn()&&Ca()}))}render(){const{eventTime:e,isPermalink:t,location:n,postId:s,teamUrl:i,styles:r,timestampProps:a={}}=this.props,l=h(Qa,o({value:e,className:"post__time",useDate:!1},a)),c=ee()||!t?m("div",{role:"presentation",className:g("post_permalink_mobile_view",r.permarlink),children:[h(dS,{className:r.timeIcon}),l]}):m(j,{id:`${n}_time_${s}`,to:`${i}/pl/${s}`,className:g("post__permalink",r.permarlink),onClick:this.handleClick,children:[h(dS,{className:r.timeIcon}),l]});return h(Jp,{placement:"top",content:h(Qa,{value:e,ranges:hS}),children:c})}}u(pS,"defaultProps",{eventTime:0,location:Qn.CENTER});var fS=p((function(e){return{teamUrl:Et(e)}}))(pS),mS=za.jsx;var gS=d.exports.forwardRef((function(e,t){return mS("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:mS("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}))})),vS=za.jsx;var bS,yS,CS,ES,wS=d.exports.forwardRef((function(e,t){return vS("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:vS("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}))}));(yS=bS||(bS={}))[yS.Flagged=0]="Flagged",yS[yS.Pinned=1]="Pinned",yS[yS.PinnedAndFlagged=2]="PinnedAndFlagged",yS[yS.Neither=3]="Neither",(ES=CS||(CS={})).Flagged="flagged",ES.Pinned="pinned",ES.PinnedAndFlagged="pinnedAndFlagged";class SS extends f.PureComponent{constructor(){super(...arguments),u(this,"messageInfos",{flagged:{id:te("post_pre_header.flagged"),defaultMessage:"Saved"},pinned:{id:te("post_pre_header.pinned"),defaultMessage:"Pinned"}}),u(this,"handleLinkClick",((e,t)=>{}))}getPostStatus(e,t){return e?t?2:0:t?1:3}getMessageInfo(e,t,n){if(t&&n)return!1;if(2===e){if(!n&&!t)return CS.PinnedAndFlagged;if(n)return CS.Flagged;if(t)return CS.Pinned}return 0!==e||t?1===e&&!n&&CS.Pinned:CS.Flagged}render(){const{isFlagged:e,isPinned:t,skipPinned:n,skipFlagged:s,channelId:i,styles:r}=this.props,a=this.getMessageInfo(this.getPostStatus(e,t),s,n);if(!e&&!t||!a)return null;const o=[];return t&&!n&&o.push(m("div",{className:r.postMoreX,children:[h(wS,{className:r.xIcon}),h("a",{className:g(r.postMoreLink),onClick:()=>this.handleLinkClick(CS.Pinned,i),children:h(v,{id:this.messageInfos[CS.Pinned].id,defaultMessage:this.messageInfos[CS.Pinned].defaultMessage})})]},"post-more-pin")),e&&!s&&o.push(m("div",{className:r.postMoreX,children:[h(gS,{className:r.xIcon}),h("a",{className:g(r.postMoreLink),onClick:()=>this.handleLinkClick(CS.Flagged),children:h(v,{id:this.messageInfos[CS.Flagged].id,defaultMessage:this.messageInfos[CS.Flagged].defaultMessage})})]},"post-more-flag")),o.length?o:null}}var _S=S(SS);var AS=p(null,(e=>({actions:E({showFlaggedPosts:pn,showPinnedPosts:fn},e)})))(_S),kS=za.jsx;var PS=d.exports.forwardRef((function(e,t){return kS("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:kS("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}))}));class xS extends f.PureComponent{render(){const{styles:e}=this.props;let t=null,n="post-menu__item post-menu__item--wide";return this.props.commentCount>0?(n+=" post-menu__item--show",t=h("span",{className:"post-menu__comment-count",children:this.props.commentCount})):""!==this.props.searchStyle&&(n=n+" "+this.props.searchStyle),m("button",{id:`${this.props.location}_commentIcon_${this.props.postId}`,"aria-label":be("post_info.comment_icon.tooltip.reply","Reply").toLowerCase(),className:g(e.postComment,n,this.props.extraClass),onClick:this.props.handleCommentClick,children:[h(PS,{className:e.commentIcon}),t]})}}function TS(e){return e.entities.files.files}function NS(e,t){return t&&e.entities.files.fileIdsByPostId[t]||[]}function MS(){return C(TS,NS,Ds,((e,t,n)=>{const s=t.map((t=>e[t])).filter((e=>Boolean(e)));return Ho(s,n)}))}u(xS,"defaultProps",{location:"CENTER",searchStyle:"",commentCount:0,extraClass:""}),C((function(e){return e.entities.files.filesFromSearch}),(e=>e.entities.search.fileResults),((e,t)=>t?t.map((t=>e[t])):[]));class IS extends f.PureComponent{render(){if(!this.props.fileInfos||0===this.props.fileInfos.length)return null;let e=null;return this.props.fileInfos.length>1&&(e=h(v,{id:"post_body.plusMore",defaultMessage:" plus {count, number} other {count, plural, one {file} other {files}}",values:{count:this.props.fileInfos.length-1}})),m("span",{children:[this.props.fileInfos[0].name,e]})}}u(IS,"propTypes",{parentPostId:y.string.isRequired,fileInfos:y.arrayOf(y.object)});var OS=p((function(){const e=MS();return function(t,n){let s;return n.parentPostId&&(s=e(t,n.parentPostId)),{fileInfos:s}}}))(IS);var RS="mqik-f3ee3da6",LS="mqik-65a47af7",DS="mqik-cac28813",FS="mqik-275e9bfd",jS="mqik-1b1907d0";class HS extends d.exports.PureComponent{constructor(){super(...arguments),u(this,"makeUsername",(()=>{const e=this.props.post.props;let t=this.props.displayName;return this.props.enablePostUsernameOverride&&e&&"true"===e.from_webhook&&e.override_username&&(t=e.override_username),t})),u(this,"makeCommentedOnMessage",(()=>{const{post:e}=this.props;let t="";if(e.message)t=Fs(e.message);else if(e.file_ids&&e.file_ids.length>0)t=h(OS,{parentPostId:e.id});else if(e.props&&e.props.attachments&&e.props.attachments.length>0){const n=e.props.attachments[0],s=n.pretext||n.title||n.text||n.fallback||"";t=Fs(s)}return t}))}render(){const e=this.makeUsername(),t=this.makeCommentedOnMessage(),n=this.props.parentPostUser,s=n&&n.id||"",i=h(eo,{user:n,userId:s,displayName:e,hasMention:!0,disablePopover:!1});return m("div",{className:g(RS,"post__link"),children:[h("div",{className:g(LS)}),m("div",{className:g(DS),children:[h("div",{className:g(FS),dir:"auto",children:i}),h("div",{className:g(jS),children:"string"==typeof t?js(t):t})]})]})}}var US=p((function(e,t){let n="";if(t.post){const s=Me(e,t.post.user_id);n=Hs(e,s)}return{displayName:n,enablePostUsernameOverride:"true"===ue(e).EnablePostUsernameOverride}}))(HS),qS=za.jsx;var BS=d.exports.forwardRef((function(e,t){return qS("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:qS("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}))}));class VS extends f.PureComponent{render(){var e;const{fileInfo:t}=this.props,n=Tn(t.extension);let s;if(n===Nn.IMAGE){let n="post-image";t.width<ve.THUMBNAIL_WIDTH&&t.height<ve.THUMBNAIL_HEIGHT?n+=" small":n+=" normal";let s=Fo(t.id,null==(e=t.preview_path)?void 0:e.replace("_preview.jpg","_thumb.jpg"));return Mn(t.extension)&&!t.has_preview_image&&(s=Do(t.id)),h("div",{className:n,style:{backgroundImage:`url(${s})`,backgroundSize:"cover"}})}return s=t.extension===Nn.SVG&&this.props.enableSVGs?h("img",{alt:"file thumbnail image",className:"post-image normal",src:Do(t.id),loading:"lazy"}):h("div",{className:"file-icon "+xn(n)}),s}}var zS=p((function(e){return{enableSVGs:"true"===ue(e).EnableSVGs}}))(VS);class WS extends f.PureComponent{constructor(e){super(e),u(this,"mounted",!1),u(this,"loadFiles",(()=>{const e=this.props.fileInfo;Tn(e.extension)===Nn.IMAGE?this.setState({loaded:!0}):e.extension===Nn.SVG&&this.props.enableSVGs&&Us(Do(e.id),this.handleImageLoaded)})),u(this,"handleImageLoaded",(()=>{this.mounted&&this.setState({loaded:!0})})),u(this,"onAttachmentClick",(e=>{e.preventDefault(),"blur"in e.target&&e.target.blur(),this.props.handleImageClick&&this.props.handleImageClick(this.props.index)})),this.state={loaded:Tn(e.fileInfo.extension)!==Nn.IMAGE,fileInfo:e.fileInfo}}componentDidMount(){this.mounted=!0,this.loadFiles()}static getDerivedStateFromProps(e,t){if(e.fileInfo.id!==t.fileInfo.id){const t=e.fileInfo.extension;return{loaded:Tn(t)!==Nn.IMAGE&&!(e.enableSVGs&&t===Nn.SVG),fileInfo:e.fileInfo}}return null}componentDidUpdate(e){this.state.loaded||this.props.fileInfo.id===e.fileInfo.id||this.loadFiles()}componentWillUnmount(){this.mounted=!1}render(){const{compactDisplay:e,fileInfo:t}=this.props,n=Oo(t.name);let s,i;const r=`${be("file_attachment.thumbnail","file thumbnail")} ${t.name}`.toLowerCase();let a;return e||(s=h("a",{"aria-label":r,className:"post-image__thumbnail",href:"#",onClick:this.onAttachmentClick,children:this.state.loaded?h(zS,{fileInfo:t}):h("div",{className:"post-image__load"})}),i=h("div",{className:"post-image__detail_wrapper",onClick:this.onAttachmentClick,children:m("div",{className:"post-image__detail",children:[h("span",{className:"post-image__name",children:n}),h("span",{className:"post-image__type",children:t.extension.toUpperCase()}),h("span",{className:"post-image__size",children:In(t.size)})]})})),this.props.canDownloadFiles&&(a=h(jb,{fileInfo:t,compactDisplay:e,canDownload:this.props.canDownloadFiles,handleImageClick:this.onAttachmentClick,iconClass:"post-image__download",children:h(BS,{className:"u3-w-5 u3-h-5"})})),m("div",{className:"post-image__column",children:[s,h("div",{className:"post-image__details",children:i}),a]})}}var GS=p((function(e){const t=ue(e);return{canDownloadFiles:Uo(t),enableSVGs:"true"===t.EnableSVGs}}))(WS);var KS={fileViewSingle:"mqik-b97d3817",imageLoaded:"mqik-85cb961c",filePreviewButton:"mqik-e068c589",compactDisplay:"mqik-66f0f9fa",minPreview:"mqik-8e67e726",minPreviewPortrait:"mqik-f3595944",smallImageInsideContainer:"mqik-ad6eb812"};class YS extends f.PureComponent{constructor(e){var t,n;super(e),u(this,"mounted"),u(this,"imageLoaded",(()=>{this.mounted&&this.setState({loaded:!0})})),u(this,"handleImageClick",(e=>{e.preventDefault(),this.setState({showPreviewModal:!0})})),u(this,"showPreviewModal",(()=>{this.setState({showPreviewModal:!1})})),u(this,"toggleEmbedVisibility",(()=>{this.props.actions.toggleEmbedVisibility(this.props.postId)})),this.mounted=!0,this.state={loaded:!1,showPreviewModal:!1,dimensions:{width:(null==(t=e.fileInfo)?void 0:t.width)||0,height:(null==(n=e.fileInfo)?void 0:n.height)||0}}}componentDidMount(){this.mounted=!0}static getDerivedStateFromProps(e,t){var n,s,i;return(null==(n=e.fileInfo)?void 0:n.width)!==t.dimensions.width||e.fileInfo.height!==t.dimensions.height?{dimensions:{width:null==(s=e.fileInfo)?void 0:s.width,height:null==(i=e.fileInfo)?void 0:i.height}}:null}componentWillUnmount(){this.mounted=!1}render(){const{fileInfo:e,compactDisplay:t}=this.props,{loaded:n}=this.state;if(void 0===e)return h(d.exports.Fragment,{});const{has_preview_image:s,id:i}=e,r=Do(i),a=s?qo(i):r,o=e.height,l=e.width,c={};let u;(l<50||o<50)&&(c[KS.minPreview]=!0,o>l&&(c[KS.minPreviewPortrait]=!0)),t&&(c[KS.minPreviewCompact]=!0);let p="";let f={},v={},b="";return Tn(e.extension)===Nn.SVG&&(b="svg",this.state.dimensions.height?f={width:"100%"}:v={height:350,maxWidth:"100%"}),n&&(u=h(Bo,{show:this.state.showPreviewModal,onModalDismissed:this.showPreviewModal,fileInfos:[e],postId:this.props.postId}),p="image-fade-in"),h("div",{className:g(KS.fileViewSingle),children:m("div",{className:"file__image",children:[this.props.isEmbedVisible&&h("div",{className:"image-container",style:v,children:h("div",{className:g(KS.imageLoaded,`image-loaded ${p} ${b}`),style:f,children:h(Vo,{onClick:this.handleImageClick,className:g(c),src:a,dimensions:this.state.dimensions,fileInfo:this.props.fileInfo,onImageLoaded:this.imageLoaded,showLoader:this.props.isEmbedVisible,handleSmallImageContainer:!0})})}),u]})})}}u(YS,"defaultProps",{compactDisplay:!1});var XS=p((function(e){return{isRhsOpen:on(e)}}),(function(e){return{actions:E({toggleEmbedVisibility:qs},e)}}))(YS);class $S extends f.PureComponent{constructor(e){super(e),u(this,"handleImageClick",(e=>{this.setState({showPreviewModal:!0,startImgIndex:e})})),u(this,"hidePreviewModal",(()=>{this.setState({showPreviewModal:!1})})),this.state={showPreviewModal:!1,startImgIndex:0}}render(){const{compactDisplay:e,enableSVGs:t,fileInfos:n,fileCount:s,locale:i}=this.props;if(n&&1===n.length){const s=Tn(n[0].extension);if(s===Nn.IMAGE||s===Nn.SVG&&t)return h(XS,{fileInfo:n[0],isEmbedVisible:this.props.isEmbedVisible,postId:this.props.post.id,compactDisplay:e})}else if(1===s&&this.props.isEmbedVisible)return h("div",{style:QS.minHeightPlaceholder});const r=Ho(n,i),a=[];if(r&&r.length>0)for(let o=0;o<r.length;o++){const t=r[o];a.push(h(GS,{fileInfo:r[o],index:o,handleImageClick:this.handleImageClick,compactDisplay:e},t.id))}else if(s>0)for(let o=0;o<s;o++)a.push(h("div",{className:"post-image__column post-image__column--placeholder"},`fileCount-${o}`));return m(k,{children:[h("div",{"data-testid":"fileAttachmentList",className:g("post-image__columns clearfix u3-grid-cols-1"),children:a}),h(Bo,{show:this.state.showPreviewModal,onModalDismissed:this.hidePreviewModal,startIndex:this.state.startImgIndex,fileInfos:r,postId:this.props.post.id})]})}}const QS={minHeightPlaceholder:{minHeight:"385px"}};var JS=p((function(){const e=MS();return function(t,n){const s=n.post?n.post.id:"",i=e(t,s);let r=0;return n.post.metadata&&n.post.metadata.files?r=(n.post.metadata.files||[]).length:n.post.file_ids?r=n.post.file_ids.length:n.post.filenames&&(r=n.post.filenames.length),{enableSVGs:"true"===ue(t).EnableSVGs,fileInfos:i,fileCount:r,isEmbedVisible:Bs(t,n.post.id),locale:Bn(t)}}}))($S);var ZS={pendingPost:"mqik-877e803b",postRetry:"mqik-763a86bd"};class e_ extends f.PureComponent{constructor(){super(...arguments),u(this,"retryPost",(e=>{e.preventDefault();const t=o({},this.props.post);Reflect.deleteProperty(t,"id"),this.props.actions.createPost(t)})),u(this,"cancelPost",(e=>{e.preventDefault(),this.props.actions.removePost(this.props.post)}))}render(){return m("span",{className:g(ZS.pendingPost,"pending-post-actions"),children:[h("a",{className:g(ZS.postRetry,"post-retry"),href:"#",onClick:this.retryPost,children:h(v,{id:"pending_post_actions.retry",defaultMessage:"Retry"})})," • ",h("a",{className:g(ZS.postCancel,"post-cancel"),href:"#",onClick:this.cancelPost,children:h(v,{id:"pending_post_actions.cancel",defaultMessage:"Cancel"})})]})}}var t_=p(null,(function(e){return{actions:E({createPost:Ts,removePost:Vs},e)}}))(e_);function n_(e){return void 0!==e.height&&void 0!==e.width}function s_(e,t){return Math.sqrt(Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2))}var i_={attachmentOpengraph:"mqik-6cc8f915",attachmentContainer:"mqik-e7a58115",bodyWrap:"mqik-1169cf76",bodySitename:"mqik-e1371c16",attachmentTitle:"mqik-83fe2fc2",titleUrl:"mqik-18bfc7fe",attachmentBody:"mqik-7017ff1b"};const r_={height:80,width:80};class a_ extends f.PureComponent{constructor(){super(...arguments),u(this,"getImageMetadata",(e=>{if(!e)return;const t=this.props.post.metadata.images;return t?t[e]:void 0})),u(this,"isLargeImage",(e=>{if(!e)return!1;const{height:t,width:n}=e;return n>=150&&n/t>=16/9})),u(this,"handleRemovePreview",(async()=>{const e=Object.assign({},this.props.post.props);e[zs.REMOVE_LINK_PREVIEW]="true";const t={id:this.props.post.id,props:e};return this.props.actions.editPost(t)}))}renderImageToggle(){return h("button",{className:"style--none post__embed-visibility color--link","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.props.toggleEmbedVisibility})}renderLargeImage(e,t){if(this.props.isEmbedVisible)return h(zo,{src:e,imageMetadata:t,children:e=>h(Vo,{className:"attachment__image attachment__image--opengraph large_image",src:e,dimensions:t})})}renderSmallImage(e,t){if(this.props.isEmbedVisible)return h("div",{className:"attachment__image__container--opengraph",children:h(zo,{src:e,imageMetadata:t,children:e=>h(Vo,{className:"attachment__image attachment__image--opengraph",src:e,dimensions:t})})})}truncateText(e){return e&&e.length>128?e.substring(0,128-"...".length)+"...":e}hasPreviewBeenRemoved(){const{post:e}=this.props;return!(!e||!e.props)&&"true"===e.props[zs.REMOVE_LINK_PREVIEW]}render(){if(!this.props.previewEnabled||!this.props.enableLinkPreviews)return null;if(!this.props.post||Os(this.props.post))return null;if(this.hasPreviewBeenRemoved())return null;const e=this.props.openGraphData;if(!e)return null;const t=function(e,t){var n;if(!(null==(n=null==e?void 0:e.images)?void 0:n.length))return;const s=e.images.map((e=>{const n=e.secure_url||e.url;return e.width&&e.height||!t||!t[n]?e:l(o({},e),{height:e.height||t[n].height,width:e.width||t[n].width})})),i=(r=r_,a=s,a.reduce(((e,t)=>n_(e)&&n_(t)&&s_(t,r)>=s_(e,r)?e:t),{}));var r,a;return i.secure_url||i.url}(e,this.props.post.metadata.images),n=this.getImageMetadata(t),s=this.isLargeImage(n);let i,r;return this.props.currentUserId===this.props.post.user_id&&(i=h("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:this.handleRemovePreview,"data-testid":"removeLinkPreviewButton",children:h("span",{"aria-hidden":"true",children:"×"})})),(e.description||t)&&(r=m("div",{className:i_.attachmentBody,children:[m("div",{children:[this.truncateText(e.description)," ",t&&s&&this.renderImageToggle()]}),t&&s&&this.renderLargeImage(t,n)]})),h("div",{className:i_.attachmentOpengraph,children:m("div",{className:g(i_.attachmentContainer,i_.clearfix),children:[m("div",{className:g(i_.bodyWrap,"attachment__body__wrap attachment__body__wrap--opengraph"),children:[h("span",{className:i_.bodySitename,children:this.truncateText(e.site_name)}),i,h("h1",{className:g(i_.attachmentTitle,{[i_.titleUrl]:!!e.title}),children:h("a",{className:i_.attachmentTitleLink,href:Ws(e.url||this.props.link),target:"_blank",rel:"noopener noreferrer",title:e.title||e.url||this.props.link,children:this.truncateText(e.title||e.url||this.props.link)})}),r]}),t&&!s&&this.renderSmallImage(t,n)]})})}}var o_=p((function(e,t){const n=ue(e);return{currentUserId:le(e),enableLinkPreviews:"true"===n.EnableLinkPreviews,openGraphData:Gs(e,t.postId,t.link),previewEnabled:ye(e,ls.CATEGORY_DISPLAY_SETTINGS,ls.LINK_PREVIEW_DISPLAY,!0)}}),(function(e){return{actions:E({editPost:ac},e)}}))(a_);const l_=/(?:http|https):\/\/(?:www\.|m\.)?(?:(?:youtube\.com\/(?:(?:v\/)|(?:(?:watch|embed\/watch)(?:\/|.*v=))|(?:embed\/)|(?:user\/[^/]+\/u\/[0-9]\/)))|(?:youtu\.be\/))([^#&?]*)/;var c_="mqik-94991666",u_="mqik-178c5de4",d_="mqik-0a594c35",h_="mqik-f8cd4376",p_="mqik-a456e5e8",f_="mqik-a9524bbe";class m_ extends f.PureComponent{constructor(e,t){super(e,t),u(this,"play",(()=>{this.setState({playing:!0})})),u(this,"stop",(()=>{this.setState({playing:!1})})),this.state={playing:!1}}static getDerivedStateFromProps(e,t){return!e.show&&t.playing?{playing:!1}:null}render(){const{metadata:e,link:t}=this.props,n=function(e){const t=e.trim().match(l_);return t&&11===t[1].length?t[1]:null}(t),s=function(e){var t,n,s,i,r,a;const o=e.match(/[\\?&](t|time|start|time_continue)=([0-9]+h)?([0-9]+m)?([0-9]+s?)/);if(!(null==o?void 0:o[0]))return"";const l=null!=(n=null==(t=o[2])?void 0:t.match(/([0-9]+)h/))?n:null,c=null!=(i=null==(s=o[3])?void 0:s.match(/([0-9]+)m/))?i:null,u=null!=(a=null==(r=o[4])?void 0:r.match(/([0-9]+)s?/))?a:null;let d=0;return(null==l?void 0:l[1])&&(d+=3600*parseInt(l[1],10)),(null==c?void 0:c[1])&&(d+=60*parseInt(c[1],10)),(null==u?void 0:u[1])&&(d+=parseInt(u[1],10)),`&start=${d}`}(t),i=m("h4",{children:[h("span",{className:u_,children:"YouTube - "}),h("span",{className:d_,children:h("a",{href:this.props.link,target:"_blank",rel:"noopener noreferrer",children:(null==e?void 0:e.title)||"unknown"})})]});let r;if(this.state.playing)r=h("iframe",{src:"https://www.youtube.com/embed/"+n+"?autoplay=1&autohide=1&border=0&wmode=opaque&fs=1&enablejsapi=1"+s,width:"480px",height:"360px",frameBorder:"0",allowFullScreen:!0});else{const t=null==e?void 0:e.images[0];r=h("div",{className:"embed-responsive video-div__placeholder",children:m("div",{className:g("u3-aspect-w-16 u3-aspect-h-9"),children:[h(zo,{src:(null==t?void 0:t.secure_url)||(null==t?void 0:t.url)||"",children:e=>h("img",{src:e,alt:"youtube video thumbnail",className:"video-thumbnail",loading:"lazy"})}),h("div",{className:p_,children:h("span",{className:f_,children:h("span",{})})})]})})}return m("div",{className:c_,children:[i,h("div",{className:g(h_,"u3-aspect-w-16 u3-aspect-h-9"),onClick:this.play,children:r})]})}static isYoutubeLink(e){return Boolean(e.trim().match(l_))}}var g_=p((function(e,t){const n=ue(e);return{currentChannelId:B(e),googleDeveloperKey:n.GoogleDeveloperKey,hasImageProxy:"true"===n.HasImageProxy,metadata:Gs(e,t.postId,t.link)}}))(m_);class v_ extends f.PureComponent{constructor(){super(...arguments),u(this,"toggleEmbedVisibility",(()=>{this.props.actions.toggleEmbedVisibility(this.props.post.id)})),u(this,"getEmbed",(()=>{const{metadata:e}=this.props.post;return Ks(e)})),u(this,"isEmbedToggleable",(e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const n of t)if(n.match(e))return Boolean(n.toggleable);return"image"===e.type||"opengraph"===e.type&&g_.isYoutubeLink(e.url)})),u(this,"renderEmbed",(e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const n of t)if(n.match(e)){const t=n.component;return this.props.isEmbedVisible&&h(t,{embed:e})}switch(e.type){case"opengraph":return g_.isYoutubeLink(e.url)?this.props.isEmbedVisible?h(g_,{postId:this.props.post.id,link:e.url,show:this.props.isEmbedVisible}):null:h(o_,{postId:this.props.post.id,link:e.url,isEmbedVisible:this.props.isEmbedVisible,post:this.props.post,toggleEmbedVisibility:this.toggleEmbedVisibility});default:return null}})),u(this,"renderToggle",(e=>h("button",{className:"u3-hidden style--none post__embed-visibility color--link "+(e?"pull-left":""),"data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.toggleEmbedVisibility},"toggle")))}render(){const e=this.getEmbed();if(e){const t=this.isEmbedToggleable(e),n=/^\s*https?:\/\/.*$/.test(this.props.post.message);return m(d.exports.Fragment,{children:[t&&n&&this.renderToggle(!0),this.props.children,t&&!n&&this.renderToggle(!1),this.renderEmbed(e)]})}return this.props.children}}var b_=p((function(e,t){return{isEmbedVisible:Bs(e,t.post.id),pluginPostWillRenderEmbedComponents:e.plugins.components.PostWillRenderEmbedComponent,appsEnabled:Ea(e)}}),(function(e){return{actions:E({toggleEmbedVisibility:qs},e)}}))(v_);var y_={postMessageCollapsed:"mqik-f9c1bc6c",postMessageTextContainer:"mqik-73aa12ca",allEmoji:"mqik-891139f6",emoticon:"mqik-c6409bd1",emoticonUnicode:"mqik-14df24fa",osWindows:"mqik-963640c5",emoticonBig:"mqik-55563ce3",postCollapseGradient:"mqik-4ee04c9f",postAttachmentCollapseGradient:"mqik-ba3d91ab",postCollapseShowMore:"mqik-7a691046",postCollapse:"mqik-342fb210",postCollapseShowmore:"mqik-14c45232",showMoreButton:"mqik-a3d41e1d",postMoreIcon:"mqik-3f591d27",postMessageExpanded:"mqik-a41ece2d",postMessageOverflow:"mqik-d1da61d1"};class C_ extends f.PureComponent{constructor(e){super(e),u(this,"maxHeight"),u(this,"textContainer"),u(this,"overflowRef"),u(this,"checkTextOverflowDebounce"),u(this,"toggleCollapse",(e=>{e.preventDefault(),this.setState((e=>({isCollapsed:!e.isCollapsed})))})),u(this,"checkTextOverflow",(()=>{this.overflowRef&&window.cancelAnimationFrame(this.overflowRef),this.overflowRef=window.requestAnimationFrame((()=>{let e=!1;this.textContainer.current&&this.textContainer.current.scrollHeight>this.maxHeight&&(e=!0),e!==this.state.isOverflow&&this.setState({isOverflow:e})}))})),u(this,"handleResize",(()=>{this.checkTextOverflowDebounce()})),this.maxHeight=this.props.isAttachmentText?200:100,this.textContainer=f.createRef(),this.state={isCollapsed:!0,isOverflow:!1},this.checkTextOverflowDebounce=da((()=>{this.checkTextOverflow()}),e.isRHSOpen?1e3:200)}componentDidMount(){if(this.checkTextOverflowDebounce(),window.addEventListener("resize",this.handleResize),this.textContainer.current){const e=getComputedStyle(this.textContainer.current);this.maxHeight=this.props.isAttachmentText?200:5*parseFloat(e.lineHeight.replace("px",""))}}componentDidUpdate(e){this.props.text===e.text&&this.props.isRHSExpanded===e.isRHSExpanded&&this.props.isRHSOpen===e.isRHSOpen&&this.props.checkOverflow===e.checkOverflow||this.checkTextOverflowDebounce()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.overflowRef&&window.cancelAnimationFrame(this.overflowRef)}render(){const{isCollapsed:e,isOverflow:t}=this.state,{text:n,children:s,isAttachmentText:i,compactDisplay:r,isMe:a}=this.props;let o,l={"post-message":!0};e?(o=this.maxHeight,l[y_.postMessageCollapsed]=!0):l[y_.postMessageExpanded]=!0,""===n&&(l["u3-hidden"]=!0);let c=null;if(t){!i&&e&&r&&o&&(o-=22);let t=h(Xc,{className:y_.postMoreIcon}),n=be("post_info.message.show_less","Show less");e&&(t=h(Wo,{className:y_.postMoreIcon}),n=be("post_info.message.show_more","Show more")),c=m("div",{className:g(y_.postCollapse,{[y_.postCollapseMe]:a}),children:[h("div",{className:g({[y_.postCollapseGradient]:!i,[y_.postAttachmentCollapseGradient]:i})}),m("div",{className:g({[y_.postCollapseShowmore]:!i,[y_.postAttachmentCollapseShowmore]:i}),children:[h("div",{className:"post-collapse__show-more-line"}),m("button",{id:"showMoreButton",className:y_.showMoreButton,onClick:this.toggleCollapse,children:[t," ",n]}),h("div",{className:"post-collapse__show-more-line"})]})]}),l[y_.postMessageOverflow]=!0}return m("div",{className:g(l),children:[h("div",{style:{maxHeight:o},className:g(y_.postMessageTextContainer),ref:this.textContainer,children:s}),c]})}}var E_=p((function(e){return{isRHSExpanded:vs(e),isRHSOpen:on(e),compactDisplay:hs(e,ls.CATEGORY_DISPLAY_SETTINGS,ls.MESSAGE_DISPLAY,ls.MESSAGE_DISPLAY_DEFAULT)===ls.MESSAGE_DISPLAY_COMPACT}}))(C_);var w_="mqik-db20077f",S_="mqik-459e6526",__="mqik-d0b24645";class A_ extends f.PureComponent{constructor(e){super(e),u(this,"imageProps"),u(this,"checkPostOverflow",(()=>{this.setState((e=>({checkOverflow:e.checkOverflow+1})))})),u(this,"handleHeightReceived",(e=>{e>0&&this.checkPostOverflow()})),u(this,"handleFormattedTextClick",(e=>Xs(e,this.props.currentRelativeTeamUrl))),this.state={collapse:!0,hasOverflow:!1,checkOverflow:0},this.imageProps={onImageLoaded:this.handleHeightReceived,onImageHeightChanged:this.checkPostOverflow}}renderDeletedPost(){return h("p",{className:g(w_,__),children:h(v,{id:"post_body.deleted",defaultMessage:"(message deleted)"})})}renderEditedIndicator(){return Ys(this.props.post)?h("span",{id:`postEdited_${this.props.post.id}`,className:S_,children:h(v,{id:"post_message_view.edited",defaultMessage:"(edited)"})}):null}render(){const{post:e,enableFormatting:t,options:n,pluginPostTypes:s,compactDisplay:i,isRHS:r,theme:a,wordBlocked:o}=this.props;if(e.state===qe.POST_DELETED)return this.renderDeletedPost();let l=o.reduce(((e,t)=>{const n=new RegExp(`\\b${t}\\b`,"ig");return t.length<3?e.replace(n,"••"):e.replace(n,"•••")}),e.message);if(!t)return h("span",{children:l});const c=e.props&&e.props.type?e.props.type:e.type;if(s&&s.hasOwnProperty(c)){const t=s[c].component;return h(t,{post:e,compactDisplay:i,isRHS:r,theme:a})}const u=Ue(e);if(i&&u){const e=be("post_info.message.visible.compact"," (Only visible to you)");l=l.concat(e)}const d=r?`rhsPostMessageText_${e.id}`:`postMessageText_${e.id}`;return m(E_,{checkOverflow:this.state.checkOverflow,isMe:$s(e),text:l||"",children:[h("div",{"aria-readonly":"true",tabIndex:0,id:d,className:g(w_,"post-message__text"),dir:"auto",onClick:this.handleFormattedTextClick,children:h(wc,{message:l,imageProps:this.imageProps,isRHS:r,options:n,post:e,channelId:e.channel_id,mentionKeys:[]})}),this.renderEditedIndicator()]})}}u(A_,"defaultProps",{options:{},isRHS:!1,pluginPostTypes:{}});var k_=p((function(e){return{enableFormatting:ye(e,Ce.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),isRHSExpanded:vs(e),isRHSOpen:on(e),pluginPostTypes:e.plugins.postTypes,theme:Qs(e),currentRelativeTeamUrl:Et(e),wordBlocked:Js(e)}}))(A_),P_=()=>m("div",{className:Go.messageSend,children:[h("span",{}),h("span",{}),h("span",{})]});var x_={time:"mqik-ce640c6c",timeX:"mqik-64ed99d2",inner:"mqik-ff775782"};const T_=[Ja,Za];class N_ extends f.PureComponent{constructor(){super(...arguments),u(this,"handleClick",(()=>{Kn()&&Ca()}))}render(){const{eventTime:e,timestampProps:t={}}=this.props,n=h(Qa,o({value:e,className:"post__time",useDate:!1},t));return h(Jp,{placement:"top",content:h(Qa,{value:e,ranges:T_}),children:m("span",{className:g(x_.time,x_.timeGico),children:[h("span",{className:g(x_.timeX),children:n}),h("div",{className:g(x_.inner,x_.timeGico),children:h("span",{className:g(x_.timeX),children:n})})]})})}}u(N_,"defaultProps",{eventTime:0,location:Qn.CENTER});var M_=p((function(e){return{teamUrl:Et(e)}}))(N_),I_=za.jsx;var O_=d.exports.forwardRef((function(e,t){return I_("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:I_("path",{d:"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"})}))}));var R_="mqik-f7e4dfc9",L_="mqik-fc7259fb",D_="mqik-c49edd77",F_="mqik-9fa139e9",j_="mqik-4b4108bd",H_="mqik-bac0c281",U_="mqik-a411a499",q_="mqik-92463326",B_="mqik-2d7fff5f";class V_ extends f.PureComponent{constructor(e){super(e),u(this,"reactionButtonRef",f.createRef()),u(this,"reactionCountRef",f.createRef()),u(this,"animating",!1),u(this,"handleClick",(()=>{if(!this.props.canAddReaction||!this.props.canRemoveReaction||this.animating)return;const{currentUserReacted:e}=this.props.sortedUsers;this.animating=!0,this.setState((t=>e?{displayNumber:t.displayNumber-1,reactedClass:"Reaction--unreacting"}:{displayNumber:t.displayNumber+1,reactedClass:"Reaction--reacting"})),this.handleAnimationEnded()})),u(this,"handleAnimationEnded",(()=>{const{actions:e,post:t,emojiName:n,postAdmin:s}=this.props,{currentUserReacted:i}=this.props.sortedUsers;this.animating=!1,this.setState((e=>"Reaction--reacting"===e.reactedClass?{reactedClass:"Reaction--reacted"}:"Reaction--unreacting"===e.reactedClass?{reactedClass:"Reaction--unreacted"}:e)),i?e.removeReaction(t.id,n):e.addReaction(t.id,n,s)})),u(this,"loadMissingProfiles",(async()=>{const e=this.props.reactions.map((e=>e.user_id));this.props.actions.getMissingProfilesByIds(e)}));const{reactionCount:t}=this.props,{currentUserReacted:n}=this.props.sortedUsers;this.state=n?{reactedClass:"Reaction--reacted",displayNumber:t}:{reactedClass:"Reaction--unreacted",displayNumber:t}}componentDidUpdate(e){if(e.reactionCount!==this.props.reactionCount){const{currentUserReacted:e}=this.props.sortedUsers,t=e?"Reaction--reacted":"Reaction--unreacted";this.animating=!1,this.setState({displayNumber:this.props.reactionCount,reactedClass:t})}}render(){if(!this.props.emojiImageUrl)return null;const{currentUserReacted:e,users:t}=this.props.sortedUsers,{reactionCount:n,otherUsersCount:s,canAddReaction:i,canRemoveReaction:r}=this.props,{displayNumber:a}=this.state,o=e?n:n+1,l=e?n-1:n,c=l>0?l:"",u=o>0?o:"",d=a>0?a:"",p=i&&r?"":"Reaction--read-only";if(!a)return null;let f,b,y;f=s>0?t.length>0?h(v,{id:"reaction.usersAndOthersReacted",defaultMessage:"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}",values:{users:t.join(", "),otherUsers:s}}):h(v,{id:"reaction.othersReacted",defaultMessage:"{otherUsers, number} {otherUsers, plural, one {user} other {users}}",values:{otherUsers:s}}):t.length>1?h(v,{id:"reaction.usersReacted",defaultMessage:"{users} and {lastUser}",values:{users:t.slice(0,-1).join(", "),lastUser:t[t.length-1]}}):t[0],b=t.length+s>1?h(v,e?{id:"reaction.reactionVerb.youAndUsers",defaultMessage:"reacted"}:{id:"reaction.reactionVerb.users",defaultMessage:"reacted"}):h(v,e?{id:"reaction.reactionVerb.you",defaultMessage:"reacted"}:{id:"reaction.reactionVerb.user",defaultMessage:"reacted"}),this.props.emojiName;let C={};const E=this.props.emojiName.replace(/_/g," ");let w=`${be("reaction.reactWidth.ariaLabel","react with")} ${E}`;return e&&r?(w=`${be("reaction.removeReact.ariaLabel","remove reaction")} ${E}`,C={[L_]:!0},y=h(v,{id:"reaction.clickToRemove",defaultMessage:"(click to remove)"})):!e&&i&&(C={[D_]:!0},y=h(v,{id:"reaction.clickToAdd",defaultMessage:"(click to add)"})),h(Jp,{placement:"right",content:y,children:m("button",{id:`postReaction-${this.props.post.id}-${this.props.emojiName}`,"aria-label":w,className:g(R_,C,"Reaction",this.state.reactedClass,p),onClick:this.handleClick,ref:this.reactionButtonRef,children:[h("span",{className:g(B_,"Reaction__emoji emoticon"),style:{backgroundImage:"url("+this.props.emojiImageUrl+")"}}),h("span",{ref:this.reactionCountRef,className:F_,children:m("span",{className:j_,children:[h("span",{className:g(H_,"zzz-display"),children:d}),h("span",{className:g(q_,"zzz-unreacted"),children:c}),h("span",{className:g(U_,"zzz-reacted"),children:u})]})})]})})}}function z_(e,t,n,s,i,r,a,o){return!!Se(e,{team:t,channel:n,permission:o})&&!(s===G.DEFAULT_CHANNEL&&"true"===i.ExperimentalTownSquareIsReadOnly&&"true"===r.IsLicensed&&!a.roles.includes("system_admin"))}var W_=p((function(){const e=Zs();return function(t,n){const s=ue(t),i=tt(t),r=xe(t),a=e(t,n.reactions);let o;if(ei.has(n.emojiName))o=wn[ei.get(n.emojiName)];else{o=ti(t).get(n.emojiName)}let l="";o&&(l=Cn(o));const c=Ve(t,n.post.channel_id)||{},u=0!==c.delete_at,d=c.team_id,h=le(t),p=bt(t);Me(t,n.post.user_id);let f=!1,m=!1;return u||(f=z_(t,d,n.post.channel_id,c.name,s,i,r,ie.REMOVE_REACTION),m=z_(t,d,n.post.channel_id,c.name,s,i,r,ie.ADD_REACTION)),{profiles:a,postAdmin:!1,otherUsersCount:n.reactions.length-a.length,currentUserId:h,reactionCount:n.reactions.length,canAddReaction:f,canRemoveReaction:m,emojiImageUrl:l,sortedUsers:ni(n.reactions,h,a,p)}}}),(function(e){return{actions:E({addReaction:Cs,removeReaction:Es,getMissingProfilesByIds:si},e)}}))(V_);var G_="mqik-fdfc9c9d",K_="mqik-7eba8b75",Y_="mqik-0f4da2dd",X_="mqik-741923ca",$_="mqik-1093d31b",Q_=e=>{const{emoji:t,spriteClassName:n}=e;return h("div",{className:g(X_),children:h("div",{className:g($_),children:h("img",{alt:t.aliases.join(" - "),src:Cn(t),className:n,onClick:t=>{t.preventDefault(),e.onItemClick(e.emoji)},role:"button"})})})};function J_(e,t){return t.findIndex((t=>e.includes(t)))}function Z_(e,t,n=0){return!(n>10)&&(!!e.isEqualNode(t)||Z_(e,t.parentNode,n+1))}const eA=["heart","thumbsup","rofl","astonished","cry","rage"];var tA=p((function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Sn(e),recentEmojis:_n(e),activeEmojis:eA}}))((e=>{const[t,n]=d.exports.useState(e.show),[s,i]=d.exports.useState(!0),[r,a]=d.exports.useState([]),l=d.exports.useRef(null);let c;function u(){e.target()&&l.current&&(c=Ka(e.target(),l.current,{placement:"top-start",strategy:"absolute",modifiers:[{name:"computeStyles",options:{adaptive:!1}},{name:"preventOverflow",options:{mainAxis:!1,altAxis:!0}},{name:"offset",options:{offset:({placement:e,reference:t,popper:n})=>[0,6]}}],onFirstUpdate:t=>{i(!0),e.toggleFocus&&e.toggleFocus(!0)}}))}function p(t){if(l.current){Z_(l.current.parentNode,t.target)||(e.onHide(),e.toggleFocus&&e.toggleFocus(!1))}}return d.exports.useEffect((()=>{var t;return u(),null==(t=ii())||t.addEventListener("mouseup",p,!1),()=>{var t;null==(t=ii())||t.removeEventListener("mouseup",p,!1),c&&(c.destroy(),e.toggleFocus&&e.toggleFocus(!1))}}),[]),d.exports.useEffect((()=>{t||i(!1),c?c.update():u()}),[t]),d.exports.useEffect((()=>{n(e.show)}),[e.show]),d.exports.useEffect((()=>{const{activeEmojis:t}=e;let n=[];En.forEach((e=>{const s=e.map((e=>wn[e])).filter((e=>J_(t,e.aliases)>-1));n=n.concat(s)})),n.sort(((e,n)=>J_(e.aliases,t)>J_(n.aliases,t))),n=n.map((e=>{const t=o({},e);return t.filename=function(e){return e.filename||e.id}(e),t})),a(n)}),[e.recentEmojis]),h(d.exports.Fragment,t?{children:h("div",{role:"reactions-popper",ref:l,className:g(G_,{"u3-invisible u3-opacity-0":!s}),children:h("div",{className:K_,children:h("div",{className:Y_,children:r.map(((t,n)=>h(Q_,{emoji:t,onItemClick:e.onEmojiClick},`${t.filename}-${n}`)))})})})}:{})}));var nA="mqik-2f5c50fc",sA="mqik-ec597914",iA="mqik-7c91bb5a";class rA extends f.PureComponent{constructor(e){super(e),u(this,"addReactionButtonRef",f.createRef()),u(this,"getTarget",(()=>this.addReactionButtonRef.current)),u(this,"handleEmojiClick",(e=>{this.setState({showEmojiPicker:!1});const t=ri(e)?e.name:e.aliases[0];this.props.actions.addReaction(this.props.post.id,t,this.props.postAdmin)})),u(this,"hideEmojiPicker",(()=>{this.setState({showEmojiPicker:!1})})),u(this,"toggleEmojiPicker",(()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})})),this.state={showEmojiPicker:!1}}render(){const e=new Map,t=[];if(this.props.reactions)for(const i of Object.values(this.props.reactions)){const n=i.emoji_name;e.has(n)?e.get(n).push(i):(t.push(n),e.set(n,[i]))}if(0===e.size)return h("div",{className:"no-reactions"});const n=t.map((t=>h(W_,{post:this.props.post,emojiName:t,reactions:e.get(t)||[]},t))),s=this.getTarget();return s&&(window.innerWidth,s.getBoundingClientRect().right),this.props.enableEmojiPicker&&(this.props.post.channel_id,this.props.teamId,ie.ADD_REACTION,this.state.showEmojiPicker,this.getTarget,this.hideEmojiPicker,this.hideEmojiPicker,this.handleEmojiClick,be("reaction.add.ariaLabel","Add a reaction"),g("Reaction"),this.toggleEmojiPicker,this.props.post.id,g(sA,{[iA]:this.state.showEmojiPicker}),this.addReactionButtonRef),h("div",{"aria-label":be("reaction.container.ariaLabel","reactions"),className:g(nA,"post__reaction-list"),children:n})}}var aA=p((function(){const e=ai();return function(t,n){const s="true"===ue(t).EnableEmojiPicker&&!n.isReadOnly,i=(Ve(t,n.post.channel_id)||{}).team_id;return Me(t,n.post.user_id),{teamId:i,reactions:e(t,n.post.id),enableEmojiPicker:s,postAdmin:!1}}}),(function(e){return{actions:E({addReaction:Cs},e)}}))(rA);var oA={postBodyX:"mqik-da250324",hasComment:"mqik-22b21436",postFail:"mqik-f0fab7a5",postEdited:"mqik-8e707ddc",postWaiting:"mqik-d4b42dec",mentionComment:"mqik-7203e589",postEphemeral:"mqik-73977263",postMessage:"mqik-f5882c27",sameRoot:"mqik-6653766f",isEmptyMessage:"mqik-3a503688",reactionList:"mqik-719476f7"};class lA extends f.PureComponent{constructor(e){super(e),this.sendingAction=new iw((()=>{const e=this.props.post;e&&e.id===e.pending_post_id&&this.setState({sending:!0})})),this.state={sending:!1}}static getDerivedStateFromProps(e,t){return t.sending&&e.post&&e.post.id!==e.post.pending_post_id?{sending:!1}:null}componentDidUpdate(){!1===this.state.sending&&this.sendingAction.cancel()}componentDidMount(){const e=this.props.post;e&&e.id===e.pending_post_id&&this.sendingAction.fireAfter(3e3)}componentWillUnmount(){this.sendingAction.cancel()}render(){const e=this.props.post,t=this.props.user,n=this.props.parentPost,s=this.props.parentPostUser,i=this.props.hasReaction,r={[oA.sameRoot]:this.props.sameRoot,[oA.isEmptyMessage]:!e.message};let a;const o=Ue(e);if(oi(t))return h("div",{className:"post__link banned",children:"Nội dung bị ẩn do tài khoản bị BAN"});let l;n&&e.type!==ve.PostTypes.EPHEMERAL&&(a=h(US,{post:n,parentPostUser:s,onCommentClick:this.props.handleCommentClick})),this.props.post.failed&&(r[oA.postFail]=!0,l=h(t_,{post:this.props.post})),Ys(this.props.post)&&(r[oA.postEdited]=!0);let c=null;(e.file_ids&&e.file_ids.length>0||e.filenames&&e.filenames.length>0)&&this.props.post.state!==qe.POST_DELETED&&(c=h(JS,{post:e,compactDisplay:this.props.compactDisplay})),this.state.sending&&(r[oA.postWaiting]=!0);const u=m(f.Fragment,{children:[this.state.sending&&h(P_,{}),!this.state.sending&&h(k_,{post:this.props.post,compactDisplay:this.props.compactDisplay,hasMention:!0}),l]}),p=e.type&&this.props.pluginPostTypes.hasOwnProperty(e.type)||e.props&&e.props.type&&this.props.pluginPostTypes.hasOwnProperty(e.props.type);let v;v=this.props.post.state===qe.POST_DELETED||p?u:h(b_,{post:this.props.post,isEmbedVisible:this.props.isEmbedVisible,children:u});const{isCommentMention:b,hasComment:y}=this.props;return m(d.exports.Fragment,{children:[m("div",{id:`${e.id}_message`,className:g("post-message",oA.postBodyX,oA.postMessage,{[oA.mentionComment]:b,[oA.postEphemeral]:o},r),children:[v,i?m("div",{className:g(oA.reactionList),children:[h(aA,{post:e,isReadOnly:e.isReadOnly}),h(M_,{isPermalink:!1,eventTime:e.create_at,postId:e.id,styles:oA})]}):h(M_,{isPermalink:!1,eventTime:e.create_at,postId:e.id,styles:oA})]}),a,c]})}}u(lA,"propTypes",{post:y.object.isRequired,parentPost:y.object,parentPostUser:y.object,handleCommentClick:y.func.isRequired,compactDisplay:y.bool,isCommentMention:y.bool,isFirstReply:y.bool,pluginPostTypes:y.object,isEmbedVisible:y.bool,enablePostUsernameOverride:y.bool.isRequired,isReadOnly:y.bool,user:y.object,hasComment:y.bool}),u(lA,"defaultProps",{isReadOnly:!1});var cA=p((function(){const e=ai();return(t,n)=>{let s,i;n.post.parent_id&&(s=ss(t,n.post.parent_id),i=s?Me(t,s.user_id):null);const r="true"===ue(t).EnablePostUsernameOverride,a=0!==(n.activeChannel||{}).delete_at,o=e(t,n.post.id);return{parentPost:s,parentPostUser:i,pluginPostTypes:t.plugins.postTypes,enablePostUsernameOverride:r,isReadOnly:cn(t)||a,user:Me(t,n.post.user_id),hasReaction:!!o&&Object.keys(o).length>0}}}))(lA),uA=()=>h("div",{children:"Bot"}),dA=({chidlren:e})=>h("div",{children:e});var hA="mqik-c266591c",pA="mqik-04ecbe6e",fA="mqik-20cd8c34";class mA extends f.PureComponent{render(){var e;const{post:t,sameRoot:n}=this.props,s=Os(t),i=Ls(t),r="true"===(null==(e=null==t?void 0:t.props)?void 0:e.from_webhook);let a,o,l=h(Wa,{userId:t.user_id,hasMention:!0});return r?(l=t.props.override_username&&this.props.enablePostUsernameOverride?h(Wa,{userId:t.user_id,hideStatus:!0,overwriteName:t.props.override_username,overwriteIcon:this.props.overwriteIcon}):h(Wa,{userId:t.user_id,hideStatus:!0}),this.props.isBot||(a=h(uA,{}))):i?(l=h(Wa,{userId:t.user_id,hideStatus:!0,hasMention:!0}),a=h(dA,{children:h(v,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"})})):s&&this.props.isBot?l=h(Wa,{userId:t.user_id,hideStatus:!0}):s&&(l=h(Wa,{userId:"",overwriteName:h(v,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:ve.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0})),this.props.compactDisplay&&(o=h("strong",{className:"colon",children:":"})),m("div",{className:g(hA,{[fA]:n||this.props.isFirstReply,[pA]:!t.message}),children:[l,o,a]})}}var gA=p((function(e,t){var n,s;const i=ue(e),r="true"===i.EnablePostUsernameOverride,a="true"===i.EnablePostIconOverride&&(null==(s=null==(n=t.post)?void 0:n.props)?void 0:s.override_icon_url);let o;a&&(o=Pe.getAbsoluteUrl(a));const l=Me(e,t.post.user_id);return{enablePostUsernameOverride:r,isBot:Boolean(l&&l.is_bot),overwriteIcon:o,isGuest:Boolean(l&&ps(l))}}))(mA),vA=za.jsx;var bA=d.exports.forwardRef((function(e,t){return vA("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:vA("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}))})),yA=za.jsx,CA=za.jsxs;var EA=d.exports.forwardRef((function(e,t){return CA("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:[yA("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),yA("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"})]}))})),wA=za.jsx,SA=za.jsxs;var _A=d.exports.forwardRef((function(e,t){return SA("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:[wA("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),wA("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"})]}))})),AA=za.jsx;var kA=d.exports.forwardRef((function(e,t){return AA("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:AA("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}))}));var PA="mqik-b32bdc1d",xA="mqik-61056eb6",TA="mqik-172d6b6f",NA="mqik-cbbbd759",MA="mqik-f6bf4105",IA="mqik-2160a2b5",OA="mqik-4d9bcc61";var RA=p((function(e,t){const n=ue(e),s=tt(e),i=e.entities.channels.channels[t.post.channel_id],r=!!i&&0!==i.delete_at,a=Ee(e),o=Me(e,t.post.user_id),l=Boolean(o&&o.is_bot),c=le(e);return{teamId:a,userId:c,isBot:l,isGuest:Boolean(o&&ps(o)),postEditTimeLimit:n.PostEditTimeLimit,isReadOnly:ci(e,i.id)||r,canEdit:ui(e,t.post,s,n,i,c),canDelete:di(e,t.post,i),isLicensed:"true"===s.IsLicensed}}),(function(e){return{actions:E({removePost:Vs,setEditingPost:As,openModal:fe},e)}}))((e=>{const{post:t,isReadOnly:n,hover:s}=e,i=Ue(t),r=Os(t),a=Ls(t);let o=[];const l=()=>{li(t.message)},c=()=>{const t={ModalId:se.DELETE_POST,dialogType:hc,dialogProps:{post:e.post,commentCount:e.replyCount,isRHS:!1}};e.actions.openModal(t)},u=()=>{e.actions.setEditingPost(t.id,e.replyCount,"post_textbox","",!0)};return i&&e.hover?o=[h("button",{className:g(xA,MA),onClick:c,children:h(bA,{className:g(TA)})},"action-detele")]:t.failed||(o=[],((t,n,i)=>{const r=s;(i||!n&&r)&&o.push(h("button",{className:g(xA,NA),onClick:e.handleCommentClick,children:h(EA,{className:g(TA)})},"action-comment")),r&&o.push(h("button",{className:g(xA,OA),onClick:l,children:h(_A,{className:g(TA)})},"action-copy")),e.canEdit&&r&&o.push(h("button",{className:g(xA,IA),onClick:u,children:h(kA,{className:g(TA)})},"action-edit")),e.canDelete&&r&&o.push(h("button",{className:g(xA,MA),onClick:c,children:h(bA,{className:g(TA)})},"action-delete"))})(0,r,a)),0===o.length?null:h("div",{className:PA,children:o})}));var LA={postX:"mqik-f1d36a0f",postHighlight:"mqik-0ec905cc",postSection:"mqik-6913062f",postBubbleContentWrapper:"mqik-19021ca1",bubbleContent:"mqik-0f164d79",isMessageEmpty:"mqik-684ca595",message:"mqik-b510827b",reactionBox:"mqik-a5ab8f0d",reactionActive:"mqik-ab8a03e6",postContentAvatar:"mqik-ef406e09",postActions:"mqik-0ac0d261",postContentMain:"mqik-ef74cd5b",postContentBody:"mqik-6812375f",postContentTools:"mqik-d81b5da3",postHoverd:"mqik-bcece314",postContentMore:"mqik-04fa9bc7",withReactions:"mqik-31583fbc",postMoreReaction:"mqik-877f3d06",postMoreTime:"mqik-9ce54ca8",postMoreComment:"mqik-4c78127f",postMoreX:"mqik-fd7cf88f",postMoreLink:"mqik-5445ec32",permarlink:"mqik-fdfa6933",postComment:"mqik-e14249f1",commentIcon:"mqik-2da5b521",timeIcon:"mqik-0fb4ac70",xIcon:"mqik-9e4d8b07",sameRoot:"mqik-e623aab8",otherRoot:"mqik-1d6d463c",currentUser:"mqik-fcfd90bb",itsMe:"mqik-5818578f",postHideControls:"mqik-f736b797"};var DA="mqik-bfd26e4e",FA="mqik-aa1fd571",jA="mqik-7471d6eb",HA="mqik-f9fe7a95",UA="mqik-478c605f";class qA extends f.PureComponent{constructor(e){super(e),u(this,"addReactionButtonRef",f.createRef()),u(this,"getTarget",(()=>document.querySelector(`#bubble_${this.props.post.id}`))),u(this,"handleEmojiClick",(e=>{this.setState({showEmojiPicker:!1}),this.props.onUp(!1);const t=ri(e)?e.name:e.aliases[0];this.props.actions.addReaction(this.props.post.id,t,this.props.postAdmin)})),u(this,"hideEmojiPicker",(()=>{this.setState({showEmojiPicker:!1}),this.props.onUp(!1)})),u(this,"toggleEmojiPicker",(()=>{const e=!this.state.showEmojiPicker;this.setState({showEmojiPicker:!this.state.showEmojiPicker}),this.props.onUp(e)})),this.state={showEmojiPicker:!1}}render(){if(this.props.post.state===qe.POST_DELETED)return null;let e=null;return this.props.enableEmojiPicker&&(e=h(cS.Consumer,{children:({handlePopupOpened:e})=>h(No,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[ie.ADD_REACTION],children:m("span",{className:"emoji-picker__container",children:[h(tA,{show:this.state.showEmojiPicker,target:this.getTarget,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,toggleFocus:e}),h("button",{"aria-label":be("reaction.add.ariaLabel","Add a reaction"),className:g(HA,"Reaction",{[UA]:this.state.showEmojiPicker}),onClick:this.toggleEmojiPicker,children:h("span",{id:`addReaction-${this.props.post.id}`,className:FA,ref:this.addReactionButtonRef,children:this.state.showEmojiPicker?h(Ga,{className:jA}):h(O_,{className:jA})})})]})})})),h("div",{className:DA,children:e})}}var BA=p((function(){const e=ai();return function(t,n){const s="true"===ue(t).EnableEmojiPicker&&!n.isReadOnly,i=(Ve(t,n.post.channel_id)||{}).team_id;return Me(t,n.post.user_id),{teamId:i,reactions:e(t,n.post.id),enableEmojiPicker:s,postAdmin:!1}}}),(function(e){return{actions:E({addReaction:Cs},e)}}))(qA);class VA extends f.PureComponent{constructor(e){super(e),u(this,"handleCommentClick",(e=>{e.preventDefault();const t=this.props.post;t&&this.props.actions.selectPost(t)})),u(this,"handleCardClick",(e=>{e&&this.props.actions.selectPostCard(e)})),u(this,"handlePostClick",(e=>{const t=this.props.post;t&&(this.props.channelIsArchived||t.system_post_ids||e.altKey&&this.props.actions.markPostAsUnread(t,"CENTER"))})),u(this,"handleDropdownOpened",(e=>{this.props.togglePostMenu&&this.props.togglePostMenu(e),this.setState({dropdownOpened:e})})),u(this,"hasSameRoot",(e=>{const t=e.post;return!e.isFirstReply&&(!(t.root_id||e.previousPostIsComment||!e.consecutivePostByUser)||!!t.root_id)})),u(this,"getClassName",((e,t,n,s,i,r)=>{const a={[LA.postX]:!0};return a[LA.postHideControls]=e.failed||e.state===qe.POST_DELETED,a[LA.postHighlight]=!this.state.fadeOutHighlight&&this.props.shouldHighlight,a[LA.sameRoot]=this.hasSameRoot(this.props),a[LA.otherRoot]=!this.hasSameRoot(this.props),a[LA.postBot]=r,a[LA.currentUser]=!s&&!t,a[LA.sameUser]=this.props.consecutivePostByUser,a[LA.postCompact]=this.props.compactDisplay,a[LA.postHoverd]=this.state.dropdownOpened||this.state.a11yActive,a[LA.postPinOrFlagged]=e.is_pinned||this.props.isFlagged,a["u3-cursor-pointer"]=this.state.alt&&!(this.props.channelIsArchived||e.system_post_ids),a[LA.isMessageEmpty]=!e.message&&e.state!==qe.POST_DELETED,a[LA.itsMe]=this.props.currentUserId===e.user_id,!this.state.fadeOutHighlight&&this.props.shouldHighlight&&(e.is_pinned||this.props.isFlagged)&&(a[LA.postPinOrFlaggedHighlight]=!0),e.root_id&&e.root_id.length>0?a[LA.postComment]=!0:this.props.replyCount>0&&(a[LA.postRoot]=!0,a[LA.sameUser]=!1,a[LA.sameRoot]=!1,a[LA.otherRoot]=!1),(t||n)&&(a[LA.postSystem]=!0,t&&(a[LA.currentUser]=!1,a[LA.postComment]=!1,a[LA.postRoot]=!1,a[LA.otherRoot]=!1)),i&&(a[LA.postComment]=!0,a[LA.sameRoot]=!0,a[LA.postRoot]=!1),a})),u(this,"setHover",(()=>{this.setState({hover:!0})})),u(this,"unsetHover",(()=>{this.setState({hover:!1})})),u(this,"handleAlt",(e=>{this.state.alt!==e.altKey&&this.setState({alt:e.altKey})})),u(this,"handleA11yActivateEvent",(()=>{this.setState({a11yActive:!0,ariaHidden:!1})})),u(this,"handleA11yDeactivateEvent",(()=>{this.setState({a11yActive:!1,ariaHidden:!0})})),u(this,"handlePostFocus",(()=>{this.updateAriaLabel()})),u(this,"updateAriaLabel",(()=>{this.setState({currentAriaLabel:this.props.createAriaLabel(this.props.intl)})})),u(this,"handleEmojiOpen",(e=>{this.setState({emojiPickerEnable:e})})),this.postRef=f.createRef(),this.state={dropdownOpened:!1,hover:!1,alt:!1,a11yActive:!1,currentAriaLabel:"",ariaHidden:!0,fadeOutHighlight:!1,emojiPickerEnable:!1}}componentDidMount(){document.addEventListener("keydown",this.handleAlt),document.addEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.addEventListener(St.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(St.DEACTIVATE,this.handleA11yDeactivateEvent)),this.props.shouldHighlight&&(this.highlightTimeout=setTimeout((()=>{this.setState({fadeOutHighlight:!0})}),ve.PERMALINK_FADEOUT))}componentWillUnmount(){document.removeEventListener("keydown",this.handleAlt),document.removeEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.removeEventListener(St.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(St.DEACTIVATE,this.handleA11yDeactivateEvent)),this.highlightTimeout&&clearTimeout(this.highlightTimeout)}componentDidUpdate(e){this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(St.UPDATE)),this.props.post.state===qe.POST_DELETED&&e.post.state!==qe.POST_DELETED&&this.updateAriaLabel()}render(){const{post:e,replyCount:t,isFirstReply:n,isCollapsedThreadsEnabled:s,consecutivePostByUser:i,compactDisplay:r}=this.props;if(!e.id)return null;const a=Os(e),o=$s(e),l=Ls(e),c=e&&e.props&&"true"===e.props.from_webhook,u=e&&e.props&&"true"===e.props.from_bot;if(a&&!l)return null;let d=h("span",{hidden:!0});const{root_id:p}=e,f=this.hasSameRoot(this.props)&&i&&!p&&0===t&&!u;f||(d=h(lS,{compactDisplay:r,post:e,userId:e.user_id}),l&&(d=h("span",{className:"auto-responder",children:d})));const v=[];v.push(h(AS,{styles:LA,isFlagged:this.props.isFlagged,isPinned:e.is_pinned,channelId:e.channel_id},"post-highlight"));(l||!a&&(Boolean(t)||n))&&v.push(h("div",{className:LA.postMoreComment,children:h(xS,{handleCommentClick:this.handleCommentClick,commentCount:this.props.replyCount,postId:e.id,extraClass:"post__x-comment-count",styles:LA})},"post-more-comment"));const b=!(Ue(e)||qe.POST_DELETED===e.state||hi(e)||e.type===qe.POST_TYPES.COMBINED_USER_ACTIVITY);return v.push(h("div",{className:LA.postMoreTime,children:h(fS,{isPermalink:b,eventTime:e.create_at,postId:e.id,styles:LA})},"post-more-time")),h(cS.Provider,{value:{handlePopupOpened:this.handleDropdownOpened,styles:LA},children:m("div",{ref:this.postRef,id:"post_"+e.id,role:"listitem",className:g("a11y__section","post-item-x",LA.postSection,this.getClassName(e,a,o,c,l,u),LA.postBubbleContentWrapper),tabIndex:0,onFocus:this.handlePostFocus,onMouseOver:this.setHover,onMouseLeave:this.unsetHover,onTouchStart:this.setHover,onClick:this.handlePostClick,"aria-label":this.state.currentAriaLabel,"aria-atomic":!0,children:[m("div",{id:`bubble_${e.id}`,className:LA.bubbleContent,children:[e.user_id===this.props.currentUserId||this.props.channelIsArchived?null:h("div",{className:g(LA.reactionBox,{[LA.reactionActive]:this.state.emojiPickerEnable}),children:h(BA,{post:this.props.post,isReadOnly:this.props.isReadOnly,onUp:this.handleEmojiOpen})}),h(cA,{post:e,activeChannel:this.props.activeChannel,handleCommentClick:this.handleCommentClick,compactDisplay:this.props.compactDisplay,isCommentMention:this.props.isCommentMention,isFirstReply:this.props.isFirstReply,sameRoot:this.hasSameRoot(this.props),hasComment:e.root_id&&e.root_id.length>0||l}),h(gA,{post:e,handleCommentClick:this.handleCommentClick,handleCardClick:this.handleCardClick,handleDropdownOpened:this.handleDropdownOpened,compactDisplay:this.props.compactDisplay,isFirstReply:this.props.isFirstReply,replyCount:this.props.replyCount,showTimeWithoutHover:!f,hover:this.state.hover||this.state.a11yActive,isLastPost:this.props.isLastPost,sameRoot:this.hasSameRoot(this.props)})]}),h("div",{className:LA.postContentAvatar,children:d}),h("div",{className:LA.postActions,children:h(RA,{post:e,handleCommentClick:this.handleCommentClick,replyCount:this.props.replyCount,isFirstReply:this.props.isFirstReply,hover:this.state.hover||this.state.a11yActive})})]})})}}u(VA,"propTypes",{post:y.object.isRequired,thread:y.object,createAriaLabel:y.func.isRequired,currentUserId:y.string.isRequired,center:y.bool,compactDisplay:y.bool,isFirstReply:y.bool,shouldHighlight:y.bool,consecutivePostByUser:y.bool,previousPostIsComment:y.bool,togglePostMenu:y.func,isCommentMention:y.bool,isGuest:y.bool,replyCount:y.number,isLastPost:y.bool,channelIsArchived:y.bool.isRequired,intl:Qo.isRequired,actions:y.shape({selectPost:y.func.isRequired,selectPostCard:y.func.isRequired,markPostAsUnread:y.func.isRequired}).isRequired,isFlagged:y.bool.isRequired,isCollapsedThreadsEnabled:y.bool,isReadOnly:y.bool}),u(VA,"defaultProps",{post:{},isReadOnly:!1,isGuest:!1});var zA=S(VA);function WA(e,t){return!(!e||!e.root_id)&&(!t||e.root_id!==t.id&&e.root_id!==t.root_id)}var GA=p((function(){const e=pi(),t=fi(),n=mi();return(s,i)=>{const r=i.post||ss(s,i.postId),a=Ve(s,r.channel_id);let o=null;i.previousPostId&&(o=ss(s,i.previousPostId));let l=!1,c=!1;o&&(l=gi(r,o),c=Boolean(o.root_id));const u=0!==(Te(s)||{}).delete_at;return{post:r,createAriaLabel:n(s,r),currentUserId:le(s),isGuest:ps(xe(s)),isFirstReply:WA(r,o),consecutivePostByUser:l,previousPostIsComment:c,replyCount:e(s,r),isCommentMention:t(s,r.id),center:hs(s,ls.CATEGORY_DISPLAY_SETTINGS,ls.CHANNEL_DISPLAY_MODE,ls.CHANNEL_DISPLAY_MODE_DEFAULT)===ls.CHANNEL_DISPLAY_MODE_CENTERED,compactDisplay:hs(s,ls.CATEGORY_DISPLAY_SETTINGS,ls.MESSAGE_DISPLAY,ls.MESSAGE_DISPLAY_DEFAULT)===ls.MESSAGE_DISPLAY_COMPACT,channelIsArchived:vi(a),isFlagged:null!=hs(s,ls.CATEGORY_FLAGGED_POST,r.id,null),isCollapsedThreadsEnabled:bi(s),isReadOnly:cn(s)||u}}}),(function(e){return{actions:E({selectPost:wa,selectPostCard:yi,markPostAsUnread:Ci},e)}}))(zA);var KA=p((function(){const e=Ei();return(t,n)=>({post:e(t,n.combinedId),postId:n.combinedId})}))(GA);var YA="mqik-f02aa279",XA="mqik-57573d5f",$A="mqik-dab47c84",QA="mqik-4c6b39c7",JA=({children:e})=>m("div",{className:YA,children:[h("div",{className:$A}),h("div",{className:QA,children:e})]});const ZA=[Ja,Za],ek=({date:e})=>h(JA,{children:h(Qa,{value:e,useTime:!1,useSemanticOutput:!1,ranges:ZA})});ek.propTypes={date:y.oneOfType([y.number,y.instanceOf(Date)]).isRequired};var tk=d.exports.memo(ek),nk=({children:e})=>m("div",{className:XA,children:[h("div",{className:$A}),h("div",{className:QA,children:e})]});var sk="mqik-ca428930";class ik extends f.PureComponent{render(){return h("div",{className:g(sk,"new-separator"),children:h(nk,{id:this.props.separatorId,children:h(v,{id:"posts_view.newMsg",defaultMessage:"New Messages"})})})}}class rk extends f.PureComponent{blockShortcutReactToLastPostForNonMessages(e){const{actions:{emitShortcutReactToLastPostFrom:t}}=this.props;wi(e)&&t(Qn.NO_WHERE)}componentDidUpdate(e){const{listId:t,isLastPost:n,shortcutReactToLastPostEmittedFrom:s}=this.props,i=e.shortcutReactToLastPostEmittedFrom!==s&&s===Qn.CENTER;n&&i&&this.blockShortcutReactToLastPostForNonMessages(t)}render(){const{listId:e,previousListId:t,loadingOlderPosts:n,loadingNewerPosts:s,post:i}=this.props,{OLDER_MESSAGES_LOADER:r,NEWER_MESSAGES_LOADER:a,CHANNEL_INTRO_MESSAGE:l,LOAD_OLDER_MESSAGES_TRIGGER:c,LOAD_NEWER_MESSAGES_TRIGGER:u}=ki;if(Si(e)){const t=_i(e);return h(tk,{date:t},t)}if(Ai(e))return h(ik,{separatorId:e});if(e===l)return h("div",{});if(e===c||e===u)return h("button",{className:"more-messages-text theme style--none color--link",onClick:e===c?this.props.loadOlderPosts:this.props.loadNewerPosts,children:h(v,{id:"posts_view.loadMore",defaultMessage:"Load More Messages"})});if(e===r||e===a){return h("div",{className:"loading-screen",children:m("div",{className:g("loading__content",{hideAnimation:!n&&!s}),children:[h("div",{className:"round round-1"}),h("div",{className:"round round-2"}),h("div",{className:"round round-3"})]})})}const d={previousPostId:t,shouldHighlight:this.props.shouldHighlight,togglePostMenu:this.props.togglePostMenu,isLastPost:this.props.isLastPost,activeChannel:this.props.channel};return Ns(e)?h(KA,o({combinedId:e},d)):h(GA,o({postId:e,post:i},d))}}var ak=p((function(e,t){let n;wi(t.listId)||(n=t.listId);const s=ds(e);return{post:t.post||(n?ss(e,n):null),channel:t.channel,shortcutReactToLastPostEmittedFrom:s}}),(function(e){return{actions:E({emitShortcutReactToLastPostFrom:ks},e)}}))(rk),ok=za.jsx;var lk=d.exports.forwardRef((function(e,t){return ok("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:ok("path",{fillRule:"evenodd",d:"M15.707 4.293a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 011.414-1.414L10 8.586l4.293-4.293a1 1 0 011.414 0zm0 6a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 111.414-1.414L10 14.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"})}))}));var ck="mqik-e348b088";class uk extends f.PureComponent{render(){return h("div",{className:g(ck,{"u3-hidden":this.props.atBottom}),onClick:this.props.onClick,children:h(lk,{className:"u3-w-6 u3-h-6 u3-animate-bounce u3-text-white"})})}}u(uk,"propTypes",{isScrolling:y.bool.isRequired,atBottom:y.bool,onClick:y.func.isRequired});var dk=za.jsx,hk=za.jsxs;var pk=d.exports.forwardRef((function(e,t){return hk("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:[dk("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),dk("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}))}));var fk="mqik-12b068c8",mk="mqik-41a5fd77",gk="mqik-bc058da2",vk="mqik-93946fdf",bk="mqik-3119bb0a",yk="mqik-9fbcf278",Ck="mqik-02d84790";class Ek extends f.PureComponent{constructor(){super(...arguments),u(this,"mounted"),u(this,"handleDismiss",(()=>{"function"==typeof this.props.onDismiss&&this.props.onDismiss()}))}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e={[fk]:!0},t={[gk]:!0},{show:n,extraClasses:s,showActions:i,width:r}=this.props;n&&(e[mk]=!0),i&&(t[vk]=!0);return m("div",{className:g(e,"toastClass"),children:[m("div",{className:g(t),onClick:i?this.props.onClick:void 0,children:[i&&(()=>m("div",{className:bk,children:[h(pk,{className:"u3-w-5 u3-h-5 u3-text-white"}),r>ve.MOBILE_SCREEN_WIDTH&&this.props.onClickMessage]}))(),this.props.children]}),h("div",{className:yk,onClick:this.handleDismiss,"data-testid":s?`dismissToast-${s}`:"dismissToast",children:h(Ga,{className:g(Ck),id:"dismissToast"})})]})}}const wk=[no],Sk=class extends f.PureComponent{constructor(e){super(e),u(this,"handleShortcut",(e=>{ge(e,ve.KeyCodes.ESCAPE)&&(this.state.showUnreadToast?this.hideUnreadToast():this.state.showNewMessagesToast?this.hideNewMessagesToast():this.hideArchiveToast())})),u(this,"hideUnreadToast",(()=>{this.state.showUnreadToast&&this.setState({showUnreadToast:!1})})),u(this,"hideArchiveToast",(()=>{this.state.showMessageHistoryToast&&this.setState({showMessageHistoryToast:!1})})),u(this,"hideNewMessagesToast",((e=!0)=>{this.state.showNewMessagesToast&&(this.setState({showNewMessagesToast:!1}),e&&this.props.updateLastViewedBottomAt())})),u(this,"hideSearchHintToast",(()=>{this.props.onSearchHintDismiss&&this.props.onSearchHintDismiss()})),u(this,"newMessagesToastText",((e,t)=>this.props.width>500&&void 0!==t?h(v,{id:"postlist.toast.newMessagesSince",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}} {isToday, select, true {} other {since}} {date}",values:{count:e,isToday:to(new Date(t)).toString(),date:h(Qa,{value:t,useTime:!1,ranges:wk})}}):h(v,{id:"postlist.toast.newMessages",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}}",values:{count:e}}))),u(this,"archiveToastText",(()=>h("p",{className:"u3-ml-8 u3-inline-block",children:h(v,{id:"postlist.toast.history",defaultMessage:"Viewing message history"})}))),u(this,"changeUrlToRemountChannelView",(()=>{const{match:e,history:t,channelId:n}=this.props;n?t.replace(`/${e.params.team}/group/${n}`):t.replace(`/${e.params.team}`)})),u(this,"scrollToNewMessage",(()=>{const{focusedPostId:e,atLatestPost:t,scrollToNewMessage:n,updateLastViewedBottomAt:s}=this.props;!e||t?(n(),s(),this.hideNewMessagesToast()):this.changeUrlToRemountChannelView()})),u(this,"scrollToLatestMessages",(()=>{const{focusedPostId:e,atLatestPost:t,scrollToLatestMessages:n}=this.props;if(e){if(!t)return void this.changeUrlToRemountChannelView();this.hideArchiveToast()}n(),this.hideUnreadToast()})),this.state={unreadCountInChannel:e.unreadCountInChannel}}static getDerivedStateFromProps(e,t){let n,{showUnreadToast:s,showNewMessagesToast:i,showMessageHistoryToast:r}=t;return n=e.atLatestPost?Sk.countNewMessages(e.postListIds,e.rootPosts,e.isCollapsedThreadsEnabled):e.channelMarkedAsUnread?t.unreadCountInChannel:t.unreadCountInChannel+e.newRecentMessagesCount,void 0===s&&null!==e.atBottom&&(s=n>0&&!e.atBottom),void 0===r&&""!==e.focusedPostId&&null!==e.atBottom&&(r=e.initScrollOffsetFromBottom>1e3||!e.atLatestPost),!e.channelMarkedAsUnread||e.atBottom||t.channelMarkedAsUnread||t.showUnreadToast||(s=!0),e.channelMarkedAsUnread&&e.lastViewedAt!==t.lastViewedAt&&!e.atBottom&&(s=!0),!s&&n>0&&!e.atBottom&&e.lastViewedBottom<e.latestPostTimeStamp&&(i=!0),n||(i=!1,s=!1),{unreadCount:n,showUnreadToast:s,showNewMessagesToast:i,lastViewedAt:e.lastViewedAt,channelMarkedAsUnread:e.channelMarkedAsUnread,showMessageHistoryToast:r}}componentDidMount(){this.mounted=!0;const{showUnreadToast:e,showNewMessagesToast:t,showMessageHistoryToast:n}=this.state,s=Boolean(e||t||n);document.addEventListener("keydown",this.handleShortcut),this.props.actions.updateToastStatus(s)}componentDidUpdate(e,t){const{showUnreadToast:n,showNewMessagesToast:s,showMessageHistoryToast:i}=this.state,{atBottom:r,atLatestPost:a,postListIds:o,lastViewedBottom:l,updateNewMessagesAtInChannel:c,actions:u}=this.props;!e.atBottom&&r&&a&&(this.hideNewMessagesToast(!1),this.hideUnreadToast(),this.hideArchiveToast());const d=e.postListIds.length,h=o.length;h!==d&&o[0]!==e.postListIds[0]&&(!1===r&&a&&h>0)&&!n&&c(l);if(t.showUnreadToast!==n||t.showNewMessagesToast!==s||t.showMessageHistoryToast!==i){const e=Boolean(n||s||i);u.updateToastStatus(e)}}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut)}getToastToRender(){const{atLatestPost:e,atBottom:t,width:n,lastViewedAt:s,showSearchHintToast:i}=this.props,{showUnreadToast:r,showNewMessagesToast:a,showMessageHistoryToast:c,unreadCount:u}=this.state,d={show:!0,width:n,onDismiss:this.hideUnreadToast,onClick:this.scrollToLatestMessages,onClickMessage:be("postlist.toast.scrollToBottom","Jump to recents"),showActions:!e||e&&!t};if(r&&u>0)return h(Ek,l(o({},d),{children:this.newMessagesToastText(u,s)}));if(a){const e={onDismiss:this.hideNewMessagesToast,onClick:this.scrollToLatestMessages,onClickMessage:be("postlist.toast.scrollToLatest","Jump to new messages")};return h(Ek,l(o(o({},d),e),{children:this.newMessagesToastText(u,s)}))}if(c){const e={show:!0,width:n,onDismiss:this.hideArchiveToast,onClick:this.scrollToLatestMessages,onClickMessage:be("postlist.toast.scrollToBottom","Jump to recents"),showActions:!0,extraClasses:"toast__history"};return h(Ek,l(o({},e),{children:this.archiveToastText()}))}return null}render(){const e=this.getToastToRender();return h(f.Fragment,{children:e})}};let _k=Sk;u(_k,"propTypes",{unreadCountInChannel:y.number,newRecentMessagesCount:y.number,channelMarkedAsUnread:y.bool,isCollapsedThreadsEnabled:y.bool,rootPosts:y.object,atLatestPost:y.bool,postListIds:y.array,latestPostTimeStamp:y.number,atBottom:y.bool,lastViewedBottom:y.number,width:y.number,lastViewedAt:y.number,focusedPostId:y.string,channelId:y.string,initScrollOffsetFromBottom:y.number,updateNewMessagesAtInChannel:y.func,scrollToNewMessage:y.func,scrollToLatestMessages:y.func,updateLastViewedBottomAt:y.func,showSearchHintToast:y.bool,onSearchHintDismiss:y.func,match:y.shape({params:y.shape({team:y.string}).isRequired}).isRequired,actions:y.shape({updateToastStatus:y.func.isRequired}).isRequired}),u(_k,"defaultProps",{focusedPostId:""}),u(_k,"countNewMessages",((e,t,n)=>{const s=Pi(e);if(s<=0)return 0;let i=e.slice(0,s).filter((e=>!wi(e)));return n&&(i=i.filter((e=>t[e]))),i.length}));var Ak=S(_k);var kk=_(p((function(){const e=Kt(),t=C(xi,le,((e,t)=>t),((e,t,n)=>n),bi,((e,t,n,s,i)=>n?n.map((t=>e[t])).filter((e=>e&&e.user_id!==t&&e.state!==qe.POST_DELETED&&e.create_at>s&&(!i||""===e.root_id))).length:0)),n=C(xi,le,((e,t)=>t),((e,t,n)=>Object.values(e).filter((e=>""===e.root_id&&e.channel_id===n.id&&e.state!==qe.POST_DELETED)).reduce(((e,t)=>(e[t.id]=!0,e)),{}))),s=Ti();return function(i,r){const a=e(i,{id:r.channelId});let o=0;const l=Ni(i,a.id),c=i.views.channel.lastChannelViewTime[a.id];if(!r.atLatestPost){let e=Mi(i,a.id);e&&(e=s(i,{postIds:e,lastViewedAt:c,channelId:a.id})),o=t(i,e,c)}return{rootPosts:n(i,a),lastViewedAt:c,newRecentMessagesCount:o,isCollapsedThreadsEnabled:bi(i),unreadCountInChannel:Ii(i,a),channelMarkedAsUnread:l}}}),(function(e){return{actions:E({updateToastStatus:Sa},e)}}))(Ak));var Pk="mqik-f039e3e1",xk="mqik-05ea1f8c",Tk="mqik-17088fc9",Nk="mqik-727615df",Mk="mqik-67fa946d",Ik="mqik-1f7842d4",Ok="mqik-c5cd3113",Rk="mqik-c0e296a8";const Lk=50,Dk=100,Fk={padding:"0px 0px 7px"},jk={position:"absolute",bottom:"0",maxHeight:"100%"};class Hk extends f.PureComponent{constructor(e){super(e),u(this,"getNewMessagesSeparatorIndex",(e=>e.findIndex((e=>0===e.indexOf(ki.START_OF_NEW_MESSAGES))))),u(this,"handleWindowResize",(()=>{this.props.actions.checkAndSetMobileView();const e=Kn();if(e!==this.state.isMobile){const t=this.state.dynamicListStyle;this.state.postMenuOpened&&(e||"unset"!==t.willChange?e&&"transform"===t.willChange&&(t.willChange="unset"):t.willChange="transform"),this.setState({isMobile:e,dynamicListStyle:t}),this.scrollStopAction=new iw(this.handleScrollStop)}this.showSearchHintThreshold=this.getShowSearchHintThreshold()})),u(this,"togglePostMenu",(e=>{const t=this.state.dynamicListStyle;this.state.isMobile&&(t.willChange=e?"unset":"transform"),this.setState({postMenuOpened:e,dynamicListStyle:t})})),u(this,"renderRow",(({data:e,itemId:t,style:n})=>{const s=e.indexOf(t);let i="";const r="post-row__padding",a=-1!==s&&s<e.length-1?e[s+1]:"",o=s>0&&s<e.length?e[s-1]:"";(Si(o)||Ai(o))&&(i+="post-row__padding bottom"),(Si(a)||Ai(a))&&(i.includes(r)?i+=" top":i+="post-row__padding top");const l=t===this.state.postListIds[0];return h("div",{style:n,className:g(Nk,Mk,i,{[Ik]:l}),children:h(ak,{listId:t,previousListId:Ri(e,s),shouldHighlight:t===this.props.focusedPostId,loadOlderPosts:this.props.actions.loadOlderPosts,loadNewerPosts:this.props.actions.loadNewerPosts,togglePostMenu:this.togglePostMenu,isLastPost:l,loadingNewerPosts:this.props.loadingNewerPosts,loadingOlderPosts:this.props.loadingOlderPosts})})})),u(this,"scrollToFailed",(e=>{0===e?this.props.actions.changeUnreadChunkTimeStamp(""):this.props.actions.changeUnreadChunkTimeStamp(this.props.lastViewedAt)})),u(this,"onScroll",(({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n,clientHeight:s,scrollHeight:i})=>{if(i<=0)return;const r="forward"===e&&!n,a=i-s-t,o=a<1e3;if("backward"===e&&!n&&t<1e3&&!this.props.atOldestPost?this.props.actions.loadOlderPosts():r&&o&&!this.props.atLatestPost&&this.props.actions.loadNewerPosts(),this.state.isMobile&&(this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction&&this.scrollStopAction.fireAfter(ve.SCROLL_DELAY)),this.checkBottom(t,i,s),n){this.listRef.current._getRangeToRender()[3]<=1&&!this.props.atLatestPost&&this.props.actions.canLoadMorePosts(Li.AFTER_ID),!this.state.atBottom&&i&&this.setState({initScrollOffsetFromBottom:a})}this.state.isMobile&&this.state.showSearchHint&&this.setState({showSearchHint:!1}),this.state.isMobile||this.state.isSearchHintDismissed||this.setState({showSearchHint:a>this.showSearchHintThreshold})})),u(this,"getShowSearchHintThreshold",(()=>3*window.screen.height)),u(this,"checkBottom",((e,t,n)=>{this.updateAtBottom(this.isAtBottom(e,t,n))})),u(this,"isAtBottom",((e,t,n)=>t-n-e<=10&&t>0)),u(this,"updateAtBottom",(e=>{if(e!==this.state.atBottom){let t=Date.now();this.props.latestPostTimeStamp>t&&(t=this.props.latestPostTimeStamp),this.setState({atBottom:e,lastViewedBottom:t})}})),u(this,"updateLastViewedBottomAt",((e=Date.now())=>{this.setState({lastViewedBottom:e})})),u(this,"handleScrollStop",(()=>{this.mounted&&this.setState({isScrolling:!1})})),u(this,"handleSearchHintDismiss",(()=>{this.setState({showSearchHint:!1,isSearchHintDismissed:!0})})),u(this,"updateFloatingTimestamp",(e=>{this.state.isMobile&&this.props.postListIds&&this.setState({topPostId:Di(this.props.postListIds.slice(e))})})),u(this,"onItemsRendered",(({visibleStartIndex:e})=>{this.updateFloatingTimestamp(e)})),u(this,"initScrollToIndex",(()=>{if(this.props.focusedPostId){return{index:this.state.postListIds.findIndex((e=>e===this.props.focusedPostId)),position:"center"}}return{index:0,position:"end"}})),u(this,"scrollToLatestMessages",(()=>{this.props.atLatestPost?this.scrollToBottom():(this.updateNewMessagesAtInChannel(),this.props.actions.changeUnreadChunkTimeStamp(this.props.latestPostTimeStamp))})),u(this,"scrollToBottom",(()=>{this.listRef.current?this.listRef.current.scrollToItem(0,"end"):setTimeout((()=>{this.listRef.current&&this.listRef.current.scrollToItem(0,"end")}),500)})),u(this,"scrollToNewMessage",(()=>{this.listRef.current?this.listRef.current.scrollToItem(Pi(this.state.postListIds),"start",-50):setTimeout((()=>{this.listRef.current&&this.listRef.current.scrollToItem(Pi(this.state.postListIds),"start",-50)}),500)})),u(this,"updateNewMessagesAtInChannel",((e=Date.now())=>{this.props.actions.updateNewMessagesAtInChannel(this.props.channelId,e)})),u(this,"renderToasts",(e=>h(kk,{atLatestPost:this.props.atLatestPost,postListIds:this.state.postListIds,atBottom:this.state.atBottom,width:e,lastViewedBottom:this.state.lastViewedBottom,latestPostTimeStamp:this.props.latestPostTimeStamp,scrollToNewMessage:this.scrollToNewMessage,scrollToLatestMessages:this.scrollToLatestMessages,updateNewMessagesAtInChannel:this.updateNewMessagesAtInChannel,updateLastViewedBottomAt:this.updateLastViewedBottomAt,channelId:this.props.channelId,focusedPostId:this.props.focusedPostId,initScrollOffsetFromBottom:this.state.initScrollOffsetFromBottom,onSearchHintDismiss:this.handleSearchHintDismiss,showSearchHintToast:this.state.showSearchHint})));const t=ki.CHANNEL_INTRO_MESSAGE,n=Kn();this.state={isScrolling:!1,isMobile:n,atBottom:null,lastViewedBottom:Date.now(),postListIds:[t],topPostId:"",postMenuOpened:!1,dynamicListStyle:{willChange:"transform"},initScrollCompleted:!1,initScrollOffsetFromBottom:0,showSearchHint:!1,isSearchHintDismissed:!1},this.listRef=f.createRef(),this.postListRef=f.createRef(),n&&(this.scrollStopAction=new iw(this.handleScrollStop)),this.initRangeToRender=this.props.focusedPostId?[0,Dk]:[0,Lk];let s=0;s=e.focusedPostId?this.props.postListIds.findIndex((e=>e===this.props.focusedPostId)):this.getNewMessagesSeparatorIndex(e.postListIds);const i=e.focusedPostId?Dk:Lk;this.initRangeToRender=[Math.max(s-30,0),Math.max(s+30,Math.min(e.postListIds.length-1,i))],this.showSearchHintThreshold=this.getShowSearchHintThreshold()}componentDidMount(){this.mounted=!0,this.props.actions.checkAndSetMobileView(),window.addEventListener("resize",this.handleWindowResize),We.addListener(Oi.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}getSnapshotBeforeUpdate(e){if(this.postListRef&&this.postListRef.current){const t=this.props.postListIds&&this.props.postListIds.length!==e.postListIds.length&&this.props.postListIds[0]===e.postListIds[0],n=this.props.atOldestPost!==e.atOldestPost;if((t||n)&&!1===this.state.atBottom){const e=this.postListRef.current;return{previousScrollTop:e.parentElement.scrollTop,previousScrollHeight:e.scrollHeight}}}return null}componentDidUpdate(e,t,n){if(!this.postListRef.current)return;const s=e.postListIds.length,i=this.props.postListIds.length;if(n){const t=this.postListRef.current.scrollHeight,r=i!==s&&this.props.postListIds[0]===e.postListIds[0],a=this.props.atOldestPost!==e.atOldestPost;if((r||a)&&!this.state.atBottom&&n){const e=n.previousScrollTop+(t-n.previousScrollHeight);0!==e&&e-n.previousScrollTop!=0&&this.listRef.current.scrollTo(e,e-n.previousScrollTop,!0)}}}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.handleWindowResize),We.removeListener(Oi.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}static getDerivedStateFromProps(e){const t=e.postListIds;let n;return n=e.atOldestPost?[...t,ki.CHANNEL_INTRO_MESSAGE]:e.autoRetryEnable?[...t,ki.OLDER_MESSAGES_LOADER]:[...t,ki.LOAD_OLDER_MESSAGES_TRIGGER],e.atLatestPost||(n=e.autoRetryEnable?[ki.NEWER_MESSAGES_LOADER,...n]:[ki.LOAD_NEWER_MESSAGES_TRIGGER,...n]),{postListIds:n}}render(){const e=this.props.channelId;let t;this.props.latestAriaLabelFunc&&this.props.postListIds.indexOf(ki.START_OF_NEW_MESSAGES)>=0&&(t=this.props.latestAriaLabelFunc(this.props.intl));const{dynamicListStyle:n}=this.state;return m("div",{role:"list",className:"a11y__region","aria-label":be("accessibility.sections.centerContent","message list main region"),children:[this.state.isMobile&&m(f.Fragment,{children:[h(iS,{isScrolling:this.state.isScrolling,isMobile:!0,postId:this.state.topPostId}),h(uk,{isScrolling:this.state.isScrolling,atBottom:this.state.atBottom,onClick:this.scrollToBottom})]}),h("div",{role:"presentation",className:Pk,children:h("div",{role:"presentation",className:xk,children:m("div",{id:"postListContent",className:Tk,children:[h("span",{className:g(Ok,"sr-only"),"aria-live":"polite",children:t}),h(Dw,{children:({height:e,width:t})=>m(f.Fragment,{children:[h("div",{children:this.renderToasts(t)}),h(Qw,{ref:this.listRef,height:e,width:t,className:Rk,itemData:this.state.postListIds,overscanCountForward:80,overscanCountBackward:80,onScroll:this.onScroll,initScrollToIndex:this.initScrollToIndex,canLoadMorePosts:this.props.actions.canLoadMorePosts,innerRef:this.postListRef,style:o(o({},jk),n),innerListStyle:Fk,initRangeToRender:this.initRangeToRender,loaderId:ki.OLDER_MESSAGES_LOADER,correctScrollToBottom:this.props.atLatestPost,onItemsRendered:this.onItemsRendered,scrollToFailed:this.scrollToFailed,children:this.renderRow})]})})]})})},"postlist-"+e)]})}}u(Hk,"propTypes",{postListIds:y.array.isRequired,focusedPostId:y.string,channelId:y.string.isRequired,autoRetryEnable:y.bool,atOldestPost:y.bool,atLatestPost:y.bool,loadingNewerPosts:y.bool,loadingOlderPosts:y.bool,intl:Qo.isRequired,latestPostTimeStamp:y.number,latestAriaLabelFunc:y.func,lastViewedAt:y.string,actions:y.shape({loadOlderPosts:y.func.isRequired,loadNewerPosts:y.func.isRequired,canLoadMorePosts:y.func.isRequired,checkAndSetMobileView:y.func.isRequired,changeUnreadChunkTimeStamp:y.func.isRequired,updateNewMessagesAtInChannel:y.func.isRequired}).isRequired});var Uk=S(Hk);class qk extends f.PureComponent{constructor(e){super(e),u(this,"autoRetriesCount"),u(this,"loadingMorePosts"),u(this,"actionsForPostList"),u(this,"mounted"),u(this,"extraPagesLoaded"),u(this,"postsOnLoad",(async e=>{const{focusedPostId:t,isFirstLoad:n,latestPostTimeStamp:s,isPrefetchingInProcess:i,actions:r}=this.props;t?await r.loadPostsAround(e,this.props.focusedPostId):n&&i||await r.loadLatestPosts(e),t||this.markChannelAsReadAndViewed(e),this.mounted&&this.setState({loadingOlderPosts:!1,loadingNewerPosts:!1})})),u(this,"callLoadPosts",(async(e,t,n)=>{const{error:s}=await this.props.actions.loadPosts({channelId:e,postId:t,type:n});return n===Li.BEFORE_ID?this.setState({loadingOlderPosts:!1}):this.setState({loadingNewerPosts:!1}),s?this.autoRetriesCount<3?(this.autoRetriesCount++,await this.callLoadPosts(e,t,n)):this.mounted&&this.setState({autoRetryEnable:!1}):(this.mounted&&this.setState({autoRetryEnable:!0}),this.state.autoRetryEnable||(this.autoRetriesCount=0)),{error:s}})),u(this,"markChannelAsReadAndViewed",(e=>{this.props.actions.markChannelAsViewed(e),this.props.actions.markChannelAsRead(e)})),u(this,"getOldestVisiblePostId",(()=>Fi(this.props.postListIds))),u(this,"getLatestVisiblePostId",(()=>Di(this.props.postListIds))),u(this,"canLoadMorePosts",(async(e=Li.BEFORE_ID)=>{this.props.postListIds&&(this.state.loadingOlderPosts||this.state.loadingNewerPosts||(this.extraPagesLoaded>10?this.state.autoRetryEnable&&this.setState({autoRetryEnable:!1}):(this.props.atOldestPost||e!==Li.BEFORE_ID?this.props.atLatestPost||await this.getPostsAfter():await this.getPostsBefore(),this.extraPagesLoaded+=1)))})),u(this,"getPostsBefore",(async()=>{if(this.state.loadingOlderPosts)return;const e=this.getOldestVisiblePostId();this.setState({loadingOlderPosts:!0}),await this.callLoadPosts(this.props.channelId,e,Li.BEFORE_ID)})),u(this,"getPostsAfter",(async()=>{if(this.state.loadingNewerPosts)return;const e=this.getLatestVisiblePostId();this.setState({loadingNewerPosts:!0}),await this.callLoadPosts(this.props.channelId,e,Li.AFTER_ID)})),this.state={loadingNewerPosts:!1,loadingOlderPosts:!1,autoRetryEnable:!0},this.mounted=!1,this.autoRetriesCount=0,this.loadingMorePosts=null,this.extraPagesLoaded=0,this.actionsForPostList={loadOlderPosts:this.getPostsBefore,loadNewerPosts:this.getPostsAfter,checkAndSetMobileView:e.actions.checkAndSetMobileView,canLoadMorePosts:this.canLoadMorePosts,changeUnreadChunkTimeStamp:e.changeUnreadChunkTimeStamp,updateNewMessagesAtInChannel:this.props.actions.updateNewMessagesAtInChannel}}componentDidMount(){this.mounted=!0,this.props.channelId&&this.postsOnLoad(this.props.channelId)}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.postsOnLoad(this.props.channelId)}componentWillUnmount(){this.props.channelManuallyUnread||this.markChannelAsReadAndViewed(this.props.channelId),this.mounted=!1}render(){return this.props.postListIds?h(Uk,{loadingNewerPosts:this.state.loadingNewerPosts,loadingOlderPosts:this.state.loadingOlderPosts,atOldestPost:this.props.atOldestPost,atLatestPost:this.props.atLatestPost,focusedPostId:this.props.focusedPostId,channelId:this.props.channelId,autoRetryEnable:this.state.autoRetryEnable,actions:this.actionsForPostList,postListIds:this.props.formattedPostIds,latestPostTimeStamp:this.props.latestPostTimeStamp,latestAriaLabelFunc:this.props.latestAriaLabelFunc,latestPostId:this.props.latestPostId},"postlist-"+this.props.channelId):h(ji,{})}}const Bk=(e,t)=>!e.entities.posts.postsInChannel[t],Vk=zi((e=>Di(e)));var zk=p((function(){const e=Hi(),t=Ti(),n=mi();return function(s,i){let r,a,o,l,c=0,u=!1,d=!1;const{focusedPostId:h,unreadChunkTimeStamp:p,channelId:f}=i,m=s.views.channel,g=m.lastChannelViewTime[f],v=m.channelPrefetchStatus[f]===ce.STARTED,b=Ni(s,f);if(a=h&&0!==p?e(s,h,f):p?Ui(s,f,p):qi(s,f),a&&(r=a.order,u=!!a.recent,d=!!a.oldest),r&&(o=t(s,{postIds:r,lastViewedAt:g,indicateNewMessages:!0,channelId:f}),r.length)){const e=Vk(r),t=ss(s,e);c=t.create_at,l=n(s,t)}return{lastViewedAt:g,isFirstLoad:Bk(s,f),formattedPostIds:o,atLatestPost:u,atOldestPost:d,latestPostTimeStamp:c,postListIds:r,latestAriaLabelFunc:l,isPrefetchingInProcess:v,channelManuallyUnread:b}}}),(function(e){return{actions:E({loadUnreads:_a,loadPosts:Aa,loadLatestPosts:ka,loadPostsAround:Pa,checkAndSetMobileView:xa,syncPostsInChannel:Ta,markChannelAsViewed:Bi,markChannelAsRead:Vi,updateNewMessagesAtInChannel:Na},e)}}))(qk);var Wk="mqik-0a3960a1";class Gk extends f.PureComponent{constructor(e){super(e),u(this,"changeUnreadChunkTimeStamp",(e=>{this.setState({unreadChunkTimeStamp:e,loaderForChangeOfPostsChunk:!1},(()=>{window.requestAnimationFrame((()=>{this.setState({loaderForChangeOfPostsChunk:!1})}))}))})),this.state={unreadChunkTimeStamp:e.lastViewedAt,loaderForChangeOfPostsChunk:!1,channelLoading:e.channelLoading}}static getDerivedStateFromProps(e,t){return null===t.unreadChunkTimeStamp&&e.lastViewedAt?{unreadChunkTimeStamp:e.lastViewedAt}:e.channelLoading!==t.channelLoading?{unreadChunkTimeStamp:e.lastViewedAt,channelLoading:e.channelLoading}:null}render(){return this.props.channelLoading||this.state.loaderForChangeOfPostsChunk?m("div",{id:"post-list",className:g(Wk),children:[h("div",{className:"filter-x u3-filder-x",children:""}),h(ji,{})]}):m("div",{id:"post-list",className:g(Wk),role:"main",children:[h("div",{className:"filter-x u3-filder-x",children:""}),h(zk,{match:this.props.match,unreadChunkTimeStamp:this.state.unreadChunkTimeStamp,channelId:this.props.channelId,changeUnreadChunkTimeStamp:this.changeUnreadChunkTimeStamp,focusedPostId:this.props.focusedPostId})]})}}var Kk=p((function(){return function(e,t){let n;const s=Wi(e,t.match.params.team),i=Ve(e,t.channelId);let r=e.views.channel.lastChannelViewTime[t.channelId];i&&(i.type===ve.DM_CHANNEL&&i.teammate_id&&(n=Me(e,i.teammate_id)),r=i.last_post_at?r:i.last_post_at);const a=Gi(e),o=((e,t,n,s,i)=>{const r=e.params;if(r.postid)return!1;if(t&&n){if(t.type!==ve.DM_CHANNEL&&t.name!==r.identifier)return!0;if(t.type===ve.DM_CHANNEL&&s&&r.identifier!==`@${s.username}`)return!0;const e=n.id;return!!(t.team_id&&t.team_id!==e||i&&!i[e])}return!0})(t.match,i,s,n,a);return{lastViewedAt:(new Date).getTime(),channelLoading:o}}}))(Gk);var Yk="mqik-35bb03ec",Xk="mqik-53d2bd64",$k="mqik-069ba657",Qk="mqik-a098bb29";var Jk="mqik-0c1ddfac",Zk="mqik-bc60523f",eP="mqik-bdefb877",tP="mqik-d9206031",nP="mqik-a91414c6",sP="mqik-0f217d51",iP="mqik-b92d7979",rP="mqik-706cceaa",aP="mqik-11eeb1e6",oP="mqik-25c1b5c4";var lP=p((function(){return(e,t)=>{const n=ga(e,t.channelId);return{post:ss(e,n.postId)}}}),(function(e){return{actions:E({cancelReply:Ma},e)}}))((e=>h("div",{className:Jk,children:m("div",{className:Zk,children:[h("div",{className:eP,children:h(kA,{className:tP})}),m("div",{className:nP,children:[h("div",{className:sP,children:h(Wa,{userId:e.post.user_id,hideStatus:!0})}),h("div",{className:iP,children:h(b_,{post:e.post,actions:{toggleEmbedVisibility:()=>{}},appsEnabled:!1,children:h(k_,{post:e.post,isRHS:!1})})})]}),h("div",{className:rP,children:h("button",{className:aP,onClick:()=>{e.actions.cancelReply(e.channelId)},children:h(Ga,{className:oP})})})]})})));const cP=class extends f.PureComponent{constructor(e){super(e),u(this,"channelViewRef"),u(this,"getChannelView",(()=>this.channelViewRef.current)),u(this,"onClickCloseChannel",(()=>{this.props.actions.goToLastViewedChannel()})),u(this,"handleFocus",(e=>{e.preventDefault(),this.props.actions.selectChannel(this.props.channelId)})),this.state={url:e.match.url,channelId:e.channelId,focusedPostId:e.match.params.postid,deferredPostView:cP.createDeferredPostView(),showNextSteps:e.showNextSteps},this.channelViewRef=f.createRef()}static getDerivedStateFromProps(e,t){let n={};const s=e.match.params.postid;return e.match.url!==t.url&&e.channelId!==t.channelId&&(n={deferredPostView:cP.createDeferredPostView(),url:e.match.url,focusedPostId:s}),e.channelId!==t.channelId&&(n=l(o({},n),{channelId:e.channelId,focusedPostId:s})),s&&s!==t.focusedPostId&&(n=l(o({},n),{focusedPostId:s})),e.showNextSteps!==t.showNextSteps&&(n=l(o({},n),{showNextSteps:e.showNextSteps})),Object.keys(n).length?n:null}async componentDidMount(){!this.props.showNextSteps&&!this.props.showNextStepsTips||this.props.isOnboardingHidden||this.props.actions.setShowNextStepsView(!0),this.props.channelMemberLoading&&this.props.actions.getMyChannelMember(this.props.channelId),this.props.channelRolesLoading&&this.props.actions.getMyChannelMember(this.props.channelRole)}componentDidUpdate(e){this.props.channelMemberLoading&&e.channelId!==this.props.channelId&&this.props.actions.getMyChannelMember(this.props.channelId),this.props.channelRolesLoading&&e.channelRole!==this.props.channelRole&&this.props.actions.getRoleByName(this.props.channelRole),e.channelId===this.props.channelId&&e.channelIsArchived===this.props.channelIsArchived||this.props.channelIsArchived&&!this.props.viewArchivedChannels&&this.props.actions.goToLastViewedChannel(),this.props.match.url!==e.match.url&&this.props.showNextStepsEphemeral&&this.props.actions.setShowNextStepsView(!1)}render(){const{channelIsArchived:e,isMinimal:t,channelId:n,preData:s}=this.props;let i,r;this.props.deactivatedChannel?i=h("div",{className:"post-create__container",id:"post-create",children:m("div",{className:"channel-archived__message",children:[h($o,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a **deactivated user**. New messages cannot be posted."}),h("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel,children:h(v,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})})]})}):e?i=h("div",{className:"post-create__container",id:"post-create",children:m("div",{id:"channelArchivedMessage",className:"channel-archived__message",children:[h($o,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."}),h("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel,children:h(v,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})})]})}):this.props.channelRolesLoading||(i=h("div",{className:"post-create__container",id:"post-create",children:h(Cw,{getChannelView:this.getChannelView,channelId:n})})),this.props.hasReply&&!e&&(r=h(lP,{channelId:this.props.channelId}));const a=this.state.deferredPostView;return m("div",{ref:this.channelViewRef,className:g(Yk,{[Xk]:t}),onFocus:this.handleFocus,children:[h(jf,o({},this.props)),m("div",{className:g($k),children:[h(ww,{overlayType:"center"}),h(a,{channelId:this.props.channelId,match:s?s.match:this.props.match,focusedPostId:this.state.focusedPostId}),r,i]})]})}};let uP=cP;u(uP,"createDeferredPostView",(()=>function(e,t){class n extends f.PureComponent{constructor(e,t){super(e,t),this.state={shouldRender:!1}}componentDidMount(){window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>this.setState({shouldRender:!0})))}))}render(){return this.state.shouldRender?h(e,o({},this.props)):t}}return P(n,e)}(Kk,h("div",{id:"post-list",className:g(Qk,"a11y__region"),"data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0}))));const dP=C(((e,t)=>Ki(e,t)),(e=>Boolean(e&&e.delete_at)));var hP=_(p((function(){const e=Kt();return(t,n)=>{const s=e(t,{id:n.channelId}),i=Yi(t,s.id||""),r=ue(t),a=Xi(t,s.id||""),o="true"===r.EnableTutorial,l=as(t,ls.TUTORIAL_STEP,le(t),os.FINISHED),c="true"===r.ExperimentalViewArchivedChannels,u=Ia(t,s.id||"");let d=!0,h=!0,p="";if(s&&s.id){const e=$i(t),n=Qi(t);if(n[s.id]){h=!1;const t=n[s.id].values();for(const n of t){p=n,e[n]&&(d=!1);break}}}return{channelId:s?s.id:"",isMinimal:i,channelRole:p,channelRolesLoading:d,channelMemberLoading:h,deactivatedChannel:!!s&&dP(t,s.id),focusedPostId:t.views.channel.focusedPostId,showTutorial:o&&l<=os.INTRO_SCREENS,showNextStepsEphemeral:t.views.nextSteps.show,channelIsArchived:!!s&&0!==s.delete_at,viewArchivedChannels:c,isCloud:!1,preData:a,hasReply:u}}}),(function(e){return{actions:E({setShowNextStepsView:Vc,goToLastViewedChannel:ca,getProfiles:Ji,getContacts:Yo,getMyChannelMember:Zi,getRoleByName:er,selectChannel:zt},e)}}))(uP));var pP="mqik-a4e08f2d",fP="mqik-0ac00af3";var mP=p((function(e){return{team:oe(e),chatList:tr(e)}}))((e=>h("div",{className:pP,children:h("div",{className:g(fP),children:e.chatList.map(((e,t)=>h(hP,{channelId:e},e)))})})));function gP(e){return e.views.lhs.isOpen}var vP={},bP={},yP={exports:{}},CP=null,EP=["Webkit","Moz","O","ms"],wP=function(e){return SP.test(e)?e.toLowerCase():_P.test(e)?(function(e){return e.replace(kP,(function(e,t){return t?" "+t:""}))}(e)||e).toLowerCase():AP.test(e)?function(e){return e.replace(PP,(function(e,t,n){return t+" "+n.toLowerCase().split("").join(" ")}))}(e).toLowerCase():e.toLowerCase()},SP=/\s/,_P=/(_|-|\.|:)/,AP=/([a-z][A-Z]|[A-Z][a-z])/;var kP=/[\W_]+(.|$)/g;var PP=/(.)([A-Z]+)/g;var xP=wP;var TP=function(e){return xP(e).replace(/[\W_]+(.|$)/g,(function(e,t){return t?" "+t:""})).trim()};var NP={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},MP=function(e){CP||(CP=document.createElement("div"));var t=CP.style;if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),s=EP.length;s>=0;s--){var i=EP[s]+n;if(i in t)return i}return!1},IP=function(e){return TP(e).replace(/\s(\w)/g,(function(e,t){return t.toUpperCase()}))},OP={float:"cssFloat"},RP=function(e,t){return"number"!=typeof t||NP[e]?t:t+"px"};function LP(e,t,n){var s=OP[t];if(void 0===s&&(s=function(e){var t=IP(e),n=MP(t);return OP[t]=OP[e]=OP[n]=n,n}(t)),s){if(void 0===n)return e.style[s];e.style[s]=RP(s,n)}}function DP(e,t){for(var n in t)t.hasOwnProperty(n)&&LP(e,n,t[n])}function FP(){2===arguments.length?"string"==typeof arguments[1]?arguments[0].style.cssText=arguments[1]:DP(arguments[0],arguments[1]):LP(arguments[0],arguments[1],arguments[2])}yP.exports=FP,yP.exports.set=FP,yP.exports.get=function(e,t){return Array.isArray(t)?t.reduce((function(t,n){return t[n]=LP(e,n||""),t}),{}):LP(e,t||"")};var jP,HP={};jP=HP,Object.defineProperty(jP,"__esModule",{value:!0}),jP.default=function(e){return"string"==typeof e};var UP={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!1!==n)return n;if("undefined"!=typeof document){var e=document.createElement("div");(0,t.default)(e,{width:100,height:100,position:"absolute",top:-9999,overflow:"scroll",MsOverflowStyle:"scrollbar"}),document.body.appendChild(e),n=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else n=0;return n||0};var t=function(e){return e&&e.__esModule?e:{default:e}}(yP.exports);var n=!1}(UP);var qP={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return!1}}(qP);var BP={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=e.clientWidth,n=getComputedStyle(e),s=n.paddingLeft,i=n.paddingRight;return t-parseFloat(s)-parseFloat(i)}}(BP);var VP={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=e.clientHeight,n=getComputedStyle(e),s=n.paddingTop,i=n.paddingBottom;return t-parseFloat(s)-parseFloat(i)}}(VP);var zP={};Object.defineProperty(zP,"__esModule",{value:!0}),zP.containerStyleDefault={position:"relative",overflow:"hidden",width:"100%",height:"100%"},zP.containerStyleAutoHeight={height:"auto"},zP.viewStyleDefault={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"scroll",WebkitOverflowScrolling:"touch"},zP.viewStyleAutoHeight={position:"relative",top:void 0,left:void 0,right:void 0,bottom:void 0},zP.viewStyleUniversalInitial={overflow:"hidden",marginRight:0,marginBottom:0},zP.trackHorizontalStyleDefault={position:"absolute",height:6},zP.trackVerticalStyleDefault={position:"absolute",width:6},zP.thumbHorizontalStyleDefault={position:"relative",display:"block",height:"100%"},zP.thumbVerticalStyleDefault={position:"relative",display:"block",width:"100%"},zP.disableSelectStyle={userSelect:"none"},zP.disableSelectStyleReset={userSelect:""};var WP={};Object.defineProperty(WP,"__esModule",{value:!0});var GP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};WP.renderViewDefault=function(e){return KP.default.createElement("div",e)},WP.renderTrackHorizontalDefault=function(e){var t=e.style,n=YP(e,["style"]),s=GP({},t,{right:2,bottom:2,left:2,borderRadius:3});return KP.default.createElement("div",GP({style:s},n))},WP.renderTrackVerticalDefault=function(e){var t=e.style,n=YP(e,["style"]),s=GP({},t,{right:2,bottom:2,top:2,borderRadius:3});return KP.default.createElement("div",GP({style:s},n))},WP.renderThumbHorizontalDefault=function(e){var t=e.style,n=YP(e,["style"]),s=GP({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return KP.default.createElement("div",GP({style:s},n))},WP.renderThumbVerticalDefault=function(e){var t=e.style,n=YP(e,["style"]),s=GP({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return KP.default.createElement("div",GP({style:s},n))};var KP=function(e){return e&&e.__esModule?e:{default:e}}(d.exports);function YP(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),s=Cu.exports,i=g(s),r=g(yP.exports),a=d.exports,o=g(T.exports),l=g(HP),c=g(UP),u=g(qP),h=g(BP),p=g(VP),f=zP,m=WP;function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function o(e){var t;v(this,o);for(var n=arguments.length,s=Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];var r=b(this,(t=o.__proto__||Object.getPrototypeOf(o)).call.apply(t,[this,e].concat(s)));return r.getScrollLeft=r.getScrollLeft.bind(r),r.getScrollTop=r.getScrollTop.bind(r),r.getScrollWidth=r.getScrollWidth.bind(r),r.getScrollHeight=r.getScrollHeight.bind(r),r.getClientWidth=r.getClientWidth.bind(r),r.getClientHeight=r.getClientHeight.bind(r),r.getValues=r.getValues.bind(r),r.getThumbHorizontalWidth=r.getThumbHorizontalWidth.bind(r),r.getThumbVerticalHeight=r.getThumbVerticalHeight.bind(r),r.getScrollLeftForOffset=r.getScrollLeftForOffset.bind(r),r.getScrollTopForOffset=r.getScrollTopForOffset.bind(r),r.scrollLeft=r.scrollLeft.bind(r),r.scrollTop=r.scrollTop.bind(r),r.scrollToLeft=r.scrollToLeft.bind(r),r.scrollToTop=r.scrollToTop.bind(r),r.scrollToRight=r.scrollToRight.bind(r),r.scrollToBottom=r.scrollToBottom.bind(r),r.handleTrackMouseEnter=r.handleTrackMouseEnter.bind(r),r.handleTrackMouseLeave=r.handleTrackMouseLeave.bind(r),r.handleHorizontalTrackMouseDown=r.handleHorizontalTrackMouseDown.bind(r),r.handleVerticalTrackMouseDown=r.handleVerticalTrackMouseDown.bind(r),r.handleHorizontalThumbMouseDown=r.handleHorizontalThumbMouseDown.bind(r),r.handleVerticalThumbMouseDown=r.handleVerticalThumbMouseDown.bind(r),r.handleWindowResize=r.handleWindowResize.bind(r),r.handleScroll=r.handleScroll.bind(r),r.handleDrag=r.handleDrag.bind(r),r.handleDragEnd=r.handleDragEnd.bind(r),r.state={didMountUniversal:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,e),n(o,[{key:"componentDidMount",value:function(){this.addListeners(),this.update(),this.componentDidMountUniversal()}},{key:"componentDidMountUniversal",value:function(){this.props.universal&&this.setState({didMountUniversal:!0})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){this.removeListeners(),(0,s.cancel)(this.requestFrame),clearTimeout(this.hideTracksTimeout),clearInterval(this.detectScrollingInterval)}},{key:"getScrollLeft",value:function(){return this.view?this.view.scrollLeft:0}},{key:"getScrollTop",value:function(){return this.view?this.view.scrollTop:0}},{key:"getScrollWidth",value:function(){return this.view?this.view.scrollWidth:0}},{key:"getScrollHeight",value:function(){return this.view?this.view.scrollHeight:0}},{key:"getClientWidth",value:function(){return this.view?this.view.clientWidth:0}},{key:"getClientHeight",value:function(){return this.view?this.view.clientHeight:0}},{key:"getValues",value:function(){var e=this.view||{},t=e.scrollLeft,n=void 0===t?0:t,s=e.scrollTop,i=void 0===s?0:s,r=e.scrollWidth,a=void 0===r?0:r,o=e.scrollHeight,l=void 0===o?0:o,c=e.clientWidth,u=void 0===c?0:c,d=e.clientHeight,h=void 0===d?0:d;return{left:n/(a-u)||0,top:i/(l-h)||0,scrollLeft:n,scrollTop:i,scrollWidth:a,scrollHeight:l,clientWidth:u,clientHeight:h}}},{key:"getThumbHorizontalWidth",value:function(){var e=this.props,t=e.thumbSize,n=e.thumbMinSize,s=this.view,i=s.scrollWidth,r=s.clientWidth,a=(0,h.default)(this.trackHorizontal),o=Math.ceil(r/i*a);return a===o?0:t||Math.max(o,n)}},{key:"getThumbVerticalHeight",value:function(){var e=this.props,t=e.thumbSize,n=e.thumbMinSize,s=this.view,i=s.scrollHeight,r=s.clientHeight,a=(0,p.default)(this.trackVertical),o=Math.ceil(r/i*a);return a===o?0:t||Math.max(o,n)}},{key:"getScrollLeftForOffset",value:function(e){var t=this.view,n=t.scrollWidth,s=t.clientWidth;return e/((0,h.default)(this.trackHorizontal)-this.getThumbHorizontalWidth())*(n-s)}},{key:"getScrollTopForOffset",value:function(e){var t=this.view,n=t.scrollHeight,s=t.clientHeight;return e/((0,p.default)(this.trackVertical)-this.getThumbVerticalHeight())*(n-s)}},{key:"scrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollLeft=e)}},{key:"scrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollTop=e)}},{key:"scrollToLeft",value:function(){this.view&&(this.view.scrollLeft=0)}},{key:"scrollToTop",value:function(){this.view&&(this.view.scrollTop=0)}},{key:"scrollToRight",value:function(){this.view&&(this.view.scrollLeft=this.view.scrollWidth)}},{key:"scrollToBottom",value:function(){this.view&&(this.view.scrollTop=this.view.scrollHeight)}},{key:"addListeners",value:function(){if("undefined"!=typeof document&&this.view){var e=this.view,t=this.trackHorizontal,n=this.trackVertical,s=this.thumbHorizontal,i=this.thumbVertical;e.addEventListener("scroll",this.handleScroll),(0,c.default)()&&(t.addEventListener("mouseenter",this.handleTrackMouseEnter),t.addEventListener("mouseleave",this.handleTrackMouseLeave),t.addEventListener("mousedown",this.handleHorizontalTrackMouseDown),n.addEventListener("mouseenter",this.handleTrackMouseEnter),n.addEventListener("mouseleave",this.handleTrackMouseLeave),n.addEventListener("mousedown",this.handleVerticalTrackMouseDown),s.addEventListener("mousedown",this.handleHorizontalThumbMouseDown),i.addEventListener("mousedown",this.handleVerticalThumbMouseDown),window.addEventListener("resize",this.handleWindowResize))}}},{key:"removeListeners",value:function(){if("undefined"!=typeof document&&this.view){var e=this.view,t=this.trackHorizontal,n=this.trackVertical,s=this.thumbHorizontal,i=this.thumbVertical;e.removeEventListener("scroll",this.handleScroll),(0,c.default)()&&(t.removeEventListener("mouseenter",this.handleTrackMouseEnter),t.removeEventListener("mouseleave",this.handleTrackMouseLeave),t.removeEventListener("mousedown",this.handleHorizontalTrackMouseDown),n.removeEventListener("mouseenter",this.handleTrackMouseEnter),n.removeEventListener("mouseleave",this.handleTrackMouseLeave),n.removeEventListener("mousedown",this.handleVerticalTrackMouseDown),s.removeEventListener("mousedown",this.handleHorizontalThumbMouseDown),i.removeEventListener("mousedown",this.handleVerticalThumbMouseDown),window.removeEventListener("resize",this.handleWindowResize),this.teardownDragging())}}},{key:"handleScroll",value:function(e){var t=this,n=this.props,s=n.onScroll,i=n.onScrollFrame;s&&s(e),this.update((function(e){var n=e.scrollLeft,s=e.scrollTop;t.viewScrollLeft=n,t.viewScrollTop=s,i&&i(e)})),this.detectScrolling()}},{key:"handleScrollStart",value:function(){var e=this.props.onScrollStart;e&&e(),this.handleScrollStartAutoHide()}},{key:"handleScrollStartAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleScrollStop",value:function(){var e=this.props.onScrollStop;e&&e(),this.handleScrollStopAutoHide()}},{key:"handleScrollStopAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleWindowResize",value:function(){this.update()}},{key:"handleHorizontalTrackMouseDown",value:function(e){e.preventDefault();var t=e.target,n=e.clientX,s=t.getBoundingClientRect().left,i=this.getThumbHorizontalWidth(),r=Math.abs(s-n)-i/2;this.view.scrollLeft=this.getScrollLeftForOffset(r)}},{key:"handleVerticalTrackMouseDown",value:function(e){e.preventDefault();var t=e.target,n=e.clientY,s=t.getBoundingClientRect().top,i=this.getThumbVerticalHeight(),r=Math.abs(s-n)-i/2;this.view.scrollTop=this.getScrollTopForOffset(r)}},{key:"handleHorizontalThumbMouseDown",value:function(e){e.preventDefault(),this.handleDragStart(e);var t=e.target,n=e.clientX,s=t.offsetWidth,i=t.getBoundingClientRect().left;this.prevPageX=s-(n-i)}},{key:"handleVerticalThumbMouseDown",value:function(e){e.preventDefault(),this.handleDragStart(e);var t=e.target,n=e.clientY,s=t.offsetHeight,i=t.getBoundingClientRect().top;this.prevPageY=s-(n-i)}},{key:"setupDragging",value:function(){(0,r.default)(document.body,f.disableSelectStyle),document.addEventListener("mousemove",this.handleDrag),document.addEventListener("mouseup",this.handleDragEnd),document.onselectstart=u.default}},{key:"teardownDragging",value:function(){(0,r.default)(document.body,f.disableSelectStyleReset),document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("mouseup",this.handleDragEnd),document.onselectstart=void 0}},{key:"handleDragStart",value:function(e){this.dragging=!0,e.stopImmediatePropagation(),this.setupDragging()}},{key:"handleDrag",value:function(e){if(this.prevPageX){var t=e.clientX,n=-this.trackHorizontal.getBoundingClientRect().left+t-(this.getThumbHorizontalWidth()-this.prevPageX);this.view.scrollLeft=this.getScrollLeftForOffset(n)}if(this.prevPageY){var s=e.clientY,i=-this.trackVertical.getBoundingClientRect().top+s-(this.getThumbVerticalHeight()-this.prevPageY);this.view.scrollTop=this.getScrollTopForOffset(i)}return!1}},{key:"handleDragEnd",value:function(){this.dragging=!1,this.prevPageX=this.prevPageY=0,this.teardownDragging(),this.handleDragEndAutoHide()}},{key:"handleDragEndAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleTrackMouseEnter",value:function(){this.trackMouseOver=!0,this.handleTrackMouseEnterAutoHide()}},{key:"handleTrackMouseEnterAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleTrackMouseLeave",value:function(){this.trackMouseOver=!1,this.handleTrackMouseLeaveAutoHide()}},{key:"handleTrackMouseLeaveAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"showTracks",value:function(){clearTimeout(this.hideTracksTimeout),(0,r.default)(this.trackHorizontal,{opacity:1}),(0,r.default)(this.trackVertical,{opacity:1})}},{key:"hideTracks",value:function(){var e=this;if(!this.dragging&&!this.scrolling&&!this.trackMouseOver){var t=this.props.autoHideTimeout;clearTimeout(this.hideTracksTimeout),this.hideTracksTimeout=setTimeout((function(){(0,r.default)(e.trackHorizontal,{opacity:0}),(0,r.default)(e.trackVertical,{opacity:0})}),t)}}},{key:"detectScrolling",value:function(){var e=this;this.scrolling||(this.scrolling=!0,this.handleScrollStart(),this.detectScrollingInterval=setInterval((function(){e.lastViewScrollLeft===e.viewScrollLeft&&e.lastViewScrollTop===e.viewScrollTop&&(clearInterval(e.detectScrollingInterval),e.scrolling=!1,e.handleScrollStop()),e.lastViewScrollLeft=e.viewScrollLeft,e.lastViewScrollTop=e.viewScrollTop}),100))}},{key:"raf",value:function(e){var t=this;this.requestFrame&&i.default.cancel(this.requestFrame),this.requestFrame=(0,i.default)((function(){t.requestFrame=void 0,e()}))}},{key:"update",value:function(e){var t=this;this.raf((function(){return t._update(e)}))}},{key:"_update",value:function(e){var t=this.props,n=t.onUpdate,s=t.hideTracksWhenNotNeeded,i=this.getValues();if((0,c.default)()){var a=i.scrollLeft,o=i.clientWidth,l=i.scrollWidth,u=(0,h.default)(this.trackHorizontal),d=this.getThumbHorizontalWidth(),f={width:d,transform:"translateX("+a/(l-o)*(u-d)+"px)"},m=i.scrollTop,g=i.clientHeight,v=i.scrollHeight,b=(0,p.default)(this.trackVertical),y=this.getThumbVerticalHeight(),C={height:y,transform:"translateY("+m/(v-g)*(b-y)+"px)"};if(s){var E={visibility:l>o?"visible":"hidden"},w={visibility:v>g?"visible":"hidden"};(0,r.default)(this.trackHorizontal,E),(0,r.default)(this.trackVertical,w)}(0,r.default)(this.thumbHorizontal,f),(0,r.default)(this.thumbVertical,C)}n&&n(i),"function"==typeof e&&e(i)}},{key:"render",value:function(){var e=this,n=(0,c.default)(),s=this.props;s.onScroll,s.onScrollFrame,s.onScrollStart,s.onScrollStop,s.onUpdate;var i=s.renderView,r=s.renderTrackHorizontal,o=s.renderTrackVertical,u=s.renderThumbHorizontal,d=s.renderThumbVertical,h=s.tagName;s.hideTracksWhenNotNeeded;var p=s.autoHide;s.autoHideTimeout;var m=s.autoHideDuration;s.thumbSize,s.thumbMinSize;var g=s.universal,v=s.autoHeight,b=s.autoHeightMin,y=s.autoHeightMax,C=s.style,E=s.children,w=function(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}(s,["onScroll","onScrollFrame","onScrollStart","onScrollStop","onUpdate","renderView","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","tagName","hideTracksWhenNotNeeded","autoHide","autoHideTimeout","autoHideDuration","thumbSize","thumbMinSize","universal","autoHeight","autoHeightMin","autoHeightMax","style","children"]),S=this.state.didMountUniversal,_=t({},f.containerStyleDefault,v&&t({},f.containerStyleAutoHeight,{minHeight:b,maxHeight:y}),C),A=t({},f.viewStyleDefault,{marginRight:n?-n:0,marginBottom:n?-n:0},v&&t({},f.viewStyleAutoHeight,{minHeight:(0,l.default)(b)?"calc("+b+" + "+n+"px)":b+n,maxHeight:(0,l.default)(y)?"calc("+y+" + "+n+"px)":y+n}),v&&g&&!S&&{minHeight:b,maxHeight:y},g&&!S&&f.viewStyleUniversalInitial),k={transition:"opacity "+m+"ms",opacity:0},P=t({},f.trackHorizontalStyleDefault,p&&k,(!n||g&&!S)&&{display:"none"}),x=t({},f.trackVerticalStyleDefault,p&&k,(!n||g&&!S)&&{display:"none"});return(0,a.createElement)(h,t({},w,{style:_,ref:function(t){e.container=t}}),[(0,a.cloneElement)(i({style:A}),{key:"view",ref:function(t){e.view=t}},E),(0,a.cloneElement)(r({style:P}),{key:"trackHorizontal",ref:function(t){e.trackHorizontal=t}},(0,a.cloneElement)(u({style:f.thumbHorizontalStyleDefault}),{ref:function(t){e.thumbHorizontal=t}})),(0,a.cloneElement)(o({style:x}),{key:"trackVertical",ref:function(t){e.trackVertical=t}},(0,a.cloneElement)(d({style:f.thumbVerticalStyleDefault}),{ref:function(t){e.thumbVertical=t}}))])}}]),o}(a.Component);e.default=y,y.propTypes={onScroll:o.default.func,onScrollFrame:o.default.func,onScrollStart:o.default.func,onScrollStop:o.default.func,onUpdate:o.default.func,renderView:o.default.func,renderTrackHorizontal:o.default.func,renderTrackVertical:o.default.func,renderThumbHorizontal:o.default.func,renderThumbVertical:o.default.func,tagName:o.default.string,thumbSize:o.default.number,thumbMinSize:o.default.number,hideTracksWhenNotNeeded:o.default.bool,autoHide:o.default.bool,autoHideTimeout:o.default.number,autoHideDuration:o.default.number,autoHeight:o.default.bool,autoHeightMin:o.default.oneOfType([o.default.number,o.default.string]),autoHeightMax:o.default.oneOfType([o.default.number,o.default.string]),universal:o.default.bool,style:o.default.object,children:o.default.node},y.defaultProps={renderView:m.renderViewDefault,renderTrackHorizontal:m.renderTrackHorizontalDefault,renderTrackVertical:m.renderTrackVerticalDefault,renderThumbHorizontal:m.renderThumbHorizontalDefault,renderThumbVertical:m.renderThumbVerticalDefault,tagName:"div",thumbMinSize:30,hideTracksWhenNotNeeded:!1,autoHide:!1,autoHideTimeout:1e3,autoHideDuration:200,autoHeight:!1,autoHeightMin:0,autoHeightMax:200,universal:!1}}(bP),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Scrollbars=void 0;var t=function(e){return e&&e.__esModule?e:{default:e}}(bP);e.default=t.default,e.Scrollbars=t.default}(vP);var XP={exports:{}};XP.exports=function(){var e=void 0;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e||"undefined"==typeof process||"node"!==process.title||(e=setImmediate);var t=e=e||function(e){window.setTimeout(e,1e3/60)},n=Array.prototype.concat,s=Array.prototype.slice;function i(e,t){for(var i=arguments.length,r=Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(t,n.call(r,s.call(a)))}}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function a(e){return t(e)}function o(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var l={};function c(e){if(l[e])return l[e];var t=e.replace("#","");3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n=t.match(/.{2}/g);if(!n||n.length<3)throw new Error("Expected a color string of format #rrggbb");var s={r:parseInt(n[0],16),g:parseInt(n[1],16),b:parseInt(n[2],16)};return l[e]=s,s}function u(e,t,n){var s=e.toString(16),i=t.toString(16),r=n.toString(16);return"#"+(s=s.length<2?"0"+s:s)+(i=i.length<2?"0"+i:i)+(r=r.length<2?"0"+r:r)}var d=Object.freeze({bind:i,extend:r,onFrame:a,removeFirst:o,hexToRGB:c,rgbToHex:u});function h(e,t,n,s,i){return s+(e-t)/(n-t)*(i-s)}function p(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments[5],a=c(t),o=c(n),l=Math.floor(h(e,s,i,a.r,o.r)),d=Math.floor(h(e,s,i,a.g,o.g)),p=Math.floor(h(e,s,i,a.b,o.b));return r?"rgb("+l+","+d+","+p+")":u(l,d,p)}function f(e){return e*Math.PI/180}function m(e){return 180*e/Math.PI}var g=Object.freeze({mapValueInRange:h,interpolateColor:p,degreesToRadians:f,radiansToDegrees:m});function v(e){return 3.62*(e-30)+194}function b(e){return(e-194)/3.62+30}function y(e){return 3*(e-8)+25}function C(e){return(e-25)/3+8}var E=Object.freeze({tensionFromOrigamiValue:v,origamiValueFromTension:b,frictionFromOrigamiValue:y,origamiFromFriction:C}),w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_=function(){function e(){w(this,e),this.springSystem=null}return e.prototype.run=function(){var e=P.call(this);a((function(){e.loop(Date.now())}))},e}(),A=function(){function e(t){w(this,e),this.springSystem=null,this.time=0,this.running=!1,this.timestep=t||16.667}return e.prototype.run=function(){var e=P.call(this);if(!this.running){for(this.running=!0;!e.getIsIdle();)e.loop(this.time+=this.timestep);this.running=!1}},e}(),k=function(){function e(){w(this,e),this.springSystem=null,this.time=0,this.running=!1}return e.prototype.run=function(){},e.prototype.step=function(e){P.call(this).loop(this.time+=e)},e}();function P(){if(null==this.springSystem)throw new Error("cannot run looper without a springSystem");return this.springSystem}var x=Object.freeze({AnimationLooper:_,SimulationLooper:A,SteppingSimulationLooper:k}),T=function(){function e(t,n){w(this,e),this.bounciness=t,this.speed=n;var s=this.normalize(t/1.7,0,20);s=this.projectNormal(s,0,.8);var i=this.normalize(n/1.7,0,20);this.bouncyTension=this.projectNormal(i,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(s,this.b3Nobounce(this.bouncyTension),.01)}return e.prototype.normalize=function(e,t,n){return(e-t)/(n-t)},e.prototype.projectNormal=function(e,t,n){return t+e*(n-t)},e.prototype.linearInterpolation=function(e,t,n){return e*n+(1-e)*t},e.prototype.quadraticOutInterpolation=function(e,t,n){return this.linearInterpolation(2*e-e*e,t,n)},e.prototype.b3Friction1=function(e){return 7e-4*Math.pow(e,3)-.031*Math.pow(e,2)+.64*e+1.28},e.prototype.b3Friction2=function(e){return 44e-6*Math.pow(e,3)-.006*Math.pow(e,2)+.36*e+2},e.prototype.b3Friction3=function(e){return 45e-8*Math.pow(e,3)-332e-6*Math.pow(e,2)+.1078*e+5.84},e.prototype.b3Nobounce=function(e){return e<=18?this.b3Friction1(e):e>18&&e<=44?this.b3Friction2(e):this.b3Friction3(e)},e}(),N=function(){function e(t,n){w(this,e),this.tension=t,this.friction=n}return e.fromOrigamiTensionAndFriction=function(t,n){return new e(v(t),y(n))},e.fromBouncinessAndSpeed=function(t,n){var s=new T(t,n);return e.fromOrigamiTensionAndFriction(s.bouncyTension,s.bouncyFriction)},e.coastingConfigWithOrigamiFriction=function(t){return new e(0,y(t))},e}();N.DEFAULT_ORIGAMI_SPRING_CONFIG=N.fromOrigamiTensionAndFriction(40,7);var M=function e(){w(this,e),this.position=0,this.velocity=0},I=function(){function e(t){w(this,e),this.listeners=[],this._startValue=0,this._currentState=new M,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new M,this._restSpeedThreshold=.001,this._tempState=new M,this._timeAccumulator=0,this._wasAtRest=!0,this._id="s"+e._ID++,this._springSystem=t}return e.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},e.prototype.getId=function(){return this._id},e.prototype.setSpringConfig=function(e){return this._springConfig=e,this},e.prototype.getSpringConfig=function(){return this._springConfig},e.prototype.setCurrentValue=function(e,t){return this._startValue=e,this._currentState.position=e,t||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},e.prototype.getStartValue=function(){return this._startValue},e.prototype.getCurrentValue=function(){return this._currentState.position},e.prototype.getCurrentDisplacementDistance=function(){return this.getDisplacementDistanceForState(this._currentState)},e.prototype.getDisplacementDistanceForState=function(e){return Math.abs(this._endValue-e.position)},e.prototype.setEndValue=function(e){if(this._endValue===e&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=e,this._springSystem.activateSpring(this.getId());for(var t=0,n=this.listeners.length;t<n;t++){var s=this.listeners[t].onSpringEndStateChange;s&&s(this)}return this},e.prototype.getEndValue=function(){return this._endValue},e.prototype.setVelocity=function(e){return e===this._currentState.velocity||(this._currentState.velocity=e,this._springSystem.activateSpring(this.getId())),this},e.prototype.getVelocity=function(){return this._currentState.velocity},e.prototype.setRestSpeedThreshold=function(e){return this._restSpeedThreshold=e,this},e.prototype.getRestSpeedThreshold=function(){return this._restSpeedThreshold},e.prototype.setRestDisplacementThreshold=function(e){this._displacementFromRestThreshold=e},e.prototype.getRestDisplacementThreshold=function(){return this._displacementFromRestThreshold},e.prototype.setOvershootClampingEnabled=function(e){return this._overshootClampingEnabled=e,this},e.prototype.isOvershootClampingEnabled=function(){return this._overshootClampingEnabled},e.prototype.isOvershooting=function(){var e=this._startValue,t=this._endValue;return this._springConfig.tension>0&&(e<t&&this.getCurrentValue()>t||e>t&&this.getCurrentValue()<t)},e.prototype.advance=function(t,n){var s=this.isAtRest();if(!s||!this._wasAtRest){var i=n;n>e.MAX_DELTA_TIME_SEC&&(i=e.MAX_DELTA_TIME_SEC),this._timeAccumulator+=i;for(var r=this._springConfig.tension,a=this._springConfig.friction,o=this._currentState.position,l=this._currentState.velocity,c=this._tempState.position,u=this._tempState.velocity,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0,g=void 0,v=void 0,b=void 0;this._timeAccumulator>=e.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=e.SOLVER_TIMESTEP_SEC,this._timeAccumulator<e.SOLVER_TIMESTEP_SEC&&(this._previousState.position=o,this._previousState.velocity=l),d=l,h=r*(this._endValue-c)-a*l,c=o+d*e.SOLVER_TIMESTEP_SEC*.5,p=u=l+h*e.SOLVER_TIMESTEP_SEC*.5,f=r*(this._endValue-c)-a*u,c=o+p*e.SOLVER_TIMESTEP_SEC*.5,m=u=l+f*e.SOLVER_TIMESTEP_SEC*.5,g=r*(this._endValue-c)-a*u,c=o+m*e.SOLVER_TIMESTEP_SEC,v=u=l+g*e.SOLVER_TIMESTEP_SEC,b=1/6*(h+2*(f+g)+(r*(this._endValue-c)-a*u)),o+=1/6*(d+2*(p+m)+v)*e.SOLVER_TIMESTEP_SEC,l+=b*e.SOLVER_TIMESTEP_SEC;this._tempState.position=c,this._tempState.velocity=u,this._currentState.position=o,this._currentState.velocity=l,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/e.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),s=!0);var y=!1;this._wasAtRest&&(this._wasAtRest=!1,y=!0);var C=!1;s&&(this._wasAtRest=!0,C=!0),this.notifyPositionUpdated(y,C)}},e.prototype.notifyPositionUpdated=function(e,t){for(var n=0,s=this.listeners.length;n<s;n++){var i=this.listeners[n];e&&i.onSpringActivate&&i.onSpringActivate(this),i.onSpringUpdate&&i.onSpringUpdate(this),t&&i.onSpringAtRest&&i.onSpringAtRest(this)}},e.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},e.prototype.wasAtRest=function(){return this._wasAtRest},e.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},e.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},e.prototype._interpolate=function(e){this._currentState.position=this._currentState.position*e+this._previousState.position*(1-e),this._currentState.velocity=this._currentState.velocity*e+this._previousState.velocity*(1-e)},e.prototype.getListeners=function(){return this.listeners},e.prototype.addListener=function(e){return this.listeners.push(e),this},e.prototype.removeListener=function(e){return o(this.listeners,e),this},e.prototype.removeAllListeners=function(){return this.listeners=[],this},e.prototype.currentValueIsApproximately=function(e){return Math.abs(this.getCurrentValue()-e)<=this.getRestDisplacementThreshold()},e}();I._ID=0,I.MAX_DELTA_TIME_SEC=.064,I.SOLVER_TIMESTEP_SEC=.001;var O=function(){function e(t){w(this,e),this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={},this.looper=t||new _,this.looper.springSystem=this}return e.prototype.setLooper=function(e){this.looper=e,e.springSystem=this},e.prototype.createSpring=function(e,t){var n=void 0;return n=void 0===e||void 0===t?N.DEFAULT_ORIGAMI_SPRING_CONFIG:N.fromOrigamiTensionAndFriction(e,t),this.createSpringWithConfig(n)},e.prototype.createSpringWithBouncinessAndSpeed=function(e,t){var n=void 0;return n=void 0===e||void 0===t?N.DEFAULT_ORIGAMI_SPRING_CONFIG:N.fromBouncinessAndSpeed(e,t),this.createSpringWithConfig(n)},e.prototype.createSpringWithConfig=function(e){var t=new I(this);return this.registerSpring(t),t.setSpringConfig(e),t},e.prototype.getIsIdle=function(){return this._isIdle},e.prototype.getSpringById=function(e){return this._springRegistry[e]},e.prototype.getAllSprings=function(){var e=[];for(var t in this._springRegistry)this._springRegistry.hasOwnProperty(t)&&e.push(this._springRegistry[t]);return e},e.prototype.registerSpring=function(e){this._springRegistry[e.getId()]=e},e.prototype.deregisterSpring=function(e){o(this._activeSprings,e),delete this._springRegistry[e.getId()]},e.prototype.advance=function(e,t){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var n=0,s=this._activeSprings.length;n<s;n++){var i=this._activeSprings[n];i.systemShouldAdvance()?i.advance(e/1e3,t/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(i))}for(;this._idleSpringIndices.length>0;){var r=this._idleSpringIndices.pop();r>=0&&this._activeSprings.splice(r,1)}},e.prototype.loop=function(e){var t=void 0;-1===this._lastTimeMillis&&(this._lastTimeMillis=e-1);var n=e-this._lastTimeMillis;this._lastTimeMillis=e;var s=0,i=this.listeners.length;for(s=0;s<i;s++)(t=this.listeners[s]).onBeforeIntegrate&&t.onBeforeIntegrate(this);for(this.advance(e,n),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),s=0;s<i;s++)(t=this.listeners[s]).onAfterIntegrate&&t.onAfterIntegrate(this);this._isIdle||this.looper.run()},e.prototype.activateSpring=function(e){var t=this._springRegistry[e];-1===this._activeSprings.indexOf(t)&&this._activeSprings.push(t),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.removeListener=function(e){o(this.listeners,e)},e.prototype.removeAllListeners=function(){this.listeners=[]},e}();return S({},x,{OrigamiValueConverter:E,MathUtil:g,Spring:I,SpringConfig:N,SpringSystem:O,util:S({},d,g)})}();var $P=za.jsx;var QP=d.exports.forwardRef((function(e,t){return $P("svg",l(o({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:$P("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}))}));var JP="mqik-e9623fc4",ZP="mqik-eda00eab",ex="mqik-13b1ae77",tx="mqik-16d43afe",nx="mqik-a70f0c5b",sx="mqik-b1c0de58",ix="mqik-9b4edf97",rx="mqik-1c2e67da",ax=e=>h("div",{children:"Shared"});var ox="mqik-eaeccb35",lx=e=>{const{unreadMentions:t}=e;return t>0&&t<100?h("span",{className:ox,children:t}):t>99?h("span",{className:ox,children:"9+"}):null};var cx="mqik-745f6b5a",ux="mqik-7f6f6a17",dx="mqik-cf411b3f";class hx extends f.PureComponent{render(){return 0!==this.props.channel.delete_at?h("i",{className:"icon icon-archive-outline"}):this.props.hasDraft?m("div",{className:cx,children:[this.props.icon,h("span",{className:ux,children:h(kA,{className:dx})})]}):this.props.icon}}function px(e,t,n){return e&&Boolean(e.message.trim()||e.fileInfos.length||e.uploadsInProgress.length)&&t!==(null==n?void 0:n.id)}var fx=p((function(e,t){var n;const s=B(e);return{hasDraft:px(!!(null==(n=t.channel)?void 0:n.id)&&ts(e,zn.DRAFT,t.channel.id),s,t.channel)}}),(function(e){return{actions:E({},e)}}))(hx);var mx="mqik-919643f2",gx="mqik-96ed684f",vx="mqik-6ad1ab83",bx="mqik-433de003",yx="mqik-580175b4";class Cx extends f.PureComponent{constructor(e){super(e),u(this,"labelRef"),u(this,"gmItemRef"),u(this,"enableToolTipIfNeeded",(()=>{const e=this.gmItemRef.current||this.labelRef.current,t=e&&e.offsetWidth<e.scrollWidth;this.setState({showTooltip:Boolean(t)})})),u(this,"getAriaLabel",(()=>{const{label:e,ariaLabelPrefix:t,unreadMentions:n}=this.props;let s=e;return t&&(s+=` ${t}`),1===n?s+=` ${n} ${be("accessibility.sidebar.types.mention","mention")}`:n>1&&(s+=` ${n} ${be("accessibility.sidebar.types.mentions","mentions")}`),this.showChannelAsUnread()&&0===n&&(s+=` ${be("accessibility.sidebar.types.unread","unread")}`),s.toLowerCase()})),u(this,"removeTooltipLink",(()=>{var e,t;return null==(t=null==(e=this.gmItemRef.current)?void 0:e.removeAttribute)?void 0:t.call(e,"aria-describedby")})),u(this,"handleChannelClick",(e=>{this.handleSelectChannel(e)})),u(this,"handleSelectChannel",(e=>{e.defaultPrevented||0!==e.button||(this.props.actions.addChatId(this.props.channel.id),rt(e)?(e.preventDefault(),this.props.actions.multiSelectChannelAdd(this.props.channel.id)):this.props.actions.clearChannelSelection())})),u(this,"handleMenuToggle",(e=>this.setState({isMenuOpen:e}))),u(this,"showChannelAsUnread",(()=>this.props.unreadMentions>0||this.props.unreadMsgs>0&&this.props.showUnreadForMsgs)),this.labelRef=f.createRef(),this.gmItemRef=f.createRef(),this.state={isMenuOpen:!1,showTooltip:!1}}componentDidMount(){this.enableToolTipIfNeeded()}componentDidUpdate(e){e.label!==this.props.label&&this.enableToolTipIfNeeded()}render(){const{link:e,label:t,channel:n,unreadMentions:s,icon:i,isMuted:r}=this.props;let a=h("span",{className:g("SidebarChannelLinkLabel",{truncated:this.state.showTooltip}),children:ym(t)});const o=m(k,{children:[h(fx,{channel:n,icon:i}),h("div",{className:g(vx,"SidebarChannelLinkLabel_wrapper"),ref:this.labelRef,children:a}),m("div",{className:g(bx),children:[h(Qa,{value:n.last_post_at||n.create_at,className:g(yx),useSemanticOutput:!0,useTime:!1,units:["now","second","minute","hour","Today","Yesterday"]}),h(lx,{unreadMentions:s})]})]}),l=g(mx,["SidebarLink",{menuOpen:this.state.isMenuOpen,muted:r,[gx]:this.showChannelAsUnread(),selected:!1}]);let c=h(j,{className:l,"data-group":`sidebarItem_${n.name}`,"aria-label":this.getAriaLabel(),to:e,onClick:this.handleChannelClick,tabIndex:this.props.isCollapsed?-1:0,children:o});return c=h(j,{className:l,"data-group":`sidebarItem_${n.name}`,"aria-label":this.getAriaLabel(),to:e,onClick:this.handleChannelClick,onContextMenu:e=>e.preventDefault(),tabIndex:this.props.isCollapsed?-1:0,children:o}),c}}var Ex=p((function(e,t){const n=Yt(e)[t.channel.id];let s=0,i=0,r=!0;const a=bi(e);return n&&(s=a?n.mention_count_root:n.mention_count,t.channel&&(i=nr(a,t.channel,n)),n.notify_props&&(r=n.notify_props.mark_unread!==tn.MENTION)),{unreadMentions:s,unreadMsgs:i,showUnreadForMsgs:r,isMuted:Qt(n),isChannelSelected:sr(e,t.channel.id)}}),(function(e){return{actions:E({clearChannelSelection:rl,multiSelectChannelTo:ol,multiSelectChannelAdd:al,addChatId:ll},e)}}))(Cx);class wx extends f.PureComponent{constructor(){super(...arguments),u(this,"handleLeavePublicChannel",(()=>{this.props.actions.leaveChannel(this.props.channel.id)})),u(this,"handleLeavePrivateChannel",(()=>{aa({id:this.props.channel.id,display_name:this.props.channel.display_name})})),u(this,"getCloseHandler",(()=>{const{channel:e}=this.props;return e.type===ve.OPEN_CHANNEL&&e.name!==ve.DEFAULT_CHANNEL?this.handleLeavePublicChannel:e.type===ve.PRIVATE_CHANNEL?this.handleLeavePrivateChannel:null})),u(this,"getIcon",(()=>{const{channel:e}=this.props;return e.shared?h(ax,{className:"icon",channelType:e.type,withTooltip:!0}):h(so,{src:Pe.getChannelPictureUrl(e.id,e.last_picture_update),size:"lg",status:"",wrapperClass:"DirectChannel__profile-picture",newStatusIcon:!0})}))}render(){const{channel:e,currentTeamName:t}=this.props;let n;return e.type===ve.OPEN_CHANNEL?n=be("accessibility.sidebar.types.public","public channel"):e.type===ve.PRIVATE_CHANNEL&&(n=be("accessibility.sidebar.types.private","private channel")),h(Ex,{channel:e,link:`/${t}/group/${e.name}`,label:e.display_name,ariaLabelPrefix:n,closeHandler:this.getCloseHandler(),icon:this.getIcon(),isCollapsed:!1})}}var Sx=p(null,(function(e){return{actions:E({leaveChannel:oa},e)}}))(wx);var _x="mqik-80f31a48",Ax="mqik-1e85479b";class kx extends f.PureComponent{constructor(e){super(e),u(this,"handleLeaveChannel",(e=>{const t=this.props.channel.teammate_id,n=ve.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,s=this.props.currentUserId;this.props.actions.savePreferences(s,[{user_id:s,category:n,name:t,value:"false"}]).then(e),this.props.actions.leaveDirectChannel(this.props.channel.name),this.props.active&&je.push(`/${this.props.currentTeamName}/channels/${this.props.redirectChannel}`)})),u(this,"onSvgLoadError",(()=>{this.setState({svgErrorUrl:this.props.botIconUrl})})),u(this,"onSvgLoad",(()=>{this.setState({svgErrorUrl:null})})),u(this,"getIcon",(()=>{const{channel:e,teammate:t}=this.props;if(!t)return null;if(t.id&&t.delete_at)return h("i",{className:"icon icon-archive-outline"});let n="";return"online"===e.status?n="status-online":"away"===e.status?n="status-away":"dnd"===e.status&&(n="status-dnd"),h(so,{src:Pe.getProfilePictureUrl(t.id,t.last_picture_update),size:"lg",status:t.is_bot?"":e.status,wrapperClass:_x,newStatusIcon:!0,statusClass:g(Ax,n)})})),this.state={svgErrorUrl:null}}render(){const{channel:e,teammate:t,currentTeamName:n}=this.props;if(!t)return null;let s=e.display_name;return this.props.currentUserId===t.id&&(s=this.props.intl.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:e.display_name})),h(Ex,{teammateId:t.id,channel:e,link:`/${n}/messages/@${t.username}`,label:s,closeHandler:this.handleLeaveChannel,icon:this.getIcon(),isCollapsed:this.props.isCollapsed})}}var Px=S(kx);var xx=p((function(e,t){const n=Me(e,t.channel.teammate_id),s=xe(e),i=oe(e),r=Wt(e,i.id),a=B(e),o=t.channel.id===a;return{teammate:n,currentUserId:s.id,redirectChannel:r,active:o,botIconUrl:(l=n,l&&l.is_bot&&l.bot_last_icon_update?`${Pe.getBotRoute(l.id)}/icon?_=${l.bot_last_icon_update||0}`:null)};var l}),(function(e){return{actions:E({savePreferences:Gt,leaveDirectChannel:la},e)}}))(Px);class Tx extends f.PureComponent{constructor(){super(...arguments),u(this,"handleLeaveChannel",(e=>{const t=this.props.channel.id,n=ve.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,s=this.props.currentUserId;this.props.actions.savePreferences(s,[{user_id:s,category:n,name:t,value:"false"}]).then(e),this.props.active&&je.push(`/${this.props.currentTeamName}/channels/${this.props.redirectChannel}`)})),u(this,"getIcon",(()=>h("div",{className:"status status--group",children:this.props.membersCount})))}render(){const{channel:e,currentTeamName:t}=this.props;return h(Ex,{channel:e,link:`/${t}/messages/${e.name}`,label:e.display_name,closeHandler:this.handleLeaveChannel,icon:this.getIcon(),isCollapsed:this.props.isCollapsed})}}var Nx=p((function(e,t){const n=xe(e),s=oe(e),i=Wt(e,s.id),r=B(e),a=t.channel.id===r,o=ir(e);let l=0;if(o&&o[t.channel.id]){const e=o[t.channel.id];l=e.size,e.has(n.id)&&l--}return{currentUserId:n.id,redirectChannel:i,active:a,membersCount:l}}),(function(e){return{actions:E({savePreferences:Gt},e)}}))(Tx);function Mx(e){return e.unreadMentions>0||e.unreadMsgs>0&&e.showUnreadForMsgs}var Ix={channelItem:"mqik-936757b2"};var Ox=p((function(){const e=Kt();return(t,n)=>{const s=e(t,{id:n.channelId}),i=oe(t),r=Yt(t)[n.channelId];B(t);const a=bi(t);let o=0,l=0,c=!0;return r&&(o=a?r.mention_count_root:r.mention_count,s&&(l=nr(a,s,r)),r.notify_props&&(c=r.notify_props.mark_unread!==tn.MENTION)),{channel:s,isCurrentChannel:!1,currentTeamName:i.name,unreadMentions:o,unreadMsgs:l,showUnreadForMsgs:c,draggingState:rr(t),isChannelSelected:sr(t,n.channelId),multiSelectedChannelIds:t.views.channelSidebar.multiSelectedChannelIds,autoSortedCategoryIds:ar(t)}}}))((e=>{const{channel:t,currentTeamName:n}=e;let s=Sx;return t.type===ve.DM_CHANNEL?s=xx:t.type===ve.GM_CHANNEL&&(s=Nx),h("li",{className:g(Ix.channelItem,{[Ix.hasUnread]:Mx(e)}),children:h(s,{isCollapsed:!1,channel:t,currentTeamName:n})})}));var Rx=p((function(){const e=or(),t=lr();return(n,s)=>{const i=s.categories.reduce(((t,s)=>t.concat(e(n,s))),[]),r=1===cr(n);let a=i.map((e=>Ve(n,e)));return a=t(n,a),{channelIds:a.map((e=>e.id)),categoryLoading:r,sidebarIndex:0}}}),(function(e){return{actions:E({openModal:fe},e)}}))((e=>{const t=O(),n=w();if(e.categoryLoading&&0===e.sidebarIndex)return h(Ko,{});const s=()=>{e.actions.openModal({modalId:se.MORE_CHANNELS,dialogType:wl,dialogProps:{morePublicChannelsModalType:"public"}})};return 0===e.channelIds.length?h("div",{className:g(JP),children:m("div",{className:g(ZP),children:[h(QP,{className:ex}),h("p",{className:g(tx),children:t.formatMessage({id:"sidebar.starting",defaultMessage:"Để bắt đầu, tham gia một nhóm hoặc thử nhắn tin với bạn bè."})}),m("div",{className:g(nx),children:[h("button",{className:g(sx,ix),onClick:()=>n.push("/friends"),children:t.formatMessage({id:"sidebar.open_friends",defaultMessage:"Danh sách Bạn bè"})}),h("button",{className:g(sx,rx),onClick:s,children:t.formatMessage({id:"sidebar.group_list",defaultMessage:"Tham gia Nhóm"})})]})]})}):m(d.exports.Fragment,{children:[h("ul",{role:"chat-list",children:e.channelIds.map(((e,t)=>h(Ox,{channelIndex:t,channelId:e},e)))}),e.categoryLoading&&e.sidebarIndex?h(Ko,{count:1}):null]})}));var Lx={sidebarChannelList:"mqik-c8ed5811",sidebarChannelListContent:"mqik-e611ce1a"};function Dx(e){return h("div",l(o({},e),{className:"scrollbar--view"}))}function Fx(e){return h("div",l(o({},e),{className:"scrollbar--horizontal"}))}function jx(e){return h("div",l(o({},e),{className:"scrollbar--vertical"}))}function Hx(e){return h("div",l(o({},e),{className:"scrollbar--verticalTrack"}))}class Ux extends d.exports.PureComponent{constructor(e){super(e),u(this,"loaded"),u(this,"channelRefs"),u(this,"scrollbar"),u(this,"scrollAnimation"),u(this,"animate"),u(this,"loadMore"),u(this,"updateMore"),u(this,"getDisplayedChannelIds",(()=>this.props.displayedChannels.map((e=>e.id)))),u(this,"getChannelRef",(e=>this.channelRefs.get(e))),u(this,"setChannelRef",((e,t)=>{t?this.channelRefs.set(e,t):this.channelRefs.delete(e)})),u(this,"handleScrollAnimationUpdate",(e=>{const t=e.getCurrentValue();this.scrollbar.current.scrollTop(t)})),u(this,"scrollToChannel",((e,t=!1)=>{if(!e)return;const n=this.channelRefs.get(e);if(!n)return;const s=n.offsetTop,i=s+n.offsetHeight,r=this.scrollbar.current.getScrollTop(),a=this.scrollbar.current.getClientHeight();if(s<r+0){const n=t||!this.state.showTopUnread?10:0;let i;const r=this.getDisplayedChannelIds();i=r.length>0&&r[0]===e?0:s-n-0,this.scrollToPosition(i)}else if(i>r+a){const e=i-a+(t||!this.state.showBottomUnread?10:0);this.scrollToPosition(e)}})),u(this,"scrollToPosition",(e=>{this.scrollAnimation.setCurrentValue(this.scrollbar.current.getScrollTop()).setAtRest(),this.scrollAnimation.setEndValue(e)})),u(this,"onScroll",(async()=>{var e,t,n;const s=(null==(e=this.scrollbar.current)?void 0:e.getScrollHeight())||0;((null==(t=this.scrollbar.current)?void 0:t.getScrollTop())||0)+((null==(n=this.scrollbar.current)?void 0:n.getClientHeight())||0)+72>=s&&this.props.allowLoadmore&&!this.state.loadMore&&(this.setState({loadMore:!0}),this.handleLoadMore())})),u(this,"handleLoadMore",(async()=>{this.loadMore&&-1===this.props.sidebarIndex||(this.loadMore=!0,await this.props.actions.loadMoreChannelsForCurrentUser(this.props.sidebarIndex+1,this.updateMore),this.setState({loadMore:!0}),this.loadMore=!1)})),this.state={showTopUnread:!1,showBottomUnread:!1,loadMore:!1},this.channelRefs=new Map,this.loaded=!1,this.loadMore=!1,this.scrollbar=d.exports.createRef(),this.animate=new XP.exports.SpringSystem,this.scrollAnimation=this.animate.createSpring(),this.scrollAnimation.setOvershootClampingEnabled(!0),this.scrollAnimation.addListener({onSpringUpdate:this.handleScrollAnimationUpdate}),this.updateMore=da((()=>{this.setState({loadMore:!1})}),3e3)}render(){return h("div",{id:"sidebar-chat-list",role:"application",className:g(Lx.sidebarChannelList,{disabled:this.props.isUnreadFilterEnabled}),"data-a11y-disable-nav":Boolean(this.props.draggingState.type),"data-a11y-sort-order":"7",children:h("div",{className:g(Lx.sidebarChannelListContent),children:m(vP.Scrollbars,{ref:this.scrollbar,autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Fx,renderThumbVertical:jx,renderTrackVertical:Hx,renderView:Dx,onScroll:this.onScroll,style:{position:"absolute"},children:[h(Rx,{categories:this.props.categories,getChannelRef:this.getChannelRef,setChannelRef:this.setChannelRef}),this.props.allowLoadmore&&!this.props.sidebarLoading&&this.props.sidebarIndex>0?h("div",{className:g(Lx.sidebarChannelMore),children:h("p",{onClick:this.handleLoadMore,children:"Xem thêm"})}):null]})})})}}var qx=p((function(e){const t=oe(e),n=ur(e);X(e,n);const s=1===cr(e);return{currentTeam:t,categories:z(e),isUnreadFilterEnabled:dr(e),unreadChannelIds:hr(e),displayedChannels:W(e),draggingState:rr(e),newCategoryIds:e.views.channelSidebar.newCategoryIds,multiSelectedChannelIds:e.views.channelSidebar.multiSelectedChannelIds,showUnreadsCategory:pr(e),isCategoryAll:"all"===n,sidebarIndex:fr(e,n),allowLoadmore:!1,sidebarLoading:s}}),(function(e){return{actions:E({close:Jo,switchToChannelById:Oa,moveChannelsInSidebar:il,moveCategory:mr,setDraggingState:tl,stopDragging:nl,clearChannelSelection:rl,multiSelectChannelAdd:al,sidebarGetMore:gr,loadChannelsForCurrentUser:Ra,loadChannelsForCurrentUser2:La,loadMoreChannelsForCurrentUser:Da,loadChannelsForCurrentCategory:Fa},e)}}))(Ux);var Bx="mqik-a386b190";class Vx extends f.PureComponent{constructor(e){super(e),u(this,"handleClickClearChannelSelection",(e=>{e.defaultPrevented||this.props.actions.clearChannelSelection()})),u(this,"handleKeyDownClearChannelSelection",(e=>{ge(e,ve.KeyCodes.ESCAPE)&&this.props.actions.clearChannelSelection()})),u(this,"showMoreDirectChannelsModal",(()=>{this.setState({showDirectChannelsModal:!0})})),u(this,"hideMoreDirectChannelsModal",(()=>{this.setState({showDirectChannelsModal:!1})})),u(this,"handleOpenMoreDirectChannelsModal",(e=>{e.preventDefault(),this.state.showDirectChannelsModal?this.hideMoreDirectChannelsModal():this.showMoreDirectChannelsModal()})),u(this,"onDragStart",(()=>{this.setState({isDragging:!0})})),u(this,"onDragEnd",(()=>{this.setState({isDragging:!1})})),u(this,"onActiveLeftbar",(e=>{this.setState({sidebarLeftSelected:e})})),this.state={showDirectChannelsModal:!1,isDragging:!1,sidebarLeftSelected:"messages"}}async componentDidMount(){this.props.teamId&&(await this.props.actions.fetchMyCategories(this.props.teamId),this.props.actions.loadChannelsForCurrentUser2(),this.props.actions.loadFirstDirect(this.props.teamId)),window.addEventListener("click",this.handleClickClearChannelSelection),window.addEventListener("keydown",this.handleKeyDownClearChannelSelection)}componentDidUpdate(e){this.props.teamId&&e.teamId!==this.props.teamId&&this.props.actions.fetchMyCategories(this.props.teamId)}componentWillUnmount(){window.removeEventListener("click",this.handleClickClearChannelSelection),window.removeEventListener("keydown",this.handleKeyDownClearChannelSelection)}render(){return this.props.teamId?h("div",{className:g(Bx,{dragging:this.state.isDragging}),children:h(qx,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd})}):h("div",{})}}var zx=p((function(e){const t=oe(e),n=B(e),s=dr(e);let i=!1,r=!1,a=!1;return t&&(i=Se(e,{channel:n,team:t.id,permission:ie.CREATE_PUBLIC_CHANNEL}),r=Se(e,{channel:n,team:t.id,permission:ie.CREATE_PRIVATE_CHANNEL}),a=Se(e,{channel:n,team:t.id,permission:ie.JOIN_PUBLIC_CHANNELS})),{teamId:t?t.id:"",canCreatePrivateChannel:r,canCreatePublicChannel:i,canJoinPublicChannel:a,isOpen:gP(e),hasSeenModal:ye(e,Ce.CATEGORY_WHATS_NEW_MODAL,Ce.HAS_SEEN_SIDEBAR_WHATS_NEW_MODAL,!1),isCloud:"true"===tt(e).Cloud,unreadFilterEnabled:s}}),(function(e){return{actions:E({clearChannelSelection:rl,createCategory:sl,fetchMyCategories:vr,loadFirstDirect:ja,loadChannelsForCurrentUser2:La,openModal:fe},e)}}))(Vx);let Wx=!1;function Gx(e,t,n,s){return async(i,r)=>{if(Wx)return{data:!1};const{data:a}=await i(br(e));if(!a)return(s||je).replace(`/error?type=${yr.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!0};const o=r(),l=a.posts[a.order[0]].channel_id;let c=o.entities.channels.channels[l];const u=oe(o),d=u.id;if(!c){const{data:e}=await i(Cr(l));if(!e)return(s||je).replace(`/error?type=${yr.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};c=e}let h=o.entities.channels.myMembers[l];if(!h){if(c.type===ve.DM_CHANNEL||c.type===ve.GM_CHANNEL)return(s||je).replace(`/error?type=${yr.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};const e=await i(Er(c.id,n));if("data"in e&&(h=e.data),!h){const e=xe(o);if(c.type===ve.PRIVATE_CHANNEL&&wr(e.roles)){Wx=!0;const e=await i(Sr(u,c));if(Wx=!1,"data"in e&&!e.data.join)return{data:!1}}await i(pe(n,"",l,""))}}if(c.team_id&&c.team_id!==d)return(s||je).replace(`/error?type=${yr.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};c&&c.type===ve.DM_CHANNEL?i(_r(c.id)):c&&c.type===ve.GM_CHANNEL&&i(Ar(c.id)),i(zt(l)),i({type:q.RECEIVED_FOCUSED_POST,data:e,channelId:l});const p=ke(o,c.team_id||d);if(c.type===ve.DM_CHANNEL){const t=kr(c.name),n=Me(o,t);(s||je).replace(`/${p.name}/messages/@${n.username}/${e}`)}else c.type===ve.GM_CHANNEL?(s||je).replace(`/${p.name}/messages/${c.name}/${e}`):(s||je).replace(`/${p.name}/group/${c.name}/${e}`);return i(La()),i(Pr(l)),{data:!0}}}class Kx extends f.PureComponent{constructor(e){super(e),u(this,"mounted"),u(this,"doPermalinkEvent",(async e=>{const t=e.match.params.postId;await this.props.actions.focusPost(t,this.props.returnTo,this.props.currentUserId,e.history),this.mounted&&this.setState({valid:!0})})),u(this,"isStateValid",(()=>this.state.valid&&this.props.channelId&&this.props.teamName)),this.state={valid:!1},this.mounted=!1}static getDerivedStateFromProps(e,t){let n={postid:e.match.params.postId,valid:t.valid};return t.postid!==e.match.params.postId&&(n.valid=!1),n}componentDidMount(){this.mounted=!0,this.doPermalinkEvent(this.props),document.body.classList.add("app__body")}componentDidUpdate(){this.state.valid||this.doPermalinkEvent(this.props)}componentWillUnmount(){this.mounted=!1}render(){return this.isStateValid()?null:h("div",{id:"app-content",className:"app__content"})}}var Yx=p((function(e){const t=oe(e),n=Te(e),s=le(e);return{channelId:n?n.id:"",teamName:t?t.name:"",currentUserId:s}}),(function(e){return{actions:E({focusPost:Gx},e)}}))(Kx);const Xx=new RegExp("^[a-zA-Z0-9]{26}__[a-zA-Z0-9]{26}$");function $x({match:e,history:t}){return async(n,s)=>{const i=s(),{path:r,identifier:a,team:o}=e.params;if(!a)return{data:void 0};const l=Wi(i,o);if(!l)return{data:void 0};switch(function(e,t,n){if("group"===t){const t=Rr(e,n),s=re(e).find((e=>e.name===n));return 26===n.length?t||s?"channel_name":"channel_id":!t&&!s&&40===n.length||t&&t.type===ve.GM_CHANNEL||s&&s.type===ve.GM_CHANNEL?"group_channel_group_id":function(e){return 54===e.length&&Xx.test(e)}(n)?"direct_channel_user_ids":"channel_name"}if("messages"===t)return 0===n.indexOf("@")?"direct_channel_username":n.indexOf("@")>0?"direct_channel_email":26===n.length?"direct_channel_user_id":40===n.length?"group_channel_group_id":"error";return"error"}(i,r,a)){case"channel_name":await n(function(e,t){return async(n,s)=>{const i=s(),{team:r,identifier:a}=e.params,o=a.toLowerCase(),l=Wi(i,r);if(!l)return{data:void 0};let c,u=Fr(i,l.id)[o];if(!u){const e=await n(jr(r,o,!0));"data"in e&&(u=e.data)}if(u&&(c=i.entities.channels.myMembers[u.id],!c)){const e=await n(Er(u.id,le(i)));"data"in e&&(c=e.data)}if(!u||!c){const a=xe(s());if(wr(null==a?void 0:a.roles)&&u.type===ve.PRIVATE_CHANNEL){const e=await n(Sr(l,u));if("data"in e&&!e.data.join)return{data:void 0}}const c=await n(Lr(le(i),l.id,"",o));if("error"in c){if(!u){const s=await n(jr(r,o,!0));if("error"in s||0===s.data.delete_at)return await n(xr(l.id,0,20)),tT(e,t,Wt(i,l.id)),{data:void 0};u=s.data}}else u=c.data.channel}return u.type===ve.DM_CHANNEL?n(Jx(e,t)):u.type===ve.GM_CHANNEL?t.replace(`/${r}/messages/${u.name}`):Zx(u),{data:void 0}}}(e,t));break;case"channel_id":await n(function(e,t){return async(n,s)=>{const i=s(),{team:r,identifier:a}=e.params,o=a.toLowerCase();let l=Ve(i,o);const c=i.entities.channels.myMembers[o],u=Wi(i,r);if(!l||!c){const s=await n(Lr(le(i),u.id,o,""));if("error"in s)return await n(xr(u.id,0,20)),tT(e,t,Wt(i,u.id)),{data:void 0};l=s.data.channel}return l.type===ve.DM_CHANNEL?n(Qx(e,t,kr(l.name,le(i)))):l.type===ve.GM_CHANNEL?t.replace(`/${r}/messages/${l.name}`):t.replace(`/${r}/group/${l.name}`),{data:void 0}}}(e,t));break;case"group_channel_group_id":await n(function(e,t){return async(n,s)=>{const i=s(),{identifier:r,team:a}=e.params,o=r.toLowerCase();t.replace(e.url.replace("/group/","/messages/"));let l=Rr(i,o);const c=Wi(i,a);if(!l){const s=await n(Lr(le(i),c.id,"",o));if("error"in s)return await n(xr(c.id,0,20)),eT(e,t,Wt(i,c.id)),{data:void 0};l=s.data.channel}return n(Dr(l.id)),Zx(l),{data:void 0}}}(e,t));break;case"direct_channel_username":await n(function(e,t){return async(n,s)=>{const i=s(),{team:r,identifier:a}=e.params,o=a.slice(1,a.length).toLowerCase(),l=Wi(i,r);let c=Ir(i,o);if(!c){const s=await n(Or(o));if("error"in s)return await n(xr(l.id,0,20)),eT(e,t,Wt(i,l.id)),{data:void 0};c=s.data}const u=await n(sa(c.id));return"error"in u?(await n(xr(l.id,0,20)),eT(e,t,Wt(i,l.id)),{data:void 0}):(Zx(u.data),{data:void 0})}}(e,t));break;case"direct_channel_email":await n(function(e,t){return async(n,s)=>{const i=s(),{team:r,identifier:a}=e.params,o=a.toLowerCase(),l=Wi(i,r);let c=Nr(i,o);if(!c){const s=await n(Mr(o));if("error"in s)return await n(xr(l.id,0,20)),eT(e,t,Wt(i,l.id)),{data:void 0};c=s.data}return t.replace(`/${r}/messages/@${c.username}`),{data:void 0}}}(e,t));break;case"direct_channel_user_ids":await n(Jx(e,t));break;case"direct_channel_user_id":await n(Qx(e,t,a));break;case"error":await n(xr(l.id,0,20)),eT(e,t,Wt(i,l.id))}return{data:void 0}}}function Qx(e,t,n){return async(s,i)=>{const r=i(),{team:a}=e.params,o=Wi(r,a);let l=Me(r,n);if(!l){const i=await s(Tr(n));if("error"in i)return await s(xr(o.id,0,20)),eT(e,t,Wt(r,o.id)),{data:void 0};l=i.data}return t.replace(`/${a}/messages/@${l.username}`),{data:void 0}}}function Jx(e,t){return async(n,s)=>{const i=s(),{team:r,identifier:a}=e.params,o=kr(a.toLowerCase(),le(s())),l=Wi(i,r);let c=Me(i,o);if(!c){const s=await n(Tr(o));if("error"in s)return await n(xr(l.id,0,20)),eT(e,t,Wt(i,l.id)),{data:void 0};c=s.data}return t.replace(`/${r}/messages/@${c.username}`),{data:void 0}}}function Zx(e){Ha(e)}function eT(e,t,n){const{team:s}=e.params;t.push(s?`/${s}/group/${n}`:"/")}async function tT(e,t,n){const{team:s}=e.params;t.push(s?`/error?type=channel_not_found&returnTo=/${s}/group/${n}`:"/")}C(((e,t)=>Ki(e,t)),(e=>Boolean(e&&e.delete_at)));var nT=p((function(e){const t=Te(e);return{channelId:t?t.id:""}}),(function(e){return{actions:E({setPreChat:hl,addChatId:ll},e)}}))((e=>{const[t,n]=d.exports.useState(""),[s,i]=d.exports.useState(!1);return d.exports.useEffect((()=>{s!=e.loaded&&t!==e.match.url&&(i(e.loaded),n(e.match.url),e.actions.setPreChat(e.channelId,{match:e.match}))})),null}));var sT=p(null,(function(e){return{actions:E({onChannelByIdentifierEnter:$x},e)}}))((e=>{let t;const[n,s]=d.exports.useState(!1),[i,r]=d.exports.useState(!1),a=function(e){const t=d.exports.useRef();return d.exports.useEffect((()=>{t.current=e})),t.current}(e),o=async e=>{await e.actions.onChannelByIdentifierEnter(e),r(!0)};return d.exports.useEffect((()=>(o(e),s(!0),()=>{t&&clearTimeout(t)})),[]),d.exports.useEffect((()=>{i&&r(!1);const s=e.match.params.team,l=null==a?void 0:a.match.params.team,c=e.match.params.identifier,u=null==a?void 0:a.match.params.identifier;if(!n||!u)return r(!0);s!==l||c!==u?(t&&clearTimeout(t),o(e),e.match.params.postid&&(t=setTimeout((()=>{const t=e.match.url.split("/").slice(0,-1).join("/");je.replace(t)}),ve.PERMALINK_FADEOUT))):r(!0)}),[e.match]),i?h(nT,{match:e.match,history:e.history,location:e.location,loaded:i}):h("div",{children:"..."})}));class iT extends f.PureComponent{constructor(e){super(e),this.state={returnTo:"",lastReturnTo:""}}static getDerivedStateFromProps(e,t){return t.lastReturnTo!==e.location.pathname&&e.location.pathname.includes("/pl/")?{lastReturnTo:e.location.pathname,returnTo:t.lastReturnTo}:{lastReturnTo:e.location.pathname}}render(){const e=this.props.match.url;return m(H,{children:[h(U,{path:`${e}/pl/:postid`,render:e=>h(Yx,l(o({},e),{returnTo:this.state.returnTo}))}),h(U,{path:"/:team/:path(group|messages)/:identifier/:postid?",component:sT})]})}}var rT=p(((e,t)=>({lhsOpen:!1,rhsOpen:!1,rhsMenuOpen:!1,isCollapsedThreadsEnabled:bi(e)})))(iT);const aT=e=>{const[t,n]=d.exports.useState(!0);return d.exports.useEffect((()=>{var e,t,n;return null==(e=ii())||e.classList.add("mexty-app__body","mexty-team-view"),Hr()?null==(t=ii())||t.classList.add("mexty-os--windows"):Ur()&&(null==(n=ii())||n.classList.add("mexty-os--mac")),function(){var e;null==(e=ii())||e.classList.remove("mexty-app__body","mexty-team-view")}}),[t]),m("div",{className:$l,children:[h(Zl,{}),!e.fetchingChannels&&h(zx,{}),!e.fetchingChannels&&h(U,{component:rT}),!e.fetchingChannels&&h(mP,{}),e.fetchingChannels&&h(Ko,{}),h(Bc,{}),h(Fc,{}),h(tc,{})]})};let oT,lT=Date.now();var cT=e=>{(new Date).getTime(),clearInterval(oT),oT=window.setInterval((()=>{const e=(new Date).getTime();e>lT+6e4&&Ua(!1),lT=e}),3e4);const[t,n]=d.exports.useState(null),[s,i]=d.exports.useState(""),[r,a]=d.exports.useState(!0);d.exports.useEffect((()=>{(new Date).getTime()-e.lastSyncProfile>36e5&&!1===ps(e.currentUser)&&e.actions.syncMe();const t=e.tutorialStep;if(0===t&&e.currentUser){const t=e.currentUser.id,n=[{user_id:t,category:ls.TUTORIAL_STEP,name:t,value:os.POST_POPOVER.toString()}];e.actions.setDefaultProfileImage(t),e.actions.savePreferences(t,n)}if(-1!==[0,1].indexOf(t)&&e.currentUser){const t=e.currentUser.id,n=ls.CATEGORY_DISPLAY_SETTINGS,s=[{user_id:t,category:ls.TUTORIAL_STEP,name:t,value:os.CHANNEL_POPOVER.toString()},{user_id:t,category:n,name:ls.USE_MILITARY_TIME,value:"true"},{user_id:t,category:n,name:ls.CHANNEL_DISPLAY_MODE,value:"full"},{user_id:t,category:n,name:ls.MESSAGE_DISPLAY,value:ls.MESSAGE_DISPLAY_CLEAN},{user_id:t,category:n,name:ls.MESSAGE_DISPLAY,value:ls.MESSAGE_DISPLAY_CLEAN},{user_id:t,category:n,name:ls.COLLAPSED_REPLY_THREADS,value:"off"},{user_id:t,category:n,name:ls.LINK_PREVIEW_DISPLAY,value:"true"},{user_id:t,category:n,name:ls.COLLAPSE_DISPLAY,value:"false"},{user_id:t,category:n,name:ls.NAME_NAME_FORMAT,value:ve.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME}];e.actions.savePreferences(t,s)}const n=e.match.params.team,s=e.teamList.find((e=>e.name===n));s?o(s):l(n,!0)}),[]),d.exports.useEffect((()=>{const t=e.teamList.find((t=>t.name===e.match.params.team));t&&n(t)}),[e.match.params.team]),d.exports.useEffect((()=>{t&&o(t)}),[t]),d.exports.useEffect((()=>{var n,s;e.chatActive&&t&&o(t,!0),e.chatActive?null==(n=document.querySelector(".p-pageWrapper"))||n.classList.add("mexty-quik-enabled"):null==(s=document.querySelector(".p-pageWrapper"))||s.classList.remove("mexty-quik-enabled")}),[e.chatActive]),Ae.setTeamIdJoinedOnLoad(null);const o=async(t,n=!1)=>{t.name!==s&&(e.actions.selectTeam(t),e.actions.setPreviousTeamId(t.id),e.actions.setChatReady(),n&&(i(t.name),r||a(!0),await e.actions.fetchMyChannelIds(t.id,"",0,50),a(!1)))},l=async(t,s)=>{var i;const{data:r}=await e.actions.getTeamByName(t);if(r&&0===r.delete_at){const{error:t}=await e.actions.addUserToTeam(r.id,null==(i=e.currentUser)?void 0:i.id);return t?void e.history.push("/error?type=team_not_found"):(s&&Ae.setTeamIdJoinedOnLoad(r.id),void n(r))}e.history.push("/error?type=team_not_found")};if(!e.chatActive)return h(d.exports.Fragment,{});if(r)return m("div",{className:g(Ql),children:[h(Ko,{}),h(Kl,{})]});return m("div",{className:g(Ql),children:[m(H,{children:[h(U,{path:"/:team/friends",component:Xo}),h(U,{render:e=>h(aT,{pathName:e.location.pathname,fetchingChannels:r})})]}),h(Kl,{})]})};var uT=p((function(e){const t=xe(e),n=as(e,ls.TUTORIAL_STEP,t.id,os.INTRO_SCREENS);return{currentUser:t,currentTeamId:Ee(e),currentChannelId:B(e),prevTeamId:qa(e),teamList:nn(e),tutorialStep:n,lastSyncProfile:qr(e),chatActive:$r(e)}}),(function(e){return{actions:E({selectTeam:Br,setPreviousTeamId:Vr,fetchMyChannelIds:zr,getTeamByName:Wr,addUserToTeam:Gr,setDefaultProfileImage:Kr,savePreferences:Gt,syncMe:Ba,setChatReady:Va},e)}}))(cT);export{uT as default};
