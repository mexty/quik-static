var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,a=(e,t)=>{for(var s in t||(t={}))i.call(t,s)&&r(e,s,t[s]);if(n)for(var s of n(t))o.call(t,s)&&r(e,s,t[s]);return e},l=(e,n)=>t(e,s(n)),c=(e,t)=>{var s={};for(var r in e)i.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&n)for(var r of n(e))t.indexOf(r)<0&&o.call(e,r)&&(s[r]=e[r]);return s},u=(e,t,s)=>(r(e,"symbol"!=typeof t?t+"":t,s),s);import{Z as d,B as p,a3 as h,F as f,a4 as m,G as g,R as v,x as y,U as b,y as E,a5 as C,a as S,Y as _,D as w,A,a6 as P,N as T,a7 as x,T as I,a8 as M,H as k,q as O,a9 as R,aa as N,ab as D,V as L,u as F,$ as H,S as U,C as B}from"./vendor.bbf9911b.js";import{F as j,C as V,M as q,a2 as z,aa as W,bI as G,ba as K,cu as Y,cD as X,cv as $,cE as Q,X as J,cF as Z,cG as ee,a9 as te,cH as se,cI as ne,cJ as ie,bd as oe,cK as re,an as ae,cL as le,c as ce,cM as ue,ar as de,cN as pe,cO as he,cP as fe,cQ as me,cR as ge,bN as ve,cS as ye,cT as be,cU as Ee,cV as Ce,d as Se,aH as _e,k as we,cW as Ae,cX as Pe,cY as Te,cZ as xe,c_ as Ie,c$ as Me,d0 as ke,d1 as Oe,d2 as Re,d3 as Ne,bZ as De,d4 as Le,av as Fe,cn as He,K as Ue,d5 as Be,d6 as je,cw as Ve,d7 as qe,d8 as ze,d9 as We,N as Ge,D as Ke,bs as Ye,da as Xe,db as $e,dc as Qe,dd as Je,a7 as Ze,de as et,cd as tt,df as st,cz as nt,dg as it,dh as ot,di as rt,dj as at,dk as lt,dl as ct,dm as ut,dn as dt,dp as pt,dq as ht,dr as ft,a6 as mt,s as gt,ds as vt,r as yt,b2 as bt,dt as Et,ab as Ct,du as St,dv as _t,dw as wt,dx as At,dy as Pt,b6 as Tt,Z as xt,dz as It,dA as Mt,bS as kt,bR as Ot,dB as Rt,dC as Nt,dD as Dt,dE as Lt,ac as Ft,dF as Ht,dG as Ut,dH as Bt,dI as jt,b9 as Vt,dJ as qt,dK as zt,dL as Wt,dM as Gt,dN as Kt,dO as Yt,dP as Xt,dQ as $t,dR as Qt,dS as Jt,dT as Zt,dU as es,dV as ts,dW as ss,W as ns,dX as is,bC as os,dY as rs,dZ as as,d_ as ls,d$ as cs,e0 as us,e1 as ds,bP as ps,e2 as hs,bE as fs,e3 as ms,e4 as gs,a1 as vs,e5 as ys,e6 as bs,e7 as Es,e8 as Cs,e9 as Ss,ea as _s,eb as ws,ec as As,aw as Ps,ax as Ts,ed as xs,ee as Is,ef as Ms,eg as ks,P as Os,aN as Rs,aX as Ns,eh as Ds,ck as Ls,b3 as Fs,ei as Hs,ej as Us,aI as Bs,ek as js,el as Vs,em as qs,en as zs,eo as Ws,bz as Gs,ep as Ks,eq as Ys,er as Xs,es as $s,et as Qs,eu as Js,ev as Zs,ew as en,ex as tn,ey as sn,ez as nn,eA as on,eB as rn,eC as an,eD as ln,eE as cn,eF as un,eG as dn,eH as pn,eI as hn,eJ as fn,eK as mn,eL as gn,eM as vn,eN as yn,eO as bn,eP as En,eQ as Cn,eR as Sn,eS as _n,cp as wn,eT as An,c8 as Pn,eU as Tn,eV as xn,aM as In,c2 as Mn,eW as kn,eX as On,eY as Rn,eZ as Nn,ad as Dn,e_ as Ln,e$ as Fn,f0 as Hn,f1 as Un,f2 as Bn,f3 as jn,f4 as Vn,f5 as qn,f6 as zn,f7 as Wn,f8 as Gn,f9 as Kn,fa as Yn,fb as Xn,bt as $n,fc as Qn,fd as Jn,fe as Zn,ff as ei,fg as ti,fh as si,fi as ni,fj as ii,fk as oi,fl as ri,fm as ai,fn as li,fo as ci,fp as ui,as as di,fq as pi,ao as hi,fr as fi,fs as mi,ft as gi,fu as vi,$ as yi,fv as bi,fw as Ei,fx as Ci,bo as Si,fy as _i,fz as wi,bO as Ai,fA as Pi,fB as Ti,fC as xi,fD as Ii,fE as Mi,fF as ki,bj as Oi,fG as Ri,fH as Ni,fI as Di,fJ as Li,fK as Fi,fL as Hi,fM as Ui,fN as Bi,fO as ji,fP as Vi,g as qi,a as zi,o as Wi,fQ as Gi,fR as Ki,e as Yi,fS as Xi,fT as $i,fU as Qi,fV as Ji,fW as Zi,aK as eo,fX as to,bG as so,fY as no,bg as io,co as oo,fZ as ro,f_ as ao,l as lo,h as co,b4 as uo,f$ as po,aS as ho,j as fo,bb as mo,g0 as go,g1 as vo,a8 as yo,g2 as bo,m as Eo,g3 as Co,g4 as So,g5 as _o,g6 as wo,g7 as Ao,g8 as Po,g9 as To,L as xo,ga as Io,ag as Mo,gb as ko,p as Oo,gc as Ro,ch as No,gd as Do}from"./index.190edc01.js";import{u as Lo,m as Fo,d as Ho,f as Uo,o as Bo,g as jo,s as Vo,h as qo,j as zo,k as Wo,n as Go,p as Ko,q as Yo,t as Xo,v as $o,w as Qo,x as Jo,M as Zo,l as er,y as tr,z as sr,A as nr,C as ir,D as or,E as rr,F as ar,G as lr,H as cr,I as ur,J as dr,K as pr,L as hr,N as fr,O as mr,P as gr,Q as vr,R as yr,S as br,T as Er,U as Cr,V as Sr,X as _r}from"./index.f9be2f73.js";import{M as wr,m as Ar,l as Pr,r as Tr,c as xr,a as Ir,b as Mr,d as kr,e as Or,f as Rr,s as Nr,g as Dr,h as Lr,i as Fr,U as Hr}from"./index.b6321635.js";import{M as Ur,a as Br,b as jr,Q as Vr,$ as qr,A as zr,X as Wr,L as Gr}from"./index.7b48b190.js";import{F as Kr,i as Yr}from"./FormattedMarkdownMessage.bdef2d7a.js";import{s as Xr,M as $r,g as Qr,a as Jr,L as Zr,b as ea,C as ta,P as sa,m as na,W as ia,c as oa,d as ra,e as aa,A as la,t as ca,f as ua,h as da,i as pa,j as ha,k as fa,l as ma,n as ga,o as va,V as ya,S as ba,E as Ea,p as Ca,q as Sa,D as _a}from"./DotsVerticalIcon.99ce8a7c.js";import{A as wa,P as Aa,a as Pa,X as Ta,m as xa,i as Ia,c as Ma,T as ka,b as Oa,Y as Ra,d as Na,U as Da,W as La,e as Fa,f as Ha}from"./index.0ec9f6e9.js";import{r as Ua}from"./jsx-runtime_commonjs-proxy.8e94ef61.js";const Ba=()=>e=>e({type:j.CLOSE_LHS});var ja=e=>e.children;var Va,qa,za="mqik-4f490a72",Wa="mqik-56c987b1";(qa=Va||(Va={})).Mention="Mention",qa.Unread="Unread",qa.None="None";var Ga=d((e=>{const t=Lo(),s=function(e){const t=p.exports.useRef();return p.exports.useEffect((()=>{t.current=e})),t.current||{}}(e),n=e=>e.mentionCount>0?Va.Mention:e.messageCount>0?Va.Unread:Va.None;return p.exports.useEffect((()=>{(()=>{const{currentChannel:s,currentTeam:n,currentTeammate:i,unreads:o,inGlobalThreads:r,contactName:a}=e,{formatMessage:l}=e.intl;if(s&&n&&s.id){let o=s.display_name;s.type===V.DM_CHANNEL&&null!=i&&(o=a||i.display_name);let r="";if(e.channelStats){const{member_count:t,online_count:s}=e.channelStats;r=` | ${s}/${t}`}t.setTitle(`${o}${r} - ${n.display_name}`)}else n&&r?t.setTitle(l({id:"globalThreads.title",defaultMessage:"{prefix}Threads - {displayName} {siteName}"},{prefix:"",displayName:n.display_name,siteName:""})):t.setTitle("U3 Chat")})();const i=n(s.unreads||{}),o=n(e.unreads||{});i!==o&&t.selectDot(o)}),[e]),null}));var Ka=h(f((function(e,{location:{pathname:t}}){const s=q(e),n=z(e),i=n&&n.teammate_id?n:null,o=W(e),r=G(e);let a="";if(i){const t=K(e,i.teammate_id);a=t?Y(e,t.id):""}return{currentChannel:n,currentTeam:o,currentTeammate:i,siteName:s.SiteName,unreads:X(e),inGlobalThreads:null!=m(t,{path:"/:team/threads/:threadIdentifier?"}),contactName:a,channelStats:r}}),(function(e){return{actions:g({},e)}}))(Ga));class Ya extends v.PureComponent{constructor(e){super(e)}render(){const e=this.props,{modals:t}=e,s=c(e,["modals"]),{modalState:n}=t;if(!t)return y("div",{});const i=[];for(const o in n)if(n.hasOwnProperty(o)){const e=n[o];if(e.open){const t=v.createElement(e.dialogType,Object.assign({},e.dialogProps,{onHide:s.actions.closeModal.bind(this,o),key:`${o}_modal`}));i.push(t)}}return y("div",{children:i})}}var Xa=f((function(e){return{modals:e.views.modals}}),(function(e){return{actions:g({closeModal:$},e)}}))(Ya);function $a(e){return{type:j.SET_SHOW_PREVIEW_ON_CREATE_POST,showPreview:e}}function Qa(e){return{type:j.SET_SHOW_PREVIEW_ON_EDIT_POST_MODAL,showPreview:e}}function Ja(e){return e.views.textbox.shouldShowPreviewOnCreatePost}function Za(e){return e.views.textbox.shouldShowPreviewOnEditPostModal}function el(e){return async(t,s)=>{const n=await Q(e)(t,s);return n.error&&"api.post.update_post.permissions_time_limit.app_error"===n.error.server_error_id&&t(J({type:Z.ANNOUNCEMENT,message:n.error.message},!0)),n}}function tl(e){if(-1===Array.from(e.types).indexOf("text/html"))return!1;const t=e.getData("text/html");if(!/<table/i.test(t))return!1;const s=function(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelector("table")}(t);return s||!1}function sl(e){return null==e.textContent?" ":e.textContent.trim().replace(/\|/g,"\\|").replace(/\n/g," ")}function nl(e,t,s){const n=Array.from(e.querySelectorAll("tr")),i=n.shift(),o=i?(r=i,Array.from(r.querySelectorAll("td, th")).map(sl)):[];var r;const a=o.map((()=>"---")),l=`${`|${o.join(" | ")}|\n|${a.join(" | ")}|\n`}${n.map((e=>`|${Array.from(e.querySelectorAll("td")).map(sl).join(" | ")}|`)).join("\n")}\n`;if(!t)return l;if(void 0===s)return`${t}\n\n${l}`;return[t.slice(0,s),l,t.slice(s)].join("\n")}function il(e,t,s){const{firstPiece:n,lastPiece:i}=ee(e,t),o=""===i?"":"\n",r=(""===n?"":"\n")+"```\n"+function(e){return-1!==Array.from(e.types).indexOf("text/plain")&&e.getData("text/plain")}(s)+"\n```"+o;return{formattedMessage:`${n}${r}${i}`,formattedCodeBlock:r}}class ol extends v.PureComponent{constructor(e){super(e),u(this,"deletePostBtn"),u(this,"handleDelete",(async()=>{const{actions:e,post:t}=this.props;let s="";const n=await e.deleteAndRemovePost(t),i=m(this.props.location.pathname,{path:"/:teamName/messages/:username/:postid"}),o=m(this.props.location.pathname,{path:"/:teamName/group/:channelname/:postid"});if(i?s=i.params.postid:o&&(s=o.params.postid),s===t.id){const e=this.props.location.pathname.split("/").slice(0,-1).join("/");te.replace(e)}n.data&&this.onHide()})),u(this,"handleEntered",(()=>{var e,t;null==(t=null==(e=this.deletePostBtn)?void 0:e.current)||t.focus()})),u(this,"onHide",(()=>{if(this.setState({show:!1}),!se()){let e;e=this.props.isRHS?document.getElementById("reply_textbox"):document.getElementById("post_textbox"),e&&e.focus()}})),this.deletePostBtn=v.createRef(),this.state={show:!0}}render(){let e="";this.props.commentCount>0&&""===this.props.post.root_id&&(e=y(b,{id:"delete_post.warning",defaultMessage:"This post has {count, number} {count, plural, one {comment} other {comments}} on it.",values:{count:this.props.commentCount}}));const t=this.props.post.root_id?y(b,{id:"delete_post.comment",defaultMessage:"Comment"}):y(b,{id:"delete_post.post",defaultMessage:"Post"});return E(Ur,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,children:[y(Br,{closeButton:!0,onClose:this.onHide,children:y(b,{id:"delete_post.confirm",defaultMessage:"Confirm {term} Delete",values:{term:t}})}),E(jr,{children:[y(b,{id:"delete_post.question",defaultMessage:"Are you sure you want to delete this {term}?",values:{term:t}}),y("br",{}),e]}),E(wr,{children:[y("button",{ref:this.deletePostBtn,type:"button",autoFocus:!0,className:"u3-btn u3-btn-danger",onClick:this.handleDelete,id:"deletePostModalButton",children:y(b,{id:"delete_post.del",defaultMessage:"Delete"})}),y("button",{type:"button",className:"u3-btn u3-btn-link",onClick:this.onHide,children:y(b,{id:"delete_post.cancel",defaultMessage:"Cancel"})})]})]})}}var rl=h(f(null,(function(e){return{actions:g({deleteAndRemovePost:ne},e)}}))(ol));function al(e,t,s){return async(n,i)=>{const o=i();return ie(o,{permission:oe.USE_GROUP_MENTIONS,channel:s,team:t})?{data:Xr(o,e,t,s)}:{data:[]}}}var ll=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function cl(e,t){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(n=e[s],i=t[s],!(n===i||ll(n)&&ll(i)))return!1;var n,i;return!0}function ul(e,t){var s;void 0===t&&(t=cl);var n,i=[],o=!1;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return o&&s===this&&t(r,i)||(n=e.apply(this,r),o=!0,s=this,i=r),n}}function dl(e){return pl("@"===e[0]?e:`@${e}`,{markdown:!1})}function pl(e,t,s){return y($r,{message:e,options:t,postId:s&&s.id,postType:s&&s.type})}function hl(e){const t=dl(e.props.username),s=dl(e.props.addedUsername);return y(b,{id:"api.channel.add_member.added",defaultMessage:"{addedUsername} added to the channel by {username}.",values:{username:t,addedUsername:s}})}const fl={[ae.POST_TYPES.JOIN_CHANNEL]:function(e){const t=dl(e.props.username);return y(b,{id:"api.channel.join_channel.post_and_forget",defaultMessage:"{username} joined the channel.",values:{username:t}})},[ae.POST_TYPES.GUEST_JOIN_CHANNEL]:function(e){const t=dl(e.props.username);return y(b,{id:"api.channel.guest_join_channel.post_and_forget",defaultMessage:"{username} joined the channel as a guest.",values:{username:t}})},[ae.POST_TYPES.LEAVE_CHANNEL]:function(e){const t=dl(e.props.username);return y(b,{id:"api.channel.leave.left",defaultMessage:"{username} has left the channel.",values:{username:t}})},[ae.POST_TYPES.ADD_TO_CHANNEL]:hl,[ae.POST_TYPES.ADD_GUEST_TO_CHANNEL]:function(e){const t=dl(e.props.username),s=dl(e.props.addedUsername);return y(b,{id:"api.channel.add_guest.added",defaultMessage:"{addedUsername} added to the channel as a guest by {username}.",values:{username:t,addedUsername:s}})},[ae.POST_TYPES.REMOVE_FROM_CHANNEL]:function(e){const t=dl(e.props.removedUsername);return y(b,{id:"api.channel.remove_member.removed",defaultMessage:"{removedUsername} was removed from the channel",values:{removedUsername:t}})},[ae.POST_TYPES.JOIN_TEAM]:function(e){const t=dl(e.props.username);return y(b,{id:"api.team.join_team.post_and_forget",defaultMessage:"{username} joined the team.",values:{username:t}})},[ae.POST_TYPES.LEAVE_TEAM]:function(e){const t=dl(e.props.username);return y(b,{id:"api.team.leave.left",defaultMessage:"{username} left the team.",values:{username:t}})},[ae.POST_TYPES.ADD_TO_TEAM]:function(e){const t=dl(e.props.username),s=dl(e.props.addedUsername);return y(b,{id:"api.team.add_member.added",defaultMessage:"{addedUsername} added to the team by {username}.",values:{username:t,addedUsername:s}})},[ae.POST_TYPES.REMOVE_FROM_TEAM]:function(e){const t=dl(e.props.username);return y(b,{id:"api.team.remove_user_from_team.removed",defaultMessage:"{removedUsername} was removed from the team.",values:{removedUsername:t}})},[ae.POST_TYPES.HEADER_CHANGE]:function(e){if(!e.props.username)return null;const t={singleline:!0,channelNamesMap:e.props&&e.props.channel_mentions,mentionHighlight:!0},s=dl(e.props.username),n=e.props.old_header?pl(e.props.old_header,t,e):null,i=e.props.new_header?pl(e.props.new_header,t,e):null;return e.props.new_header?e.props.old_header?y(b,{id:"api.channel.post_update_channel_header_message_and_forget.updated_from",defaultMessage:"{username} updated the channel header <br></br><strong>From:</strong> {old} <br></br><strong>To:</strong> {new}",values:{username:s,old:n,new:i,strong:e=>y("strong",{children:e}),br:e=>E(C,{children:[y("br",{}),e]})}}):y(b,{id:"api.channel.post_update_channel_header_message_and_forget.updated_to",defaultMessage:"{username} updated the channel header to: {new}",values:{username:s,new:i}}):e.props.old_header?y(b,{id:"api.channel.post_update_channel_header_message_and_forget.removed",defaultMessage:"{username} removed the channel header (was: {old})",values:{username:s,old:n}}):null},[ae.POST_TYPES.DISPLAYNAME_CHANGE]:function(e){if(!(e.props.username&&e.props.old_displayname&&e.props.new_displayname))return null;const t=dl(e.props.username),s=e.props.old_displayname,n=e.props.new_displayname;return y(b,{id:"api.channel.post_update_channel_displayname_message_and_forget.updated_from",defaultMessage:"{username} updated the channel display name from: {old} to: {new}",values:{username:t,old:s,new:n}})},[ae.POST_TYPES.CONVERT_CHANNEL]:function(e){if(!e.props.username)return null;const t=dl(e.props.username);return y(b,{id:"api.channel.post_convert_channel_to_private.updated_from",defaultMessage:"{username} converted the channel from public to private",values:{username:t}})},[ae.POST_TYPES.PURPOSE_CHANGE]:function(e){if(!e.props.username)return null;const t=dl(e.props.username),s=e.props.old_purpose,n=e.props.new_purpose;return e.props.new_purpose?e.props.old_purpose?y(b,{id:"app.channel.post_update_channel_purpose_message.updated_from",defaultMessage:"{username} updated the channel purpose from: {old} to: {new}",values:{username:t,old:s,new:n}}):y(b,{id:"app.channel.post_update_channel_purpose_message.updated_to",defaultMessage:"{username} updated the channel purpose to: {new}",values:{username:t,new:n}}):e.props.old_purpose?y(b,{id:"app.channel.post_update_channel_purpose_message.removed",defaultMessage:"{username} removed the channel purpose (was: {old})",values:{username:t,old:s}}):null},[ae.POST_TYPES.CHANNEL_DELETED]:function(e){if(!e.props.username)return null;const t=dl(e.props.username);return y(b,{id:"api.channel.delete_channel.archived",defaultMessage:"{username} has archived the channel.",values:{username:t}})},[ae.POST_TYPES.CHANNEL_UNARCHIVED]:function(e){if(!e.props.username)return null;const t=dl(e.props.username);return y(b,{id:"api.channel.restore_channel.unarchived",defaultMessage:"{username} has unarchived the channel.",values:{username:t}})},[ae.POST_TYPES.ME]:function(e){return pl(e.message.replace(/^\*|\*$/g,""))}};class ml extends v.PureComponent{constructor(){super(...arguments),u(this,"getOptions",ul(((e,t,s)=>l(a({},e),{disableGroupHighlight:t,mentionHighlight:s}))))}render(){var e,t,s;let{message:n}=this.props;const{post:i,mentionKeys:o}=this.props;if(i){const e=function(e,t,s){return e.props&&e.props.add_channel_member?(re(e),null):fl[e.type]?fl[e.type](e):e.type===ae.POST_TYPES.EPHEMERAL_ADD_TO_CHANNEL?hl(e):e.type===ae.POST_TYPES.COMBINED_USER_ACTIVITY?(e.props.user_activity,null):null}(i,this.props.channel,this.props.isUserCanManageMembers);if(e)return y("div",{children:e})}const r=!i||!i.message_source||i.message===i.message_source,a=i&&i.props&&i.props.channel_mentions;null==(e=this.props.pluginHooks)||e.forEach((e=>{e&&e.hook&&i&&(n=e.hook(i,n))}));let l=null==(t=this.props.options)?void 0:t.mentionHighlight;i&&i.props&&(l=!i.props.mentionHighlightDisabled);const c=this.getOptions(this.props.options,!0===(null==(s=null==i?void 0:i.props)?void 0:s.disable_group_highlight),l);return y($r,{imageProps:this.props.imageProps,isRHS:this.props.isRHS,message:n,proxyImages:r,mentionKeys:o,options:c,channelNamesMap:a,hasPluginTooltips:this.props.hasPluginTooltips,imagesMetadata:this.props.post&&this.props.post.metadata&&this.props.post.metadata.images,postId:this.props.post&&this.props.post.id})}}u(ml,"defaultProps",{isRHS:!1,pluginHooks:[],options:{}});var gl=f((function(){const e=S(le,((e,t)=>t),((e,t,s)=>s?Qr(e,s.team_id,s.id):Jr(e)),((e,t,s)=>{var n,i;let o=e;return(null==(n=null==t?void 0:t.props)?void 0:n.disable_group_highlight)||(o=o.concat(s)),(null==(i=null==t?void 0:t.props)?void 0:i.mentionHighlightDisabled)&&(o=o.filter((e=>!["@all","@group","@here"].includes(e.key)))),o}));return(t,s)=>{const n=ce(t,s.channelId);return{channel:n,pluginHooks:t.plugins.components.MessageWillFormat,hasPluginTooltips:Boolean(t.plugins.components.LinkTooltip),isUserCanManageMembers:n&&ue(t,n),mentionKeys:e(t,s.post,n)}}}))(ml);const vl=V.Integrations.EXECUTE_CURRENT_COMMAND_ITEM_ID,yl=V.KeyCodes,bl=class extends v.PureComponent{constructor(e){super(e),u(this,"handleMentionKeyClick",((e,t)=>{if(this.props.isRHS!==t)return;let s="@"+e;this.props.value&&/[^\s]$/.test(this.props.value)&&(s=" "+s),this.addTextAtCaret(s,"")})),u(this,"getTextbox",(()=>{if(!this.inputRef.current)return null;const e=this.inputRef.current.getInput();return e.getDOMNode?e.getDOMNode():e})),u(this,"recalculateSize",(()=>{const e=this.inputRef.current.getInput();e.recalculateSize&&e.recalculateSize()})),u(this,"handleEmitClearSuggestions",((e=0)=>{setTimeout((()=>{this.clear()}),e)})),u(this,"preventSuggestionListClose",(()=>{this.preventSuggestionListCloseFlag=!0})),u(this,"handleFocusOut",(e=>{this.preventSuggestionListCloseFlag?this.preventSuggestionListCloseFlag=!1:this.container.contains(e.relatedTarget)||pe()&&!e.relatedTarget||(this.props.forceSuggestionsWhenBlur||this.handleEmitClearSuggestions(),this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur())})),u(this,"handleFocusIn",(e=>{this.container.contains(e.relatedTarget)||this.preventSuggestionListCloseFlag||(this.setState({focused:!0}),(this.props.openOnFocus||this.props.openWhenEmpty)&&setTimeout((()=>{const e=this.getTextbox();if(e){const t=e.value.substring(0,e.selectionEnd);(this.props.openWhenEmpty||t.length>=this.props.requiredCharacters)&&this.pretext!==t&&this.handlePretextChanged(t)}})),this.props.onFocus&&this.props.onFocus())})),u(this,"handleChange",(e=>{const t=this.getTextbox(),s=t.value.substring(0,t.selectionEnd);this.composing||this.pretext===s||this.handlePretextChanged(s),this.props.onChange&&this.props.onChange(e)})),u(this,"handleCompositionStart",(()=>{this.composing=!0,this.props.onComposition&&this.props.onComposition()})),u(this,"handleCompositionUpdate",(e=>{if(!e.data)return;const t=this.getTextbox(),s=t.value.substring(0,t.selectionStart)+e.data;this.handlePretextChanged(s),this.props.onComposition&&this.props.onComposition()})),u(this,"handleCompositionEnd",(()=>{this.composing=!1,this.props.onComposition&&this.props.onComposition()})),u(this,"addTextAtCaret",((e,t)=>{const s=this.getTextbox(),n=s.selectionEnd,i=this.props.value,o=s.value.substring(0,s.selectionEnd);let r,a=!1;if(o.toLowerCase().endsWith(t.toLowerCase()))r=o.substring(0,o.length-t.length);else{const s=e.substring(t.length),n=bl.findOverlap(o,s);a=0===n.length,r=o.substring(0,o.length-n.length-t.length)}const l=i.substring(n);let c;if(c=a?o:r+e+" "+l,s.value=c,this.props.onChange){const e={target:s};this.props.onChange(e)}window.requestAnimationFrame((()=>{s.value===c&&he(s,r.length+e.length+1)}))})),u(this,"replaceText",(e=>{const t=this.getTextbox();if(t.value=e,this.props.onChange){const e={target:t};this.props.onChange(e)}})),u(this,"handleCompleteWord",((e,t,s)=>{let n=e,i=!1;if(e.endsWith(vl)&&(n=e.substring(0,e.length-vl.length),i=!0),this.props.replaceAllInputOnSelect?this.replaceText(n):this.addTextAtCaret(n,t),this.props.onItemSelected){const e=this.state.items,t=this.state.terms;for(let s=0;s<t.length;s++)if(t[s]===n){this.props.onItemSelected(e[s]);break}}if(this.clear(),this.inputRef.current.focus(),i&&this.props.onKeyPress){let e=s;return s&&!fe(s,V.KeyCodes.TAB)||(e=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:13}),s&&s.preventDefault()),this.props.onKeyPress(e),!0}if(!i)for(const o of this.props.providers)o.handleCompleteWord&&o.handleCompleteWord(n,t,this.handlePretextChanged);return!1})),u(this,"selectNext",(()=>{this.setSelectionByDelta(1)})),u(this,"selectPrevious",(()=>{this.setSelectionByDelta(-1)})),u(this,"setSelectionByDelta",(e=>{let t=this.state.terms.indexOf(this.state.selection);-1!==t?(t+=e,t<0?t=0:t>this.state.terms.length-1&&(t=this.state.terms.length-1),this.setState({selection:this.state.terms[t]})):this.setState({selection:""})})),u(this,"setSelection",(e=>{this.setState({selection:e})})),u(this,"clear",(()=>{this.state.cleared||(this.setState({cleared:!0,matchedPretext:[],terms:[],items:[],components:[],selection:"",suggestionBoxAlgn:{}}),this.handlePretextChanged(""))})),u(this,"hasSuggestions",(()=>this.state.items.some((e=>!e.loading)))),u(this,"handleKeyDown",(e=>{if((this.props.openWhenEmpty||this.props.value)&&this.hasSuggestions())if(fe(e,yl.UP))this.selectPrevious(),e.preventDefault();else if(fe(e,yl.DOWN))this.selectNext(),e.preventDefault();else if(fe(e,yl.ENTER)||this.props.completeOnTab&&fe(e,yl.TAB)){let t="";for(let e=0;e<this.state.terms.length;e++)this.state.terms[e]===this.state.selection&&(t=this.state.matchedPretext[e]);if(this.pretext.toLowerCase().endsWith(t.toLowerCase())){if(this.handleCompleteWord(this.state.selection,t,e))return}else clearTimeout(this.timeoutId),this.nonDebouncedPretextChanged(this.pretext,!0);this.props.onKeyDown&&this.props.onKeyDown(e),e.preventDefault()}else fe(e,yl.ESCAPE)?(this.clear(),this.setState({presentationType:"text"}),e.preventDefault(),e.stopPropagation()):this.props.onKeyDown&&this.props.onKeyDown(e);else this.props.onKeyDown&&this.props.onKeyDown(e)})),u(this,"handleSelect",(e=>{this.props.onSelect&&this.props.onSelect(e)})),u(this,"handleReceivedSuggestions",(e=>{const t=[],s=[];this.props.onSuggestionsReceived&&this.props.onSuggestionsReceived(e);for(let r=0;r<e.terms.length;r++)t.push(e.component),s.push(e.matchedPretext);const n=e.terms,i=e.items;let o=this.state.selection;return n.length>0?o=n[0]:this.state.selection&&(o=""),this.setState({cleared:!1,selection:o,terms:n,items:i,components:t,matchedPretext:s}),{selection:o,matchedPretext:e.matchedPretext}})),u(this,"handleReceivedSuggestionsAndComplete",(e=>{const{selection:t,matchedPretext:s}=this.handleReceivedSuggestions(e);t&&this.handleCompleteWord(t,s)})),u(this,"nonDebouncedPretextChanged",((e,t=!1)=>{this.pretext=e;let s=!1,n=this.handleReceivedSuggestions;t&&(n=this.handleReceivedSuggestionsAndComplete);for(const i of this.props.providers)if(s=i.handlePretextChanged(e,n)||s,s){if(void 0===this.state.suggestionBoxAlgn.pixelsToMoveX&&void 0===this.state.suggestionBoxAlgn.pixelsToMoveY&&["@",":","~","/"].includes(i.triggerCharacter)){const e=i.triggerCharacter,t=me(e),s=ge(this.getTextbox(),t,this.props.listStyle);this.setState({suggestionBoxAlgn:s})}this.setState({presentationType:i.presentationType(),allowDividers:i.allowDividers()});break}s||this.clear()})),u(this,"debouncedPretextChanged",(e=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>this.nonDebouncedPretextChanged(e)),V.SEARCH_TIMEOUT_MILLISECONDS)})),u(this,"handlePretextChanged",(e=>{this.pretext=e,this.debouncedPretextChanged(e)})),u(this,"blur",(()=>{this.inputRef.current.blur()})),u(this,"focus",(()=>{const e=this.inputRef.current.input;'""'===e.value||e.value.endsWith('""')?(e.selectionStart=e.value.length-1,e.selectionEnd=e.value.length-1):e.selectionStart=e.value.length,e.focus(),this.handleChange({target:this.inputRef.current})})),u(this,"setContainerRef",(e=>{this.container&&(this.container.removeEventListener("focusin",this.handleFocusIn),this.container.removeEventListener("focusout",this.handleFocusOut)),e&&(e.addEventListener("focusin",this.handleFocusIn),e.addEventListener("focusout",this.handleFocusOut)),this.container=e})),this.suggestionReadOut=v.createRef(),this.composing=!1,this.pretext="",this.timeoutId="",this.preventSuggestionListCloseFlag=!1,this.state={focused:!1,cleared:!0,matchedPretext:[],items:[],terms:[],components:[],selection:"",allowDividers:!0,presentationType:"text",suggestionBoxAlgn:{}},this.inputRef=v.createRef()}componentDidMount(){this.props.listenForMentionKeyClick&&de.addListener("mention_key_click",this.handleMentionKeyClick),this.handlePretextChanged(this.pretext)}componentWillUnmount(){de.removeListener("mention_key_click",this.handleMentionKeyClick)}componentDidUpdate(e){const{value:t}=this.props;if(""!==t||this.pretext===t){if(e.contextId!==this.props.contextId){const e=this.getTextbox(),t=e.value.substring(0,e.selectionEnd).toLowerCase();this.handlePretextChanged(t)}}else this.handlePretextChanged(t)}render(){const e=this.props,{listComponent:t,dateComponent:s,listStyle:n,renderNoResults:i}=e,o=c(e,["listComponent","dateComponent","listStyle","renderNoResults"]);return this.props.renderDividers&&this.state.allowDividers,Reflect.deleteProperty(o,"providers"),Reflect.deleteProperty(o,"onChange"),Reflect.deleteProperty(o,"onComposition"),Reflect.deleteProperty(o,"onItemSelected"),Reflect.deleteProperty(o,"completeOnTab"),Reflect.deleteProperty(o,"isRHS"),Reflect.deleteProperty(o,"requiredCharacters"),Reflect.deleteProperty(o,"openOnFocus"),Reflect.deleteProperty(o,"openWhenEmpty"),Reflect.deleteProperty(o,"onFocus"),Reflect.deleteProperty(o,"onBlur"),Reflect.deleteProperty(o,"containerClass"),Reflect.deleteProperty(o,"replaceAllInputOnSelect"),Reflect.deleteProperty(o,"renderDividers"),Reflect.deleteProperty(o,"contextId"),Reflect.deleteProperty(o,"listenForMentionKeyClick"),Reflect.deleteProperty(o,"wrapperHeight"),Reflect.deleteProperty(o,"forceSuggestionsWhenBlur"),Reflect.deleteProperty(o,"onSuggestionsReceived"),E("div",{ref:this.setContainerRef,className:this.props.containerClass,children:[y("div",{ref:this.suggestionReadOut,"aria-live":"polite",role:"alert",className:"sr-only"}),y(Vr,l(a({ref:this.inputRef,autoComplete:"off"},o),{onInput:this.handleChange,onCompositionStart:this.handleCompositionStart,onCompositionUpdate:this.handleCompositionUpdate,onCompositionEnd:this.handleCompositionEnd,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect}))]})}static findOverlap(e,t){const s=e.toLowerCase(),n=t.toLowerCase();for(let i=n.length;i>0;i--){const e=n.substring(0,i);if(s.endsWith(e))return e}return""}};let El=bl;u(El,"propTypes",{listComponent:_.func.isRequired,inputComponent:_.elementType,dateComponent:_.func,value:_.string.isRequired,providers:_.arrayOf(_.object).isRequired,listStyle:_.string,containerClass:_.string,renderDividers:_.bool,renderNoResults:_.bool,completeOnTab:_.bool,onFocus:_.func,onBlur:_.func,onChange:_.func,onKeyDown:_.func,onKeyPress:_.func,onComposition:_.func,onSelect:_.func,onSearchTypeSelected:_.func,onItemSelected:_.func,isRHS:_.bool,requiredCharacters:_.number,openOnFocus:_.bool,disabled:_.bool,openWhenEmpty:_.bool,replaceAllInputOnSelect:_.bool,contextId:_.string,listenForMentionKeyClick:_.bool,wrapperHeight:_.number,onSuggestionsReceived:_.func,forceSuggestionsWhenBlur:_.bool}),u(El,"defaultProps",{listStyle:"top",containerClass:"",renderDividers:!1,renderNoResults:!1,completeOnTab:!0,isRHS:!1,requiredCharacters:1,openOnFocus:!1,openWhenEmpty:!1,replaceAllInputOnSelect:!1,listenForMentionKeyClick:!1,forceSuggestionsWhenBlur:!1});class Cl extends v.PureComponent{constructor(e){super(e),u(this,"getContent",(()=>qr(this.contentRef.current))),u(this,"scrollToItem",(e=>{const t=this.getContent();if(!t||0===t.length)return;const s=t[0].clientHeight;if(s<t[0].scrollHeight){const n=t.scrollTop(),i=parseInt(t.css("padding-top"),10),o=parseInt(t.css("padding-top"),10),r=qr(w.findDOMNode(this.itemRefs.get(e)));if(0===r.length)return;const a=r[0].offsetTop-parseInt(r.css("margin-top"),10),l=parseInt(r.css("margin-bottom"),10)+parseInt(r.css("padding-bottom"),10),c=r[0].offsetTop+r.height()+l;a-i<n?t.scrollTop(a-i):c+i+o>n+s&&t.scrollTop(c-s+i+o)}})),this.contentRef=v.createRef(),this.itemRefs=new Map,this.suggestionReadOut=v.createRef(),this.currentLabel="",this.currentItem={}}componentDidUpdate(e){this.props.selection!==e.selection&&this.props.selection&&this.scrollToItem(this.props.selection),ve(this.currentItem)||this.generateLabel(this.currentItem)}componentWillUnmount(){this.removeLabel()}announceLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML=this.currentLabel)}removeLabel(){const e=this.props.ariaLiveRef.current;e&&(e.innerHTML="")}generateLabel(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=` ${e.first_name} ${e.last_name} ${e.nickname}`:e.nickname?this.currentLabel+=` ${e.nickname}`:(e.first_name||e.last_name)&&(this.currentLabel+=` ${e.first_name} ${e.last_name}`)):"mention.channels"===e.type&&(this.currentLabel=e.channel.display_name),this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}renderDivider(e){return y("div",{className:"suggestion-list__divider",children:y("span",{children:y(b,{id:"suggestion."+e})})},e+"-divider")}renderNoResults(){return y("div",{className:"suggestion-list__no-results",ref:this.contentRef,children:y(Kr,{id:"suggestion_list.no_matches",defaultMessage:"No items match __{value}__",values:{value:this.props.pretext||'""'}})},"list-no-results")}render(){if(!this.props.open||this.props.cleared)return null;const e=[];if(0===this.props.items.length){if(!this.props.renderNoResults)return null;e.push(this.renderNoResults())}let t;for(let a=0;a<this.props.items.length;a++){const s=this.props.items[a],n=this.props.terms[a],i=n===this.props.selection,o=this.props.components[a];this.props.renderDividers&&s.type!==t&&(e.push(this.renderDivider(s.type)),t=s.type),s.loading?e.push(y(Zr,{},s.type)):(i&&(this.currentItem=s),e.push(y(o,{ref:e=>this.itemRefs.set(n,e),item:this.props.items[a],term:n,matchedPretext:this.props.matchedPretext[a],isSelection:i,onClick:this.props.onCompleteWord,onMouseMove:this.props.onItemHover},n)))}const s="suggestion-list suggestion-list--"+this.props.location,n="suggestion-list__content suggestion-list__content--"+this.props.location;let i=V.SUGGESTION_LIST_MAXHEIGHT;this.props.wrapperHeight&&(i=Math.min(ye()-(this.props.wrapperHeight+V.POST_MODAL_PADDING),V.SUGGESTION_LIST_MAXHEIGHT));const o={maxHeight:i},{pixelsToMoveX:r,pixelsToMoveY:l}=this.props.suggestionBoxAlgn,c=void 0!==r&&void 0!==l?{transform:`translate(${r}px, ${l}px)`}:{};return y("div",{className:s,children:y("div",{id:"suggestionList",role:"list",ref:this.contentRef,style:a(a({},o),c),className:n,onMouseDown:this.props.preventClose,children:e})})}}u(Cl,"propTypes",{ariaLiveRef:_.object,open:_.bool.isRequired,location:_.string,renderDividers:_.bool,renderNoResults:_.bool,onCompleteWord:_.func.isRequired,preventClose:_.func,onItemHover:_.func.isRequired,pretext:_.string.isRequired,cleared:_.bool.isRequired,matchedPretext:_.array.isRequired,items:_.array.isRequired,terms:_.array.isRequired,selection:_.string.isRequired,components:_.array.isRequired,wrapperHeight:_.number,suggestionBoxAlgn:_.object}),u(Cl,"defaultProps",{renderDividers:!1,renderNoResults:!1});var Sl={textareaWrapper:"mqik-61974f66",textboxContainer:"mqik-38b2e3fb",formInput:"mqik-af7e39ef",formTextarea:"mqik-dc5b1731",formSelect:"mqik-b6d960be",formMultiselect:"mqik-258c30c5",customTextarea:"mqik-b0e6e88b",textboxInput:"mqik-b64a333e",textareaEmojiPicker:"mqik-a7943600",textareaCustomPlaceholder:"mqik-71931c66",badConnection:"mqik-11749422",customTextareaPreview:"mqik-efe8a2ea"};class _l extends v.PureComponent{constructor(e){super(e),u(this,"suggestionProviders"),u(this,"wrapper"),u(this,"message"),u(this,"preview"),u(this,"handleChange",(e=>{this.props.onChange(e)})),u(this,"checkMessageLength",(e=>{if(this.props.handlePostError)if(e.length>this.props.characterLimit){const t=y(b,{id:"create_post.error_message",defaultMessage:"Your message is too long. Character count: {length}/{limit}",values:{length:e.length,limit:this.props.characterLimit}});this.props.handlePostError(t)}else this.props.handlePostError(null)})),u(this,"handleKeyDown",(e=>{var t,s;null==(s=(t=this.props).onKeyDown)||s.call(t,e)})),u(this,"handleSelect",(e=>{var t,s;null==(s=(t=this.props).onSelect)||s.call(t,e)})),u(this,"handleMouseUp",(e=>{var t,s;null==(s=(t=this.props).onMouseUp)||s.call(t,e)})),u(this,"handleKeyUp",(e=>{var t,s;null==(s=(t=this.props).onKeyUp)||s.call(t,e)})),u(this,"handleBlur",(e=>{var t,s;null==(s=(t=this.props).onBlur)||s.call(t,e)})),u(this,"handleFocus",(e=>{var t,s;null==(s=(t=this.props).onFocus)||s.call(t,e)})),u(this,"handleHeightChange",((e,t)=>{var s,n;null==(n=(s=this.props).onHeightChange)||n.call(s,e,t)})),u(this,"getInputBox",(()=>{var e;return null==(e=this.message.current)?void 0:e.getTextbox()})),u(this,"focus",(()=>{const e=this.getInputBox();e&&(e.focus(),be(e),this.checkMessageLength(e.value))})),u(this,"blur",(()=>{var e;null==(e=this.getInputBox())||e.blur()})),u(this,"recalculateSize",(()=>{var e;null==(e=this.message.current)||e.recalculateSize()})),u(this,"focusTextbox",(()=>{})),this.suggestionProviders=[],this.checkMessageLength(e.value),this.wrapper=v.createRef(),this.message=v.createRef(),this.preview=v.createRef()}updateSuggestions(e){if(this.props.channelId!==e.channelId||this.props.currentUserId!==e.currentUserId||this.props.profilesInChannel!==e.profilesInChannel||this.props.autocompleteGroups!==e.autocompleteGroups){const e=this.suggestionProviders;for(let t=0;t<e.length;t++);}e.value!==this.props.value&&this.checkMessageLength(this.props.value)}componentDidUpdate(e){var t;!e.preview&&this.props.preview&&(null==(t=this.preview.current)||t.focus()),this.updateSuggestions(e)}render(){var e;let t,s=null;const n={[Sl.textareaWrapper]:!0},i={[Sl.customTextarea]:!0};this.props.emojiEnabled&&(i[Sl.textareaEmojiPicker]=!0),this.props.badConnection&&(i[Sl.badConnection]=!0),"string"!=typeof this.props.createMessage&&(i[Sl.textareaCustomPlaceholder]=!0),this.wrapper.current&&(t=null==(e=this.getInputBox())?void 0:e.clientHeight),this.props.preview&&(i[Sl.customTextareaPreview]=!0,n[Sl.textareaWrapperPreview]=!0,s=y("div",{tabIndex:0,ref:this.preview,className:"form-control custom-textarea textbox-preview-area",onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onBlur:this.handleBlur,onFocus:this.handleFocus,children:y(gl,{isRHS:this.props.isRHS,message:this.props.value,mentionKeys:[],channelId:this.props.channelId})}));const o=this.props.styles||{};return E("div",{ref:this.wrapper,className:A(n,o.textboxWrapper),onClick:this.focusTextbox,children:[y(El,{id:this.props.id,ref:this.message,className:A(Sl.textboxInput,o.textboxInput,i),containerClass:A(Sl.textboxContainer),spellCheck:"true",placeholder:this.props.createMessage,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,onSelect:this.handleSelect,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUp,onKeyUp:this.handleKeyUp,onComposition:this.props.onComposition,onBlur:this.handleBlur,onFocus:this.handleFocus,onHeightChange:this.handleHeightChange,style:{visibility:this.props.preview?"hidden":"visible"},inputComponent:this.props.inputComponent,listComponent:Cl,listStyle:this.props.suggestionListStyle,providers:this.suggestionProviders,channelId:this.props.channelId,value:this.props.value,renderDividers:!0,isRHS:this.props.isRHS,disabled:this.props.disabled,contextId:this.props.channelId,listenForMentionKeyClick:this.props.listenForMentionKeyClick,wrapperHeight:t,openWhenEmpty:this.props.openWhenEmpty}),s]})}}u(_l,"defaultProps",{supportsCommands:!0,isRHS:!1,listenForMentionKeyClick:!1,inputComponent:zr});const wl={active:!0};var Al=f((()=>{const e=Ee(),t=Fo(),s=Ce();return(n,i)=>{const o=Se(n),r=_e(n),a="true"===(null==r?void 0:r.IsLicensed)&&"true"===(null==r?void 0:r.LDAPGroups)&&ie(n,{channel:i.channelId,team:o,permission:oe.USE_GROUP_MENTIONS})?ea(n,o,i.channelId):null,l=e(n,i.channelId,wl),c=t(n,l);return{currentUserId:we(n),currentTeamId:o,profilesInChannel:c,autocompleteGroups:a,priorityProfiles:s(n,i)}}}),(e=>({actions:g({autocompleteUsersInChannel:Ho,autocompleteChannels:Uo,searchAssociatedGroupsForReference:al},e)})),null,{forwardRef:!0})(_l);var Pl="mqik-67c583b0",Tl="mqik-3a1587a3";const xl=V.KeyCodes;class Il extends v.PureComponent{constructor(e){super(e),u(this,"setShowPreview",(e=>{this.props.actions.setShowPreview(e)})),u(this,"getContainer",(()=>this.editModalBody.current)),u(this,"toggleEmojiPicker",(()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker}),!this.state.showEmojiPicker&&this.editbox&&this.editbox.focus()})),u(this,"hideEmojiPicker",(()=>{this.setState({showEmojiPicker:!1}),this.editbox&&this.editbox.focus()})),u(this,"handleEmojiClick",(e=>{const t=e&&(e.name||e.aliases&&e.aliases[0]);if(t){if(""===this.state.editText)this.setState({editText:":"+t+": "});else{const{editText:e}=this.state,{firstPiece:s,lastPiece:n}=ee(this.state.caretPosition,e),i=""===s?`:${t}: ${n}`:`${s} :${t}: ${n}`,o=""===s?`:${t}: `.length:`${s} :${t}: `.length,r=this.editbox.getInputBox();this.setState({editText:i,caretPosition:o},(()=>{he(r,o)}))}this.setState({showEmojiPicker:!1}),this.editbox&&this.editbox.focus()}})),u(this,"handleGifClick",(e=>{if(""===this.state.editText)this.setState({editText:e});else{const t=/\s+$/.test(this.state.editText)?this.state.editText+e:this.state.editText+" "+e;this.setState({editText:t})}this.setState({showEmojiPicker:!1}),this.editbox.focus()})),u(this,"getTarget",(()=>this.refs.editPostEmoji)),u(this,"handlePostError",(e=>{this.state.postError!==e&&this.setState({postError:e})})),u(this,"handleEdit",(async()=>{if(this.isSaveDisabled())return;const{actions:e,editingPost:t}=this.props,s={message:this.state.editText,id:t.postId,channel_id:t.post.channel_id};if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout((()=>{this.setState({errorClass:null})}),V.ANIMATION_TIMEOUT);if(s.message===(t.post.message_source||t.post.message))return void this.handleHide();const n=t.post.file_ids&&t.post.file_ids.length>0;if(0===s.message.trim().length&&!n){this.handleHide(!1);const e={ModalId:Ae.DELETE_POST,dialogType:rl,dialogProps:{post:t.post,commentCount:t.commentCount,isRHS:t.isRHS}};return void this.props.actions.openModal(e)}e.addMessageIntoHistory(s.message);await e.editPost(s)&&window.scrollTo(0,0),this.handleHide()})),u(this,"handleChange",(e=>{const t=e.target.value;this.setState({editText:t})})),u(this,"handlePaste",(e=>{if(!e.clipboardData||!e.clipboardData.items||!this.props.canEditPost||"edit_textbox"!==e.target.id)return;const{clipboardData:t}=e,s=tl(t);if(!s)return;e.preventDefault();const{editText:n}=this.state;let i=n,o=this.state.caretPosition;if(r=s.className,/\b(js|blob|diff)-./.test(r)){const{formattedMessage:e,formattedCodeBlock:s}=il(this.state.caretPosition,i,t);o=this.state.caretPosition+s.length,i=e}else i=nl(s,n.trim(),o),o=i.length-(n.length-o);var r;this.setState({editText:i,caretPosition:o},(()=>{he(this.editbox.getInputBox(),o)}))})),u(this,"handleEditKeyPress",(e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:s}=this.props,{allowSending:n,ignoreKeyPress:i}=Pe(e,this.state.editText,t,s,Date.now(),this.lastChannelSwitchAt,this.state.caretPosition);if(i)return e.preventDefault(),void e.stopPropagation();n&&(e.preventDefault(),this.editbox.blur(),this.handleEdit())})),u(this,"handleMouseUpKeyUp",(e=>{const t=Te(e.target);this.setState({caretPosition:t})})),u(this,"handleSelect",(e=>{xe(this.editbox.getInputBox(),e)})),u(this,"handleKeyDown",(e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:s}=this.props,n=e.ctrlKey||e.metaKey,i=Ie(e)&&!e.altKey&&!e.shiftKey,o=Ie(e,!0)&&e.altKey,r=(t||s)&&fe(e,xl.ENTER)&&n,a=fe(e,xl.B)||fe(e,xl.I),l=fe(e,xl.K);Me(e)?(e.stopPropagation(),this.setState({editText:ke(e)})):r?this.handleEdit():fe(e,xl.ESCAPE)&&!this.state.showEmojiPicker?this.handleHide():(i&&a||o&&l)&&this.applyHotkeyMarkdown(e)})),u(this,"applyHotkeyMarkdown",(e=>{const t=Oe(e);this.setState({editText:t.message},(()=>{const e=this.editbox.getInputBox();Re(e,t.selectionStart,t.selectionEnd)}))})),u(this,"handleHide",((e=!0)=>{this.refocusId=e?this.props.editingPost.refocusId:null,this.props.actions.hideEditPostModal()})),u(this,"handleCheckForChangesHide",(()=>{this.state.editText===this.props.editingPost.post.message&&this.handleHide()})),u(this,"handleEntered",(()=>{this.editbox&&(this.editbox.focus(),this.editbox.recalculateSize())})),u(this,"handleHeightChange",((e,t)=>{this.editbox&&this.setState({renderScrollbar:e>t,scrollbarWidth:Ne(this.editbox.getInputBox())})})),u(this,"handleExit",(()=>{this.props.actions.setShowPreview(!1)})),u(this,"handleExited",(()=>{const e=this.refocusId;e&&setTimeout((()=>{const t=document.getElementById(e);t&&t.focus()})),this.refocusId=null,this.setState({editText:"",postError:"",errorClass:null,showEmojiPicker:!1,prevShowState:!1}),this.props.actions.setShowPreview(!1)})),u(this,"setEditboxRef",(e=>{this.editbox=e,this.editbox&&this.editbox.focus()})),u(this,"isSaveDisabled",(()=>{const e=this.props.editingPost.post;return e&&e.file_ids&&e.file_ids.length>0||""!==this.state.editText.trim()?!this.props.canEditPost:!this.props.canDeletePost})),this.state={editText:"",caretPosition:"".length,postError:"",errorClass:null,showEmojiPicker:!1,renderScrollbar:!1,scrollbarWidth:0,prevShowState:e.editingPost.show},this.editModalBody=v.createRef()}static getDerivedStateFromProps(e,t){return e.editingPost.show&&!t.prevShowState?{editText:e.editingPost.post.message_source||e.editingPost.post.message,prevShowState:e.editingPost.show}:null}componentDidMount(){document.addEventListener("paste",this.handlePaste)}componentWillUnmount(){document.removeEventListener("paste",this.handlePaste)}render(){this.props.intl;const e="edit-post-footer"+(this.state.postError?" has-error":"");let t=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");t=y("label",{className:e,children:this.state.postError})}const s=!!this.props.editingPost&&this.props.editingPost.show;return E(Ur,{dialogClassName:"a11y__modal edit-modal",show:s,onHide:this.handleCheckForChangesHide,onEntered:this.handleEntered,onExit:this.handleExit,onExited:this.handleExited,"aria-labelledby":"editPostModalLabel",children:[y(Br,{closeButton:!1,children:y(ja,{componentClass:"h1",id:"editPostModalLabel",children:y(b,{id:"edit_post.edit",defaultMessage:"Edit {title}",values:{title:this.props.editingPost.title}})})}),y(jr,{children:E("div",{className:A("post-create__container",Pl),ref:this.editModalBody,children:[y("div",{className:A("textarea-wrapper",Tl,{scroll:this.state.renderScrollbar}),style:this.state.renderScrollbar&&this.state.scrollbarWidth?{"--detected-scrollbar-width":`${this.state.scrollbarWidth}px`}:void 0,children:y(Al,{tabIndex:0,onChange:this.handleChange,onKeyPress:this.handleEditKeyPress,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:this.state.editText,channelId:this.props.editingPost.post&&this.props.editingPost.post.channel_id,emojiEnabled:!1,createMessage:De("edit_post.editPost","Edit the post..."),supportsCommands:!1,suggestionListStyle:"bottom",id:"edit_textbox",ref:this.setEditboxRef,characterLimit:this.props.maxPostSize,preview:!1,useChannelMentions:this.props.useChannelMentions})}),y("div",{className:"post-create-footer",children:y("div",{className:e,children:t})})]})}),E(wr,{children:[y("button",{id:"editButton",type:"button",className:"u3-btn u3-btn-primary",disabled:this.isSaveDisabled(),onClick:this.handleEdit,children:y(b,{id:"edit_post.save",defaultMessage:"Save"})}),y("button",{type:"button",className:"u3-btn u3-btn-link",onClick:()=>this.handleHide(!0),children:y(b,{id:"edit_post.cancel",defaultMessage:"Cancel"})})]})]})}}u(Il,"propTypes",{canEditPost:_.bool,canDeletePost:_.bool,codeBlockOnCtrlEnter:_.bool,ctrlSend:_.bool,config:_.object.isRequired,intl:Yr.isRequired,maxPostSize:_.number.isRequired,shouldShowPreview:_.bool.isRequired,useChannelMentions:_.bool.isRequired,editingPost:_.shape({post:_.object,postId:_.string,refocusId:_.string,commentCount:_.number,show:_.bool.isRequired,title:_.string,isRHS:_.bool}).isRequired,actions:_.shape({addMessageIntoHistory:_.func.isRequired,editPost:_.func.isRequired,hideEditPostModal:_.func.isRequired,openModal:_.func.isRequired,setShowPreview:_.func.isRequired}).isRequired});var Ml=d(Il);var kl=f((function(e){var t;const s=q(e),n=Le(e),i=we(e),o=(null==(t=null==n?void 0:n.post)?void 0:t.channel_id)||Fe(e),r=Se(e);let a=!1,l=!1;n&&n.post&&n.post.user_id===i?(a=ie(e,{channel:o,team:r,permission:oe.DELETE_POST}),l=ie(e,{channel:o,team:r,permission:oe.EDIT_POST})):(a=ie(e,{channel:o,team:r,permission:oe.DELETE_OTHERS_POSTS}),l=ie(e,{channel:o,team:r,permission:oe.EDIT_OTHERS_POSTS}));const c=ie(e,{channel:o,team:r,permission:oe.USE_CHANNEL_MENTIONS});return n.post=n.post||{},{canEditPost:l,canDeletePost:a,codeBlockOnCtrlEnter:He(e,Ue.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:He(e,Ue.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),config:s,editingPost:n,channelId:o,shouldShowPreview:Za(e),maxPostSize:parseInt(s.MaxPostSize||"0",10)||V.DEFAULT_CHARACTER_LIMIT,useChannelMentions:c}}),(function(e){return{actions:g({addMessageIntoHistory:Be,editPost:el,hideEditPostModal:je,openModal:Ve,setShowPreview:Qa},e)}}))(Ml);var Ol="mqik-e253eb5b",Rl="mqik-acb20569";class Nl extends v.PureComponent{constructor(e){super(e),u(this,"reportModalBody"),u(this,"editbox"),u(this,"getContainer",(()=>this.reportModalBody.current)),u(this,"handlePostError",(e=>{this.state.postError!==e&&this.setState({postError:e})})),u(this,"handleReport",(async()=>{if(this.state.sending)return;this.setState({sending:!0});const{actions:e,reportPost:t}=this.props;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout((()=>{this.setState({errorClass:null})}),V.ANIMATION_TIMEOUT);await e.reportPost(t.postId||t.post.id,this.state.reasonText||"."),this.handleHide()})),u(this,"handleChange",(e=>{const t=e.target.value;this.setState({reasonText:t})})),u(this,"handleMouseUpKeyUp",(e=>{const t=Te(e.target);this.setState({caretPosition:t})})),u(this,"handleHide",(()=>{this.props.actions.hideReportPostModal()})),u(this,"handleCheckForChangesHide",(()=>{this.handleHide()})),u(this,"handleEntered",(()=>{this.editbox&&(this.editbox.focus(),this.editbox.recalculateSize())})),u(this,"handleHeightChange",((e,t)=>{this.editbox&&this.setState({renderScrollbar:e>t,scrollbarWidth:Ne(this.editbox.getInputBox())})})),u(this,"handleExit",(()=>{})),u(this,"handleExited",(()=>{this.setState({reasonText:"",postError:"",errorClass:null,showEmojiPicker:!1,prevShowState:!1})})),u(this,"setReportBoxRef",(e=>{this.editbox=e,this.editbox&&this.editbox.focus()})),this.state={reasonText:"",caretPosition:"".length,postError:"",errorClass:null,showEmojiPicker:!1,renderScrollbar:!1,scrollbarWidth:0,prevShowState:e.reportPost.show,sending:!1},this.reportModalBody=v.createRef()}static getDerivedStateFromProps(e,t){return e.reportPost.show&&!t.prevShowState?{prevShowState:e.reportPost.show,sending:!1}:null}render(){const e="edit-post-footer"+(this.state.postError?" has-error":"");let t=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");t=y("label",{className:e,children:this.state.postError})}const s=!!this.props.reportPost&&this.props.reportPost.show;return E(Ur,{dialogClassName:"a11y__modal edit-modal",show:s,onHide:this.handleCheckForChangesHide,onEntered:this.handleEntered,onExit:this.handleExit,onExited:this.handleExited,"aria-labelledby":"editPostModalLabel",children:[y(Br,{closeButton:!1,children:y(ja,{componentClass:"h1",id:"editPostModalLabel",children:y(b,{id:"report_post.title",defaultMessage:"Báo cáo {title}",values:{title:`@${this.props.username}`}})})}),y(jr,{children:E("div",{className:A("post-create__container",Ol),ref:this.reportModalBody,children:[y("div",{className:A("textarea-wrapper",Rl,{scroll:this.state.renderScrollbar}),children:y(Al,{rootId:"",onKeyPress:()=>{},onChange:this.handleChange,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onHeightChange:this.handleHeightChange,value:this.state.reasonText,channelId:this.props.reportPost.post&&this.props.reportPost.post.channel_id,emojiEnabled:!1,createMessage:De("report_post.reason","Nhập lý do..."),supportsCommands:!1,suggestionListStyle:"bottom",id:"report_textbox",ref:this.setReportBoxRef,characterLimit:this.props.maxPostSize,preview:!1,useChannelMentions:!1})}),y("div",{className:"post-create-footer",children:y("div",{className:e,children:t})})]})}),E(wr,{children:[y("button",{id:"editButton",type:"button",className:"u3-btn u3-btn-primary",disabled:this.state.sending,onClick:this.handleReport,children:this.state.sending?y(b,{id:"report_post.sending",defaultMessage:"Đang gửi..."}):y(b,{id:"report_post.submit",defaultMessage:"Gửi báo cáo"})}),y("button",{type:"button",className:"u3-btn u3-btn-link",onClick:()=>this.handleHide(),children:y(b,{id:"report_post.cancel",defaultMessage:"Hủy bỏ"})})]})]})}}u(Nl,"propTypes",{codeBlockOnCtrlEnter:_.bool,ctrlSend:_.bool,config:_.object.isRequired,intl:Yr.isRequired,maxPostSize:_.number.isRequired,username:_.string,reportPost:_.shape({post:_.object,postId:_.string,show:_.bool.isRequired,isRHS:_.bool}).isRequired,actions:_.shape({reportPost:_.func.isRequired,hideReportPostModal:_.func.isRequired,openModal:_.func.isRequired}).isRequired});var Dl=d(Nl);var Ll=f((function(e){const t=q(e),s=qe(e);s.post=s.post||{};let n="";if(s.post&&s.post.user_id){n=K(e,s.post.user_id).username}return{codeBlockOnCtrlEnter:He(e,Ue.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:He(e,Ue.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),config:t,reportPost:s,username:n,maxPostSize:parseInt(t.MaxPostSize||"0",10)||V.DEFAULT_CHARACTER_LIMIT}}),(function(e){return{actions:g({reportPost:ze,hideReportPostModal:We,openModal:Ve},e)}}))(Dl);function Fl(e=0,t=20){return Ge({clientFunc:Ke.getContacts,onSuccess:Ye.RECEIVED_CONTACTS,params:[e,t]})}function Hl(e){return{type:j.SET_SHOW_NEXT_STEPS_VIEW,show:e}}function Ul(e,t){return e.views.modals.modalState[t]&&e.views.modals.modalState[t].open}function Bl(e){return e.views.announcementBar.announcementBarState.announcementBarCount}var jl=Ua.jsx;var Vl=p.exports.forwardRef((function(e,t){return jl("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:jl("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})}))})),ql=Ua.jsx;var zl=p.exports.forwardRef((function(e,t){return ql("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:ql("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}))})),Wl=Ua.jsx;var Gl=p.exports.forwardRef((function(e,t){return Wl("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:Wl("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}))})),Kl=Ua.jsx;var Yl=p.exports.forwardRef((function(e,t){return Kl("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:Kl("path",{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"})}))})),Xl=Ua.jsx;var $l=p.exports.forwardRef((function(e,t){return Xl("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:Xl("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})}))}));class Ql extends v.PureComponent{constructor(e){super(e),u(this,"membersList"),u(this,"handleShowDirectChannel",(e=>{const{actions:t}=this.props,s=e.id;s&&t.openDirectChannelToUserId(s).then((({data:e})=>{e&&te.push(this.props.teamUrl+"/group/"+e.name),this.closePopover()}))})),u(this,"closePopover",(()=>{this.setState({showPopover:!1})})),u(this,"showMembersModal",(e=>{e.preventDefault(),this.closePopover();const t={modalId:Ae.CHANNEL_MEMBERS,dialogProps:this.props,dialogType:ta};this.props.actions.openModal(t)})),u(this,"handleGetProfilesInChannel",(e=>e.preventDefault())),u(this,"getTargetPopover",(()=>(this.membersList.current.focus(),this.refs.member_popover_target))),this.membersList=v.createRef(),this.state={showPopover:!1,users:e.users,statuses:e.statuses}}static getDerivedStateFromProps(e,t){return e.users!==t.users||e.statuses!==t.statuses?{users:e.users,statuses:e.statuses}:null}render(){this.props.channel.type,V.DM_CHANNEL;const e=0!==this.props.channel.delete_at;if(this.props.channel.type!==V.GM_CHANNEL&&!e){let e=y(b,{id:"members_popover.manageMembers",defaultMessage:"Manage Members"});!(this.props.channel.name===V.DEFAULT_CHANNEL)&&this.props.manageMembers||(e=y(b,{id:"members_popover.viewMembers",defaultMessage:"View Members"})),this.showMembersModal}const t=this.props.memberCount;let s="-";t>0&&(s=(t>999?"99+":t).toString());const n=`${De("channel_header.channelMembers","Members")}`.toLowerCase();return y(p.exports.Fragment,{children:y("button",{id:"member_popover","aria-label":n,className:"u3-inline-flex  u3-items-center u3-px-0 member-popover__trigger channel-header__icon channel-header__icon--left channel-header__icon--wide "+(this.state.showPopover?"channel-header__icon--active":""),ref:"member_popover_target",onClick:this.handleGetProfilesInChannel,title:De("channel_header.channelMembers","Members"),children:E("span",{className:"u3-flex u3-items-center u3-text-gray-600",children:[y($l,{className:"u3-h-4 u3-w-4 u3-text-gray-600 u3-mr-0.5"}),y("span",{children:s})]})})})}}u(Ql,"propTypes",{channel:_.object.isRequired,statuses:_.object.isRequired,users:_.array.isRequired,memberCount:_.number,currentUserId:_.string.isRequired,teamUrl:_.string,manageMembers:_.bool.isRequired,actions:_.shape({openModal:_.func.isRequired,loadProfilesAndStatusesInChannel:_.func.isRequired,openDirectChannelToUserId:_.func.isRequired}).isRequired,sortedUsers:_.array});var Jl=f((function(){const e=Ee(),t=(e=>S(((t,s)=>e(t,s,!0)),Xe,$e,((e,t,s)=>Qe(e,t,s))))(e);return function(s,n){const i=Je(s)[n.channel.id]||{},o=e(s,n.channel.id,{}),r=Xe(s);return{currentUserId:we(s),memberCount:i.member_count,users:o,statuses:r,teamUrl:Ze(s),manageMembers:ue(s,n.channel),sortedUsers:t(s,n.channel.id)}}}),(function(e){return{actions:g({openModal:Ve,loadProfilesAndStatusesInChannel:et,openDirectChannelToUserId:Bo},e)}}))(Ql),Zl=e=>E("div",{children:["S:",e.status]});var ec={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function tc(e){function t(e,n,l,c,p){for(var h,f,m,g,E,S=0,_=0,w=0,A=0,P=0,O=0,N=m=h=0,L=0,F=0,H=0,U=0,B=l.length,j=B-1,V="",q="",z="",W="";L<B;){if(f=l.charCodeAt(L),L===j&&_+A+w+S!==0&&(0!==_&&(f=47===_?10:47),A=w=S=0,B++,j++),_+A+w+S===0){if(L===j&&(0<F&&(V=V.replace(d,"")),0<V.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:V+=l.charAt(L)}f=59}switch(f){case 123:for(h=(V=V.trim()).charCodeAt(0),m=1,U=++L;L<B;){switch(f=l.charCodeAt(L)){case 123:m++;break;case 125:m--;break;case 47:switch(f=l.charCodeAt(L+1)){case 42:case 47:e:{for(N=L+1;N<j;++N)switch(l.charCodeAt(N)){case 47:if(42===f&&42===l.charCodeAt(N-1)&&L+2!==N){L=N+1;break e}break;case 10:if(47===f){L=N+1;break e}}L=N}}break;case 91:f++;case 40:f++;case 34:case 39:for(;L++<j&&l.charCodeAt(L)!==f;);}if(0===m)break;L++}switch(m=l.substring(U,L),0===h&&(h=(V=V.replace(u,"").trim()).charCodeAt(0)),h){case 64:switch(0<F&&(V=V.replace(d,"")),f=V.charCodeAt(1)){case 100:case 109:case 115:case 45:F=n;break;default:F=k}if(U=(m=t(n,F,m,f,p+1)).length,0<R&&(E=a(3,m,F=s(k,V,H),n,x,T,U,f,p,c),V=F.join(""),void 0!==E&&0===(U=(m=E.trim()).length)&&(f=0,m="")),0<U)switch(f){case 115:V=V.replace(C,r);case 100:case 109:case 45:m=V+"{"+m+"}";break;case 107:m=(V=V.replace(v,"$1 $2"))+"{"+m+"}",m=1===M||2===M&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=V+m,112===c&&(q+=m,m="")}else m="";break;default:m=t(n,s(n,V,H),m,c,p+1)}z+=m,m=H=F=N=h=0,V="",f=l.charCodeAt(++L);break;case 125:case 59:if(1<(U=(V=(0<F?V.replace(d,""):V).trim()).length))switch(0===N&&(h=V.charCodeAt(0),45===h||96<h&&123>h)&&(U=(V=V.replace(" ",":")).length),0<R&&void 0!==(E=a(1,V,n,e,x,T,q.length,c,p,c))&&0===(U=(V=E.trim()).length)&&(V="\0\0"),h=V.charCodeAt(0),f=V.charCodeAt(1),h){case 0:break;case 64:if(105===f||99===f){W+=V+l.charAt(L);break}default:58!==V.charCodeAt(U-1)&&(q+=i(V,h,f,V.charCodeAt(2)))}H=F=N=h=0,V="",f=l.charCodeAt(++L)}}switch(f){case 13:case 10:47===_?_=0:1+h===0&&107!==c&&0<V.length&&(F=1,V+="\0"),0<R*D&&a(0,V,n,e,x,T,q.length,c,p,c),T=1,x++;break;case 59:case 125:if(_+A+w+S===0){T++;break}default:switch(T++,g=l.charAt(L),f){case 9:case 32:if(A+S+_===0)switch(P){case 44:case 58:case 9:case 32:g="";break;default:32!==f&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:A+_+S===0&&(F=H=1,g="\f"+g);break;case 108:if(A+_+S+I===0&&0<N)switch(L-N){case 2:112===P&&58===l.charCodeAt(L-3)&&(I=P);case 8:111===O&&(I=O)}break;case 58:A+_+S===0&&(N=L);break;case 44:_+w+A+S===0&&(F=1,g+="\r");break;case 34:case 39:0===_&&(A=A===f?0:0===A?f:A);break;case 91:A+_+w===0&&S++;break;case 93:A+_+w===0&&S--;break;case 41:A+_+S===0&&w--;break;case 40:if(A+_+S===0){if(0===h)switch(2*P+3*O){case 533:break;default:h=1}w++}break;case 64:_+w+A+S+N+m===0&&(m=1);break;case 42:case 47:if(!(0<A+S+w))switch(_){case 0:switch(2*f+3*l.charCodeAt(L+1)){case 235:_=47;break;case 220:U=L,_=42}break;case 42:47===f&&42===P&&U+2!==L&&(33===l.charCodeAt(U+2)&&(q+=l.substring(U,L+1)),g="",_=0)}}0===_&&(V+=g)}O=P,P=f,L++}if(0<(U=q.length)){if(F=n,0<R&&(void 0!==(E=a(2,q,F,e,x,T,U,c,p,c))&&0===(q=E).length))return W+q+z;if(q=F.join(",")+"{"+q+"}",M*I!=0){switch(2!==M||o(q,2)||(I=0),I){case 111:q=q.replace(b,":-moz-$1")+q;break;case 112:q=q.replace(y,"::-webkit-input-$1")+q.replace(y,"::-moz-$1")+q.replace(y,":-ms-input-$1")+q}I=0}}return W+q+z}function s(e,t,s){var i=t.trim().split(m);t=i;var o=i.length,r=e.length;switch(r){case 0:case 1:var a=0;for(e=0===r?"":e[0]+" ";a<o;++a)t[a]=n(e,t[a],s).trim();break;default:var l=a=0;for(t=[];a<o;++a)for(var c=0;c<r;++c)t[l++]=n(e[c]+" ",i[a],s).trim()}return t}function n(e,t,s){var n=t.charCodeAt(0);switch(33>n&&(n=(t=t.trim()).charCodeAt(0)),n){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*s&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,s,n){var r=e+";",a=2*t+3*s+4*n;if(944===a){e=r.indexOf(":",9)+1;var l=r.substring(e,r.length-1).trim();return l=r.substring(0,e).trim()+l+";",1===M||2===M&&o(l,1)?"-webkit-"+l+l:l}if(0===M||2===M&&!o(r,1))return r;switch(a){case 1015:return 97===r.charCodeAt(10)?"-webkit-"+r+r:r;case 951:return 116===r.charCodeAt(3)?"-webkit-"+r+r:r;case 963:return 110===r.charCodeAt(5)?"-webkit-"+r+r:r;case 1009:if(100!==r.charCodeAt(4))break;case 969:case 942:return"-webkit-"+r+r;case 978:return"-webkit-"+r+"-moz-"+r+r;case 1019:case 983:return"-webkit-"+r+"-moz-"+r+"-ms-"+r+r;case 883:if(45===r.charCodeAt(8))return"-webkit-"+r+r;if(0<r.indexOf("image-set(",11))return r.replace(P,"$1-webkit-$2")+r;break;case 932:if(45===r.charCodeAt(4))switch(r.charCodeAt(5)){case 103:return"-webkit-box-"+r.replace("-grow","")+"-webkit-"+r+"-ms-"+r.replace("grow","positive")+r;case 115:return"-webkit-"+r+"-ms-"+r.replace("shrink","negative")+r;case 98:return"-webkit-"+r+"-ms-"+r.replace("basis","preferred-size")+r}return"-webkit-"+r+"-ms-"+r+r;case 964:return"-webkit-"+r+"-ms-flex-"+r+r;case 1023:if(99!==r.charCodeAt(8))break;return"-webkit-box-pack"+(l=r.substring(r.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+r+"-ms-flex-pack"+l+r;case 1005:return h.test(r)?r.replace(p,":-webkit-")+r.replace(p,":-moz-")+r:r;case 1e3:switch(t=(l=r.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=r.replace(E,"tb");break;case 232:l=r.replace(E,"tb-rl");break;case 220:l=r.replace(E,"lr");break;default:return r}return"-webkit-"+r+"-ms-"+l+r;case 1017:if(-1===r.indexOf("sticky",9))break;case 975:switch(t=(r=e).length-10,a=(l=(33===r.charCodeAt(t)?r.substring(0,t):r).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:r=r.replace(l,"-webkit-"+l)+";"+r;break;case 207:case 102:r=r.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+r.replace(l,"-webkit-"+l)+";"+r.replace(l,"-ms-"+l+"box")+";"+r}return r+";";case 938:if(45===r.charCodeAt(5))switch(r.charCodeAt(6)){case 105:return l=r.replace("-items",""),"-webkit-"+r+"-webkit-box-"+l+"-ms-flex-"+l+r;case 115:return"-webkit-"+r+"-ms-flex-item-"+r.replace(_,"")+r;default:return"-webkit-"+r+"-ms-flex-line-pack"+r.replace("align-content","").replace(_,"")+r}break;case 973:case 989:if(45!==r.charCodeAt(3)||122===r.charCodeAt(4))break;case 931:case 953:if(!0===A.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,s,n).replace(":fill-available",":stretch"):r.replace(l,"-webkit-"+l)+r.replace(l,"-moz-"+l.replace("fill-",""))+r;break;case 962:if(r="-webkit-"+r+(102===r.charCodeAt(5)?"-ms-"+r:"")+r,s+n===211&&105===r.charCodeAt(13)&&0<r.indexOf("transform",10))return r.substring(0,r.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+r}return r}function o(e,t){var s=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?s:10);return s=e.substring(s+1,e.length-1),N(2!==t?n:n.replace(w,"$1"),s,t)}function r(e,t){var s=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return s!==t+";"?s.replace(S," or ($1)").substring(4):"("+t+")"}function a(e,t,s,n,i,o,r,a,l,u){for(var d,p=0,h=t;p<R;++p)switch(d=O[p].call(c,e,h,s,n,i,o,r,a,l,u)){case void 0:case!1:case!0:case null:break;default:h=d}if(h!==t)return h}function l(e){return void 0!==(e=e.prefix)&&(N=null,e?"function"!=typeof e?M=1:(M=2,N=e):M=0),l}function c(e,s){var n=e;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<R){var i=a(-1,s,n,n,x,T,0,0,0,0);void 0!==i&&"string"==typeof i&&(s=i)}var o=t(k,n,s,0,0);return 0<R&&(void 0!==(i=a(-2,o,n,n,x,T,o.length,0,0,0))&&(o=i)),"",I=0,T=x=1,o}var u=/^\0+/g,d=/[\0\r\f]/g,p=/: */g,h=/zoo|gra/,f=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,E=/[svh]\w+-[tblr]{2}/,C=/\(\s*(.*)\s*\)/g,S=/([\s\S]*?);/g,_=/-self|flex-/g,w=/[^]*?(:[rp][el]a[\w-]+)[^]*/,A=/stretch|:\s*\w+\-(?:conte|avail)/,P=/([^-])(image-set\()/,T=1,x=1,I=0,M=1,k=[],O=[],R=0,N=null,D=0;return c.use=function e(t){switch(t){case void 0:case null:R=O.length=0;break;default:switch(t.constructor){case Array:for(var s=0,n=t.length;s<n;++s)e(t[s]);break;case Function:O[R++]=t;break;case Boolean:D=0|!!t}}return e},c.set=l,void 0!==e&&l(e),c}var sc,nc,ic={exports:{}},oc=ic.exports=function(e){var t="/*|*/",s=t+"}";function n(t){if(t)try{e(t+"}")}catch(s){}}return function(i,o,r,a,l,c,u,d,p,h){switch(i){case 1:if(0===p&&64===o.charCodeAt(0))return e(o+";"),"";break;case 2:if(0===d)return o+t;break;case 3:switch(d){case 102:case 112:return e(r[0]+o),"";default:return o+(0===h?t:"")}case-2:o.split(s).forEach(n)}}},rc=/[A-Z]|^ms/g,ac=(sc=function(e){return e.replace(rc,"-$&").toLowerCase()},nc={},function(e){return void 0===nc[e]&&(nc[e]=sc(e)),nc[e]}),lc=function(e,t){return null==t||"boolean"==typeof t?"":1===ec[e]||45===e.charCodeAt(1)||isNaN(t)||0===t?t:t+"px"},cc=function e(t){for(var s=t.length,n=0,i="";n<s;n++){var o=t[n];if(null!=o){var r=void 0;switch(typeof o){case"boolean":break;case"function":r=e([o()]);break;case"object":if(Array.isArray(o))r=e(o);else for(var a in r="",o)o[a]&&a&&(r&&(r+=" "),r+=a);break;default:r=o}r&&(i&&(i+=" "),i+=r)}}return i},uc="undefined"!=typeof document;function dc(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key||""),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),(void 0!==e.container?e.container:document.head).appendChild(t),t}var pc=function(){function e(e){this.isSpeedy=!0,this.tags=[],this.ctr=0,this.opts=e}var t=e.prototype;return t.inject=function(){if(this.injected)throw new Error("already injected!");this.tags[0]=dc(this.opts),this.injected=!0},t.speedy=function(e){if(0!==this.ctr)throw new Error("cannot change speedy now");this.isSpeedy=!!e},t.insert=function(e,t){if(this.isSpeedy){var s=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(this.tags[this.tags.length-1]);try{s.insertRule(e,s.cssRules.length)}catch(i){}}else{var n=dc(this.opts);this.tags.push(n),n.appendChild(document.createTextNode(e+(t||"")))}this.ctr++,this.ctr%65e3==0&&this.tags.push(dc(this.opts))},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0,this.injected=!1},e}();var hc=function(e,t){if(void 0!==e.__SECRET_EMOTION__)return e.__SECRET_EMOTION__;void 0===t&&(t={});var s,n,i=t.key||"css",o=oc((function(e){s+=e,uc&&a.insert(e,c)}));void 0!==t.prefix&&(n={prefix:t.prefix});var r={registered:{},inserted:{},nonce:t.nonce,key:i},a=new pc(t);uc&&a.inject();var l=new tc(n);l.use(t.stylisPlugins)(o);var c="";function u(e,t){if(null==e)return"";switch(typeof e){case"boolean":return"";case"function":if(void 0!==e.__emotion_styles){var s=e.toString();return s}return u.call(this,void 0===this?e():e(this.mergedProps,this.context),t);case"object":return f.call(this,e);default:var n=r.registered[e];return!1===t&&void 0!==n?n:e}}var d,p,h=new WeakMap;function f(e){if(h.has(e))return h.get(e);var t="";return Array.isArray(e)?e.forEach((function(e){t+=u.call(this,e,!1)}),this):Object.keys(e).forEach((function(s){"object"!=typeof e[s]?void 0!==r.registered[e[s]]?t+=s+"{"+r.registered[e[s]]+"}":t+=ac(s)+":"+lc(s,e[s])+";":Array.isArray(e[s])&&"string"==typeof e[s][0]&&void 0===r.registered[e[s][0]]?e[s].forEach((function(e){t+=ac(s)+":"+lc(s,e)+";"})):t+=s+"{"+u.call(this,e[s],!1)+"}"}),this),h.set(e,t),t}var m=/label:\s*([^\s;\n{]+)\s*;/g,g=function(e,t){return function(e){for(var t,s=e.length,n=s^s,i=0;s>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(t>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),s-=4,++i;switch(s){case 3:n^=(255&e.charCodeAt(i+2))<<16;case 2:n^=(255&e.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(i)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),((n^=n>>>15)>>>0).toString(36)}(e+t)+t},v=function(e){var t=!0,s="",n="";null==e||void 0===e.raw?(t=!1,s+=u.call(this,e,!1)):s+=e[0];for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];return o.forEach((function(n,i){s+=u.call(this,n,46===s.charCodeAt(s.length-1)),!0===t&&void 0!==e[i+1]&&(s+=e[i+1])}),this),p=s,s=s.replace(m,(function(e,t){return n+="-"+t,""})),d=g(s,n),s};function y(e,t){void 0===r.inserted[d]&&(s="",l(e,t),r.inserted[d]=s)}var b=function(){var e=v.apply(this,arguments),t=i+"-"+d;return void 0===r.registered[t]&&(r.registered[t]=p),y("."+t,e),t};function E(e,t){var s="";return t.split(" ").forEach((function(t){void 0!==r.registered[t]?e.push(t):s+=t+" "})),s}function C(e,t){var s=[],n=E(s,e);return s.length<2?e:n+b(s,t)}function S(e){r.inserted[e]=!0}if(uc){var _=document.querySelectorAll("[data-emotion-"+i+"]");Array.prototype.forEach.call(_,(function(e){a.tags[0].parentNode.insertBefore(e,a.tags[0]),e.getAttribute("data-emotion-"+i).split(" ").forEach(S)}))}var w={flush:function(){uc&&(a.flush(),a.inject()),r.inserted={},r.registered={}},hydrate:function(e){e.forEach(S)},cx:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return C(cc(t))},merge:C,getRegisteredStyles:E,injectGlobal:function(){var e=v.apply(this,arguments);y("",e)},keyframes:function(){var e=v.apply(this,arguments),t="animation-"+d;return y("","@keyframes "+t+"{"+e+"}"),t},css:b,sheet:a,caches:r};return e.__SECRET_EMOTION__=w,w}("undefined"!=typeof global?global:{});hc.flush,hc.hydrate,hc.cx,hc.merge,hc.getRegisteredStyles;var fc=hc.injectGlobal;hc.keyframes;var mc=hc.css;hc.sheet,hc.caches;var gc={exports:{}},vc={exports:{}};(function(){var e,t,s,n,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?vc.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(vc.exports=function(){return(e()-i)/1e6},t=process.hrtime,n=(e=function(){var e;return 1e9*(e=t())[0]+e[1]})(),o=1e9*process.uptime(),i=n-o):Date.now?(vc.exports=function(){return Date.now()-s},s=Date.now()):(vc.exports=function(){return(new Date).getTime()-s},s=(new Date).getTime())}).call(T);for(var yc=vc.exports,bc="undefined"==typeof window?T:window,Ec=["moz","webkit"],Cc="AnimationFrame",Sc=bc["request"+Cc],_c=bc["cancel"+Cc]||bc["cancelRequest"+Cc],wc=0;!Sc&&wc<Ec.length;wc++)Sc=bc[Ec[wc]+"Request"+Cc],_c=bc[Ec[wc]+"Cancel"+Cc]||bc[Ec[wc]+"CancelRequest"+Cc];if(!Sc||!_c){var Ac=0,Pc=0,Tc=[];Sc=function(e){if(0===Tc.length){var t=yc(),s=Math.max(0,16.666666666666668-(t-Ac));Ac=s+t,setTimeout((function(){var e=Tc.slice(0);Tc.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(Ac)}catch(s){setTimeout((function(){throw s}),0)}}),Math.round(s))}return Tc.push({handle:++Pc,callback:e,cancelled:!1}),Pc},_c=function(e){for(var t=0;t<Tc.length;t++)Tc[t].handle===e&&(Tc[t].cancelled=!0)}}gc.exports=function(e){return Sc.call(bc,e)},gc.exports.cancel=function(){_c.apply(bc,arguments)},gc.exports.polyfill=function(e){e||(e=bc),e.requestAnimationFrame=Sc,e.cancelAnimationFrame=_c};var xc=gc.exports,Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});var Mc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},kc=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),Oc=p.exports,Rc=Dc(Oc),Nc=Dc(x.exports);function Dc(e){return e&&e.__esModule?e:{default:e}}var Lc={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},Fc=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],Hc=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},Uc=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),Bc=function(){return Uc?"_"+Math.random().toString(36).substr(2,12):void 0},jc=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.inputRef=function(e){s.input=e,"function"==typeof s.props.inputRef&&s.props.inputRef(e)},s.placeHolderSizerRef=function(e){s.placeHolderSizer=e},s.sizerRef=function(e){s.sizer=e},s.state={inputWidth:e.minWidth,inputId:e.id||Bc()},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Oc.Component),kc(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||Bc()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(Hc(e,this.sizer),this.placeHolderSizer&&Hc(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return Uc&&e?Rc.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce((function(e,t){return null!=e?e:t})),t=Mc({},this.props.style);t.display||(t.display="inline-block");var s=Mc({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),n=function(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s}(this.props,[]);return function(e){Fc.forEach((function(t){return delete e[t]}))}(n),n.className=this.props.inputClassName,n.id=this.state.inputId,n.style=s,Rc.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),Rc.default.createElement("input",Mc({},n,{ref:this.inputRef})),Rc.default.createElement("div",{ref:this.sizerRef,style:Lc},e),this.props.placeholder?Rc.default.createElement("div",{ref:this.placeHolderSizerRef,style:Lc},this.props.placeholder):null)}}]),t}();jc.propTypes={className:Nc.default.string,defaultValue:Nc.default.any,extraWidth:Nc.default.oneOfType([Nc.default.number,Nc.default.string]),id:Nc.default.string,injectStyles:Nc.default.bool,inputClassName:Nc.default.string,inputRef:Nc.default.func,inputStyle:Nc.default.object,minWidth:Nc.default.oneOfType([Nc.default.number,Nc.default.string]),onAutosize:Nc.default.func,onChange:Nc.default.func,placeholder:Nc.default.string,placeholderIsMinWidth:Nc.default.bool,style:Nc.default.object,value:Nc.default.any},jc.defaultProps={minWidth:1,injectStyles:!0};var Vc,qc=Ic.default=jc,zc={exports:{}},Wc={exports:{}},Gc={exports:{}};(Vc=Gc).exports=function(e){return e&&e.__esModule?e:{default:e}},Vc.exports.__esModule=!0,Vc.exports.default=Vc.exports;var Kc={exports:{}};function Yc(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}!function(e,t){t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default}(Kc,Kc.exports),function(e,t){var s=Gc.exports;t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,n.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var n=s(Kc.exports);e.exports=t.default}(Wc,Wc.exports);var Xc=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=Yc(e.className,t):e.setAttribute("class",Yc(e.className&&e.className.baseVal||"",t))},$c={};function Qc(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Jc(e){this.setState(function(t){var s=this.constructor.getDerivedStateFromProps(e,t);return null!=s?s:null}.bind(this))}function Zc(e,t){try{var s=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,n)}finally{this.props=s,this.state=n}}Qc.__suppressDeprecationWarning=!0,Jc.__suppressDeprecationWarning=!0,Zc.__suppressDeprecationWarning=!0;var eu=I(Object.freeze(Object.defineProperty({__proto__:null,polyfill:function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var s=null,n=null,i=null;if("function"==typeof t.componentWillMount?s="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(s="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?i="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==s||null!==n||null!==i){var o=e.displayName||e.name,r="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+r+" but also contains the following legacy lifecycles:"+(null!==s?"\n  "+s:"")+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=Qc,t.componentWillReceiveProps=Jc),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Zc;var a=t.componentDidUpdate;t.componentDidUpdate=function(e,t,s){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:s;a.call(this,e,t,n)}}return e}},Symbol.toStringTag,{value:"Module"})));$c.__esModule=!0,$c.default=$c.EXITING=$c.ENTERED=$c.ENTERING=$c.EXITED=$c.UNMOUNTED=void 0;var tu=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,s):{};n.get||n.set?Object.defineProperty(t,s,n):t[s]=e[s]}return t.default=e,t}(x.exports),su=ou(p.exports),nu=ou(M.exports),iu=eu;function ou(e){return e&&e.__esModule?e:{default:e}}$c.UNMOUNTED="unmounted";$c.EXITED="exited";$c.ENTERING="entering";$c.ENTERED="entered";$c.EXITING="exiting";var ru=function(e){var t,s;function n(t,s){var n;n=e.call(this,t,s)||this;var i,o=s.transitionGroup,r=o&&!o.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?r?(i="exited",n.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",n.state={status:i},n.nextCallback=null,n}s=e,(t=n).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var i=n.prototype;return i.getChildContext=function(){return{transitionGroup:null}},n.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null},i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var s=this.state.status;this.props.in?"entering"!==s&&"entered"!==s&&(t="entering"):"entering"!==s&&"entered"!==s||(t="exiting")}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,s,n=this.props.timeout;return e=t=s=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,s=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:s}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var s=nu.default.findDOMNode(this);"entering"===t?this.performEnter(s,e):this.performExit(s)}else this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},i.performEnter=function(e,t){var s=this,n=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts(),r=i?o.appear:o.enter;t||n?(this.props.onEnter(e,i),this.safeSetState({status:"entering"},(function(){s.props.onEntering(e,i),s.onTransitionEnd(e,r,(function(){s.safeSetState({status:"entered"},(function(){s.props.onEntered(e,i)}))}))}))):this.safeSetState({status:"entered"},(function(){s.props.onEntered(e)}))},i.performExit=function(e){var t=this,s=this.props.exit,n=this.getTimeouts();s?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,n.exit,(function(){t.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,s=!0;return this.nextCallback=function(n){s&&(s=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},i.onTransitionEnd=function(e,t,s){this.setNextCallback(s);var n=null==t&&!this.props.addEndListener;e&&!n?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,s=t.children,n=function(e,t){if(null==e)return{};var s,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)s=o[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(t,["children"]);if(delete n.in,delete n.mountOnEnter,delete n.unmountOnExit,delete n.appear,delete n.enter,delete n.exit,delete n.timeout,delete n.addEndListener,delete n.onEnter,delete n.onEntering,delete n.onEntered,delete n.onExit,delete n.onExiting,delete n.onExited,"function"==typeof s)return s(e,n);var i=su.default.Children.only(s);return su.default.cloneElement(i,n)},n}(su.default.Component);function au(){}ru.contextTypes={transitionGroup:tu.object},ru.childContextTypes={transitionGroup:function(){}},ru.propTypes={},ru.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:au,onEntering:au,onEntered:au,onExit:au,onExiting:au,onExited:au},ru.UNMOUNTED=0,ru.EXITED=1,ru.ENTERING=2,ru.ENTERED=3,ru.EXITING=4;var lu=(0,iu.polyfill)(ru);$c.default=lu,function(e,t){t.__esModule=!0,t.default=void 0,function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,s):{};n.get||n.set?Object.defineProperty(t,s,n):t[s]=e[s]}t.default=e}(x.exports);var s=r(Wc.exports),n=r(Xc),i=r(p.exports),o=r($c);function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var l=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,n.default)(e,t)}))},u=function(e){var t,s;function n(){for(var t,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).onEnter=function(e,s){var n=t.getClassNames(s?"appear":"enter").className;t.removeClasses(e,"exit"),l(e,n),t.props.onEnter&&t.props.onEnter(e,s)},t.onEntering=function(e,s){var n=t.getClassNames(s?"appear":"enter").activeClassName;t.reflowAndAddClass(e,n),t.props.onEntering&&t.props.onEntering(e,s)},t.onEntered=function(e,s){var n=t.getClassNames("appear").doneClassName,i=t.getClassNames("enter").doneClassName,o=s?n+" "+i:i;t.removeClasses(e,s?"appear":"enter"),l(e,o),t.props.onEntered&&t.props.onEntered(e,s)},t.onExit=function(e){var s=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),l(e,s),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var s=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,s),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var s=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),l(e,s),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var s=t.props.classNames,n="string"==typeof s,i=n?(n&&s?s+"-":"")+e:s[e];return{className:i,activeClassName:n?i+"-active":s[e+"Active"],doneClassName:n?i+"-done":s[e+"Done"]}},t}s=e,(t=n).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var r=n.prototype;return r.removeClasses=function(e,t){var s=this.getClassNames(t),n=s.className,i=s.activeClassName,o=s.doneClassName;n&&c(e,n),i&&c(e,i),o&&c(e,o)},r.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,l(e,t))},r.render=function(){var e=a({},this.props);return delete e.classNames,i.default.createElement(o.default,a({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(i.default.Component);u.defaultProps={classNames:""},u.propTypes={};var d=u;t.default=d,e.exports=t.default}(zc,zc.exports);var cu={exports:{}},uu={exports:{}},du={__esModule:!0};du.getChildMapping=hu,du.mergeChildMappings=fu,du.getInitialChildMapping=function(e,t){return hu(e.children,(function(s){return(0,pu.cloneElement)(s,{onExited:t.bind(null,s),in:!0,appear:mu(s,"appear",e),enter:mu(s,"enter",e),exit:mu(s,"exit",e)})}))},du.getNextChildMapping=function(e,t,s){var n=hu(e.children),i=fu(t,n);return Object.keys(i).forEach((function(o){var r=i[o];if((0,pu.isValidElement)(r)){var a=o in t,l=o in n,c=t[o],u=(0,pu.isValidElement)(c)&&!c.props.in;!l||a&&!u?l||!a||u?l&&a&&(0,pu.isValidElement)(c)&&(i[o]=(0,pu.cloneElement)(r,{onExited:s.bind(null,r),in:c.props.in,exit:mu(r,"exit",e),enter:mu(r,"enter",e)})):i[o]=(0,pu.cloneElement)(r,{in:!1}):i[o]=(0,pu.cloneElement)(r,{onExited:s.bind(null,r),in:!0,exit:mu(r,"exit",e),enter:mu(r,"enter",e)})}})),i};var pu=p.exports;function hu(e,t){var s=Object.create(null);return e&&pu.Children.map(e,(function(e){return e})).forEach((function(e){s[e.key]=function(e){return t&&(0,pu.isValidElement)(e)?t(e):e}(e)})),s}function fu(e,t){function s(s){return s in t?t[s]:e[s]}e=e||{},t=t||{};var n,i=Object.create(null),o=[];for(var r in e)r in t?o.length&&(i[r]=o,o=[]):o.push(r);var a={};for(var l in t){if(i[l])for(n=0;n<i[l].length;n++){var c=i[l][n];a[i[l][n]]=s(c)}a[l]=s(l)}for(n=0;n<o.length;n++)a[o[n]]=s(o[n]);return a}function mu(e,t,s){return null!=s[t]?s[t]:e.props[t]}!function(e,t){t.__esModule=!0,t.default=void 0;var s=r(x.exports),n=r(p.exports),i=eu,o=du;function r(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},u=function(e){var t,s;function i(t,s){var n,i=(n=e.call(this,t,s)||this).handleExited.bind(l(l(n)));return n.state={handleExited:i,firstRender:!0},n}s=e,(t=i).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var r=i.prototype;return r.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},r.componentDidMount=function(){this.appeared=!0,this.mounted=!0},r.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,t){var s=t.children,n=t.handleExited;return{children:t.firstRender?(0,o.getInitialChildMapping)(e,n):(0,o.getNextChildMapping)(e,s,n),firstRender:!1}},r.handleExited=function(e,t){var s=(0,o.getChildMapping)(this.props.children);e.key in s||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var s=a({},t.children);return delete s[e.key],{children:s}})))},r.render=function(){var e=this.props,t=e.component,s=e.childFactory,i=function(e,t){if(null==e)return{};var s,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)s=o[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,["component","childFactory"]),o=c(this.state.children).map(s);return delete i.appear,delete i.enter,delete i.exit,null===t?o:n.default.createElement(t,i,o)},i}(n.default.Component);u.childContextTypes={transitionGroup:s.default.object.isRequired},u.propTypes={},u.defaultProps={component:"div",childFactory:function(e){return e}};var d=(0,i.polyfill)(u);t.default=d,e.exports=t.default}(uu,uu.exports),function(e,t){t.__esModule=!0,t.default=void 0,o(x.exports);var s=o(p.exports),n=M.exports,i=o(uu.exports);function o(e){return e&&e.__esModule?e:{default:e}}var r=function(e){var t,o;function r(){for(var t,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).handleEnter=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return t.handleLifecycle("onEnter",0,s)},t.handleEntering=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return t.handleLifecycle("onEntering",0,s)},t.handleEntered=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return t.handleLifecycle("onEntered",0,s)},t.handleExit=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return t.handleLifecycle("onExit",1,s)},t.handleExiting=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return t.handleLifecycle("onExiting",1,s)},t.handleExited=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return t.handleLifecycle("onExited",1,s)},t}o=e,(t=r).prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o;var a=r.prototype;return a.handleLifecycle=function(e,t,i){var o,r=this.props.children,a=s.default.Children.toArray(r)[t];a.props[e]&&(o=a.props)[e].apply(o,i),this.props[e]&&this.props[e]((0,n.findDOMNode)(this))},a.render=function(){var e=this.props,t=e.children,n=e.in,o=function(e,t){if(null==e)return{};var s,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)s=o[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,["children","in"]),r=s.default.Children.toArray(t),a=r[0],l=r[1];return delete o.onEnter,delete o.onEntering,delete o.onEntered,delete o.onExit,delete o.onExiting,delete o.onExited,s.default.createElement(i.default,o,n?s.default.cloneElement(a,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):s.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},r}(s.default.Component);r.propTypes={};var a=r;t.default=a,e.exports=t.default}(cu,cu.exports);var gu=bu(zc.exports),vu=bu(cu.exports),yu=bu(uu.exports);function bu(e){return e&&e.__esModule?e:{default:e}}var Eu={Transition:bu($c).default,TransitionGroup:yu.default,ReplaceTransition:vu.default,CSSTransition:gu.default};function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Su(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _u(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wu(e,t,s){return t&&_u(e.prototype,t),s&&_u(e,s),e}function Au(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Pu(){return(Pu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Tu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),n.forEach((function(t){Au(e,t,s[t])}))}return e}function xu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mu(e,t)}function Iu(e){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mu(e,t){return(Mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ku(e,t){if(null==e)return{};var s,n,i=function(e,t){if(null==e)return{};var s,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)s=o[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)s=o[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function Ou(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ru(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Ou(e):t}function Nu(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Du=function(){};function Lu(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function Fu(e,t,s,n){var i=[t,n];if(s&&e)for(var o in s)s.hasOwnProperty(o)&&s[o]&&i.push("".concat(Lu(e,o)));return i.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var Hu=function(e){return Array.isArray(e)?e.filter(Boolean):"object"===Cu(e)&&null!==e?[e]:[]};function Uu(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Bu(e){return Uu(e)?window.pageYOffset:e.scrollTop}function ju(e,t){Uu(e)?window.scrollTo(0,t):e.scrollTop=t}function Vu(e,t,s,n){return s*((e=e/n-1)*e*e+1)+t}function qu(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Du,i=Bu(e),o=t-i,r=10,a=0;function l(){var t=Vu(a+=r,i,o,s);ju(e,t),a<s?xc(l):n(e)}l()}function zu(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}function Wu(e){var t=e.maxHeight,s=e.menuEl,n=e.minHeight,i=e.placement,o=e.shouldScroll,r=e.isFixedPosition,a=e.theme.spacing,l=function(e){var t=getComputedStyle(e),s="absolute"===t.position,n=/(auto|scroll)/,i=document.documentElement;if("fixed"===t.position)return i;for(var o=e;o=o.parentElement;)if(t=getComputedStyle(o),(!s||"static"!==t.position)&&n.test(t.overflow+t.overflowY+t.overflowX))return o;return i}(s),c={placement:"bottom",maxHeight:t};if(!s||!s.offsetParent)return c;var u=l.getBoundingClientRect().height,d=s.getBoundingClientRect(),p=d.bottom,h=d.height,f=d.top,m=s.offsetParent.getBoundingClientRect().top,g=window.innerHeight,v=Bu(l),y=parseInt(getComputedStyle(s).marginBottom,10),b=parseInt(getComputedStyle(s).marginTop,10),E=m-b,C=g-f,S=E+v,_=u-v-f,w=p-g+v+y,A=v+f-b,P=160;switch(i){case"auto":case"bottom":if(C>=h)return{placement:"bottom",maxHeight:t};if(_>=h&&!r)return o&&qu(l,w,P),{placement:"bottom",maxHeight:t};if(!r&&_>=n||r&&C>=n)return o&&qu(l,w,P),{placement:"bottom",maxHeight:r?C-y:_-y};if("auto"===i||r){var T=t,x=r?E:S;return x>=n&&(T=Math.min(x-y-a.controlHeight,t)),{placement:"top",maxHeight:T}}if("bottom"===i)return ju(l,w),{placement:"bottom",maxHeight:t};break;case"top":if(E>=h)return{placement:"top",maxHeight:t};if(S>=h&&!r)return o&&qu(l,A,P),{placement:"top",maxHeight:t};if(!r&&S>=n||r&&E>=n){var I=t;return(!r&&S>=n||r&&E>=n)&&(I=r?E-b:S-b),o&&qu(l,A,P),{placement:"top",maxHeight:I}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}var Gu=function(e){return"auto"===e?"bottom":e},Ku=function(e){function t(){var e,s;Su(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Au(Ou(Ou(s=Ru(this,(e=Iu(t)).call.apply(e,[this].concat(i))))),"state",{maxHeight:s.props.maxMenuHeight,placement:null}),Au(Ou(Ou(s)),"getPlacement",(function(e){var t=s.props,n=t.minMenuHeight,i=t.maxMenuHeight,o=t.menuPlacement,r=t.menuPosition,a=t.menuShouldScrollIntoView,l=t.theme,c=s.context.getPortalPlacement;if(e){var u="fixed"===r,d=Wu({maxHeight:i,menuEl:e,minHeight:n,placement:o,shouldScroll:a&&!u,isFixedPosition:u,theme:l});c&&c(d),s.setState(d)}})),Au(Ou(Ou(s)),"getUpdatedProps",(function(){var e=s.props.menuPlacement,t=s.state.placement||Gu(e);return Tu({},s.props,{placement:t,maxHeight:s.state.maxHeight})})),s}return xu(t,p.exports.Component),wu(t,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),t}();Au(Ku,"contextTypes",{getPortalPlacement:_.func});var Yu=function(e){var t=e.theme,s=t.spacing.baseUnit;return{color:t.colors.neutral40,padding:"".concat(2*s,"px ").concat(3*s,"px"),textAlign:"center"}},Xu=Yu,$u=Yu,Qu=function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.innerProps;return y("div",l(a({className:n(mc(i("noOptionsMessage",e)),{"menu-notice":!0,"menu-notice--no-options":!0},s)},o),{children:t}))};Qu.defaultProps={children:"No options"};var Ju=function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.innerProps;return y("div",l(a({className:n(mc(i("loadingMessage",e)),{"menu-notice":!0,"menu-notice--loading":!0},s)},o),{children:t}))};Ju.defaultProps={children:"Loading..."};var Zu=function(e){function t(){var e,s;Su(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Au(Ou(Ou(s=Ru(this,(e=Iu(t)).call.apply(e,[this].concat(i))))),"state",{placement:null}),Au(Ou(Ou(s)),"getPortalPlacement",(function(e){var t=e.placement;t!==Gu(s.props.menuPlacement)&&s.setState({placement:t})})),s}return xu(t,p.exports.Component),wu(t,[{key:"getChildContext",value:function(){return{getPortalPlacement:this.getPortalPlacement}}},{key:"render",value:function(){var e=this.props,t=e.appendTo,s=e.children,n=e.controlElement,i=e.menuPlacement,o=e.menuPosition,r=e.getStyles,a="fixed"===o;if(!t&&!a||!n)return null;var l=this.state.placement||Gu(i),c=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(n),u=a?0:window.pageYOffset,d=c[l]+u,p=y("div",{className:mc(r("menuPortal",{offset:d,position:o,rect:c})),children:s});return t?M.exports.createPortal(p,t):p}}]),t}();Au(Zu,"childContextTypes",{getPortalPlacement:_.func});var ed=Array.isArray,td=Object.keys,sd=Object.prototype.hasOwnProperty;function nd(e,t){if(e===t)return!0;if(e&&t&&"object"==Cu(e)&&"object"==Cu(t)){var s,n,i,o=ed(e),r=ed(t);if(o&&r){if((n=e.length)!=t.length)return!1;for(s=n;0!=s--;)if(!nd(e[s],t[s]))return!1;return!0}if(o!=r)return!1;var a=e instanceof Date,l=t instanceof Date;if(a!=l)return!1;if(a&&l)return e.getTime()==t.getTime();var c=e instanceof RegExp,u=t instanceof RegExp;if(c!=u)return!1;if(c&&u)return e.toString()==t.toString();var d=td(e);if((n=d.length)!==td(t).length)return!1;for(s=n;0!=s--;)if(!sd.call(t,d[s]))return!1;for(s=n;0!=s--;)if(!("_owner"===(i=d[s])&&e.$$typeof||nd(e[i],t[i])))return!1;return!0}return e!=e&&t!=t}function id(e,t){try{return nd(e,t)}catch(s){if(s.message&&s.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",s.name,s.message),!1;throw s}}var od=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],rd=function(e){for(var t=0;t<od.length;t++)e=e.replace(od[t].letters,od[t].base);return e},ad=function(e){return e.replace(/^\s+|\s+$/g,"")},ld=function(e){return"".concat(e.label," ").concat(e.value)},cd=function(e){return y("span",a({className:mc({label:"a11yText",zIndex:9999,border:0,clip:"rect(1px, 1px, 1px, 1px)",height:1,width:1,position:"absolute",overflow:"hidden",padding:0,whiteSpace:"nowrap",backgroundColor:"red",color:"blue"})},e))},ud=function(e){function t(){return Su(this,t),Ru(this,Iu(t).apply(this,arguments))}return xu(t,p.exports.Component),wu(t,[{key:"render",value:function(){var e=this.props;e.in,e.out,e.onExited,e.appear,e.enter,e.exit;var t=e.innerRef;e.emotion;var s=ku(e,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return y("input",l(a({ref:t},s),{className:mc({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"})}))}}]),t}(),dd=function(e){function t(){return Su(this,t),Ru(this,Iu(t).apply(this,arguments))}return xu(t,p.exports.Component),wu(t,[{key:"componentDidMount",value:function(){this.props.innerRef(M.exports.findDOMNode(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),t}(),pd=["boxSizing","height","overflow","paddingRight","position"],hd={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function fd(e){e.preventDefault()}function md(e){e.stopPropagation()}function gd(){var e=this.scrollTop,t=this.scrollHeight,s=e+this.offsetHeight;0===e?this.scrollTop=1:s===t&&(this.scrollTop=e-1)}function vd(){return"ontouchstart"in window||navigator.maxTouchPoints}var yd=!("undefined"==typeof window||!window.document||!window.document.createElement),bd=0,Ed=function(e){function t(){var e,s;Su(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Au(Ou(Ou(s=Ru(this,(e=Iu(t)).call.apply(e,[this].concat(i))))),"originalStyles",{}),Au(Ou(Ou(s)),"listenerOptions",{capture:!1,passive:!1}),s}return xu(t,p.exports.Component),wu(t,[{key:"componentDidMount",value:function(){var e=this;if(yd){var t=this.props,s=t.accountForScrollbars,n=t.touchScrollTarget,i=document.body,o=i&&i.style;if(s&&pd.forEach((function(t){var s=o&&o[t];e.originalStyles[t]=s})),s&&bd<1){var r=parseInt(this.originalStyles.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,l=window.innerWidth-a+r||0;Object.keys(hd).forEach((function(e){var t=hd[e];o&&(o[e]=t)})),o&&(o.paddingRight="".concat(l,"px"))}i&&vd()&&(i.addEventListener("touchmove",fd,this.listenerOptions),n&&(n.addEventListener("touchstart",gd,this.listenerOptions),n.addEventListener("touchmove",md,this.listenerOptions))),bd+=1}}},{key:"componentWillUnmount",value:function(){var e=this;if(yd){var t=this.props,s=t.accountForScrollbars,n=t.touchScrollTarget,i=document.body,o=i&&i.style;bd=Math.max(bd-1,0),s&&bd<1&&pd.forEach((function(t){var s=e.originalStyles[t];o&&(o[t]=s)})),i&&vd()&&(i.removeEventListener("touchmove",fd,this.listenerOptions),n&&(n.removeEventListener("touchstart",gd,this.listenerOptions),n.removeEventListener("touchmove",md,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),t}();Au(Ed,"defaultProps",{accountForScrollbars:!0});var Cd=function(e){function t(){var e,s;Su(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Au(Ou(Ou(s=Ru(this,(e=Iu(t)).call.apply(e,[this].concat(i))))),"state",{touchScrollTarget:null}),Au(Ou(Ou(s)),"getScrollTarget",(function(e){e!==s.state.touchScrollTarget&&s.setState({touchScrollTarget:e})})),Au(Ou(Ou(s)),"blurSelectInput",(function(){document.activeElement&&document.activeElement.blur()})),s}return xu(t,p.exports.PureComponent),wu(t,[{key:"render",value:function(){var e=this.props,t=e.children,s=e.isEnabled,n=this.state.touchScrollTarget;return s?E("div",{children:[y("div",{onClick:this.blurSelectInput,className:mc({position:"fixed",left:0,bottom:0,right:0,top:0})}),y(dd,{innerRef:this.getScrollTarget,children:t}),n?y(Ed,{touchScrollTarget:n}):null]}):t}}]),t}(),Sd=function(e){function t(){var e,s;Su(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Au(Ou(Ou(s=Ru(this,(e=Iu(t)).call.apply(e,[this].concat(i))))),"isBottom",!1),Au(Ou(Ou(s)),"isTop",!1),Au(Ou(Ou(s)),"scrollTarget",void 0),Au(Ou(Ou(s)),"touchStart",void 0),Au(Ou(Ou(s)),"cancelScroll",(function(e){e.preventDefault(),e.stopPropagation()})),Au(Ou(Ou(s)),"handleEventDelta",(function(e,t){var n=s.props,i=n.onBottomArrive,o=n.onBottomLeave,r=n.onTopArrive,a=n.onTopLeave,l=s.scrollTarget,c=l.scrollTop,u=l.scrollHeight,d=l.clientHeight,p=s.scrollTarget,h=t>0,f=u-d-c,m=!1;f>t&&s.isBottom&&(o&&o(e),s.isBottom=!1),h&&s.isTop&&(a&&a(e),s.isTop=!1),h&&t>f?(i&&!s.isBottom&&i(e),p.scrollTop=u,m=!0,s.isBottom=!0):!h&&-t>c&&(r&&!s.isTop&&r(e),p.scrollTop=0,m=!0,s.isTop=!0),m&&s.cancelScroll(e)})),Au(Ou(Ou(s)),"onWheel",(function(e){s.handleEventDelta(e,e.deltaY)})),Au(Ou(Ou(s)),"onTouchStart",(function(e){s.touchStart=e.changedTouches[0].clientY})),Au(Ou(Ou(s)),"onTouchMove",(function(e){var t=s.touchStart-e.changedTouches[0].clientY;s.handleEventDelta(e,t)})),Au(Ou(Ou(s)),"getScrollTarget",(function(e){s.scrollTarget=e})),s}return xu(t,p.exports.Component),wu(t,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(e){e&&(e.scrollHeight<=e.clientHeight||("function"==typeof e.addEventListener&&e.addEventListener("wheel",this.onWheel,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchmove",this.onTouchMove,!1)))}},{key:"stopListening",value:function(e){e.scrollHeight<=e.clientHeight||("function"==typeof e.removeEventListener&&e.removeEventListener("wheel",this.onWheel,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return y(dd,{innerRef:this.getScrollTarget,children:this.props.children})}}]),t}(),_d=function(e){function t(){return Su(this,t),Ru(this,Iu(t).apply(this,arguments))}return xu(t,p.exports.Component),wu(t,[{key:"render",value:function(){var e=this.props,t=e.isEnabled,s=ku(e,["isEnabled"]);return t?y(Sd,a({},s)):this.props.children}}]),t}();Au(_d,"defaultProps",{isEnabled:!0});var wd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.isSearchable,n=t.isMulti,i=t.label,o=t.isDisabled;switch(e){case"menu":return"Use Up and Down to choose options".concat(o?"":", press Enter to select the currently focused option",", press Escape to exit the menu, press Tab to select the option and exit the menu.");case"input":return"".concat(i||"Select"," is focused ").concat(s?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}},Ad=function(e,t){var s=t.value,n=t.isDisabled;if(s)switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"select-option":return"option ".concat(s,n?" is disabled. Select another option.":", selected.")}},Pd=function(e){return!!e.isDisabled},Td=function(e){function t(){return Su(this,t),Ru(this,Iu(t).apply(this,arguments))}return xu(t,p.exports.Component),wu(t,[{key:"render",value:function(){var e=this.props,t=e.children,s=e.className,n=e.cx,i=e.isMulti,o=e.getStyles,r=e.hasValue;return y("div",{className:n(mc(o("valueContainer",this.props)),{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":r},s),children:t})}}]),t}(),xd=function(e){var t=e.size,s=ku(e,["size"]);return y("svg",a({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:mc({display:"inline-block",fill:"currentColor",lineHeight:1,stroke:"currentColor",strokeWidth:0})},s))},Id=function(e){return y(xd,l(a({size:20},e),{children:y("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"})}))},Md=function(e){return y(xd,l(a({size:20},e),{children:y("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})}))},kd=function(e){var t=e.isFocused,s=e.theme,n=s.spacing.baseUnit,i=s.colors;return{label:"indicatorContainer",color:t?i.neutral60:i.neutral20,display:"flex",padding:2*n,transition:"color 150ms",":hover":{color:t?i.neutral80:i.neutral40}}},Od=kd,Rd=kd,Nd=!1,Dd=function(e){var t=e.color,s=e.delay,n=e.offset;return y("span",{className:mc({animationDuration:"1s",animationDelay:"".concat(s,"ms"),animationIterationCount:"infinite",animationName:"react-select-loading-indicator",animationTimingFunction:"ease-in-out",backgroundColor:t,borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":null,height:"1em",verticalAlign:"top",width:"1em"})})},Ld=function(e){var t=e.className,s=e.cx,n=e.getStyles,i=e.innerProps,o=e.isFocused,r=e.isRtl,c=e.theme.colors,u=o?c.neutral80:c.neutral20;return Nd||(fc("@keyframes ","react-select-loading-indicator","{0%,80%,100%{opacity:0;}40%{opacity:1;}};"),Nd=!0),E("div",l(a({},i),{className:s(mc(n("loadingIndicator",e)),{indicator:!0,"loading-indicator":!0},t),children:[y(Dd,{color:u,delay:0,offset:r}),y(Dd,{color:u,delay:160,offset:!0}),y(Dd,{color:u,delay:320,offset:!r})]}))};Ld.defaultProps={size:4};var Fd=function(e){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:e?0:1,outline:0,padding:0,color:"inherit"}},Hd=function(e){var t=e.children,s=e.innerProps;return y("div",l(a({},s),{children:t}))},Ud=Hd,Bd=Hd,jd=function(e){function t(){return Su(this,t),Ru(this,Iu(t).apply(this,arguments))}return xu(t,p.exports.Component),wu(t,[{key:"render",value:function(){var e=this.props,t=e.children,s=e.innerProps;return y("div",l(a({},s),{children:t||y(Id,{size:14})}))}}]),t}(),Vd=function(e){function t(){return Su(this,t),Ru(this,Iu(t).apply(this,arguments))}return xu(t,p.exports.Component),wu(t,[{key:"render",value:function(){var e=this.props,t=e.children,s=e.className,n=e.components,i=e.cx,o=e.data,r=e.getStyles,a=e.innerProps,l=e.isDisabled,c=e.removeProps,u=e.selectProps,d=n.Container,p=n.Label,h=n.Remove,f=Tu({className:i(mc(r("multiValue",this.props)),{"multi-value":!0,"multi-value--is-disabled":l},s)},a),m={className:i(mc(r("multiValueLabel",this.props)),{"multi-value__label":!0},s)},g=Tu({className:i(mc(r("multiValueRemove",this.props)),{"multi-value__remove":!0},s)},c);return E(d,{data:o,innerProps:f,selectProps:u,children:[y(p,{data:o,innerProps:m,selectProps:u,children:t}),y(h,{data:o,innerProps:g,selectProps:u})]})}}]),t}();Au(Vd,"defaultProps",{cropWithEllipsis:!0});var qd,zd={ClearIndicator:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.innerProps;return y("div",l(a({},o),{className:n(mc(i("clearIndicator",e)),{indicator:!0,"clear-indicator":!0},s),children:t||y(Id,{})}))},Control:function(e){var t=e.children,s=e.cx,n=e.getStyles,i=e.className,o=e.isDisabled,r=e.isFocused,c=e.innerRef,u=e.innerProps,d=e.menuIsOpen;return y("div",l(a({ref:c,className:s(mc(n("control",e)),{control:!0,"control--is-disabled":o,"control--is-focused":r,"control--menu-is-open":d},i)},u),{children:t}))},DropdownIndicator:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.innerProps;return y("div",l(a({},o),{className:n(mc(i("dropdownIndicator",e)),{indicator:!0,"dropdown-indicator":!0},s),children:t||y(Md,{})}))},DownChevron:Md,CrossIcon:Id,Group:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.Heading,r=e.headingProps,c=e.label,u=e.theme,d=e.selectProps;return E("div",{className:n(mc(i("group",e)),{group:!0},s),children:[y(o,l(a({},r),{selectProps:d,theme:u,getStyles:i,cx:n,children:c})),y("div",{children:t})]})},GroupHeading:function(e){var t=e.className,s=e.cx,n=e.getStyles,i=e.theme;e.selectProps;var o=ku(e,["className","cx","getStyles","theme","selectProps"]);return y("div",a({className:s(mc(n("groupHeading",Tu({theme:i},o))),{"group-heading":!0},t)},o))},IndicatorsContainer:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles;return y("div",{className:n(mc(i("indicatorsContainer",e)),{indicators:!0},s),children:t})},IndicatorSeparator:function(e){var t=e.className,s=e.cx,n=e.getStyles,i=e.innerProps;return y("span",l(a({},i),{className:s(mc(n("indicatorSeparator",e)),{"indicator-separator":!0},t)}))},Input:function(e){var t=e.className,s=e.cx,n=e.getStyles,i=e.innerRef,o=e.isHidden,r=e.isDisabled,l=e.theme;e.selectProps;var c=ku(e,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]);return y("div",{className:mc(n("input",Tu({theme:l},c))),children:y(qc,a({className:s(null,{input:!0},t),inputRef:i,inputStyle:Fd(o),disabled:r},c))})},LoadingIndicator:Ld,Menu:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.innerRef,r=e.innerProps,c=n(mc(i("menu",e)),{menu:!0},s);return y("div",l(a({className:c},r),{ref:o,children:t}))},MenuList:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.isMulti,r=e.innerRef;return y("div",{className:n(mc(i("menuList",e)),{"menu-list":!0,"menu-list--is-multi":o},s),ref:r,children:t})},MenuPortal:Zu,LoadingMessage:Ju,NoOptionsMessage:Qu,MultiValue:Vd,MultiValueContainer:Ud,MultiValueLabel:Bd,MultiValueRemove:jd,Option:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.isDisabled,r=e.isFocused,c=e.isSelected,u=e.innerRef,d=e.innerProps;return y("div",l(a({ref:u,className:n(mc(i("option",e)),{option:!0,"option--is-disabled":o,"option--is-focused":r,"option--is-selected":c},s)},d),{children:t}))},Placeholder:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.innerProps;return y("div",l(a({className:n(mc(i("placeholder",e)),{placeholder:!0},s)},o),{children:t}))},SelectContainer:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.innerProps,r=e.isDisabled,c=e.isRtl;return y("div",l(a({className:n(mc(i("container",e)),{"--is-disabled":r,"--is-rtl":c},s)},o),{children:t}))},SingleValue:function(e){var t=e.children,s=e.className,n=e.cx,i=e.getStyles,o=e.isDisabled,r=e.innerProps;return y("div",l(a({className:n(mc(i("singleValue",e)),{"single-value":!0,"single-value--is-disabled":o},s)},r),{children:t}))},ValueContainer:Td},Wd=function(e){return Tu({},zd,e.components)},Gd={clearIndicator:Rd,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":null,pointerEvents:t?"none":null,position:"relative"}},control:function(e){var t=e.isDisabled,s=e.isFocused,n=e.theme,i=n.colors,o=n.borderRadius,r=n.spacing;return{label:"control",alignItems:"center",backgroundColor:t?i.neutral5:i.neutral0,borderColor:t?i.neutral10:s?i.primary:i.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(i.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:r.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:s?i.primary:i.neutral30}}},dropdownIndicator:Od,group:function(e){var t=e.theme.spacing;return{paddingBottom:2*t.baseUnit,paddingTop:2*t.baseUnit}},groupHeading:function(e){var t=e.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*t.baseUnit,paddingRight:3*t.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e){var t=e.isDisabled,s=e.theme,n=s.spacing.baseUnit,i=s.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:t?i.neutral10:i.neutral20,marginBottom:2*n,marginTop:2*n,width:1}},input:function(e){var t=e.isDisabled,s=e.theme,n=s.spacing,i=s.colors;return{margin:n.baseUnit/2,paddingBottom:n.baseUnit/2,paddingTop:n.baseUnit/2,visibility:t?"hidden":"visible",color:i.neutral80}},loadingIndicator:function(e){var t=e.isFocused,s=e.size,n=e.theme,i=n.colors,o=n.spacing.baseUnit;return{label:"loadingIndicator",color:t?i.neutral60:i.neutral20,display:"flex",padding:2*o,transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"}},loadingMessage:$u,menu:function(e){var t,s=e.placement,n=e.theme,i=n.borderRadius,o=n.spacing,r=n.colors;return Au(t={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(s),"100%"),Au(t,"backgroundColor",r.neutral0),Au(t,"borderRadius",i),Au(t,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),Au(t,"marginBottom",o.menuGutter),Au(t,"marginTop",o.menuGutter),Au(t,"position","absolute"),Au(t,"width","100%"),Au(t,"zIndex",1),t},menuList:function(e){var t=e.maxHeight,s=e.theme.spacing.baseUnit;return{maxHeight:t,overflowY:"auto",paddingBottom:s,paddingTop:s,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(e){var t=e.rect,s=e.offset,n=e.position;return{left:t.left,position:n,top:s,width:t.width,zIndex:1}},multiValue:function(e){var t=e.theme,s=t.spacing,n=t.borderRadius;return{label:"multiValue",backgroundColor:t.colors.neutral10,borderRadius:n/2,display:"flex",margin:s.baseUnit/2,minWidth:0}},multiValueLabel:function(e){var t=e.theme,s=t.borderRadius,n=t.colors,i=e.cropWithEllipsis;return{borderRadius:s/2,color:n.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:i?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(e){var t=e.theme,s=t.spacing,n=t.borderRadius,i=t.colors;return{alignItems:"center",borderRadius:n/2,backgroundColor:e.isFocused&&i.dangerLight,display:"flex",paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}}},noOptionsMessage:Xu,option:function(e){var t=e.isDisabled,s=e.isFocused,n=e.isSelected,i=e.theme,o=i.spacing,r=i.colors;return{label:"option",backgroundColor:n?r.primary:s?r.primary25:"transparent",color:t?r.neutral20:n?r.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!t&&(n?r.primary:r.primary50)}}},placeholder:function(e){var t=e.theme,s=t.spacing;return{label:"placeholder",color:t.colors.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(e){var t=e.isDisabled,s=e.theme,n=s.spacing,i=s.colors;return{label:"singleValue",color:t?i.neutral40:i.neutral80,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,maxWidth:"calc(100% - ".concat(2*n.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(e){var t=e.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(t.baseUnit/2,"px ").concat(2*t.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}},Kd={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Yd={backspaceRemovesValue:!0,blurInputOnSelect:zu(),captureMenuScroll:!zu(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){var s=Tu({ignoreCase:!0,ignoreAccents:!0,stringify:ld,trim:!0,matchFrom:"any"},qd),n=s.ignoreCase,i=s.ignoreAccents,o=s.stringify,r=s.trim,a=s.matchFrom,l=r?ad(t):t,c=r?ad(o(e)):o(e);return n&&(l=l.toLowerCase(),c=c.toLowerCase()),i&&(l=rd(l),c=rd(c)),"start"===a?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Pd,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0},Xd=1,$d=function(e){function t(e){var s;Su(this,t),Au(Ou(Ou(s=Ru(this,Iu(t).call(this,e)))),"state",{ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]}),Au(Ou(Ou(s)),"blockOptionHover",!1),Au(Ou(Ou(s)),"isComposing",!1),Au(Ou(Ou(s)),"clearFocusValueOnUpdate",!1),Au(Ou(Ou(s)),"commonProps",void 0),Au(Ou(Ou(s)),"components",void 0),Au(Ou(Ou(s)),"hasGroups",!1),Au(Ou(Ou(s)),"initialTouchX",0),Au(Ou(Ou(s)),"initialTouchY",0),Au(Ou(Ou(s)),"inputIsHiddenAfterUpdate",void 0),Au(Ou(Ou(s)),"instancePrefix",""),Au(Ou(Ou(s)),"openAfterFocus",!1),Au(Ou(Ou(s)),"scrollToFocusedOptionOnUpdate",!1),Au(Ou(Ou(s)),"userIsDragging",void 0),Au(Ou(Ou(s)),"controlRef",null),Au(Ou(Ou(s)),"getControlRef",(function(e){s.controlRef=e})),Au(Ou(Ou(s)),"focusedOptionRef",null),Au(Ou(Ou(s)),"getFocusedOptionRef",(function(e){s.focusedOptionRef=e})),Au(Ou(Ou(s)),"menuListRef",null),Au(Ou(Ou(s)),"getMenuListRef",(function(e){s.menuListRef=e})),Au(Ou(Ou(s)),"inputRef",null),Au(Ou(Ou(s)),"getInputRef",(function(e){s.inputRef=e})),Au(Ou(Ou(s)),"cacheComponents",(function(e){s.components=Wd({components:e})})),Au(Ou(Ou(s)),"focus",s.focusInput),Au(Ou(Ou(s)),"blur",s.blurInput),Au(Ou(Ou(s)),"onChange",(function(e,t){var n=s.props;(0,n.onChange)(e,Tu({},t,{name:n.name}))})),Au(Ou(Ou(s)),"setValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set-value",n=arguments.length>2?arguments[2]:void 0,i=s.props,o=i.closeMenuOnSelect,r=i.isMulti;s.onInputChange("",{action:"set-value"}),o&&(s.inputIsHiddenAfterUpdate=!r,s.onMenuClose()),s.clearFocusValueOnUpdate=!0,s.onChange(e,{action:t,option:n})})),Au(Ou(Ou(s)),"selectOption",(function(e){var t=s.props,n=t.blurInputOnSelect,i=t.isMulti,o=s.state.selectValue;if(i)if(s.isOptionSelected(e,o)){var r=s.getOptionValue(e);s.setValue(o.filter((function(e){return s.getOptionValue(e)!==r})),"deselect-option",e),s.announceAriaLiveSelection({event:"deselect-option",context:{value:s.getOptionLabel(e)}})}else s.isOptionDisabled(e,o)?s.announceAriaLiveSelection({event:"select-option",context:{value:s.getOptionLabel(e),isDisabled:!0}}):(s.setValue([].concat(Nu(o),[e]),"select-option",e),s.announceAriaLiveSelection({event:"select-option",context:{value:s.getOptionLabel(e)}}));else s.isOptionDisabled(e,o)?s.announceAriaLiveSelection({event:"select-option",context:{value:s.getOptionLabel(e),isDisabled:!0}}):(s.setValue(e,"select-option"),s.announceAriaLiveSelection({event:"select-option",context:{value:s.getOptionLabel(e)}}));n&&s.blurInput()})),Au(Ou(Ou(s)),"removeValue",(function(e){var t=s.state.selectValue,n=s.getOptionValue(e);s.onChange(t.filter((function(e){return s.getOptionValue(e)!==n})),{action:"remove-value",removedValue:e}),s.announceAriaLiveSelection({event:"remove-value",context:{value:e?s.getOptionLabel(e):""}}),s.focusInput()})),Au(Ou(Ou(s)),"clearValue",(function(){var e=s.props.isMulti;s.onChange(e?[]:null,{action:"clear"})})),Au(Ou(Ou(s)),"popValue",(function(){var e=s.state.selectValue,t=e[e.length-1];s.announceAriaLiveSelection({event:"pop-value",context:{value:t?s.getOptionLabel(t):""}}),s.onChange(e.slice(0,e.length-1),{action:"pop-value",removedValue:t})})),Au(Ou(Ou(s)),"getOptionLabel",(function(e){return s.props.getOptionLabel(e)})),Au(Ou(Ou(s)),"getOptionValue",(function(e){return s.props.getOptionValue(e)})),Au(Ou(Ou(s)),"getStyles",(function(e,t){var n=Gd[e](t);n.boxSizing="border-box";var i=s.props.styles[e];return i?i(n,t):n})),Au(Ou(Ou(s)),"getElementId",(function(e){return"".concat(s.instancePrefix,"-").concat(e)})),Au(Ou(Ou(s)),"getActiveDescendentId",(function(){var e=s.props.menuIsOpen,t=s.state,n=t.menuOptions,i=t.focusedOption;if(i&&e){var o=n.focusable.indexOf(i),r=n.render[o];return r&&r.key}})),Au(Ou(Ou(s)),"announceAriaLiveSelection",(function(e){var t=e.event,n=e.context;s.setState({ariaLiveSelection:Ad(t,n)})})),Au(Ou(Ou(s)),"announceAriaLiveContext",(function(e){var t=e.event,n=e.context;s.setState({ariaLiveContext:wd(t,Tu({},n,{label:s.props["aria-label"]}))})})),Au(Ou(Ou(s)),"onMenuMouseDown",(function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),s.focusInput())})),Au(Ou(Ou(s)),"onMenuMouseMove",(function(e){s.blockOptionHover=!1})),Au(Ou(Ou(s)),"onControlMouseDown",(function(e){var t=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?"INPUT"!==e.target.tagName&&s.onMenuClose():t&&s.openMenu("first"):(t&&(s.openAfterFocus=!0),s.focusInput()),"INPUT"!==e.target.tagName&&e.preventDefault()})),Au(Ou(Ou(s)),"onDropdownIndicatorMouseDown",(function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||s.props.isDisabled)){var t=s.props,n=t.isMulti,i=t.menuIsOpen;s.focusInput(),i?(s.inputIsHiddenAfterUpdate=!n,s.onMenuClose()):s.openMenu("first"),e.preventDefault(),e.stopPropagation()}})),Au(Ou(Ou(s)),"onClearIndicatorMouseDown",(function(e){e&&"mousedown"===e.type&&0!==e.button||(s.clearValue(),e.stopPropagation(),s.openAfterFocus=!1,setTimeout((function(){return s.focusInput()})))})),Au(Ou(Ou(s)),"onScroll",(function(e){"boolean"==typeof s.props.closeMenuOnScroll?e.target instanceof HTMLElement&&Uu(e.target)&&s.props.onMenuClose():"function"==typeof s.props.closeMenuOnScroll&&s.props.closeMenuOnScroll(e)&&s.props.onMenuClose()})),Au(Ou(Ou(s)),"onCompositionStart",(function(){s.isComposing=!0})),Au(Ou(Ou(s)),"onCompositionEnd",(function(){s.isComposing=!1})),Au(Ou(Ou(s)),"onTouchStart",(function(e){var t=e.touches.item(0);t&&(s.initialTouchX=t.clientX,s.initialTouchY=t.clientY,s.userIsDragging=!1)})),Au(Ou(Ou(s)),"onTouchMove",(function(e){var t=e.touches.item(0);if(t){var n=Math.abs(t.clientX-s.initialTouchX),i=Math.abs(t.clientY-s.initialTouchY);s.userIsDragging=n>5||i>5}})),Au(Ou(Ou(s)),"onTouchEnd",(function(e){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(e.target)&&s.menuListRef&&!s.menuListRef.contains(e.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)})),Au(Ou(Ou(s)),"onControlTouchEnd",(function(e){s.userIsDragging||s.onControlMouseDown(e)})),Au(Ou(Ou(s)),"onClearIndicatorTouchEnd",(function(e){s.userIsDragging||s.onClearIndicatorMouseDown(e)})),Au(Ou(Ou(s)),"onDropdownIndicatorTouchEnd",(function(e){s.userIsDragging||s.onDropdownIndicatorMouseDown(e)})),Au(Ou(Ou(s)),"handleInputChange",(function(e){var t=e.currentTarget.value;s.inputIsHiddenAfterUpdate=!1,s.onInputChange(t,{action:"input-change"}),s.onMenuOpen()})),Au(Ou(Ou(s)),"onInputFocus",(function(e){var t=s.props,n=t.isSearchable,i=t.isMulti;s.props.onFocus&&s.props.onFocus(e),s.inputIsHiddenAfterUpdate=!1,s.announceAriaLiveContext({event:"input",context:{isSearchable:n,isMulti:i}}),s.setState({isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1})),Au(Ou(Ou(s)),"onInputBlur",(function(e){s.menuListRef&&s.menuListRef.contains(document.activeElement)?s.inputRef.focus():(s.props.onBlur&&s.props.onBlur(e),s.onInputChange("",{action:"input-blur"}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1}))})),Au(Ou(Ou(s)),"onOptionHover",(function(e){s.blockOptionHover||s.state.focusedOption===e||s.setState({focusedOption:e})})),Au(Ou(Ou(s)),"shouldHideSelectedOptions",(function(){var e=s.props,t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t})),Au(Ou(Ou(s)),"onKeyDown",(function(e){var t=s.props,n=t.isMulti,i=t.backspaceRemovesValue,o=t.escapeClearsValue,r=t.inputValue,a=t.isClearable,l=t.isDisabled,c=t.menuIsOpen,u=t.onKeyDown,d=t.tabSelectsValue,p=t.openMenuOnFocus,h=s.state,f=h.focusedOption,m=h.focusedValue,g=h.selectValue;if(!(l||"function"==typeof u&&(u(e),e.defaultPrevented))){switch(s.blockOptionHover=!0,e.key){case"ArrowLeft":if(!n||r)return;s.focusValue("previous");break;case"ArrowRight":if(!n||r)return;s.focusValue("next");break;case"Delete":case"Backspace":if(r)return;if(m)s.removeValue(m);else{if(!i)return;n?s.popValue():a&&s.clearValue()}break;case"Tab":if(s.isComposing)return;if(e.shiftKey||!c||!d||!f||p&&s.isOptionSelected(f,g))return;s.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(c){if(!f)return;if(s.isComposing)return;s.selectOption(f);break}return;case"Escape":c?(s.inputIsHiddenAfterUpdate=!1,s.onInputChange("",{action:"menu-close"}),s.onMenuClose()):a&&o&&s.clearValue();break;case" ":if(r)return;if(!c){s.openMenu("first");break}if(!f)return;s.selectOption(f);break;case"ArrowUp":c?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":c?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!c)return;s.focusOption("pageup");break;case"PageDown":if(!c)return;s.focusOption("pagedown");break;case"Home":if(!c)return;s.focusOption("first");break;case"End":if(!c)return;s.focusOption("last");break;default:return}e.preventDefault()}}));var n=e.value;s.cacheComponents=ul(s.cacheComponents,id).bind(Ou(Ou(s))),s.cacheComponents(e.components),s.instancePrefix="react-select-"+(s.props.instanceId||++Xd);var i=Hu(n),o=s.buildMenuOptions(e,i);return s.state.menuOptions=o,s.state.selectValue=i,s}return xu(t,p.exports.Component),wu(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,s=t.options,n=t.value,i=t.inputValue;if(this.cacheComponents(e.components),e.value!==n||e.options!==s||e.inputValue!==i){var o=Hu(e.value),r=this.buildMenuOptions(e,o),a=this.getNextFocusedValue(o),l=this.getNextFocusedOption(r.focusable);this.setState({menuOptions:r,selectValue:o,focusedOption:l,focusedValue:a})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(e){var t,s,n,i,o,r=this.props,a=r.isDisabled,l=r.menuIsOpen,c=this.state.isFocused;(c&&!a&&e.isDisabled||c&&l&&!e.menuIsOpen)&&this.focusInput(),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(t=this.menuListRef,s=this.focusedOptionRef,n=t.getBoundingClientRect(),i=s.getBoundingClientRect(),o=s.offsetHeight/3,i.bottom+o>n.bottom?ju(t,Math.min(s.offsetTop+s.clientHeight-t.offsetHeight+o,t.scrollHeight)):i.top-o<n.top&&ju(t,Math.max(s.offsetTop-o,0))),this.scrollToFocusedOptionOnUpdate=!1}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var e=this.props,t=e.isSearchable,s=e.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:t,isMulti:s}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this.state,s=t.menuOptions,n=t.selectValue,i=t.isFocused,o=this.props.isMulti,r="first"===e?0:s.focusable.length-1;if(!o){var a=s.focusable.indexOf(n[0]);a>-1&&(r=a)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.onMenuOpen(),this.setState({focusedValue:null,focusedOption:s.focusable[r]}),this.announceAriaLiveContext({event:"menu"})}},{key:"focusValue",value:function(e){var t=this.props,s=t.isMulti,n=t.isSearchable,i=this.state,o=i.selectValue,r=i.focusedValue;if(s){this.setState({focusedOption:null});var a=o.indexOf(r);r||(a=-1,this.announceAriaLiveContext({event:"value"}));var l=o.length-1,c=-1;if(o.length){switch(e){case"previous":c=0===a?0:-1===a?l:a-1;break;case"next":a>-1&&a<l&&(c=a+1)}-1===c&&this.announceAriaLiveContext({event:"input",context:{isSearchable:n,isMulti:s}}),this.setState({inputIsHidden:-1!==c,focusedValue:o[c]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,s=this.state,n=s.focusedOption,i=s.menuOptions,o=i.focusable;if(o.length){var r=0,a=o.indexOf(n);n||(a=-1,this.announceAriaLiveContext({event:"menu"})),"up"===e?r=a>0?a-1:o.length-1:"down"===e?r=(a+1)%o.length:"pageup"===e?(r=a-t)<0&&(r=0):"pagedown"===e?(r=a+t)>o.length-1&&(r=o.length-1):"last"===e&&(r=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[r],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:Pd(o[r])}})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(Kd):Tu({},Kd,this.props.theme):Kd}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.getStyles,s=this.setValue,n=this.selectOption,i=this.props,o=i.classNamePrefix,r=i.isMulti,a=i.isRtl,l=i.options,c=this.state.selectValue,u=this.hasValue();return{cx:Fu.bind(null,o),clearValue:e,getStyles:t,getValue:function(){return c},hasValue:u,isMulti:r,isRtl:a,options:l,selectOption:n,setValue:s,selectProps:i,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(e){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var t=this.state,s=t.focusedValue,n=t.selectValue.indexOf(s);if(n>-1){if(e.indexOf(s)>-1)return s;if(n<e.length)return e[n]}return null}},{key:"getNextFocusedOption",value:function(e){var t=this.state.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,s=e.isMulti;return void 0===t?s:t}},{key:"isOptionDisabled",value:function(e,t){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(e,t)}},{key:"isOptionSelected",value:function(e,t){var s=this;if(t.indexOf(e)>-1)return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(e,t);var n=this.getOptionValue(e);return t.some((function(e){return s.getOptionValue(e)===n}))}},{key:"filterOption",value:function(e,t){return!this.props.filterOption||this.props.filterOption(e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"==typeof this.props.formatOptionLabel){var s=this.props.inputValue,n=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:s,selectValue:n})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"buildMenuOptions",value:function(e,t){var s=this,n=e.inputValue,i=void 0===n?"":n,o=e.options,r=function(e,n){var o=s.isOptionDisabled(e,t),r=s.isOptionSelected(e,t),a=s.getOptionLabel(e),l=s.getOptionValue(e);if(!(s.shouldHideSelectedOptions()&&r||!s.filterOption({label:a,value:l,data:e},i))){var c=o?void 0:function(){return s.onOptionHover(e)},u=o?void 0:function(){return s.selectOption(e)},d="".concat(s.getElementId("option"),"-").concat(n);return{innerProps:{id:d,onClick:u,onMouseMove:c,onMouseOver:c,tabIndex:-1},data:e,isDisabled:o,isSelected:r,key:d,label:a,type:"option",value:l}}};return o.reduce((function(e,t,n){if(t.options){s.hasGroups||(s.hasGroups=!0);var i=t.options.map((function(t,s){var i=r(t,"".concat(n,"-").concat(s));return i&&e.focusable.push(t),i})).filter(Boolean);if(i.length){var o="".concat(s.getElementId("group"),"-").concat(n);e.render.push({type:"group",key:o,data:t,options:i})}}else{var a=r(t,"".concat(n));a&&(e.render.push(a),e.focusable.push(t))}return e}),{render:[],focusable:[]})}},{key:"constructAriaLiveMessage",value:function(){var e=this.state,t=e.ariaLiveContext,s=e.selectValue,n=e.focusedValue,i=e.focusedOption,o=this.props,r=o.options,a=o.menuIsOpen,l=o.inputValue,c=o.screenReaderStatus,u=n?function(e){var t=e.focusedValue,s=e.getOptionLabel,n=e.selectValue;return"value ".concat(s(t)," focused, ").concat(n.indexOf(t)+1," of ").concat(n.length,".")}({focusedValue:n,getOptionLabel:this.getOptionLabel,selectValue:s}):"",d=i&&a?function(e){var t=e.focusedOption,s=e.getOptionLabel,n=e.options;return"option ".concat(s(t)," focused").concat(t.isDisabled?" disabled":"",", ").concat(n.indexOf(t)+1," of ").concat(n.length,".")}({focusedOption:i,getOptionLabel:this.getOptionLabel,options:r}):"",p=function(e){var t=e.inputValue,s=e.screenReaderMessage;return"".concat(s).concat(t?" for search term "+t:"",".")}({inputValue:l,screenReaderMessage:c({count:this.countOptions()})});return"".concat(u," ").concat(d," ").concat(p," ").concat(t)}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,s=e.isSearchable,n=e.inputId,i=e.inputValue,o=e.tabIndex,r=this.components.Input,l=this.state.inputIsHidden,c=n||this.getElementId("input");if(!s)return y(ud,{id:c,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Du,onFocus:this.onInputFocus,readOnly:!0,disabled:t,tabIndex:o,value:""});var u={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]},d=this.commonProps,p=d.cx,h=d.theme,f=d.selectProps;return y(r,a({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:p,getStyles:this.getStyles,id:c,innerRef:this.getInputRef,isDisabled:t,isHidden:l,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:f,spellCheck:"false",tabIndex:o,theme:h,type:"text",value:i},u))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.components,s=t.MultiValue,n=t.MultiValueContainer,i=t.MultiValueLabel,o=t.MultiValueRemove,r=t.SingleValue,c=t.Placeholder,u=this.commonProps,d=this.props,h=d.controlShouldRenderValue,f=d.isDisabled,m=d.isMulti,g=d.inputValue,v=d.placeholder,b=this.state,E=b.selectValue,C=b.focusedValue,S=b.isFocused;if(!this.hasValue()||!h)return g?null:p.exports.createElement(c,l(a({},u),{key:"placeholder",isDisabled:f,isFocused:S}),v);if(m)return E.map((function(t){var r=t===C;return p.exports.createElement(s,l(a({},u),{components:{Container:n,Label:i,Remove:o},isFocused:r,isDisabled:f,key:e.getOptionValue(t),removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},data:t}),e.formatOptionLabel(t,"value"))}));if(g)return null;var _=E[0];return y(r,l(a({},u),{data:_,isDisabled:f,children:this.formatOptionLabel(_,"value")}))}},{key:"renderClearIndicator",value:function(){var e=this.components.ClearIndicator,t=this.commonProps,s=this.props,n=s.isDisabled,i=s.isLoading,o=this.state.isFocused;if(!this.isClearable()||!e||n||!this.hasValue()||i)return null;var r={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return y(e,l(a({},t),{innerProps:r,isFocused:o}))}},{key:"renderLoadingIndicator",value:function(){var e=this.components.LoadingIndicator,t=this.commonProps,s=this.props,n=s.isDisabled,i=s.isLoading,o=this.state.isFocused;if(!e||!i)return null;return y(e,l(a({},t),{innerProps:{"aria-hidden":"true"},isDisabled:n,isFocused:o}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.components,t=e.DropdownIndicator,s=e.IndicatorSeparator;if(!t||!s)return null;var n=this.commonProps,i=this.props.isDisabled,o=this.state.isFocused;return y(s,l(a({},n),{isDisabled:i,isFocused:o}))}},{key:"renderDropdownIndicator",value:function(){var e=this.components.DropdownIndicator;if(!e)return null;var t=this.commonProps,s=this.props.isDisabled,n=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return y(e,l(a({},t),{innerProps:i,isDisabled:s,isFocused:n}))}},{key:"renderMenu",value:function(){var e=this,t=this.components,s=t.Group,n=t.GroupHeading,i=t.Menu,o=t.MenuList,r=t.MenuPortal,c=t.LoadingMessage,u=t.NoOptionsMessage,d=t.Option,p=this.commonProps,h=this.state,f=h.focusedOption,m=h.menuOptions,g=this.props,v=g.captureMenuScroll,b=g.inputValue,E=g.isLoading,C=g.loadingMessage,S=g.minMenuHeight,_=g.maxMenuHeight,w=g.menuIsOpen,A=g.menuPlacement,P=g.menuPosition,T=g.menuPortalTarget,x=g.menuShouldBlockScroll,I=g.menuShouldScrollIntoView,M=g.noOptionsMessage,k=g.onMenuScrollToTop,O=g.onMenuScrollToBottom;if(!w)return null;var R,N=function(t){var s=f===t.data;return t.innerRef=s?e.getFocusedOptionRef:void 0,y(d,l(a(a({},p),t),{isFocused:s,children:e.formatOptionLabel(t.data,"menu")}))};if(this.hasOptions())R=m.render.map((function(t){if("group"===t.type){t.type;var i=ku(t,["type"]),o="".concat(t.key,"-heading");return y(s,l(a(a({},p),i),{Heading:n,headingProps:{id:o},label:e.formatGroupLabel(t.data),children:t.options.map((function(e){return N(e)}))}))}if("option"===t.type)return N(t)}));else if(E){var D=C({inputValue:b});if(null===D)return null;R=y(c,l(a({},p),{children:D}))}else{var L=M({inputValue:b});if(null===L)return null;R=y(u,l(a({},p),{children:L}))}var F={minMenuHeight:S,maxMenuHeight:_,menuPlacement:A,menuPosition:P,menuShouldScrollIntoView:I},H=y(Ku,l(a(a({},p),F),{children:function(t){var s=t.ref,n=t.placerProps,r=n.placement,c=n.maxHeight;return y(i,l(a(a({},p),F),{innerRef:s,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:E,placement:r,children:y(_d,{isEnabled:v,onTopArrive:k,onBottomArrive:O,children:y(Cd,{isEnabled:x,children:y(o,l(a({},p),{innerRef:e.getMenuListRef,isLoading:E,maxHeight:c,children:R}))})})}))}}));return T||"fixed"===P?y(r,l(a({},p),{appendTo:T,controlElement:this.controlRef,menuPlacement:A,menuPosition:P,children:H})):H}},{key:"renderFormField",value:function(){var e=this,t=this.props,s=t.delimiter,n=t.isDisabled,i=t.isMulti,o=t.name,r=this.state.selectValue;if(o&&!n){if(i){if(s){var a=r.map((function(t){return e.getOptionValue(t)})).join(s);return y("input",{name:o,type:"hidden",value:a})}var l=r.length>0?r.map((function(t,s){return y("input",{name:o,type:"hidden",value:e.getOptionValue(t)},"i-".concat(s))})):y("input",{name:o,type:"hidden"});return y("div",{children:l})}var c=r[0]?this.getOptionValue(r[0]):"";return y("input",{name:o,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?E(cd,{"aria-live":"assertive",children:[E("p",{id:"aria-selection-event",children:[" ",this.state.ariaLiveSelection]}),E("p",{id:"aria-context",children:[" ",this.constructAriaLiveMessage()]})]}):null}},{key:"render",value:function(){var e=this.components,t=e.Control,s=e.IndicatorsContainer,n=e.SelectContainer,i=e.ValueContainer,o=this.props,r=o.className,c=o.id,u=o.isDisabled,d=o.menuIsOpen,p=this.state.isFocused,h=this.commonProps=this.getCommonProps();return E(n,l(a({},h),{className:r,innerProps:{id:c,onKeyDown:this.onKeyDown},isDisabled:u,isFocused:p,children:[this.renderLiveRegion(),E(t,l(a({},h),{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:u,isFocused:p,menuIsOpen:d,children:[E(i,l(a({},h),{isDisabled:u,children:[this.renderPlaceholderOrValue(),this.renderInput()]})),E(s,l(a({},h),{isDisabled:u,children:[this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator()]}))]})),this.renderMenu(),this.renderFormField()]}))}}]),t}();Au($d,"defaultProps",Yd);var Qd={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},Jd=function(e){var t,s;return s=t=function(t){function s(){var e,t;Su(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Au(Ou(Ou(t=Ru(this,(e=Iu(s)).call.apply(e,[this].concat(i))))),"select",void 0),Au(Ou(Ou(t)),"state",{inputValue:void 0!==t.props.inputValue?t.props.inputValue:t.props.defaultInputValue,menuIsOpen:void 0!==t.props.menuIsOpen?t.props.menuIsOpen:t.props.defaultMenuIsOpen,value:void 0!==t.props.value?t.props.value:t.props.defaultValue}),Au(Ou(Ou(t)),"onChange",(function(e,s){t.callProp("onChange",e,s),t.setState({value:e})})),Au(Ou(Ou(t)),"onInputChange",(function(e,s){var n=t.callProp("onInputChange",e,s);t.setState({inputValue:void 0!==n?n:e})})),Au(Ou(Ou(t)),"onMenuOpen",(function(){t.callProp("onMenuOpen"),t.setState({menuIsOpen:!0})})),Au(Ou(Ou(t)),"onMenuClose",(function(){t.callProp("onMenuClose"),t.setState({menuIsOpen:!1})})),t}return xu(s,p.exports.Component),wu(s,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(e){return void 0!==this.props[e]?this.props[e]:this.state[e]}},{key:"callProp",value:function(e){if("function"==typeof this.props[e]){for(var t,s=arguments.length,n=new Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];return(t=this.props)[e].apply(t,n)}}},{key:"render",value:function(){var t=this,s=this.props;s.defaultInputValue,s.defaultMenuIsOpen,s.defaultValue;var n=ku(s,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return y(e,l(a({},n),{ref:function(e){t.select=e},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),s}(),Au(t,"defaultProps",Qd),s},Zd={cacheOptions:!1,defaultOptions:!1,filterOption:null},ep=function(e){var t,s;return s=t=function(t){function s(e){var t;return Su(this,s),Au(Ou(Ou(t=Ru(this,Iu(s).call(this)))),"select",void 0),Au(Ou(Ou(t)),"lastRequest",void 0),Au(Ou(Ou(t)),"mounted",!1),Au(Ou(Ou(t)),"optionsCache",{}),Au(Ou(Ou(t)),"handleInputChange",(function(e,s){var n=t.props,i=n.cacheOptions,o=function(e,t,s){if(s){var n=s(e,t);if("string"==typeof n)return n}return e}(e,s,n.onInputChange);if(!o)return delete t.lastRequest,void t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(i&&t.optionsCache[o])t.setState({inputValue:o,loadedInputValue:o,loadedOptions:t.optionsCache[o],isLoading:!1,passEmptyOptions:!1});else{var r=t.lastRequest={};t.setState({inputValue:o,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},(function(){t.loadOptions(o,(function(e){t.mounted&&(e&&(t.optionsCache[o]=e),r===t.lastRequest&&(delete t.lastRequest,t.setState({isLoading:!1,loadedInputValue:o,loadedOptions:e||[],passEmptyOptions:!1})))}))}))}return o})),t.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:void 0!==e.inputValue?e.inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},t}return xu(s,p.exports.Component),wu(s,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.defaultOptions,s=this.state.inputValue;!0===t&&this.loadOptions(s,(function(t){if(e.mounted){var s=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:s})}}))}},{key:"componentWillReceiveProps",value:function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),e.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(e,t){var s=this.props.loadOptions;if(!s)return t();var n=s(e,t);n&&"function"==typeof n.then&&n.then(t,(function(){return t()}))}},{key:"render",value:function(){var t=this,s=this.props;s.loadOptions;var n=ku(s,["loadOptions"]),i=this.state,o=i.defaultOptions,r=i.inputValue,c=i.isLoading,u=i.loadedInputValue,d=i.loadedOptions,p=i.passEmptyOptions?[]:r&&u?d:o||[];return y(e,l(a({},n),{ref:function(e){t.select=e},options:p,isLoading:c,onInputChange:this.handleInputChange}))}}]),s}(),Au(t,"defaultProps",Zd),s};ep(Jd($d));var tp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,s=String(e).toLowerCase(),n=String(t.value).toLowerCase(),i=String(t.label).toLowerCase();return n===s||i===s},sp=Tu({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,s){return!(!e||t.some((function(t){return tp(e,t)}))||s.some((function(t){return tp(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),np=function(e){var t,s;return s=t=function(t){function s(e){var t;Su(this,s),Au(Ou(Ou(t=Ru(this,Iu(s).call(this,e)))),"select",void 0),Au(Ou(Ou(t)),"onChange",(function(e,s){var n=t.props,i=n.getNewOptionData,o=n.inputValue,r=n.isMulti,a=n.onChange,l=n.onCreateOption,c=n.value;if("select-option"!==s.action)return a(e,s);var u=t.state.newOption,d=Array.isArray(e)?e:[e];if(d[d.length-1]!==u)a(e,s);else if(l)l(o);else{var p=i(o,o),h={action:"create-option"};a(r?[].concat(Nu(Hu(c)),[p]):p,h)}}));var n=e.options||[];return t.state={newOption:void 0,options:n},t}return xu(s,p.exports.Component),wu(s,[{key:"componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,s=e.createOptionPosition,n=e.formatCreateLabel,i=e.getNewOptionData,o=e.inputValue,r=e.isLoading,a=e.isValidNewOption,l=e.value,c=e.options||[],u=this.state.newOption;u=a(o,Hu(l),c)?i(o,n(o)):void 0,this.setState({newOption:u,options:!t&&r||!u?c:"first"===s?[u].concat(Nu(c)):[].concat(Nu(c),[u])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,s=Pu({},this.props),n=this.state.options;return y(e,l(a({},s),{ref:function(e){t.select=e},options:n,onChange:this.onChange}))}}]),s}(),Au(t,"defaultProps",sp),s};Jd(np($d)),ep(Jd(np($d)));var ip=function(e){return function(t){t.in,t.onExited,t.appear,t.enter,t.exit;var s=ku(t,["in","onExited","appear","enter","exit"]);return y(e,a({},s))}},op=function(e){var t=e.component,s=e.duration,n=void 0===s?1:s,i=e.in;e.onExited;var o=ku(e,["component","duration","in","onExited"]),r={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(n,"ms")},exiting:{opacity:0},exited:{opacity:0}};return y(Eu.Transition,{mountOnEnter:!0,unmountOnExit:!0,in:i,timeout:n,children:function(e){var s={style:Tu({},r[e])};return y(t,a({innerProps:s},o))}})},rp=function(e){function t(){var e,s;Su(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Au(Ou(Ou(s=Ru(this,(e=Iu(t)).call.apply(e,[this].concat(i))))),"duration",260),Au(Ou(Ou(s)),"rafID",void 0),Au(Ou(Ou(s)),"state",{width:"auto"}),Au(Ou(Ou(s)),"transition",{exiting:{width:0,transition:"width ".concat(s.duration,"ms ease-out")},exited:{width:0}}),Au(Ou(Ou(s)),"getWidth",(function(e){e&&isNaN(s.state.width)&&(s.rafID=window.requestAnimationFrame((function(){var t=e.getBoundingClientRect().width;s.setState({width:t})})))})),Au(Ou(Ou(s)),"getStyle",(function(e){return{overflow:"hidden",whiteSpace:"nowrap",width:e}})),Au(Ou(Ou(s)),"getTransition",(function(e){return s.transition[e]})),s}return xu(t,p.exports.Component),wu(t,[{key:"componentWillUnmount",value:function(){this.rafID&&window.cancelAnimationFrame(this.rafID)}},{key:"render",value:function(){var e=this,t=this.props,s=t.children,n=t.in,i=this.state.width;return y(Eu.Transition,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:n,timeout:this.duration,children:function(t){var n=Tu({},e.getStyle(i),e.getTransition(t));return y("div",{ref:e.getWidth,style:n,children:s})}})}}]),t}(),ap=function(e){return function(t){var s=t.in,n=t.onExited,i=ku(t,["in","onExited"]);return y(rp,{in:s,onExited:n,children:y(e,a({cropWithEllipsis:s},i))})}},lp=function(e){return function(t){return y(op,a({component:e,duration:t.isMulti?260:1},t))}},cp=function(e){return function(t){return y(op,a({component:e},t))}},up=function(e){return function(t){return y(Eu.TransitionGroup,a({component:e},t))}},dp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Wd({components:e}),s=t.Input,n=t.MultiValue,i=t.Placeholder,o=t.SingleValue,r=t.ValueContainer,a=ku(t,["Input","MultiValue","Placeholder","SingleValue","ValueContainer"]);return Tu({Input:ip(s),MultiValue:ap(n),Placeholder:lp(i),SingleValue:cp(o),ValueContainer:up(r)},a)},pp=dp();pp.Input,pp.MultiValue,pp.Placeholder,pp.SingleValue,pp.ValueContainer,ul(dp,id);var hp=Jd($d);class fp extends v.PureComponent{render(){const e=this.props,{saving:t,disabled:s,savingMessage:n,defaultMessage:i,btnClass:o,extraClasses:r}=e,u=c(e,["saving","disabled","savingMessage","defaultMessage","btnClass","extraClasses"]);let d="save-button btn";return s&&!t||(d+=" "+o),r&&(d+=" "+r),y("button",l(a({type:"submit","data-testid":"saveSetting",id:"saveSetting",className:d,disabled:s},u),{children:t?y(Zr,{text:n}):i}))}}u(fp,"defaultProps",{btnClass:"btn-primary",defaultMessage:y(b,{id:"save_button.save",defaultMessage:"Save"}),disabled:!1,extraClasses:"",savingMessage:y(b,{id:"save_button.saving",defaultMessage:"Saving"})});var mp="mqik-c2cc995f",gp="mqik-d13c0f84",vp="mqik-1dc5802d",yp="mqik-d484b42d",bp="mqik-6f2202cd",Ep="mqik-c8174adb",Cp="mqik-d76f319d",Sp="mqik-4608ac90",_p="mqik-81ce701b",wp="mqik-138c5be9",Ap="mqik-f061ac60";const Pp=V.KeyCodes;class Tp extends v.PureComponent{constructor(e){super(e),u(this,"toSelect",-1),u(this,"listRef",v.createRef()),u(this,"selectedItemRef",v.createRef()),u(this,"setSelected",(e=>{this.setState({selected:e})})),u(this,"handleArrowPress",(e=>{if(Ie(e)&&e.shiftKey)return;const t=this.props.options;if(0===t.length)return;let s;switch(e.key){case Pp.DOWN[0]:if(-1===this.state.selected){s=0;break}s=Math.min(this.state.selected+1,t.length-1);break;case Pp.UP[0]:if(-1===this.state.selected){s=0;break}s=Math.max(this.state.selected-1,0);break;default:return}e.preventDefault(),this.setState({selected:s}),this.props.onSelect(t[s])})),u(this,"defaultOptionRenderer",((e,t,s,n)=>{let i="";return t&&(i="more-modal__row--selected"),y("div",{ref:t?this.selectedItemRef:e.value,className:i,onClick:()=>s(e),onMouseEnter:()=>n(e),children:e.label},"multiselectoption"+e.value)})),u(this,"select",(e=>{const t=this.props.options.indexOf(e);-1!==t&&this.state.selected!==t&&this.setSelected(t)})),this.state={selected:-1}}componentDidMount(){document.addEventListener("keydown",this.handleArrowPress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleArrowPress)}componentDidUpdate(e,t){var s;const n=this.props.options;if(n&&n.length>0&&this.state.selected>=0&&this.props.onSelect(n[this.state.selected]),t.selected===this.state.selected)return;const i=this.selectedItemRef.current||(null==(s=this.props.selectedItemRef)?void 0:s.current);if(this.listRef.current&&i){const e=i.getBoundingClientRect().top,t=i.getBoundingClientRect().bottom,s=this.listRef.current.getBoundingClientRect().top;t>this.listRef.current.getBoundingClientRect().bottom?i.scrollIntoView(!1):e<s&&i.scrollIntoView(!0)}}render(){const e=this.props.options;let t;if(this.props.loading)t=y("div",{"aria-hidden":!0,className:_p,children:y(tt,{position:"relative"},"loading")});else if(null==e||0===e.length)t=y("div",{className:A(_p,"no-channel-message"),children:y("p",{className:"primary-message",children:y(Kr,{id:"multiselect.list.notFound",defaultMessage:"No results found matching **{searchQuery}**",values:{searchQuery:this.props.query}})})},"no-users-found");else{let s;s=this.props.optionRenderer?this.props.optionRenderer:this.defaultOptionRenderer;const n=e.map(((e,t)=>s(e,this.state.selected===t,this.props.onAdd,this.select))),i=e[this.state.selected],o=this.props.ariaLabelRenderer(i);t=E("div",{className:A(Ep,"more-modal__list"),children:[y("div",{className:A(Cp),"aria-live":"polite","aria-atomic":"true",children:o}),y("div",{ref:this.listRef,id:"multiSelectList",className:A(Sp,"more-modal__options"),role:"presentation","aria-hidden":!0,children:n})]})}return y("div",{className:A(bp,"multi-select__wrapper"),"aria-live":"polite",children:t})}}u(Tp,"defaultProps",{options:[],perPage:50,onAction:()=>null});const xp=V.KeyCodes;class Ip extends v.PureComponent{constructor(e){super(e),u(this,"listRef",v.createRef()),u(this,"reactSelectRef",v.createRef()),u(this,"selected",null),u(this,"handleA11yActivateEvent",(()=>{this.setState({a11yActive:!0})})),u(this,"handleA11yDeactivateEvent",(()=>{this.setState({a11yActive:!1})})),u(this,"nextPage",(()=>{this.props.handlePageChange&&this.props.handlePageChange(this.state.page+1,this.state.page),this.listRef.current&&this.listRef.current.setSelected(0),this.setState({page:this.state.page+1})})),u(this,"prevPage",(()=>{0!==this.state.page&&(this.props.handlePageChange&&this.props.handlePageChange(this.state.page-1,this.state.page),this.listRef.current&&this.listRef.current.setSelected(0),this.setState({page:this.state.page-1}))})),u(this,"resetPaging",(()=>{this.setState({page:0})})),u(this,"onSelect",(e=>{this.selected=e})),u(this,"onAdd",(e=>{if(this.props.maxValues&&this.props.values.length>=this.props.maxValues)return;for(let s=0;s<this.props.values.length;s++)if(this.props.values[s].id===e.id)return;this.props.handleAdd(e),this.selected=null,this.reactSelectRef.current&&(this.reactSelectRef.current.select.handleInputChange({currentTarget:{value:""}}),this.reactSelectRef.current.focus());const t=this.props.submitImmediatelyOn;t&&t(e)&&this.props.handleSubmit([e])})),u(this,"onInput",((e,t)=>{t&&"input-blur"!==t.action&&"menu-close"!==t.action&&this.state.input!==e&&(this.setState({input:e}),this.listRef.current&&(""===e?this.listRef.current.setSelected(-1):this.listRef.current.setSelected(0)),this.selected=null,this.props.handleInput(e,this))})),u(this,"onInputKeyDown",(e=>{switch(e.key){case xp.ENTER[0]:e.preventDefault()}})),u(this,"handleEnterPress",(e=>{switch(e.key){case xp.ENTER[0]:if(null==this.selected)return void this.props.handleSubmit();this.onAdd(this.selected)}})),u(this,"handleOnClick",(e=>{e.preventDefault(),this.props.handleSubmit()})),u(this,"onChange",((e,t)=>{if("remove-value"!==t.action&&"pop-value"!==t.action)return;const s=[...this.props.values];for(let n=0;n<s.length;n++)if(s[n].id===t.removedValue.id){s.splice(n,1);break}this.props.handleDelete(s)})),u(this,"MultiValueRemove",(({children:e,innerProps:t})=>y("div",l(a({},t),{children:e||y(Wr,{className:vp})})))),u(this,"formatOptionLabel",(e=>{const t=nt(e.id,e.last_picture_update);return E(v.Fragment,{children:[y(wa,{size:"sm",username:e.username,url:t}),y("div",{className:A(yp,"react-select__value__name"),children:it(e)})]})})),u(this,"valueRenderer",(e=>this.props.valueWithImage?y(zd.MultiValueLabel,a({},e)):this.props.valueRenderer)),this.state={a11yActive:!1,page:0,input:""}}componentDidMount(){const e=this.reactSelectRef.current&&this.reactSelectRef.current.select.inputRef;document.addEventListener("keydown",this.handleEnterPress),e&&"function"==typeof e.addEventListener&&(e.addEventListener(st.ACTIVATE,this.handleA11yActivateEvent),e.addEventListener(st.DEACTIVATE,this.handleA11yDeactivateEvent),this.reactSelectRef.current.focus())}componentWillUnmount(){const e=this.reactSelectRef.current&&this.reactSelectRef.current.select.inputRef;e&&"function"==typeof e.addEventListener&&(e.removeEventListener(st.ACTIVATE,this.handleA11yActivateEvent),e.removeEventListener(st.DEACTIVATE,this.handleA11yDeactivateEvent)),document.removeEventListener("keydown",this.handleEnterPress)}render(){const e=Object.assign([...this.props.options]),{totalCount:t,users:s,values:n}=this.props;let i,o;this.props.numRemainingText?i=this.props.numRemainingText:null!=this.props.maxValues&&(i=y(b,{id:"multiselect.numRemaining",defaultMessage:"You can add {num, number} more. ",values:{num:this.props.maxValues-this.props.values.length}})),this.props.buttonSubmitText?o=this.props.buttonSubmitText:null!=this.props.maxValues&&(o=y(b,{id:"multiselect.go",defaultMessage:"Go"}));let r,a,l,c=[];this.props.noteText&&(l=E("div",{className:"multi-select__note",children:[y("div",{className:"note__icon",children:y(b,{id:"generic_icons.info",defaultMessage:"Info Icon",children:e=>y("span",{className:"fa fa-info",title:e})})}),y("div",{children:this.props.noteText})]}));const u={};for(let h=0;h<n.length;h++)u[n[h].id]=!0;for(let h=e.length-1;h>=0;h--)u[e[h].id]&&e.splice(h,1);if(e&&e.length>this.props.perPage){const t=this.state.page*this.props.perPage,s=t+this.props.perPage;c=e.slice(t,s),this.props.loading||(e.length>s&&(r=y("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,children:y(b,{id:"filtered_user_list.next",defaultMessage:"Next"})})),this.state.page>0&&(a=y("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.prevPage,children:y(b,{id:"filtered_user_list.prev",defaultMessage:"Previous"})})))}else c=e;let d,p;return"bottom"===this.props.saveButtonPosition?this.state.input&&(d=y(Tp,{ref:this.listRef,options:c,optionRenderer:this.props.optionRenderer,ariaLabelRenderer:this.props.ariaLabelRenderer,page:this.state.page,perPage:this.props.perPage,onPageChange:this.props.handlePageChange,onAdd:this.onAdd,onSelect:this.onSelect,loading:this.props.loading,query:this.state.input,selectedItemRef:this.props.selectedItemRef})):d=y(Tp,{ref:this.listRef,options:c,optionRenderer:this.props.optionRenderer,ariaLabelRenderer:this.props.ariaLabelRenderer,page:this.state.page,perPage:this.props.perPage,onPageChange:this.props.handlePageChange,onAdd:this.onAdd,onSelect:this.onSelect,loading:this.props.loading,selectedItemRef:this.props.selectedItemRef}),s&&s.length&&t&&(p=y(b,{id:"multiselect.numMembers",defaultMessage:"{memberOptions, number} of {totalCount, number} members",values:{memberOptions:c.length,totalCount:this.props.totalCount}})),E(v.Fragment,{children:[E("div",{className:"filtered-user-list",children:[E("div",{className:"filter-row filter-row--full",children:[E("div",{className:A(mp,"multi-select__container react-select"),children:[y(hp,{id:"selectItems",ref:this.reactSelectRef,isMulti:!0,options:this.props.options,styles:Op,components:{Menu:Mp,IndicatorsContainer:Mp,MultiValueLabel:this.props.valueWithImage?zd.MultiValueLabel:kp(this.props.valueRenderer),MultiValueRemove:this.props.valueWithImage?this.MultiValueRemove:zd.MultiValueRemove},isClearable:!1,openMenuOnFocus:!1,menuIsOpen:!1,onInputChange:this.onInput,onKeyDown:this.onInputKeyDown,onChange:this.onChange,value:this.props.values,formatOptionLabel:this.props.valueWithImage?this.formatOptionLabel:void 0,placeholder:this.props.placeholderText,inputValue:this.state.input,getOptionValue:e=>e.id,getOptionLabel:this.props.ariaLabelRenderer,"aria-label":this.props.placeholderText,className:this.state.a11yActive?"multi-select__focused":"",classNamePrefix:"react-select-auto react-select"}),"top"===this.props.saveButtonPosition&&y(fp,{id:"saveItems",saving:this.props.saving,disabled:this.props.saving,onClick:this.handleOnClick,defaultMessage:o,savingMessage:this.props.buttonSubmitLoadingText})]}),E("div",{id:"multiSelectHelpMemberInfo",className:A(gp,"multi-select__help"),children:[i,p]})]}),d,y("div",{id:"multiSelectMessageNote",className:"multi-select__help",children:l}),"top"===this.props.saveButtonPosition&&E("div",{className:"filter-controls",children:[a,r]})]}),"bottom"===this.props.saveButtonPosition&&y("div",{className:A(wp,"channel-switcher__footer"),children:y(fp,{id:"saveItems",saving:this.props.saving,disabled:this.props.saving,onClick:this.handleOnClick,defaultMessage:o,savingMessage:this.props.buttonSubmitLoadingText,btnClass:A(Ap)})})]})}}u(Ip,"defaultProps",{ariaLabelRenderer:function(e){if(!e)return null;return e.label},saveButtonPosition:"top",valueWithImage:!1});const Mp=()=>null,kp=e=>t=>y("div",{className:"react-select__padded-component",children:y(e,a({},t))}),Op={container:()=>({width:"100%"}),multiValueLabel:()=>({display:"inline-flex",alignItems:"center"}),multiValue:()=>({display:"flex",backgroundColor:"rgba(0,0,0,0.1)",margin:"2px",minWidth:"0",boxSizing:"border-box",borderRadius:"99px",overflow:"hidden"})};var Rp="mqik-e97bb61b",Np="mqik-393fa0fb",Dp="mqik-252e19fe",Lp="mqik-3e89e5f7",Fp="mqik-f38c10a7",Hp="mqik-d04671de";class Up extends v.PureComponent{constructor(e){super(e),u(this,"searchTimeoutId",0),u(this,"selectedItemRef",v.createRef()),u(this,"addValue",(e=>{const t=Object.assign([],this.state.values);-1===t.indexOf(e)&&t.push(e),this.setState({values:t})})),u(this,"onHide",(()=>{this.setState({show:!1}),this.props.actions.loadStatusesForProfilesList(this.props.profilesNotInCurrentChannel)})),u(this,"handleInviteError",(e=>{e&&this.setState({saving:!1,inviteError:e.message})})),u(this,"handleDelete",(e=>{this.setState({values:e})})),u(this,"setUsersLoadingState",(e=>{this.setState({loadingUsers:e})})),u(this,"handlePageChange",((e,t)=>{e>t&&(this.setUsersLoadingState(!0),this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,e+1,50).then((()=>this.setUsersLoadingState(!1))))})),u(this,"handleSubmit",(()=>{const{actions:e,channel:t}=this.props,s=this.state.values.map((e=>e.id));if(0!==s.length){if(this.props.skipCommit&&this.props.onAddCallback)return this.props.onAddCallback(this.state.values),this.setState({saving:!1,inviteError:void 0}),void this.onHide();this.setState({saving:!0}),e.addUsersToChannel(t.id,s).then((e=>{e.error?this.handleInviteError(e.error):(this.setState({saving:!1,inviteError:void 0}),this.onHide())}))}})),u(this,"search",(e=>{const t=e.trim();clearTimeout(this.searchTimeoutId),this.setState({term:t}),t&&(this.setUsersLoadingState(!0),this.searchTimeoutId=window.setTimeout((async()=>{const e={team_id:this.props.channel.team_id,not_in_channel_id:this.props.channel.id,group_constrained:this.props.channel.group_constrained};await this.props.actions.searchProfiles(t,e),this.setUsersLoadingState(!1)}),V.SEARCH_TIMEOUT_MILLISECONDS),this.searchTimeoutId=window.setTimeout((async()=>{if(!t)return;const e={team_id:this.props.channel.team_id,not_in_channel_id:this.props.channel.id,group_constrained:this.props.channel.group_constrained};await this.props.actions.searchProfiles(t,e),this.setUsersLoadingState(!1)}),V.SEARCH_TIMEOUT_MILLISECONDS))})),u(this,"renderAriaLabel",(e=>e?e.username:"")),u(this,"renderOption",((e,t,s,n)=>{let i="";return t&&(i="more-modal__row--selected"),E("div",{ref:t?this.selectedItemRef:e.id,className:A(Np,"more-modal__row clickable "+i),onClick:()=>s(e),onMouseMove:()=>n(e),children:[y(Aa,{src:Ke.getProfilePictureUrl(e.id,e.last_picture_update),status:this.props.userStatuses[e.id],size:"md",username:e.username}),y("div",{className:A(Dp,"more-modal__details"),children:y("div",{className:A(Lp,"more-modal__name"),children:ot(e)})}),y("div",{className:A(Fp,"more-modal__actions"),children:y("div",{className:"more-modal__actions--round",children:y(sa,{className:Hp})})})]},e.id)})),u(this,"render",(()=>{let e=null;this.state.inviteError&&(e=y("label",{className:"has-error control-label",children:this.state.inviteError}));const t=De("multiselect.add","Add"),s=De("multiselect.adding","Adding...");let n=rt(this.props.profilesNotInCurrentChannel,this.state.term).filter((e=>0===e.delete_at&&!this.props.profilesNotInCurrentTeam.includes(e)&&void 0!==this.props.excludeUsers&&!this.props.excludeUsers[e.id])).map((e=>e));if(this.props.includeUsers){const e=Object.values(this.props.includeUsers);n=[...n,...e]}const i=y(Ip,{options:n,optionRenderer:this.renderOption,selectedItemRef:this.selectedItemRef,values:this.state.values,ariaLabelRenderer:this.renderAriaLabel,saveButtonPosition:"bottom",perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:20,buttonSubmitText:t,buttonSubmitLoadingText:s,saving:this.state.saving,loading:this.state.loadingUsers,placeholderText:De("multiselect.placeholder","Search for people"),valueWithImage:!0},"addUsersToChannelKey");return E(Ur,{dialogClassName:"",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,children:[y(Br,{closeButton:!0,onClose:this.onHide,children:y(b,{id:"channel_invite.addNewMembers",defaultMessage:"Add people to {channel}",values:{channel:this.props.channel.display_name}})}),y(jr,{children:E("div",{className:Rp,children:[e,i]})})]})})),this.state={values:[],term:"",show:!0,saving:!1,loadingUsers:!0}}componentDidMount(){this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,0).then((()=>{this.setUsersLoadingState(!1)})),this.props.actions.getTeamStats(this.props.channel.team_id),this.props.actions.loadStatusesForProfilesList(this.props.profilesNotInCurrentChannel)}}u(Up,"defaultProps",{includeUsers:{},excludeUsers:{},skipCommit:!1});var Bp=f((function(e,t){let s;return t.channelId&&t.teamId&&(s=at()),(e,t)=>{let n,i;s?(n=s(e,t.channelId),i=lt(e,t.teamId)):(n=ct(e),i=ut(e));return{profilesNotInCurrentChannel:n,profilesNotInCurrentTeam:i,userStatuses:Xe(e)}}}),(function(e){return{actions:g({addUsersToChannel:jo,getProfilesNotInChannel:dt,getTeamStats:pt,loadStatusesForProfilesList:ht,searchProfiles:ft},e)}}))(Up);var jp="mqik-9841dc84",Vp="mqik-c237b5fe",qp="mqik-0ea1b868";const zp=na((({onClick:e,ariaLabel:t,text:s,extraText:n,id:i,buttonClass:o,isDangerous:r,activeClass:a})=>y(ia.Item,{children:({active:l})=>E("button",{"data-testid":i,id:i,"aria-label":t,className:A("style--none",l&&a?a:"",o,{"MenuItem__with-help":n,[jp]:r,[qp]:l}),onClick:e,children:[s&&y("span",{className:Vp,children:s}),n&&y("span",{className:"MenuItem__help-text",children:n})]})})));zp.displayName="MenuItemAction";class Wp extends v.PureComponent{constructor(){super(...arguments),u(this,"handleLeave",(e=>{e.preventDefault();const{channel:t,actions:{leaveChannel:s}}=this.props;t.type===V.PRIVATE_CHANNEL?Vo(t):s(t.id)}))}render(){const{channel:e,isDefault:t,isGuestUser:s,id:n}=this.props;return y(zp,{id:n,show:(!t||s)&&e.type!==V.DM_CHANNEL&&e.type!==V.GM_CHANNEL,onClick:this.handleLeave,text:De("channel_header.leave","Leave Channel"),buttonClass:A("u3-text-left"),isDangerous:!0})}}u(Wp,"defaultProps",{isDefault:!0,isGuestUser:!1});var Gp=f(null,(e=>({actions:g({leaveChannel:qo},e)})))(Wp);class Kp extends v.PureComponent{constructor(){super(...arguments),u(this,"handleClose",(e=>{e.preventDefault();const{channel:t,currentUser:s,currentTeam:n,redirectChannel:i,actions:{savePreferences:o,leaveDirectChannel:r}}=this.props;let a,l;t.type===V.DM_CHANNEL?(l=V.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,a=t.teammate_id):(l=V.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,a=t.id),r(t.name),o(s.id,[{user_id:s.id,category:l,name:a,value:"false"}]),te.push(`/${n.name}/group/${i}`)}))}render(){const{id:e,channel:t}=this.props;let s;return t.type===V.DM_CHANNEL?s=De("center_panel.direct.closeDirectMessage","Close Direct Message"):t.type===V.GM_CHANNEL&&(s=De("center_panel.direct.closeGroupMessage","Close Group Message")),y(zp,{id:e,show:t.type===V.DM_CHANNEL||t.type===V.GM_CHANNEL,onClick:this.handleClose,text:s})}}var Yp=f((e=>({currentTeam:W(e),redirectChannel:mt(e,Se(e))})),(e=>({actions:g({savePreferences:gt,leaveDirectChannel:zo},e)})))(Kp);class Xp extends v.PureComponent{constructor(){super(...arguments),u(this,"handleClose",(()=>{this.props.actions.goToLastViewedChannel()}))}render(){return y(zp,{show:this.props.isArchived,onClick:this.handleClose,text:De("center_panel.archived.closeChannel","Close Channel")})}}var $p=f(null,(e=>({actions:g({goToLastViewedChannel:Wo},e)})))(Xp);var Qp="mqik-fdf1db3d",Jp="mqik-dca22d1a",Zp="mqik-4051370b";var eh=f((()=>{const e=vt();return(t,s)=>{const n=e(t,{id:s.channelId}),i=yt(t)[n.id];return{user:bt(t),channel:n,isDefault:Et(n),isFavorite:Ct(t,n.id),isMuted:St(i),isReadonly:_t(t,n),isArchived:0!==n.delete_at,penultimateViewedChannelName:Go(t)||mt(t,Se(t)),pluginMenuItems:t.plugins.components.ChannelHeader||[],isLicensedForLDAPGroups:"true"===t.entities.general.license.LDAPGroups}}}))((e=>{const{user:t,channel:s,isPrivate:n,isArchived:i,isDefault:o,isGroupConstrained:r,isReadonly:a,penultimateViewedChannelName:l}=e,c=n?oe.MANAGE_PRIVATE_CHANNEL_MEMBERS:oe.MANAGE_PUBLIC_CHANNEL_MEMBERS,u=n?oe.MANAGE_PRIVATE_CHANNEL_PROPERTIES:oe.MANAGE_PUBLIC_CHANNEL_PROPERTIES,d=n?oe.DELETE_PRIVATE_CHANNEL:oe.DELETE_PUBLIC_CHANNEL,p=oe.MANAGE_TEAM;return y("div",{className:Qp,children:y(ia,{as:"div",className:Jp,children:E(ia.Items,{id:`dropdown_${s.id}`,static:!0,className:A(Zp,"u3-right-0"),children:[E("div",{className:"u3-py-1",children:[E(oa,{channelId:s.id,teamId:s.team_id,permissions:[c],children:[y(ra,{id:"channelAddMembers",show:s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL&&!i&&!o&&!r,modalId:Ae.CHANNEL_INVITE,dialogType:Bp,dialogProps:{channel:s},text:De("navbar.addMembers","Add Members")}),y(ra,{id:"channelAddMembers",show:s.type===V.GM_CHANNEL&&!i&&!r,modalId:Ae.CREATE_DM_CHANNEL,dialogType:Bp,dialogProps:{isExistingChannel:!0},text:De("navbar.addMembers","Add Members")})]}),E(oa,{channelId:s.id,teamId:s.team_id,permissions:[c],children:[y(ra,{id:"channelViewMembers",show:s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL&&(i||o),modalId:Ae.CHANNEL_MEMBERS,dialogType:Bp,dialogProps:{channel:s},text:De("channel_header.viewMembers","View Members")}),y(ra,{id:"channelManageMembers",show:s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL&&!i&&!o,modalId:Ae.CHANNEL_MEMBERS,dialogType:Bp,dialogProps:{channel:s},text:De("channel_header.manageMembers","Manage Members")})]})]}),E("div",{className:"u3-py-1",children:[E(oa,{channelId:s.id,teamId:s.team_id,permissions:[u],children:[y(ra,{id:"channelEditImage",show:s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL&&!i&&!a,modalId:Ae.CHANNEL_INFO,dialogType:aa,dialogProps:{channel:s},text:De("navbar.viewInfo","View Info")}),y(ra,{id:"channelEditImage",show:s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL&&!i&&!a,modalId:Ae.EDIT_CHANNEL_IMAGE,dialogType:Bp,dialogProps:{channel:s},text:De("channel_header.setImage","Đổi ảnh nhóm")}),y(ra,{id:"channelEditPurpose",show:!i&&!a&&s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL,modalId:Ae.EDIT_CHANNEL_PURPOSE,dialogType:Bp,dialogProps:{channel:s},text:De("channel_header.setPurpose","Edit Purpose")}),y(ra,{id:"channelRename",show:!i&&s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL,modalId:Ae.RENAME_CHANNEL,dialogType:Bp,dialogProps:{channel:s},text:De("channel_header.rename","Rename")})]}),y(oa,{channelId:s.id,teamId:s.team_id,permissions:[oe.CONVERT_PUBLIC_CHANNEL_TO_PRIVATE],children:y(ra,{id:"channelConvertToPrivate",show:!i&&!o&&s.type===V.OPEN_CHANNEL,modalId:Ae.CONVERT_CHANNEL,dialogType:Bp,dialogProps:{channelId:s.id,channelDisplayName:s.display_name},text:De("channel_header.convert","Convert to Private")})}),y(oa,{channelId:s.id,teamId:s.team_id,permissions:[d],children:y(ra,{id:"channelArchiveChannel",show:!i&&!o&&s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL,modalId:Ae.DELETE_CHANNEL,dialogType:Bp,dialogProps:{channel:s,penultimateViewedChannelName:l},text:De("channel_header.delete","Archive Channel")})})]}),E("div",{className:"u3-py-1",children:[y(Gp,{id:"channelLeaveChannel",channel:s,isDefault:o,isGuestUser:!1}),y(Yp,{id:"channelCloseMessage",channel:s,currentUser:t}),y($p,{isArchived:i})]}),y(oa,{channelId:s.id,teamId:s.team_id,permissions:[p],children:y("div",{className:"u3-py-1",children:y(ra,{id:"channelUnarchiveChannel",show:i&&!o&&s.type!==V.DM_CHANNEL&&s.type!==V.GM_CHANNEL,modalId:Ae.UNARCHIVE_CHANNEL,dialogType:Bp,dialogProps:{channel:s},text:De("channel_header.unarchive","Unarchive Channel")})})})]})})})}));var th={chatHeader:"mqik-c14fd364",chatHeaderContent:"mqik-f25c897c",chatHeaderImage:"mqik-a134108d",chatHeaderInfo:"mqik-81944d98",chatHeaderTitle:"mqik-a49f794d",btnTitleActive:"mqik-c799b264",heading:"mqik-4762a60e",btnMute:"mqik-1b755ee9",chatHeaderDescription:"mqik-b7735136",icon:"mqik-168b09da",headerPuposeText:"mqik-6cc7fd46",textPurpose:"mqik-518c48a8",chatHeaderActions:"mqik-270cc6c3",iconAction:"mqik-c35c4d17",trashIcon:"mqik-4d4bff64",popoverPurpose:"mqik-758e5092"};var sh=h(f((function(){const e=Ee(),t=xa(),s=vt();return function(n,i){const o=s(n,{id:i.channelId})||{},r=bt(n),a=Tt(n).length>1;let l,c,u,d;if(o&&o.type===xt.DM_CHANNEL){const e=It(r.id,o.name);l=K(n,e),d=Y(n,e),u=l&&t(n,l.id)}else o&&o.type===xt.GM_CHANNEL&&(c=e(n,o.id,void 0));const p=G(n)||{member_count:0,guest_count:0,pinnedpost_count:0};return{teamId:Se(n),channel:o,channelMember:Mt(n),currentUser:r,dmUser:l,gmMembers:c,rhsState:kt(n),rhsOpen:Ot(n),isFavorite:Rt(n),isReadOnly:Nt(n),isMuted:Dt(n),isQuickSwitcherOpen:Ul(n,Ae.QUICK_SWITCH),hasGuests:p.guest_count>0,pinnedPostsCount:p.pinnedpost_count,hasMoreThanOneTeam:a,teammateNameDisplaySetting:$e(n),currentRelativeTeamUrl:Ze(n),isLegacySidebar:!1,announcementBarCount:Bl(n),customStatus:u,contactName:d,isCustomStatusEnabled:Ia(n)}}}),(e=>({actions:g({favoriteChannel:Lt,unfavoriteChannel:Ft,showFlaggedPosts:Ht,showPinnedPosts:Ut,showChannelFiles:Bt,showMentions:jt,closeRightHandSide:Vt,getCustomEmojisInText:qt,updateChannelNotifyProps:zt,goToLastViewedChannel:Wo,openModal:Ve,closeModal:$,minimalChat:Ar,largeChat:Pr,closeChat:Tr,selectChannel:Wt},e)})))((e=>{const{channel:t,dmUser:s,channelIsArchived:n,isMinimal:i,currentUser:o,contactName:r,teammateNameDisplaySetting:a,gmMembers:l,isMuted:c}=e,{formatMessage:u}=k(),[d,h]=p.exports.useState(!1),f=()=>{const{actions:t,channel:s,channelMember:n,currentUser:i}=e;if(!n||!i||!s)return;const o={mark_unread:Pt.ALL};t.updateChannelNotifyProps(i.id,s.id,o)};let m=t.display_name,g=null;n&&(g=y(la,{className:A(th.icon,th.trashIcon)}));const C=t.type===V.DM_CHANNEL,S=t.type===V.GM_CHANNEL;if(C){const e=s.id;m=o.id===e?y(b,{id:"channel_header.directchannel.you",defaultMessage:"{displayname} (you) ",values:{displayname:r||wt(s,a)}}):r||wt(s,a)+" "}if(S){const e={};for(const t of l){if(t.id===o.id)continue;const s=wt(t,a);e[s]||(e[s]=[]),e[s].push(t)}m=t.display_name.split(", ").map(((t,s)=>{if(!e[t])return t;const n=e[t].shift();return E(v.Fragment,{children:[s>0&&", ",t]},n.id)}))}let _,w,P,T,x;!C||s.delete_at||s.is_bot||(_=y(Zl,{status:t.status}),w=y("span",{className:"header-status__text",children:y(b,{id:`status_dropdown.set_${t.status}`,defaultMessage:At(t.status)})})),C||(P=y(Jl,{channel:t})),t.purpose&&(T=y(Pa,{placement:"bottom-start",trigger:"click",content:y("div",{className:th.popoverPurpose,children:t.purpose}),toggleFocus:()=>{},children:E("span",{className:th.headerPuposeText,children:[y(Yl,{className:th.icon}),y("span",{className:th.textPurpose,children:t.purpose})]})})),c&&(x=y("button",{onClick:f,className:A("style--none color--link channel-header__mute inactive",th.btnMute),"aria-label":u({id:"generic_icons.muted",defaultMessage:"Muted Icon"}),children:y(Gl,{className:A(th.icon,th.muteIcon)})}));let I=y(Pa,{placement:"bottom-start",trigger:"click",content:y(eh,{channelId:t.id}),toggleFocus:h,children:y("button",{className:A("channel-header__trigger style--none",{[th.btnTitleActive]:d}),"aria-label":u({id:"channel_header.menuAriaLabel",defaultMessage:"Channel Menu"}).toLowerCase(),children:E("p",{className:th.heading,children:[g,m]})})}),M=y(Aa,{src:Ke.getChannelPictureUrl(t.id,t.last_picture_update),size:"xl",status:"",wrapperClass:"ChannelHeader_img",newStatusIcon:!1});return C&&(M=y(Aa,{src:Ke.getProfilePictureUrl(s.id,s.last_picture_update),size:"xl",status:"",wrapperClass:"ChannelHeader_img",newStatusIcon:!1})),y(p.exports.Fragment,{children:y("div",{className:th.chatHeader,children:E("div",{className:th.chatHeaderContent,children:[y("div",{className:th.chatHeaderImage,children:M}),E("div",{className:th.chatHeaderInfo,children:[E("div",{className:th.chatHeaderTitle,children:[I,x]}),E("div",{className:th.chatHeaderDescription,children:[_,w,P,T]})]}),E("div",{className:th.chatHeaderActions,children:[y("button",i?{className:A(th.btn,th.btnLarge),onClick:()=>{e.actions.largeChat(t.id),e.actions.selectChannel(t.id)},children:y(zl,{className:th.iconAction})}:{className:A(th.btn,th.btnMinimal),onClick:()=>{e.actions.minimalChat(t.id),e.actions.selectChannel("")},children:y(Vl,{className:th.iconAction})}),y("button",{className:A(th.btn,th.btnClose),onClick:()=>{e.actions.closeChat(t.id),e.actions.selectChannel("")},children:y(Ta,{className:th.iconAction})})]})]})})})})));function nh(e){return async(t,s)=>{const n=s().plugins.components.MessageWillBePosted;if(!n||0===n.length)return{data:e};let i=e;for(const e of n){const t=await e.hook(i);if(t){if(t.error)return{error:t.error};i=t.post}}return{data:i}}}function ih(e,t){return async(s,n)=>{const i=n().plugins.components.SlashCommandWillBePosted;if(!i||0===i.length)return{data:{message:e,args:t}};let o=e,r=t;for(const e of i){const t=await e.hook(o,r);if(t){if(t.error)return{error:t.error};if(o=t.message,r=t.args,0===Object.keys(t).length)break}}return{data:{message:o,args:r}}}}var oh=Ua.jsx;var rh=p.exports.forwardRef((function(e,t){return oh("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:oh("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}))}));var ah="mqik-be71408f",lh="mqik-542c91a7",ch="mqik-1b2f1b85",uh="mqik-99e44d1e",dh=e=>{const{emoji:t,spriteClassName:s}=e;return y("div",{className:A(uh),children:y("img",{alt:t.aliases.join(" - "),src:Gt(t),className:s,onClick:()=>{e.onItemClick(e.emoji)},role:"button"})})};const ph=["heart","rofl","sunglasses","laughing","neutral_face","+1","byebye","burn-joss-stick","beauty","boss"];f((function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Xt(e),recentEmojis:$t(e),activeEmojis:ph}}))((e=>{const[t,s]=p.exports.useState(e.show),[n,i]=p.exports.useState(!1),[o,r]=p.exports.useState([]),l=p.exports.useRef(null);let c;const u=()=>{e.target()&&l.current&&(c=Ma(e.target(),l.current,{placement:"top",strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,2]}}],onFirstUpdate:e=>{i(!0)}}))};return p.exports.useEffect((()=>(u(),()=>{c&&c.destroy()})),[]),p.exports.useEffect((()=>{t||i(!1),c?c.update():u()}),[t]),p.exports.useEffect((()=>{s(e.show)}),[e.show]),p.exports.useEffect((()=>{const{activeEmojis:t}=e;let s=[];Kt.forEach((e=>{const n=e.map((e=>Yt[e])).filter((e=>{var s;return!(s=t,!(e.aliases.findIndex((e=>s.includes(e)))>-1))}));s=s.concat(n)})),s=s.map((e=>{const t=a({},e);return t.filename=function(e){return e.filename||e.id}(e),t})),r(s)}),[e.recentEmojis]),y(p.exports.Fragment,t?{children:y("div",{role:"emoji-popper",ref:l,className:A(ah,{"u3-opacity-0 u3-invisible":!n}),children:y("div",{className:lh,children:y("div",{className:ch,children:o.map(((t,s)=>y(dh,{emoji:t,onItemClick:e.onEmojiClick},`${t.filename}-${s}`)))})})})}:{})}));var hh=Ua.jsx;var fh=p.exports.forwardRef((function(e,t){return hh("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:hh("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}))})),mh=Ua.jsx;var gh=p.exports.forwardRef((function(e,t){return mh("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:mh("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}))}));class vh extends v.PureComponent{render(){const{canDownload:e,children:t,compactDisplay:s,fileInfo:n,handleImageClick:i,iconClass:o}=this.props,r=n.name,a=ca(r);let l;return l=s?E("a",{id:"file-attachment-link",href:"#",onClick:i,className:"post-image__name",rel:"noopener noreferrer",children:[y(gh,{className:"icon"}),a]}):e?y("div",{className:o||"post-image__name",children:y("a",{href:ua(n.id),"aria-label":De("view_image_popover.download","Download").toLowerCase(),download:r,target:"_blank",rel:"noopener noreferrer",children:t||a})}):y("span",{className:"post-image__name u3-block u3-whitespace-nowrap u3-overflow-ellipsis u3-text-sm u3-mr-3 u3-overflow-hidden",children:a}),l}}var yh="mqik-3ee96595",bh="mqik-312828d4",Eh="mqik-ffa562df",Ch="mqik-0968d6ac",Sh="mqik-6754df96",_h="mqik-a30aa549",wh="mqik-436fa8ee",Ah="mqik-11934687",Ph="mqik-5043b508";class Th extends v.PureComponent{constructor(){super(...arguments),u(this,"handleRemove",(()=>{this.props.handleRemove(this.props.clientId)}))}render(){let e,t,s=0;const{fileInfo:n,clientId:i}=this.props;let o="0%";if(n){s=n.percent?n.percent:0,o=`${s.toFixed(0)}%`;const i=da(n.type);Qt(i),e=E("div",{className:"u3-text-xs",children:[y(vh,{fileInfo:n,compactDisplay:!1,canDownload:!1}),y("span",{className:"post-image__uploadingTxt",children:100===s?y(b,{id:"create_post.fileProcessing",defaultMessage:"Processing..."}):y(v.Fragment,{children:y(b,{id:"admin.plugin.uploading",defaultMessage:"Uploading..."})})})]}),s&&(t=y("div",{className:"u3-absolute u3-bottom-0 u3-left-0 u3-w-full",children:y("div",{className:"u3-overflow-hidden u3-h-0.5 u3-text-xs u3-flex u3-rounded u3-bg-blue-200",children:y("div",{style:{width:`${s}%`},className:"u3-shadow-none u3-flex u3-flex-col u3-text-center u3-whitespace-nowrap u3-text-white u3-justify-center u3-bg-blue-500"})})}))}return E("div",{ref:i,className:A(bh,"file-preview post-image__column"),"data-client-id":i,children:[y("div",{className:Eh,children:y("span",{className:"u3-block u3-text-center u3-py-2",children:o})}),E("div",{className:Sh,children:[y("div",{className:_h,children:y("div",{className:"post-image__detail u3-text-sm",children:e})}),y("a",{className:Ph,onClick:this.handleRemove,children:y(Ta,{className:"u3-w-3 u3-h-3"})})]}),t]},i)}}class xh extends v.PureComponent{constructor(){super(...arguments),u(this,"handleRemove",(e=>{this.props.onRemove(e)}))}render(){const e=[];if(this.props.fileInfos.forEach((t=>{var s;const n=Jt(t.extension);let i,o="file-preview post-image__column";if(n===Zt.SVG&&this.props.enableSVGs)i=y("img",{alt:"file preview",className:"post-image normal",src:pa(t.id),loading:"lazy"});else if(n===Zt.IMAGE){let e="post-image";t.width&&t.width<V.THUMBNAIL_WIDTH&&t.height&&t.height<V.THUMBNAIL_HEIGHT?e+=" small":e+=" normal";let n=ha(t.id,null==(s=t.preview_path)?void 0:s.replace("_preview.jpg","_thumb.jpg"));es(t.extension)&&!t.has_preview_image&&(n=pa(t.id)),i=y("div",{className:A(Ch,e),style:{backgroundImage:`url(${n})`,backgroundSize:"cover"}})}else o+=" custom-file",i=y("div",{className:"file-icon "+Qt(n),children:y(fh,{className:"u3-w-8 u3-h-8 u3-text-blue-500 u3-m-1"})});e.push(E("div",{className:A(bh,o),children:[y("div",{className:Eh,children:i}),E("div",{className:Sh,children:[y("div",{className:_h,children:E("div",{className:"post-image__detail u3-px-0.5",children:[y(vh,{fileInfo:t,compactDisplay:!1,canDownload:!1}),t.extension&&y("span",{className:wh,children:t.extension.toUpperCase()}),y("span",{className:Ah,children:ts(t.size)})]})}),y("a",{className:Ph,onClick:this.handleRemove.bind(this,t.id),children:y(Ta,{className:"u3-w-3 u3-h-3"})})]})]},t.id))})),this.props.uploadsInProgress&&this.props.uploadsProgressPercent){const t=this.props.uploadsProgressPercent;this.props.uploadsInProgress.forEach((s=>{const n=t[s];n&&e.push(y(Th,{clientId:s,fileInfo:n,handleRemove:this.handleRemove},s))}))}return y("div",{className:A(yh,"file-preview__container"),ref:"container",children:e})}}u(xh,"defaultProps",{fileInfos:[],uploadsInProgress:[],uploadsProgressPercent:{}});var Ih=f((function(e){return{enableSVGs:"true"===q(e).EnableSVGs}}))(xh),Mh={exports:{}},kh={exports:{}};!function(e){function t(e){if(e)return function(e){for(var s in t.prototype)e[s]=t.prototype[s];return e}(e)}kh.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((s=n[i])===t||s.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(s){n=0;for(var i=(s=s.slice(0)).length;n<i;++n)s[n].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}();var Oh=Lh;Lh.default=Lh,Lh.stable=Bh,Lh.stableStringify=Bh;var Rh=[],Nh=[];function Dh(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Lh(e,t,s,n){var i;void 0===n&&(n=Dh()),Hh(e,"",0,[],void 0,0,n);try{i=0===Nh.length?JSON.stringify(e,t,s):JSON.stringify(e,Vh(t),s)}catch(r){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==Rh.length;){var o=Rh.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Fh(e,t,s,n){var i=Object.getOwnPropertyDescriptor(n,s);void 0!==i.get?i.configurable?(Object.defineProperty(n,s,{value:e}),Rh.push([n,s,t,i])):Nh.push([t,s,e]):(n[s]=e,Rh.push([n,s,t]))}function Hh(e,t,s,n,i,o,r){var a;if(o+=1,"object"==typeof e&&null!==e){for(a=0;a<n.length;a++)if(n[a]===e)return void Fh("[Circular]",e,t,i);if(void 0!==r.depthLimit&&o>r.depthLimit)return void Fh("[...]",e,t,i);if(void 0!==r.edgesLimit&&s+1>r.edgesLimit)return void Fh("[...]",e,t,i);if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)Hh(e[a],a,a,n,e,o,r);else{var l=Object.keys(e);for(a=0;a<l.length;a++){var c=l[a];Hh(e[c],c,a,n,e,o,r)}}n.pop()}}function Uh(e,t){return e<t?-1:e>t?1:0}function Bh(e,t,s,n){void 0===n&&(n=Dh());var i,o=jh(e,"",0,[],void 0,0,n)||e;try{i=0===Nh.length?JSON.stringify(o,t,s):JSON.stringify(o,Vh(t),s)}catch(a){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==Rh.length;){var r=Rh.pop();4===r.length?Object.defineProperty(r[0],r[1],r[3]):r[0][r[1]]=r[2]}}return i}function jh(e,t,s,n,i,o,r){var a;if(o+=1,"object"==typeof e&&null!==e){for(a=0;a<n.length;a++)if(n[a]===e)return void Fh("[Circular]",e,t,i);try{if("function"==typeof e.toJSON)return}catch(d){return}if(void 0!==r.depthLimit&&o>r.depthLimit)return void Fh("[...]",e,t,i);if(void 0!==r.edgesLimit&&s+1>r.edgesLimit)return void Fh("[...]",e,t,i);if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)jh(e[a],a,a,n,e,o,r);else{var l={},c=Object.keys(e).sort(Uh);for(a=0;a<c.length;a++){var u=c[a];jh(e[u],u,a,n,e,o,r),l[u]=e[u]}if(void 0===i)return l;Rh.push([i,t,e]),i[t]=l}n.pop()}}function Vh(e){return e=void 0!==e?e:function(e,t){return t},function(t,s){if(Nh.length>0)for(var n=0;n<Nh.length;n++){var i=Nh[n];if(i[1]===t&&i[0]===s){s=i[2],Nh.splice(n,1);break}}return e.call(this,t,s)}}var qh="undefined"!=typeof Symbol&&Symbol,zh=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),s=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(s))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0},Wh="Function.prototype.bind called on incompatible ",Gh=Array.prototype.slice,Kh=Object.prototype.toString,Yh=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==Kh.call(t))throw new TypeError(Wh+t);for(var s,n=Gh.call(arguments,1),i=function(){if(this instanceof s){var i=t.apply(this,n.concat(Gh.call(arguments)));return Object(i)===i?i:this}return t.apply(e,n.concat(Gh.call(arguments)))},o=Math.max(0,t.length-n.length),r=[],a=0;a<o;a++)r.push("$"+a);if(s=Function("binder","return function ("+r.join(",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var l=function(){};l.prototype=t.prototype,s.prototype=new l,l.prototype=null}return s},Xh=Function.prototype.bind||Yh,$h=Xh.call(Function.call,Object.prototype.hasOwnProperty),Qh=SyntaxError,Jh=Function,Zh=TypeError,ef=function(e){try{return Jh('"use strict"; return ('+e+").constructor;")()}catch(t){}},tf=Object.getOwnPropertyDescriptor;if(tf)try{tf({},"")}catch(v_){tf=null}var sf=function(){throw new Zh},nf=tf?function(){try{return sf}catch(e){try{return tf(arguments,"callee").get}catch(t){return sf}}}():sf,of="function"==typeof qh&&"function"==typeof Symbol&&"symbol"==typeof qh("foo")&&"symbol"==typeof Symbol("bar")&&zh(),rf=Object.getPrototypeOf||function(e){return e.__proto__},af={},lf="undefined"==typeof Uint8Array?undefined:rf(Uint8Array),cf={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":of?rf([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":af,"%AsyncGenerator%":af,"%AsyncGeneratorFunction%":af,"%AsyncIteratorPrototype%":af,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":Jh,"%GeneratorFunction%":af,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":of?rf(rf([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&of?rf((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&of?rf((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":of?rf(""[Symbol.iterator]()):undefined,"%Symbol%":of?Symbol:undefined,"%SyntaxError%":Qh,"%ThrowTypeError%":nf,"%TypedArray%":lf,"%TypeError%":Zh,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},uf=function e(t){var s;if("%AsyncFunction%"===t)s=ef("async function () {}");else if("%GeneratorFunction%"===t)s=ef("function* () {}");else if("%AsyncGeneratorFunction%"===t)s=ef("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(s=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(s=rf(i.prototype))}return cf[t]=s,s},df={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pf=Xh,hf=$h,ff=pf.call(Function.call,Array.prototype.concat),mf=pf.call(Function.apply,Array.prototype.splice),gf=pf.call(Function.call,String.prototype.replace),vf=pf.call(Function.call,String.prototype.slice),yf=pf.call(Function.call,RegExp.prototype.exec),bf=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ef=/\\(\\)?/g,Cf=function(e){var t=vf(e,0,1),s=vf(e,-1);if("%"===t&&"%"!==s)throw new Qh("invalid intrinsic syntax, expected closing `%`");if("%"===s&&"%"!==t)throw new Qh("invalid intrinsic syntax, expected opening `%`");var n=[];return gf(e,bf,(function(e,t,s,i){n[n.length]=s?gf(i,Ef,"$1"):t||e})),n},Sf=function(e,t){var s,n=e;if(hf(df,n)&&(n="%"+(s=df[n])[0]+"%"),hf(cf,n)){var i=cf[n];if(i===af&&(i=uf(n)),void 0===i&&!t)throw new Zh("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Qh("intrinsic "+e+" does not exist!")},_f=function(e,t){if("string"!=typeof e||0===e.length)throw new Zh("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new Zh('"allowMissing" argument must be a boolean');if(null===yf(/^%?[^%]*%?$/g,e))throw new Qh("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=Cf(e),n=s.length>0?s[0]:"",i=Sf("%"+n+"%",t),o=i.name,r=i.value,a=!1,l=i.alias;l&&(n=l[0],mf(s,ff([0,1],l)));for(var c=1,u=!0;c<s.length;c+=1){var d=s[c],p=vf(d,0,1),h=vf(d,-1);if(('"'===p||"'"===p||"`"===p||'"'===h||"'"===h||"`"===h)&&p!==h)throw new Qh("property names with quotes must have matching quotes");if("constructor"!==d&&u||(a=!0),hf(cf,o="%"+(n+="."+d)+"%"))r=cf[o];else if(null!=r){if(!(d in r)){if(!t)throw new Zh("base intrinsic for "+e+" exists, but the property is not available.");return}if(tf&&c+1>=s.length){var f=tf(r,d);r=(u=!!f)&&"get"in f&&!("originalValue"in f.get)?f.get:r[d]}else u=hf(r,d),r=r[d];u&&!a&&(cf[o]=r)}}return r},wf={exports:{}};!function(e){var t=Xh,s=_f,n=s("%Function.prototype.apply%"),i=s("%Function.prototype.call%"),o=s("%Reflect.apply%",!0)||t.call(i,n),r=s("%Object.getOwnPropertyDescriptor%",!0),a=s("%Object.defineProperty%",!0),l=s("%Math.max%");if(a)try{a({},"a",{value:1})}catch(v_){a=null}e.exports=function(e){var s=o(t,i,arguments);if(r&&a){var n=r(s,"length");n.configurable&&a(s,"length",{value:1+l(0,e.length-(arguments.length-1))})}return s};var c=function(){return o(t,n,arguments)};a?a(e.exports,"apply",{value:c}):e.exports.apply=c}(wf);var Af=_f,Pf=wf.exports,Tf=Pf(Af("String.prototype.indexOf")),xf=I(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),If="function"==typeof Map&&Map.prototype,Mf=Object.getOwnPropertyDescriptor&&If?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,kf=If&&Mf&&"function"==typeof Mf.get?Mf.get:null,Of=If&&Map.prototype.forEach,Rf="function"==typeof Set&&Set.prototype,Nf=Object.getOwnPropertyDescriptor&&Rf?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Df=Rf&&Nf&&"function"==typeof Nf.get?Nf.get:null,Lf=Rf&&Set.prototype.forEach,Ff="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Hf="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Uf="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Bf=Boolean.prototype.valueOf,jf=Object.prototype.toString,Vf=Function.prototype.toString,qf=String.prototype.match,zf=String.prototype.slice,Wf=String.prototype.replace,Gf=String.prototype.toUpperCase,Kf=String.prototype.toLowerCase,Yf=RegExp.prototype.test,Xf=Array.prototype.concat,$f=Array.prototype.join,Qf=Array.prototype.slice,Jf=Math.floor,Zf="function"==typeof BigInt?BigInt.prototype.valueOf:null,em=Object.getOwnPropertySymbols,tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,sm="function"==typeof Symbol&&"object"==typeof Symbol.iterator,nm="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===sm||"symbol")?Symbol.toStringTag:null,im=Object.prototype.propertyIsEnumerable,om=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function rm(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||Yf.call(/e/,t))return t;var s=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-Jf(-e):Jf(e);if(n!==e){var i=String(n),o=zf.call(t,i.length+1);return Wf.call(i,s,"$&_")+"."+Wf.call(Wf.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Wf.call(t,s,"$&_")}var am=xf,lm=am.custom,cm=fm(lm)?lm:null;function um(e,t,s){var n="double"===(s.quoteStyle||t)?'"':"'";return n+e+n}function dm(e){return Wf.call(String(e),/"/g,"&quot;")}function pm(e){return!("[object Array]"!==vm(e)||nm&&"object"==typeof e&&nm in e)}function hm(e){return!("[object RegExp]"!==vm(e)||nm&&"object"==typeof e&&nm in e)}function fm(e){if(sm)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!tm)return!1;try{return tm.call(e),!0}catch(v_){}return!1}var mm=Object.prototype.hasOwnProperty||function(e){return e in this};function gm(e,t){return mm.call(e,t)}function vm(e){return jf.call(e)}function ym(e,t){if(e.indexOf)return e.indexOf(t);for(var s=0,n=e.length;s<n;s++)if(e[s]===t)return s;return-1}function bm(e,t){if(e.length>t.maxStringLength){var s=e.length-t.maxStringLength,n="... "+s+" more character"+(s>1?"s":"");return bm(zf.call(e,0,t.maxStringLength),t)+n}return um(Wf.call(Wf.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Em),"single",t)}function Em(e){var t=e.charCodeAt(0),s={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return s?"\\"+s:"\\x"+(t<16?"0":"")+Gf.call(t.toString(16))}function Cm(e){return"Object("+e+")"}function Sm(e){return e+" { ? }"}function _m(e,t,s,n){return e+" ("+t+") {"+(n?wm(s,n):$f.call(s,", "))+"}"}function wm(e,t){if(0===e.length)return"";var s="\n"+t.prev+t.base;return s+$f.call(e,","+s)+"\n"+t.prev}function Am(e,t){var s=pm(e),n=[];if(s){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=gm(e,i)?t(e[i],e):""}var o,r="function"==typeof em?em(e):[];if(sm){o={};for(var a=0;a<r.length;a++)o["$"+r[a]]=r[a]}for(var l in e)gm(e,l)&&(s&&String(Number(l))===l&&l<e.length||sm&&o["$"+l]instanceof Symbol||(Yf.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof em)for(var c=0;c<r.length;c++)im.call(e,r[c])&&n.push("["+t(r[c])+"]: "+t(e[r[c]],e));return n}var Pm=_f,Tm=function(e,t){var s=Af(e,!!t);return"function"==typeof s&&Tf(e,".prototype.")>-1?Pf(s):s},xm=function e(t,s,n,i){var o=s||{};if(gm(o,"quoteStyle")&&"single"!==o.quoteStyle&&"double"!==o.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(gm(o,"maxStringLength")&&("number"==typeof o.maxStringLength?o.maxStringLength<0&&o.maxStringLength!==1/0:null!==o.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var r=!gm(o,"customInspect")||o.customInspect;if("boolean"!=typeof r&&"symbol"!==r)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(gm(o,"indent")&&null!==o.indent&&"\t"!==o.indent&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(gm(o,"numericSeparator")&&"boolean"!=typeof o.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return bm(t,o);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var l=String(t);return a?rm(t,l):l}if("bigint"==typeof t){var c=String(t)+"n";return a?rm(t,c):c}var u=void 0===o.depth?5:o.depth;if(void 0===n&&(n=0),n>=u&&u>0&&"object"==typeof t)return pm(t)?"[Array]":"[Object]";var d=function(e,t){var s;if("\t"===e.indent)s="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;s=$f.call(Array(e.indent+1)," ")}return{base:s,prev:$f.call(Array(t+1),s)}}(o,n);if(void 0===i)i=[];else if(ym(i,t)>=0)return"[Circular]";function p(t,s,r){if(s&&(i=Qf.call(i)).push(s),r){var a={depth:o.depth};return gm(o,"quoteStyle")&&(a.quoteStyle=o.quoteStyle),e(t,a,n+1,i)}return e(t,o,n+1,i)}if("function"==typeof t&&!hm(t)){var h=function(e){if(e.name)return e.name;var t=qf.call(Vf.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),f=Am(t,p);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(f.length>0?" { "+$f.call(f,", ")+" }":"")}if(fm(t)){var m=sm?Wf.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):tm.call(t);return"object"!=typeof t||sm?m:Cm(m)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var g="<"+Kf.call(String(t.nodeName)),v=t.attributes||[],y=0;y<v.length;y++)g+=" "+v[y].name+"="+um(dm(v[y].value),"double",o);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+Kf.call(String(t.nodeName))+">"}if(pm(t)){if(0===t.length)return"[]";var b=Am(t,p);return d&&!function(e){for(var t=0;t<e.length;t++)if(ym(e[t],"\n")>=0)return!1;return!0}(b)?"["+wm(b,d)+"]":"[ "+$f.call(b,", ")+" ]"}if(function(e){return!("[object Error]"!==vm(e)||nm&&"object"==typeof e&&nm in e)}(t)){var E=Am(t,p);return"cause"in Error.prototype||!("cause"in t)||im.call(t,"cause")?0===E.length?"["+String(t)+"]":"{ ["+String(t)+"] "+$f.call(E,", ")+" }":"{ ["+String(t)+"] "+$f.call(Xf.call("[cause]: "+p(t.cause),E),", ")+" }"}if("object"==typeof t&&r){if(cm&&"function"==typeof t[cm]&&am)return am(t,{depth:u-n});if("symbol"!==r&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!kf||!e||"object"!=typeof e)return!1;try{kf.call(e);try{Df.call(e)}catch(g){return!0}return e instanceof Map}catch(v_){}return!1}(t)){var C=[];return Of.call(t,(function(e,s){C.push(p(s,t,!0)+" => "+p(e,t))})),_m("Map",kf.call(t),C,d)}if(function(e){if(!Df||!e||"object"!=typeof e)return!1;try{Df.call(e);try{kf.call(e)}catch(t){return!0}return e instanceof Set}catch(v_){}return!1}(t)){var S=[];return Lf.call(t,(function(e){S.push(p(e,t))})),_m("Set",Df.call(t),S,d)}if(function(e){if(!Ff||!e||"object"!=typeof e)return!1;try{Ff.call(e,Ff);try{Hf.call(e,Hf)}catch(g){return!0}return e instanceof WeakMap}catch(v_){}return!1}(t))return Sm("WeakMap");if(function(e){if(!Hf||!e||"object"!=typeof e)return!1;try{Hf.call(e,Hf);try{Ff.call(e,Ff)}catch(g){return!0}return e instanceof WeakSet}catch(v_){}return!1}(t))return Sm("WeakSet");if(function(e){if(!Uf||!e||"object"!=typeof e)return!1;try{return Uf.call(e),!0}catch(v_){}return!1}(t))return Sm("WeakRef");if(function(e){return!("[object Number]"!==vm(e)||nm&&"object"==typeof e&&nm in e)}(t))return Cm(p(Number(t)));if(function(e){if(!e||"object"!=typeof e||!Zf)return!1;try{return Zf.call(e),!0}catch(v_){}return!1}(t))return Cm(p(Zf.call(t)));if(function(e){return!("[object Boolean]"!==vm(e)||nm&&"object"==typeof e&&nm in e)}(t))return Cm(Bf.call(t));if(function(e){return!("[object String]"!==vm(e)||nm&&"object"==typeof e&&nm in e)}(t))return Cm(p(String(t)));if(!function(e){return!("[object Date]"!==vm(e)||nm&&"object"==typeof e&&nm in e)}(t)&&!hm(t)){var _=Am(t,p),w=om?om(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",P=!w&&nm&&Object(t)===t&&nm in t?zf.call(vm(t),8,-1):A?"Object":"",T=(w||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(P||A?"["+$f.call(Xf.call([],P||[],A||[]),": ")+"] ":"");return 0===_.length?T+"{}":d?T+"{"+wm(_,d)+"}":T+"{ "+$f.call(_,", ")+" }"}return String(t)},Im=Pm("%TypeError%"),Mm=Pm("%WeakMap%",!0),km=Pm("%Map%",!0),Om=Tm("WeakMap.prototype.get",!0),Rm=Tm("WeakMap.prototype.set",!0),Nm=Tm("WeakMap.prototype.has",!0),Dm=Tm("Map.prototype.get",!0),Lm=Tm("Map.prototype.set",!0),Fm=Tm("Map.prototype.has",!0),Hm=function(e,t){for(var s,n=e;null!==(s=n.next);n=s)if(s.key===t)return n.next=s.next,s.next=e.next,e.next=s,s},Um=String.prototype.replace,Bm=/%20/g,jm="RFC3986",Vm={default:jm,formatters:{RFC1738:function(e){return Um.call(e,Bm,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:jm},qm=Vm,zm=Object.prototype.hasOwnProperty,Wm=Array.isArray,Gm=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Km=function(e,t){for(var s=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(s[n]=e[n]);return s},Ym={arrayToObject:Km,assign:function(e,t){return Object.keys(t).reduce((function(e,s){return e[s]=t[s],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],s=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],r=Object.keys(o),a=0;a<r.length;++a){var l=r[a],c=o[l];"object"==typeof c&&null!==c&&-1===s.indexOf(c)&&(t.push({obj:o,prop:l}),s.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),s=t.obj[t.prop];if(Wm(s)){for(var n=[],i=0;i<s.length;++i)void 0!==s[i]&&n.push(s[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,s){var n=e.replace(/\+/g," ");if("iso-8859-1"===s)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(v_){return n}},encode:function(e,t,s,n,i){if(0===e.length)return e;var o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===s)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var r="",a=0;a<o.length;++a){var l=o.charCodeAt(a);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===qm.RFC1738&&(40===l||41===l)?r+=o.charAt(a):l<128?r+=Gm[l]:l<2048?r+=Gm[192|l>>6]+Gm[128|63&l]:l<55296||l>=57344?r+=Gm[224|l>>12]+Gm[128|l>>6&63]+Gm[128|63&l]:(a+=1,l=65536+((1023&l)<<10|1023&o.charCodeAt(a)),r+=Gm[240|l>>18]+Gm[128|l>>12&63]+Gm[128|l>>6&63]+Gm[128|63&l])}return r},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(Wm(e)){for(var s=[],n=0;n<e.length;n+=1)s.push(t(e[n]));return s}return t(e)},merge:function e(t,s,n){if(!s)return t;if("object"!=typeof s){if(Wm(t))t.push(s);else{if(!t||"object"!=typeof t)return[t,s];(n&&(n.plainObjects||n.allowPrototypes)||!zm.call(Object.prototype,s))&&(t[s]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(s);var i=t;return Wm(t)&&!Wm(s)&&(i=Km(t,n)),Wm(t)&&Wm(s)?(s.forEach((function(s,i){if(zm.call(t,i)){var o=t[i];o&&"object"==typeof o&&s&&"object"==typeof s?t[i]=e(o,s,n):t.push(s)}else t[i]=s})),t):Object.keys(s).reduce((function(t,i){var o=s[i];return zm.call(t,i)?t[i]=e(t[i],o,n):t[i]=o,t}),i)}},Xm=function(){var e,t,s,n={assert:function(e){if(!n.has(e))throw new Im("Side channel does not contain "+xm(e))},get:function(n){if(Mm&&n&&("object"==typeof n||"function"==typeof n)){if(e)return Om(e,n)}else if(km){if(t)return Dm(t,n)}else if(s)return function(e,t){var s=Hm(e,t);return s&&s.value}(s,n)},has:function(n){if(Mm&&n&&("object"==typeof n||"function"==typeof n)){if(e)return Nm(e,n)}else if(km){if(t)return Fm(t,n)}else if(s)return function(e,t){return!!Hm(e,t)}(s,n);return!1},set:function(n,i){Mm&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new Mm),Rm(e,n,i)):km?(t||(t=new km),Lm(t,n,i)):(s||(s={key:{},next:null}),function(e,t,s){var n=Hm(e,t);n?n.value=s:e.next={key:t,next:e.next,value:s}}(s,n,i))}};return n},$m=Ym,Qm=Vm,Jm=Object.prototype.hasOwnProperty,Zm={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},eg=Array.isArray,tg=String.prototype.split,sg=Array.prototype.push,ng=function(e,t){sg.apply(e,eg(t)?t:[t])},ig=Date.prototype.toISOString,og=Qm.default,rg={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:$m.encode,encodeValuesOnly:!1,format:og,formatter:Qm.formatters[og],indices:!1,serializeDate:function(e){return ig.call(e)},skipNulls:!1,strictNullHandling:!1},ag={},lg=function e(t,s,n,i,o,r,a,l,c,u,d,p,h,f,m){for(var g,v=t,y=m,b=0,E=!1;void 0!==(y=y.get(ag))&&!E;){var C=y.get(t);if(b+=1,void 0!==C){if(C===b)throw new RangeError("Cyclic object value");E=!0}void 0===y.get(ag)&&(b=0)}if("function"==typeof a?v=a(s,v):v instanceof Date?v=u(v):"comma"===n&&eg(v)&&(v=$m.maybeMap(v,(function(e){return e instanceof Date?u(e):e}))),null===v){if(i)return r&&!h?r(s,rg.encoder,f,"key",d):s;v=""}if("string"==typeof(g=v)||"number"==typeof g||"boolean"==typeof g||"symbol"==typeof g||"bigint"==typeof g||$m.isBuffer(v)){if(r){var S=h?s:r(s,rg.encoder,f,"key",d);if("comma"===n&&h){for(var _=tg.call(String(v),","),w="",A=0;A<_.length;++A)w+=(0===A?"":",")+p(r(_[A],rg.encoder,f,"value",d));return[p(S)+(eg(v)&&1===_.length?"[]":"")+"="+w]}return[p(S)+"="+p(r(v,rg.encoder,f,"value",d))]}return[p(s)+"="+p(String(v))]}var P,T=[];if(void 0===v)return T;if("comma"===n&&eg(v))P=[{value:v.length>0?v.join(",")||null:void 0}];else if(eg(a))P=a;else{var x=Object.keys(v);P=l?x.sort(l):x}for(var I="comma"===n&&eg(v)&&1===v.length?s+"[]":s,M=0;M<P.length;++M){var k=P[M],O="object"==typeof k&&void 0!==k.value?k.value:v[k];if(!o||null!==O){var R=eg(v)?"function"==typeof n?n(I,k):I:I+(c?"."+k:"["+k+"]");m.set(t,b);var N=Xm();N.set(ag,m),ng(T,e(O,R,n,i,o,r,a,l,c,u,d,p,h,f,N))}}return T},cg=Ym,ug=Object.prototype.hasOwnProperty,dg=Array.isArray,pg={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:cg.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},hg=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},fg=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},mg=function(e,t,s,n){if(e){var i=s.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,r=s.depth>0&&/(\[[^[\]]*])/.exec(i),a=r?i.slice(0,r.index):i,l=[];if(a){if(!s.plainObjects&&ug.call(Object.prototype,a)&&!s.allowPrototypes)return;l.push(a)}for(var c=0;s.depth>0&&null!==(r=o.exec(i))&&c<s.depth;){if(c+=1,!s.plainObjects&&ug.call(Object.prototype,r[1].slice(1,-1))&&!s.allowPrototypes)return;l.push(r[1])}return r&&l.push("["+i.slice(r.index)+"]"),function(e,t,s,n){for(var i=n?t:fg(t,s),o=e.length-1;o>=0;--o){var r,a=e[o];if("[]"===a&&s.parseArrays)r=[].concat(i);else{r=s.plainObjects?Object.create(null):{};var l="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(l,10);s.parseArrays||""!==l?!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&s.parseArrays&&c<=s.arrayLimit?(r=[])[c]=i:"__proto__"!==l&&(r[l]=i):r={0:i}}i=r}return i}(l,t,s,n)}},gg={formats:Vm,parse:function(e,t){var s=function(e){if(!e)return pg;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?pg.charset:e.charset;return{allowDots:void 0===e.allowDots?pg.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:pg.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:pg.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:pg.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:pg.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:pg.comma,decoder:"function"==typeof e.decoder?e.decoder:pg.decoder,delimiter:"string"==typeof e.delimiter||cg.isRegExp(e.delimiter)?e.delimiter:pg.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:pg.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:pg.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:pg.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:pg.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:pg.strictNullHandling}}(t);if(""===e||null==e)return s.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var s,n={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,r=i.split(t.delimiter,o),a=-1,l=t.charset;if(t.charsetSentinel)for(s=0;s<r.length;++s)0===r[s].indexOf("utf8=")&&("utf8=%E2%9C%93"===r[s]?l="utf-8":"utf8=%26%2310003%3B"===r[s]&&(l="iso-8859-1"),a=s,s=r.length);for(s=0;s<r.length;++s)if(s!==a){var c,u,d=r[s],p=d.indexOf("]="),h=-1===p?d.indexOf("="):p+1;-1===h?(c=t.decoder(d,pg.decoder,l,"key"),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,h),pg.decoder,l,"key"),u=cg.maybeMap(fg(d.slice(h+1),t),(function(e){return t.decoder(e,pg.decoder,l,"value")}))),u&&t.interpretNumericEntities&&"iso-8859-1"===l&&(u=hg(u)),d.indexOf("[]=")>-1&&(u=dg(u)?[u]:u),ug.call(n,c)?n[c]=cg.combine(n[c],u):n[c]=u}return n}(e,s):e,i=s.plainObjects?Object.create(null):{},o=Object.keys(n),r=0;r<o.length;++r){var a=o[r],l=mg(a,n[a],s,"string"==typeof e);i=cg.merge(i,l,s)}return!0===s.allowSparse?i:cg.compact(i)},stringify:function(e,t){var s,n=e,i=function(e){if(!e)return rg;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||rg.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=Qm.default;if(void 0!==e.format){if(!Jm.call(Qm.formatters,e.format))throw new TypeError("Unknown format option provided.");s=e.format}var n=Qm.formatters[s],i=rg.filter;return("function"==typeof e.filter||eg(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:rg.addQueryPrefix,allowDots:void 0===e.allowDots?rg.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:rg.charsetSentinel,delimiter:void 0===e.delimiter?rg.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:rg.encode,encoder:"function"==typeof e.encoder?e.encoder:rg.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:rg.encodeValuesOnly,filter:i,format:s,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:rg.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:rg.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:rg.strictNullHandling}}(t);"function"==typeof i.filter?n=(0,i.filter)("",n):eg(i.filter)&&(s=i.filter);var o,r=[];if("object"!=typeof n||null===n)return"";o=t&&t.arrayFormat in Zm?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var a=Zm[o];s||(s=Object.keys(n)),i.sort&&s.sort(i.sort);for(var l=Xm(),c=0;c<s.length;++c){var u=s[c];i.skipNulls&&null===n[u]||ng(r,lg(n[u],u,a,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,l))}var d=r.join(i.delimiter),p=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""}};function vg(e){return(vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yg=function(e){return null!==e&&"object"===vg(e)};function bg(e){return(bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Eg=yg,Cg=Sg;function Sg(e){if(e)return function(e){for(var t in Sg.prototype)Object.prototype.hasOwnProperty.call(Sg.prototype,t)&&(e[t]=Sg.prototype[t]);return e}(e)}Sg.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},Sg.prototype.parse=function(e){return this._parser=e,this},Sg.prototype.responseType=function(e){return this._responseType=e,this},Sg.prototype.serialize=function(e){return this._serializer=e,this},Sg.prototype.timeout=function(e){if(!e||"object"!==bg(e))return this._timeout=e,this._responseTimeout=0,this._uploadTimeout=0,this;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;case"upload":this._uploadTimeout=e.upload;break;default:console.warn("Unknown timeout option",t)}return this},Sg.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var _g=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),wg=new Set([408,413,429,500,502,503,504,521,522,524]);Sg.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var s=this._retryCallback(e,t);if(!0===s)return!0;if(!1===s)return!1}catch(n){console.error(n)}if(t&&t.status&&wg.has(t.status))return!0;if(e){if(e.code&&_g.has(e.code))return!0;if(e.timeout&&"ECONNABORTED"===e.code)return!0;if(e.crossDomain)return!0}return!1},Sg.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},Sg.prototype.then=function(e,t){var s=this;if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.on("abort",(function(){if(!(s._maxRetries&&s._maxRetries>s._retries))if(s.timedout&&s.timedoutError)t(s.timedoutError);else{var e=new Error("Aborted");e.code="ABORTED",e.status=s.status,e.method=s.method,e.url=s.url,t(e)}})),n.end((function(s,n){s?t(s):e(n)}))}))}return this._fullfilledPromise.then(e,t)},Sg.prototype.catch=function(e){return this.then(void 0,e)},Sg.prototype.use=function(e){return e(this),this},Sg.prototype.ok=function(e){if("function"!=typeof e)throw new Error("Callback required");return this._okCallback=e,this},Sg.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},Sg.prototype.get=function(e){return this._header[e.toLowerCase()]},Sg.prototype.getHeader=Sg.prototype.get,Sg.prototype.set=function(e,t){if(Eg(e)){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&this.set(s,e[s]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},Sg.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},Sg.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(Eg(e)){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&this.field(s,e[s]);return this}if(Array.isArray(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.field(e,t[n]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=String(t)),this._getFormData().append(e,t),this},Sg.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},Sg.prototype._auth=function(e,t,s,n){switch(s.type){case"basic":this.set("Authorization","Basic ".concat(n("".concat(e,":").concat(t))));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer ".concat(e))}return this},Sg.prototype.withCredentials=function(e){return void 0===e&&(e=!0),this._withCredentials=e,this},Sg.prototype.redirects=function(e){return this._maxRedirects=e,this},Sg.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw new TypeError("Invalid argument");return this._maxResponseSize=e,this},Sg.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},Sg.prototype.send=function(e){var t=Eg(e),s=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(t&&Eg(this._data))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._data[n]=e[n]);else"string"==typeof e?(s||this.type("form"),(s=this._header["content-type"])&&(s=s.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===s?this._data?"".concat(this._data,"&").concat(e):e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||s||this.type("json"),this},Sg.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},Sg.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.includes("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var s=this.url.slice(t+1).split("&");"function"==typeof this._sort?s.sort(this._sort):s.sort(),this.url=this.url.slice(0,t)+"?"+s.join("&")}}},Sg.prototype._appendQueryString=function(){console.warn("Unsupported")},Sg.prototype._timeoutError=function(e,t,s){if(!this._aborted){var n=new Error("".concat(e+t,"ms exceeded"));n.timeout=t,n.code="ECONNABORTED",n.errno=s,this.timedout=!0,this.timedoutError=n,this.abort(),this.callback(n)}},Sg.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))};var Ag={};function Pg(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(!e)return;if("string"==typeof e)return Tg(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Tg(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,a=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return r=e.done,e},e:function(e){a=!0,o=e},f:function(){try{r||null==s.return||s.return()}finally{if(a)throw o}}}}function Tg(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}Ag.type=function(e){return e.split(/ *; */).shift()},Ag.params=function(e){var t,s={},n=Pg(e.split(/ *; */));try{for(n.s();!(t=n.n()).done;){var i=t.value.split(/ *= */),o=i.shift(),r=i.shift();o&&r&&(s[o]=r)}}catch(a){n.e(a)}finally{n.f()}return s},Ag.parseLinks=function(e){var t,s={},n=Pg(e.split(/ *, */));try{for(n.s();!(t=n.n()).done;){var i=t.value.split(/ *; */),o=i[0].slice(1,-1);s[i[1].split(/ *= */)[1].slice(1,-1)]=o}}catch(r){n.e(r)}finally{n.f()}return s},Ag.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e};var xg=Ag,Ig=Mg;function Mg(e){if(e)return function(e){for(var t in Mg.prototype)Object.prototype.hasOwnProperty.call(Mg.prototype,t)&&(e[t]=Mg.prototype[t]);return e}(e)}function kg(e){return function(e){if(Array.isArray(e))return Og(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Og(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Og(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Og(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function Rg(){this._defaults=[]}Mg.prototype.get=function(e){return this.header[e.toLowerCase()]},Mg.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=xg.type(t);var s=xg.params(t);for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(this[n]=s[n]);this.links={};try{e.link&&(this.links=xg.parseLinks(e.link))}catch(i){}},Mg.prototype._setStatusProperties=function(e){var t=e/100|0;this.statusCode=e,this.status=this.statusCode,this.statusType=t,this.info=1===t,this.ok=2===t,this.redirect=3===t,this.clientError=4===t,this.serverError=5===t,this.error=(4===t||5===t)&&this.toError(),this.created=201===e,this.accepted=202===e,this.noContent=204===e,this.badRequest=400===e,this.unauthorized=401===e,this.notAcceptable=406===e,this.forbidden=403===e,this.notFound=404===e,this.unprocessableEntity=422===e},["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(e){Rg.prototype[e]=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return this._defaults.push({fn:e,args:s}),this}})),Rg.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,kg(t.args))}))};var Ng=Rg;!function(e,t){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n;"undefined"!=typeof window?n=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),n=void 0):n=self;var i=kh.exports,o=Oh,r=gg,a=Cg,l=yg,c=Ig,u=Ng;function d(){}e.exports=function(e,s){return"function"==typeof s?new t.Request("GET",e).end(s):1===arguments.length?new t.Request("GET",e):new t.Request(e,s)};var p=t=e.exports;t.Request=b,p.getXHR=function(){if(n.XMLHttpRequest&&(!n.location||"file:"!==n.location.protocol||!n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(s){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(i){}throw new Error("Browser-only version of superagent could not find XHR")};var h="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function f(e){if(!l(e))return e;var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&m(t,s,e[s]);return t.join("&")}function m(e,t,s){if(void 0!==s)if(null!==s)if(Array.isArray(s))s.forEach((function(s){m(e,t,s)}));else if(l(s))for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&m(e,"".concat(t,"[").concat(n,"]"),s[n]);else e.push(encodeURI(t)+"="+encodeURIComponent(s));else e.push(encodeURI(t))}function g(e){for(var t,s,n={},i=e.split("&"),o=0,r=i.length;o<r;++o)-1===(s=(t=i[o]).indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,s))]=decodeURIComponent(t.slice(s+1));return n}function v(e){return/[/+]json($|[^-\w])/i.test(e)}function y(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.headers=function(e){for(var t,s,n,i,o=e.split(/\r?\n/),r={},a=0,l=o.length;a<l;++a)-1!==(t=(s=o[a]).indexOf(":"))&&(n=s.slice(0,t).toLowerCase(),i=h(s.slice(t+1)),r[n]=i);return r}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function b(e,t){var s=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,n=null;try{n=new y(s)}catch(i){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=i,s.xhr?(t.rawResponse=void 0===s.xhr.responseType?s.xhr.responseText:s.xhr.response,t.status=s.xhr.status?s.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),s.callback(t)}s.emit("response",n);try{s._isResponseOK(n)||(e=new Error(n.statusText||n.text||"Unsuccessful HTTP response"))}catch(i){e=i}e?(e.original=t,e.response=n,e.status=n.status,s.callback(e,n)):s.callback(null,n)}))}function E(e,t,s){var n=p("DELETE",e);return"function"==typeof t&&(s=t,t=null),t&&n.send(t),s&&n.end(s),n}p.serializeObject=f,p.parseString=g,p.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":r.stringify,"application/json":o},p.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},c(y.prototype),y.prototype._parseBody=function(e){var t=p.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&v(this.type)&&(t=p.parse["application/json"]),t&&e&&(e.length>0||e instanceof Object)?t(e):null)},y.prototype.toError=function(){var e=this.req,t=e.method,s=e.url,n="cannot ".concat(t," ").concat(s," (").concat(this.status,")"),i=new Error(n);return i.status=this.status,i.method=t,i.url=s,i},p.Response=y,i(b.prototype),a(b.prototype),b.prototype.type=function(e){return this.set("Content-Type",p.types[e]||e),this},b.prototype.accept=function(e){return this.set("Accept",p.types[e]||e),this},b.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"===s(t)&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});var i=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,n,i)},b.prototype.query=function(e){return"string"!=typeof e&&(e=f(e)),e&&this._query.push(e),this},b.prototype.attach=function(e,t,s){if(t){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,s||t.name)}return this},b.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},b.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var s=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),s(e,t)},b.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},b.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},b.prototype.ca=b.prototype.agent,b.prototype.buffer=b.prototype.ca,b.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},b.prototype.pipe=b.prototype.write,b.prototype._isHost=function(e){return e&&"object"===s(e)&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},b.prototype.end=function(e){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||d,this._finalizeQueryString(),this._end()},b.prototype._setUploadTimeout=function(){var e=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){e._timeoutError("Upload timeout of ",e._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},b.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var e=this;this.xhr=p.getXHR();var t=this.xhr,s=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var s=t.readyState;if(s>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4===s){var n;try{n=t.status}catch(i){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,s){s.total>0&&(s.percent=s.loaded/s.total*100,100===s.percent&&clearTimeout(e._uploadTimeoutTimer)),s.direction=t,e.emit("progress",s)};if(this.hasListeners("progress"))try{t.addEventListener("progress",n.bind(null,"download")),t.upload&&t.upload.addEventListener("progress",n.bind(null,"upload"))}catch(a){}t.upload&&this._setUploadTimeout();try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(l){return this.callback(l)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof s&&!this._isHost(s)){var i=this._header["content-type"],o=this._serializer||p.serialize[i?i.split(";")[0]:""];!o&&v(i)&&(o=p.serialize["application/json"]),o&&(s=o(s))}for(var r in this.header)null!==this.header[r]&&Object.prototype.hasOwnProperty.call(this.header,r)&&t.setRequestHeader(r,this.header[r]);this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0===s?null:s)},p.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,s){var n=new p.Request(e,t);return this._setDefaults(n),s&&n.end(s),n}})),u.prototype.del=u.prototype.delete,p.get=function(e,t,s){var n=p("GET",e);return"function"==typeof t&&(s=t,t=null),t&&n.query(t),s&&n.end(s),n},p.head=function(e,t,s){var n=p("HEAD",e);return"function"==typeof t&&(s=t,t=null),t&&n.query(t),s&&n.end(s),n},p.options=function(e,t,s){var n=p("OPTIONS",e);return"function"==typeof t&&(s=t,t=null),t&&n.send(t),s&&n.end(s),n},p.del=E,p.delete=E,p.patch=function(e,t,s){var n=p("PATCH",e);return"function"==typeof t&&(s=t,t=null),t&&n.send(t),s&&n.end(s),n},p.post=function(e,t,s){var n=p("POST",e);return"function"==typeof t&&(s=t,t=null),t&&n.send(t),s&&n.end(s),n},p.put=function(e,t,s){var n=p("PUT",e);return"function"==typeof t&&(s=t,t=null),t&&n.send(t),s&&n.end(s),n}}(Mh,Mh.exports);var Dg=Mh.exports;function Lg(e,t,s,n,i){return n=>(n({type:ss.UPLOAD_FILES_REQUEST}),Dg.post(Ke.getFilesRoute()).set(Ke.getOptions({method:"post"}).headers).field("channel_id",s).field("client_ids",i).attach("files",e,t).accept("application/json"))}function Fg(e,t,s,n,i,{err:o,res:r}){return(e,t)=>{if(o){let a;a=r&&r.body&&r.body.id?r.body:0!==o.status&&o.status?{message:De("channel_loader.unknown_error","We received an unexpected status code from the server.")+" ("+o.status+")"}:{message:De("file_upload.generic_error","There was a problem uploading your files.")},ns(o,e,t);const l={type:ss.UPLOAD_FILES_FAILURE,clientIds:[i],channelId:s,rootId:n,error:o};return e(O([l,is(o)])),{error:a}}const c=r.body.file_infos.map(((e,t)=>l(a({},e),{clientId:r.body.client_ids[t]})));return e(O([{type:ss.RECEIVED_UPLOAD_FILES,data:c,channelId:s,rootId:n},{type:ss.UPLOAD_FILES_SUCCESS}])),{data:r.body}}}class Hg{constructor(e){u(this,"action"),u(this,"timer"),this.action=e,this.timer=-1,this.fire=this.fire.bind(this)}fire(){this.action(),this.timer=-1}fireAfter(e){this.timer>=0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.fire,e)}cancel(){window.clearTimeout(this.timer)}}var Ug="mqik-f0b05e65",Bg="mqik-eb5d77c1";const jg=R({limited:{id:ds("file_upload.limited"),defaultMessage:"Uploads limited to {count, number} files maximum. Please use additional posts for more files."},filesAbove:{id:ds("file_upload.filesAbove"),defaultMessage:"Files above {max}MB could not be uploaded: {filenames}"},fileAbove:{id:ds("file_upload.fileAbove"),defaultMessage:"File above {max}MB could not be uploaded: {filename}"},zeroBytesFiles:{id:ds("file_upload.zeroBytesFiles"),defaultMessage:"You are uploading empty files: {filenames}"},zeroBytesFile:{id:ds("file_upload.zeroBytesFile"),defaultMessage:"You are uploading an empty file: {filename}"},pasted:{id:ds("file_upload.pasted"),defaultMessage:"Image Pasted at "},uploadFile:{id:ds("file_upload.upload_files"),defaultMessage:"Upload files"}});class Vg extends p.exports.PureComponent{constructor(e){super(e),u(this,"fileUploadSuccess",((e,t,s)=>{if(e){this.props.onFileUpload(e.file_infos,e.client_ids,t,s);const i=Object.assign({},this.state.requests);for(var n=0;n<e.client_ids.length;n++)Reflect.deleteProperty(i,e.client_ids[n]);this.setState({requests:i})}})),u(this,"fileUploadFail",((e,t,s,n)=>{this.props.onUploadError(e,t,s,n)})),u(this,"pluginUploadFiles",(e=>{this.props.onUploadError(null),this.uploadFiles(e)})),u(this,"checkPluginHooksAndUploadFiles",(e=>{this.props.onUploadError(null);let t=Array.from(e).sort(((e,t)=>e.name.localeCompare(t.name,this.props.locale,{numeric:!0})));const s=this.props.pluginFilesWillUploadHooks;for(const n of s){const e=n.hook(t,this.pluginUploadFiles);e.message&&this.props.onUploadError(e.message),t=e.files}t&&this.uploadFiles(t)})),u(this,"uploadFiles",(e=>{const{channelId:t,rootId:s}=this.props,n=V.MAX_UPLOAD_FILES-this.props.fileCount;let i=0;const o=[],r=[],c=[];for(let f=0;f<e.length&&i<n;f++){if(e[f].size>this.props.maxFileSize){o.push(e[f]);continue}0===e[f].size&&r.push(e[f]);const n=os(),u=this.props.actions.uploadFile(e[f],e[f].name,t,s,n);u.on("progress",(t=>{this.props.onUploadProgress({clientId:n,name:e[f].name,percent:t.percent,type:e[f].type})})),u.end(((i,o)=>{const{error:r,data:a}=this.props.actions.handleFileUploadEnd(e[f],e[f].name,t,s,n,{err:i,res:o});r?this.fileUploadFail(r,n,t,s):a&&this.fileUploadSuccess(a,t,s)})),this.setState({requests:l(a({},this.state.requests),{[n]:u})}),c.push(n),i+=1}this.props.onUploadStart(c,t);const{formatMessage:u}=this.props.intl,d=[];if(e.length>n&&d.push(u(jg.limited,{count:V.MAX_UPLOAD_FILES})),o.length>1){var p=o.map((e=>e.name)).join(", ");d.push(u(jg.filesAbove,{max:this.props.maxFileSize/1048576,filenames:p}))}else o.length>0&&d.push(u(jg.fileAbove,{max:this.props.maxFileSize/1048576,filename:o[0].name}));if(r.length>1){var h=r.map((e=>e.name)).join(", ");d.push(u(jg.zeroBytesFiles,{filenames:h}))}else r.length>0&&d.push(u(jg.zeroBytesFile,{filename:r[0].name}));d.length>0&&this.props.onUploadError(d.join(", "))})),u(this,"handleChange",(e=>{e.target.files.length>0&&(this.checkPluginHooksAndUploadFiles(e.target.files),rs(e.target)),this.props.onFileUploadChange()})),u(this,"handleDrop",(e=>{if(!this.props.canUploadFiles)return void this.props.onUploadError(De("file_upload.disabled","File attachments are disabled."));this.props.onUploadError(null);const t=e.dataTransfer.items||[],s=e.dataTransfer.files,n=[];Array.from(s).forEach(((e,s)=>{const i=t[s];i&&i.webkitGetAsEntry&&(null===i.webkitGetAsEntry()||i.webkitGetAsEntry().isDirectory)||n.push(e)}));const i=e.dataTransfer.types;if(i){if(as(e.dataTransfer))return;if(i.includes&&!i.includes("Files"))return;if(i.contains&&!i.contains("Files"))return}0!==n.length?(n.length&&this.checkPluginHooksAndUploadFiles(n),this.props.onFileUploadChange()):this.props.onUploadError(De("file_upload.drag_folder","Folders cannot be uploaded. Please drag all files separately."))})),u(this,"registerDragEvents",((e,t)=>{const s=this,n=document.querySelector(t),i=new Hg((()=>{n&&n.classList.add("u3-hidden")}));let o={};o=this.props.canUploadFiles?{enter(e){var t=e.detail.dataTransfer;!as(t)&&us(t)&&n&&n.classList.remove("u3-hidden")},leave(e){var t=e.detail.dataTransfer;!as(t)&&us(t)&&n&&n.classList.add("u3-hidden"),i.cancel()},over(){i.fireAfter(500)},drop(e){n&&n.classList.add("u3-hidden"),i.cancel(),s.handleDrop(e.detail)}}:{drop(e){s.handleDrop(e.detail)}},this.unbindDragsterEvents=function(e,t){const s=()=>{},n={enter:s,leave:s,over:s,drop:s},i=Object.assign(n,t),o=document.querySelector(e);if(!o)return s;let r=!1,a=!1;const l=e=>{if(r)return void(a=!0);r=!0;const t=new CustomEvent("dragster:enter",{detail:e});o.dispatchEvent(t),e.preventDefault()},c=e=>{if(a?a=!1:r&&(r=!1),!r&&!a){const t=new CustomEvent("dragster:leave",{detail:e});o.dispatchEvent(t)}e.preventDefault()},u=e=>{const t=new CustomEvent("dragster:over",{detail:e});o.dispatchEvent(t),e.preventDefault()},d=e=>{if(a?a=!1:r&&(r=!1),!r&&!a){const t=new CustomEvent("dragster:drop",{detail:e});o.dispatchEvent(t)}e.preventDefault()};return o.addEventListener("dragenter",l),o.addEventListener("dragleave",c),o.addEventListener("dragover",u),o.addEventListener("drop",d),o.addEventListener("dragster:enter",i.enter),o.addEventListener("dragster:leave",i.leave),o.addEventListener("dragster:over",i.over),o.addEventListener("dragster:drop",i.drop),()=>{o.removeEventListener("dragenter",l),o.removeEventListener("dragleave",c),o.removeEventListener("dragover",u),o.removeEventListener("drop",d),o.removeEventListener("dragster:enter",i.enter),o.removeEventListener("dragster:leave",i.leave),o.removeEventListener("dragster:over",i.over),o.removeEventListener("dragster:drop",i.drop)}}(e,o)})),u(this,"containsEventTarget",((e,t)=>e&&e.contains(t))),u(this,"pasteUpload",(e=>{const{formatMessage:t}=this.props.intl;if(!e.clipboardData||!e.clipboardData.items||tl(e.clipboardData))return;const s=this.props.getTarget(),n=w.findDOMNode(s);if(!this.containsEventTarget(n,e.target))return;this.props.onUploadError(null);const i=[];for(let a=0;a<e.clipboardData.items.length;a++){const t=e.clipboardData.items[a];"file"===t.kind&&i.push(t)}if(i&&i.length>0){if(!this.props.canUploadFiles)return void this.props.onUploadError(De("file_upload.disabled","File attachments are disabled."));e.preventDefault();const s=[];for(let e=0;e<i.length;e++){const n=i[e].getAsFile();if(!n)continue;var o=new Date;let a=o.getHours();a=a<10?`0${a}`:`${a}`;let l=o.getMinutes();l=l<10?`0${l}`:`${l}`;var r="";n.name?n.name.includes(".")&&(r=n.name.substr(n.name.lastIndexOf("."))):i[e].type.includes("/")&&(r="."+i[e].type.split("/")[1].toLowerCase());const c=t(jg.pasted)+o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()+" "+a+"-"+l+r,u=new Blob([n],{type:n.type});u.name=c,s.push(u)}s.length>0&&(this.checkPluginHooksAndUploadFiles(s),this.props.onFileUploadChange())}})),u(this,"keyUpload",(e=>{if(Ie(e)&&fe(e,V.KeyCodes.U)){if(e.preventDefault(),!this.props.canUploadFiles)return void this.props.onUploadError(De("file_upload.disabled","File attachments are disabled."));const t="post"===this.props.postType&&"post_textbox"===document.activeElement.id,s="comment"===this.props.postType&&"reply_textbox"===document.activeElement.id;(t||s)&&(this.fileInput.current.focus(),this.fileInput.current.click())}})),u(this,"cancelUpload",(e=>{const t=Object.assign({},this.state.requests),s=t[e];s&&(s.abort(),Reflect.deleteProperty(t,e),this.setState({requests:t}))})),u(this,"handleMaxUploadReached",(e=>{e&&e.preventDefault();const{onUploadError:t}=this.props,{formatMessage:s}=this.props.intl;t(s(jg.limited,{count:V.MAX_UPLOAD_FILES}))})),u(this,"toggleMenu",(e=>{this.setState({menuOpen:e})})),u(this,"handleLocalFileUploaded",(e=>{V.MAX_UPLOAD_FILES-this.props.fileCount>0?this.props.onClick&&this.props.onClick():this.handleMaxUploadReached(e),this.setState({menuOpen:!1})})),u(this,"simulateInputClick",(e=>{e.preventDefault(),e.stopPropagation(),this.fileInput.current.click()})),this.state={requests:{},menuOpen:!1},this.fileInput=v.createRef()}componentDidMount(){"post"===this.props.postType?this.registerDragEvents(".row.main",".center-file-overlay"):"comment"===this.props.postType&&this.registerDragEvents(".post-right__container",".right-file-overlay"),document.addEventListener("paste",this.pasteUpload),document.addEventListener("keydown",this.keyUpload)}componentWillUnmount(){document.removeEventListener("paste",this.pasteUpload),document.removeEventListener("keydown",this.keyUpload),this.unbindDragsterEvents&&this.unbindDragsterEvents()}render(){const{formatMessage:e}=this.props.intl;let t=!0;ls()&&(t=!1);let s="";cs()&&(s="image/*");const n=V.MAX_UPLOAD_FILES-this.props.fileCount;let i;const o=e({id:"accessibility.button.attachment",defaultMessage:"attachment"});return i=0===this.props.pluginFileUploadMethods.length?E(p.exports.Fragment,{children:[y("button",{type:"button",id:"fileUploadButton","aria-label":o,className:A(Bg,"style--none post-action icon icon--attachment"),onClick:this.simulateInputClick,onTouchEnd:this.simulateInputClick,children:y(gh,{className:"u3-w-6 u3-h-6 u3-text-primary hover:u3-text-secondary"})}),y("input",{id:"fileUploadInput",tabIndex:-1,"aria-label":e(jg.uploadFile),ref:this.fileInput,type:"file",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:s})]}):y("div",{children:y("input",{tabIndex:-1,"aria-label":e(jg.uploadFile),ref:this.fileInput,type:"file",className:"file-attachment-menu-item-input",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:t,accept:s})}),this.props.canUploadFiles||(i=null),y("div",{className:A(Ug,"file-upload-container","style--none",{"btn-file__disabled":n<=0}),children:i})}}u(Vg,"propTypes",{channelId:_.string.isRequired,rootId:_.string,fileCount:_.number.isRequired,getTarget:_.func.isRequired,intl:Yr.isRequired,locale:_.string.isRequired,onClick:_.func,onFileUpload:_.func,onFileUploadChange:_.func,onUploadError:_.func,onUploadStart:_.func,postType:_.string,maxFileSize:_.number,canUploadFiles:_.bool.isRequired,pluginFileUploadMethods:_.arrayOf(_.object),pluginFilesWillUploadHooks:_.arrayOf(_.object),onUploadProgress:_.func.isRequired,actions:_.shape({uploadFile:_.func.isRequired,handleFileUploadEnd:_.func.isRequired}).isRequired}),u(Vg,"defaultProps",{pluginFileUploadMethods:[],pluginFilesWillUploadHooks:[]});const qg=d(Vg,{forwardRef:!0});qg.displayName="injectIntl(FileUpload)";var zg=f((function(e){const t=q(e);return{maxFileSize:parseInt(t.MaxFileSize,10),canUploadFiles:fa(t),locale:ps(e),pluginFileUploadMethods:e.plugins.components.FileUploadMethod,pluginFilesWillUploadHooks:e.plugins.components.FilesWillUploadHook}}),(function(e){return{actions:g({uploadFile:Lg,handleFileUploadEnd:Fg},e)}}),null,{forwardRef:!0})(qg);const Wg=v.forwardRef(((e,t)=>{const s=e,{component:n,title:{id:i,defaultMessage:o,values:r},className:u}=s,d=c(s,["component","title","className"]),{formatMessage:p}=k();return y("span",l(a({className:A("u3-inline-block",u)},d),{ref:t,title:p({id:i,defaultMessage:o},r),children:n}))}));Wg.displayName="LocalizedIcon";class Gg extends v.PureComponent{constructor(){super(...arguments),u(this,"renderSlashCommandError",(()=>{if(!this.props.submittedMessage)return this.props.error.message;const e=this.props.submittedMessage.split(" ")[0];return E(v.Fragment,{children:[y(b,{id:"message_submit_error.invalidCommand",defaultMessage:"Command with a trigger of ''{command}'' not found. ",values:{command:e}}),y("a",{href:"#",onClick:this.props.handleSubmit,children:y(b,{id:"message_submit_error.sendAsMessageLink",defaultMessage:"Click here to send as a message."})})]})}))}render(){const e=this.props.error;if(!e)return null;let t=e.message;return hs(e)&&(t=this.renderSlashCommandError()),y("div",{className:"has-error",children:y("label",{className:"control-label",children:t})})}}var Kg={postCreateForm:"mqik-dc323ff4",postCreateMain:"mqik-3ca5ac62",postCreateTextbox:"mqik-82fe072f",postCreateActions:"mqik-243bef8e",sendButtonClass:"mqik-629e5f8f",sendButtonActive:"mqik-2a364c18",sendButtonDisabled:"mqik-2df3cc0c",emojiBtn:"mqik-0b0c2b5c",emojiBtnActive:"mqik-15140fd0",emojiIcon:"mqik-803861b0",customReadOnlyText:"mqik-eaeeabbb",createPostComplex:"mqik-0f628631"};const Yg=V.KeyCodes;function Xg(e){return e.replace(/\s*$/,"")}class $g extends v.PureComponent{constructor(e){super(e),u(this,"lastBlurAt"),u(this,"lastChannelSwitchAt"),u(this,"draftsForChannel"),u(this,"lastOrientation"),u(this,"saveDraftFrame"),u(this,"topDiv"),u(this,"textboxRef"),u(this,"fileUploadRef"),u(this,"createPostControlsRef"),u(this,"setShowPreview",(e=>{this.props.actions.setShowPreview(e)})),u(this,"setOrientationListeners",(()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.addEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.addEventListener("orientationchange",this.onOrientationChange)})),u(this,"removeOrientationListeners",(()=>{window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.removeEventListener("change",this.onOrientationChange):"onorientationchange"in window&&window.removeEventListener("orientationchange",this.onOrientationChange)})),u(this,"onOrientationChange",(()=>{if(!ms())return;let e="portrait";window.orientation&&(e=90===Math.abs(window.orientation)?"landscape":"portrait"),window.screen.orientation&&(e=window.screen.orientation.type.split("-")[0]),this.lastOrientation&&e!==this.lastOrientation&&"post_textbox"===(document.activeElement||{}).id&&this.textboxRef.current.blur(),this.lastOrientation=e})),u(this,"handlePostError",(e=>{this.setState({postError:e})})),u(this,"toggleEmojiPicker",(e=>{e.preventDefault(),this.setState({showEmojiPicker:!this.state.showEmojiPicker})})),u(this,"hideEmojiPicker",(()=>{this.handleEmojiClose()})),u(this,"doSubmit",(async e=>{const t=this.props.currentChannel.id;if(e&&e.preventDefault(),this.props.draft.uploadsInProgress.length>0||this.state.submitting)return;let s=this.state.message,n=!0;const i=this.state.serverError;i&&hs(i)&&i.submittedMessage===s&&(s=i.submittedMessage,n=!0);const o={file_ids:[]};if(o.message=s,0===o.message.trim().length&&0===this.props.draft.fileInfos.length)return;if(this.state.postError)return this.setState({errorClass:"animation--highlight"}),void setTimeout((()=>{this.setState({errorClass:null})}),V.ANIMATION_TIMEOUT);this.props.actions.addMessageIntoHistory(this.state.message),this.setState({submitting:!0,serverError:null});const r=gs.exec(o.message);if(0!==o.message.indexOf("/")||n)if(r&&this.props.emojiMap.has(r[2]))this.sendReaction(r),this.setState({message:""});else{const{error:e}=await this.sendMessage(o);e||this.setState({message:""})}else{this.setState({message:"",postError:null});let e={};e.channel_id=t,e.team_id=this.props.currentTeamId;const s=await this.props.actions.runSlashCommandWillBePostedHooks(o.message,e);s.error?this.setState({serverError:l(a({},s.error),{submittedMessage:o.message}),message:o.message}):!s.data.message&&s.data.args}this.setState({submitting:!1,postError:null}),cancelAnimationFrame(this.saveDraftFrame),this.props.actions.setDraft(fs.DRAFT+t,null),this.draftsForChannel[t]=null;const c=Date.now()-this.lastBlurAt<150;this.focusTextbox(c)})),u(this,"handleNotifyAllConfirmation",(e=>{this.hideNotifyAllModal(),this.doSubmit(e)})),u(this,"hideNotifyAllModal",(()=>{this.setState({showConfirmModal:!1})})),u(this,"showNotifyAllModal",(()=>{this.setState({showConfirmModal:!0})})),u(this,"getStatusFromSlashCommand",(()=>{const{message:e}=this.state,t=e.split(" ");return t.length>0?t[0].substring(1):""})),u(this,"isStatusSlashCommand",(e=>"online"===e||"away"===e||"dnd"===e||"offline"===e)),u(this,"handleSubmit",(async e=>{e&&e.preventDefault(),vs()&&this.focusTextbox(!0);const{currentChannel:t,userIsOutOfOffice:s,channelMemberCountsByGroup:n,currentChannelMembersCount:i}=this.props,o=this.props.enableConfirmNotificationsToChannel&&this.props.useChannelMentions;let r=0,a=0,l=[];const c=!ys(this.state.message);if(o&&i>V.NOTIFY_ALL_MEMBERS&&!c&&(r=i-1,l=["@all","@group"],this.props.isTimezoneEnabled)){const{data:e}=await this.props.actions.getChannelTimezones(this.props.currentChannel.id);a=e?e.length:0}if(r>0)return this.setState({channelTimezoneCount:a,memberNotifyCount:r,mentions:l}),void this.showNotifyAllModal();const u=this.getStatusFromSlashCommand();if(s&&this.isStatusSlashCommand(u)){const e={ModalId:Ae.RESET_STATUS,dialogType:y("div",{children:"ResetStatusModal"}),dialogProps:{newStatus:u}};return this.props.actions.openModal(e),void this.setState({message:""})}if("/header"===Xg(this.state.message)){const e={modalId:Ae.EDIT_CHANNEL_HEADER,dialogType:y("div",{children:"EditChannelHeaderModal"}),dialogProps:{channel:t}};return this.props.actions.openModal(e),void this.setState({message:""})}const d=t.type===V.DM_CHANNEL||t.type===V.GM_CHANNEL;if(!d&&"/purpose"===Xg(this.state.message)){const e={modalId:Ae.EDIT_CHANNEL_PURPOSE,dialogType:y("div",{children:"EditChannelPurposeModal"}),dialogProps:{channel:t}};return this.props.actions.openModal(e),void this.setState({message:""})}if(!d&&"/rename"===Xg(this.state.message))return Ko(t),void this.setState({message:""});await this.doSubmit(e)})),u(this,"sendMessage",(async e=>{const{actions:t,currentChannel:s,currentUserId:n,draft:i,useChannelMentions:o}=this.props;let r=e;r.channel_id=s.id;const a=Ss(),l=n;r.pending_post_id=`${l}:${a}`,r.user_id=l,r.create_at=a,r.parent_id=this.state.parentId,r.metadata={},r.props={disable_group_highlight:!0},!o&&ys(r.message,{checkAllMentions:!0})&&(r.props.mentionHighlightDisabled=!0);const c=await t.runMessageWillBePostedHooks(r);return c.error?(this.setState({serverError:c.error,submitting:!1}),c):(r=c.data,t.onSubmitPost(r,i.fileInfos),t.scrollPostListToBottom(),this.setState({submitting:!1}),{data:!0})})),u(this,"focusTextbox",((e=!1)=>{const t=this.props.readOnlyChannel||!this.props.canPost;this.textboxRef.current&&t?this.textboxRef.current.blur():!this.textboxRef.current||!e&&se()||this.textboxRef.current.focus()})),u(this,"postMsgKeyPress",(e=>{const{ctrlSend:t,codeBlockOnCtrlEnter:s}=this.props,{allowSending:n,withClosedCodeBlock:i,ignoreKeyPress:o,message:r}=Pe(e,this.state.message,t,s,Date.now(),this.lastChannelSwitchAt,this.state.caretPosition);if(o)return e.preventDefault(),void e.stopPropagation();n&&(e.persist&&e.persist(),this.textboxRef.current&&this.textboxRef.current.blur(),i&&r?this.setState({message:r},(()=>this.handleSubmit(e))):this.handleSubmit(e),this.setShowPreview(!1)),this.emitTypingEvent()})),u(this,"emitTypingEvent",(()=>{const e=this.props.currentChannel.id;Yo(e,"")})),u(this,"handleChange",(e=>{const t=e.target.value,s=this.props.currentChannel.id;let n=this.state.serverError;hs(n)&&(n=null),this.setState({message:t,serverError:n});const i=l(a({},this.props.draft),{message:t});cancelAnimationFrame(this.saveDraftFrame),this.saveDraftFrame=requestAnimationFrame((()=>{this.props.actions.setDraft(fs.DRAFT+s,i)})),this.draftsForChannel[s]=i})),u(this,"pasteHandler",(e=>{if(!e.clipboardData||!e.clipboardData.items||"post_textbox"!==e.target.id)return;const{clipboardData:t}=e,s=tl(t);if(!s)return;e.preventDefault();let n=this.state.message;const i=n.length;n=nl(s,n.trim(),this.state.caretPosition);const o=n.length-(i-this.state.caretPosition);this.setMessageAndCaretPostion(n,o)})),u(this,"handleFileUploadChange",(()=>{this.focusTextbox()})),u(this,"handleUploadStart",((e,t)=>{const s=[...this.props.draft.uploadsInProgress,...e],n=l(a({},this.props.draft),{uploadsInProgress:s});this.props.actions.setDraft(fs.DRAFT+t,n),this.draftsForChannel[t]=n,this.focusTextbox()})),u(this,"handleUploadProgress",(({clientId:e,name:t,percent:s,type:n})=>{const i=l(a({},this.state.uploadsProgressPercent),{[e]:{percent:s,name:t,type:n}});this.setState({uploadsProgressPercent:i})})),u(this,"handleFileUploadComplete",((e,t,s)=>{const n=a({},this.draftsForChannel[s]);for(let i=0;i<t.length;i++)if(n.uploadsInProgress){const e=n.uploadsInProgress.indexOf(t[i]);-1!==e&&(n.uploadsInProgress=n.uploadsInProgress.filter(((t,s)=>e!==s)))}n.fileInfos&&(n.fileInfos=ma(n.fileInfos.concat(e),this.props.locale)),this.draftsForChannel[s]=n,this.props.actions.setDraft(fs.DRAFT+s,n)})),u(this,"handleUploadError",((e,t,s)=>{const n=a({},this.draftsForChannel[s]);let i=e;if("string"==typeof e&&(i=new Error(e)),-1!==t&&n.uploadsInProgress){const e=n.uploadsInProgress.indexOf(t);if(-1!==e){const t=n.uploadsInProgress.filter(((t,s)=>e!==s)),i=l(a({},n),{uploadsInProgress:t});this.props.actions.setDraft(fs.DRAFT+s,i),this.draftsForChannel[s]=i}}this.setState({serverError:i})})),u(this,"removePreview",(e=>{let t={};const s=a({},this.props.draft),n=this.props.currentChannel.id;this.setState({serverError:null});let i=s.fileInfos.findIndex((t=>t.id===e));if(-1===i){if(i=s.uploadsInProgress.indexOf(e),-1!==i){const n=s.uploadsInProgress.filter(((e,t)=>i!==t));t=l(a({},s),{uploadsInProgress:n}),this.fileUploadRef.current&&this.fileUploadRef.current&&this.fileUploadRef.current.cancelUpload(e)}}else{const e=s.fileInfos.filter(((e,t)=>i!==t));t=l(a({},s),{fileInfos:e})}this.props.actions.setDraft(fs.DRAFT+n,t),this.draftsForChannel[n]=t,this.handleFileUploadChange()})),u(this,"focusTextboxIfNecessary",(e=>{this.props.rhsExpanded||document.getElementsByClassName("channel-switch-modal").length||bs(e,document.activeElement)&&this.focusTextbox()})),u(this,"documentKeyHandler",(e=>{const t=e.ctrlKey||e.metaKey,s=t&&fe(e,Yg.FORWARD_SLASH),n=t&&e.shiftKey&&fe(e,Yg.BACK_SLASH);if(s)return e.preventDefault(),void Xo();n?this.reactToLastMessage(e):this.focusTextboxIfNecessary(e)})),u(this,"getFileCount",(()=>{const e=this.props.draft;return e.fileInfos.length+e.uploadsInProgress.length})),u(this,"getFileUploadTarget",(()=>this.textboxRef.current?this.textboxRef.current:null)),u(this,"getCreatePostControls",(()=>this.createPostControlsRef.current)),u(this,"handleMouseUpKeyUp",(e=>{const t=Te(e.target);this.setState({caretPosition:t})})),u(this,"handleSelect",(e=>{xe(this.textboxRef.current.getInputBox(),e)})),u(this,"handleKeyDown",(e=>{const t=e.ctrlKey||e.metaKey,s=0===this.state.message.length,n=0===this.props.draft.message.length,i=(this.props.ctrlSend||this.props.codeBlockOnCtrlEnter)&&fe(e,Yg.ENTER)&&t,o=!t&&!e.altKey&&!e.shiftKey&&fe(e,Yg.UP),r=!t&&!e.altKey&&e.shiftKey&&fe(e,Yg.UP),a=Ie(e)&&!e.altKey&&!e.shiftKey,l=fe(e,Yg.B)||fe(e,Yg.I),c=Ie(e,!0)&&e.altKey,u=fe(e,Yg.K);Me(e)?this.setState({message:ke(e)}):i?this.postMsgKeyPress(e):o&&s?this.editLastPost(e):r&&s?this.replyToLastPost(e):a&&n&&fe(e,Yg.UP)?this.loadPrevMessage(e):a&&n&&fe(e,Yg.DOWN)?this.loadNextMessage(e):(a&&l||c&&u)&&this.applyHotkeyMarkdown(e)})),u(this,"editLastPost",(e=>{e.preventDefault();const t=this.props.currentUsersLatestPost;if(!t)return;let s;s=t.root_id&&t.root_id.length>0?De("create_post.comment",ae.MESSAGE_TYPES.COMMENT):De("create_post.post",ae.MESSAGE_TYPES.POST),this.textboxRef.current&&this.textboxRef.current.blur(),this.props.actions.setEditingPost(t.id,this.props.commentCountForPost,"post_textbox",s)})),u(this,"replyToLastPost",(e=>{e.preventDefault();const t=this.props.latestReplyablePostId,s=document.getElementById("reply_textbox");s&&s.focus(),t&&this.props.actions.selectPostFromRightHandSideSearchByPostId(t)})),u(this,"loadPrevMessage",(e=>{e.preventDefault(),this.props.actions.moveHistoryIndexBack(ae.MESSAGE_TYPES.POST).then((()=>this.fillMessageFromHistory()))})),u(this,"loadNextMessage",(e=>{e.preventDefault(),this.props.actions.moveHistoryIndexForward(ae.MESSAGE_TYPES.POST).then((()=>this.fillMessageFromHistory()))})),u(this,"applyHotkeyMarkdown",(e=>{const t=Oe(e);this.setState({message:t.message},(()=>{const e=this.textboxRef.current.getInputBox();Re(e,t.selectionStart,t.selectionEnd)}))})),u(this,"reactToLastMessage",(e=>{e.preventDefault();const{rhsExpanded:t,actions:{emitShortcutReactToLastPostFrom:s}}=this.props,n=0===document.getElementsByClassName(Es.MODAL).length,i=0===document.getElementsByClassName(Es.POPUP).length;!t&&n&&i&&s(Cs.CENTER)})),u(this,"handleBlur",(()=>{this.lastBlurAt=Date.now(),this.setState({textboxActive:!1})})),u(this,"handleFocus",(()=>{this.setState({textboxActive:!0})})),u(this,"showPostDeletedModal",(()=>{this.setState({showPostDeletedModal:!0})})),u(this,"hidePostDeletedModal",(()=>{this.setState({showPostDeletedModal:!1})})),u(this,"handleEmojiClose",(()=>{this.setState({showEmojiPicker:!1})})),u(this,"setMessageAndCaretPostion",((e,t)=>{const s=this.textboxRef.current.getInputBox();this.setState({message:e,caretPosition:t},(()=>{he(s,t)}))})),u(this,"handleEmojiClick",(e=>{const t=e.name||e.aliases[0];if(t){if(""===this.state.message)this.setState({message:":"+t+": "});else{const{message:e}=this.state,{firstPiece:s,lastPiece:n}=ee(this.state.caretPosition,e),i=""===s?`:${t}: ${n}`:`${s} :${t}: ${n}`,o=""===s?`:${t}: `.length:`${s} :${t}: `.length;this.setMessageAndCaretPostion(i,o)}this.handleEmojiClose()}})),u(this,"handleGifClick",(e=>{if(""===this.state.message)this.setState({message:e});else{const t=/\s+$/.test(this.state.message)?this.state.message+e:this.state.message+" "+e;this.setState({message:t})}this.handleEmojiClose()})),u(this,"handleHeightChange",((e,t)=>{this.setState({renderScrollbar:e>t}),window.requestAnimationFrame((()=>{this.textboxRef.current&&this.setState({scrollbarWidth:Ne(this.textboxRef.current.getInputBox())})}))})),this.state={message:this.props.draft.message,caretPosition:this.props.draft.message.length,submitting:!1,showPostDeletedModal:!1,showEmojiPicker:!1,showConfirmModal:!1,channelTimezoneCount:0,uploadsProgressPercent:{},renderScrollbar:!1,scrollbarWidth:0,currentChannel:e.currentChannel,mentions:[],memberNotifyCount:0,textboxActive:!1,postError:null,serverError:null,errorClass:null,parentId:null,xsend:!1},this.lastBlurAt=0,this.lastChannelSwitchAt=0,this.draftsForChannel={},this.lastOrientation=null,this.saveDraftFrame=()=>{},this.topDiv=v.createRef(),this.textboxRef=v.createRef(),this.fileUploadRef=v.createRef(),this.createPostControlsRef=v.createRef()}static getDerivedStateFromProps(e,t){let s={currentChannel:e.currentChannel};return e.currentChannel.id!==t.currentChannel.id&&(s=l(a({},s),{message:e.draft.message,submitting:!1,serverError:null})),s}componentDidMount(){const{actions:e}=this.props;this.onOrientationChange(),e.setShowPreview(!1),e.clearDraftUploads(fs.DRAFT,((e,t)=>t?l(a({},t),{uploadsInProgress:[]}):t)),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.documentKeyHandler),this.setOrientationListeners()}componentDidUpdate(e,t){const{currentChannel:s,actions:n}=this.props;e.currentChannel.id!==s.id&&(this.lastChannelSwitchAt=Date.now(),this.focusTextbox()),s.id!==e.currentChannel.id&&n.setShowPreview(!1),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox()}componentWillUnmount(){if(document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.documentKeyHandler),this.removeOrientationListeners(),this.saveDraftFrame){const e=this.props.currentChannel.id;this.props.actions.setDraft(fs.DRAFT+e,this.draftsForChannel[e]),cancelAnimationFrame(this.saveDraftFrame)}}sendReaction(e){const t=this.props.currentChannel.id,s=e[1],n=e[2],i=this.props.latestReplyablePostId;i&&"+"===s?this.props.actions.addReaction(i,n):i&&"-"===s&&this.props.actions.removeReaction(i,n),this.props.actions.setDraft(fs.DRAFT+t,null),this.draftsForChannel[t]=null}fillMessageFromHistory(){const e=this.props.messageInHistoryItem;e&&this.setState({message:e})}createTutorialTip(){}shouldEnableSendButton(){return 0!==this.state.message.trim().length||0!==this.props.draft.fileInfos.length}render(){const{currentChannel:e,draft:t,fullWidthTextBox:s,customReadOnlyText:n,canPost:i,channelBlocked:o,userGuest:r}=this.props,a=this.props.readOnlyChannel||!i,{formatMessage:l}=this.props.intl,{renderScrollbar:c,channelTimezoneCount:u,mentions:d,memberNotifyCount:h,xsend:f}=this.state,m=De("accessibility.sections.centerFooter","message input complimentary region");d.includes("@all")||d.includes("@group")||d.length>0&&(1===d.length?d[0]:(d.slice(0,-1).join(", "),d[d.length-1]));let g=null;this.state.serverError&&(g=y(Gg,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));let v,b=null;if(this.state.postError){const e="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");b=y("label",{className:A(Kg.errorLabel,e),children:this.state.postError})}!a&&(t.fileInfos.length>0||t.uploadsInProgress.length>0)&&(v=y(Ih,{fileInfos:t.fileInfos,onRemove:this.removePreview,uploadsInProgress:t.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent}));let C="post-create-footer";b&&(C+=" has-error");let S="";s||(S="center");let _="send-button theme";this.shouldEnableSendButton()||(_+=" disabled");let w="";this.props.canUploadFiles||(w=" post-create--attachment-disabled");let P=y("div",{className:"u3-w-3 u3-h-3"});a||this.props.shouldShowPreview||(P=y(zg,{ref:this.fileUploadRef,fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,postType:"post",channelId:e.id}));l({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();let T;!this.props.enableEmojiPicker||a||this.props.shouldShowPreview||(p.exports.Fragment,this.state.showEmojiPicker,this.getCreatePostControls,this.hideEmojiPicker,this.handleEmojiClose,this.handleEmojiClick,this.handleGifClick,this.props.enableGifPicker,this.toggleEmojiPicker,A(Kg.emojiBtn,"emoji-picker__container","post-action",{"post-action--active":this.state.showEmojiPicker,[Kg.emojiBtnActive]:this.state.showEmojiPicker})),a?(T=De("create_post.read_only","This channel is read-only. Only members with permission can post here."),n&&r&&(T=y("p",{className:Kg.customReadOnlyText,children:y(Kr,{id:"create_post.read_only_custom",defaultMessage:n,disableLinks:!1})})),o&&(T=y("p",{className:Kg.customReadOnlyText,children:y(Kr,{id:"create_post.channel_blocked",defaultMessage:"Không có quyền để chat. Liên hệ Admin để được hỗ trợ.",disableLinks:!1})}))):T=l({id:"create_post.write",defaultMessage:"Write to {channelDisplayName}"},{channelDisplayName:e.display_name});let x="";return c&&(x=" scroll"),E("form",{id:"create_post",ref:this.topDiv,className:A(Kg.postCreateForm,S),onSubmit:this.handleSubmit,children:[y("div",{className:A(Kg.postCreateMain,"post-create"+w+x,{"textbox-active":this.state.textboxActive}),style:this.state.renderScrollbar&&this.state.scrollbarWidth?{"--detected-scrollbar-width":`${this.state.scrollbarWidth}px`}:void 0,children:E("div",{role:"application","aria-label":m,tabIndex:-1,className:A(Kg.postCreateTextbox,"post-body__cell a11y__region"),"data-a11y-sort-order":"2",children:[P,y(Al,{rootId:this.props.currentUsersLatestPost?this.props.currentUsersLatestPost.root_id:"",onChange:this.handleChange,onKeyPress:this.postMsgKeyPress,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onMouseUp:this.handleMouseUpKeyUp,onKeyUp:this.handleMouseUpKeyUp,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:a?"":this.state.message,onBlur:this.handleBlur,onFocus:this.handleFocus,emojiEnabled:this.props.enableEmojiPicker,createMessage:T,channelId:e.id,id:"post_textbox",ref:this.textboxRef,disabled:a,characterLimit:this.props.maxPostSize,preview:this.props.shouldShowPreview,badConnection:this.props.badConnection,listenForMentionKeyClick:!0,useChannelMentions:this.props.useChannelMentions}),y("span",{ref:this.createPostControlsRef,className:A(Kg.postCreateActions,"post-body__actions"),children:y("a",{role:"button",tabIndex:0,"aria-label":l({id:"create_post.send_message",defaultMessage:"Send a message"}),className:A(Kg.sendButtonClass,_,{[Kg.sendButtonDisabled]:a,[Kg.sendButtonActive]:f}),onClick:this.handleSubmit,children:y(Wg,{className:"u3-transform u3-rotate-90",title:{id:ds("create_post.icon"),defaultMessage:"Create a post"},component:y(rh,{className:"u3-w-6 u3-h-6"})})})})]})}),E("div",{id:"postCreateFooter",role:"form",className:C,children:[y("div",{className:"d-flex justify-content-between"}),E("div",{className:Kg.createPostComplex,children:[b,v,g]})]})]})}}u($g,"defaultProps",{latestReplyablePostId:""});var Qg=d($g);function Jg(e,t){return s=>{s(Zs(e,t))}}var Zg=f((function(){const e=vt(),t=_s(),s=ws(ae.MESSAGE_TYPES.POST);return(n,i)=>{const o=q(n),r=e(n,{id:i.channelId})||{},a=As(n,fs.DRAFT,r.id),l=Ps(n,r.id),c=Ts(n,l),u=xs(n),d=Is(n,r.id)?Is(n,r.id).member_count:1,p="true"===o.EnableTutorial,h=Ms(n,Os.TUTORIAL_STEP,we(n),ks.FINISHED),f="true"===o.EnableEmojiPicker,m="true"===o.EnableGifPicker,g="true"===o.EnableConfirmNotificationsToChannel,v=we(n),y=bt(n),b=Rs(n,v)===Ns.OUT_OF_OFFICE,E=$o(n)>1,C="true"===o.ExperimentalTimezone,S=Ds(n),_=ie(n,{channel:r.id,team:r.team_id,permission:oe.CREATE_POST}),w=ie(n,{channel:r.id,team:r.team_id,permission:oe.USE_CHANNEL_MENTIONS}),A=Ls(n,Os.CATEGORY_CHANNEL_BLOCK,r.id,!1),P=Fs(y),T=Hs(n,r.id);return{currentTeamId:Se(n),currentChannel:r,currentChannelMembersCount:d,currentUserId:v,codeBlockOnCtrlEnter:He(n,Ue.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:He(n,Os.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),fullWidthTextBox:Ls(n,Os.CATEGORY_DISPLAY_SETTINGS,Os.CHANNEL_DISPLAY_MODE,Os.CHANNEL_DISPLAY_MODE_DEFAULT)===Os.CHANNEL_DISPLAY_MODE_FULL_SCREEN,showTutorialTip:p&&h===ks.POST_POPOVER,messageInHistoryItem:s(n),draft:a,commentCountForPost:t(n,{post:c}),latestReplyablePostId:u,locale:ps(n),currentUsersLatestPost:Us(n,c.id),readOnlyChannel:i.readOnlyChannel||!Bs(n)&&"true"===o.ExperimentalTownSquareIsReadOnly&&r.name===V.DEFAULT_CHANNEL,canUploadFiles:fa(o),enableEmojiPicker:f,enableGifPicker:m,enableConfirmNotificationsToChannel:g,maxPostSize:parseInt(o.MaxPostSize||"0",10)||V.DEFAULT_CHARACTER_LIMIT,userIsOutOfOffice:b,rhsExpanded:js(n),emojiMap:Xt(n),badConnection:E,isTimezoneEnabled:C,shortcutReactToLastPostEmittedFrom:S,canPost:_,useChannelMentions:w,channelBlocked:A,shouldShowPreview:Ja(n),channelMemberCountsByGroup:T,userGuest:P,customReadOnlyText:o.CustomReadOnlyText}}}),(function(e){return{actions:g({addMessageIntoHistory:Be,onSubmitPost:Jg,moveHistoryIndexBack:Vs,moveHistoryIndexForward:qs,addReaction:zs,removeReaction:Ws,setDraft:Gs,clearDraftUploads:Ks,selectPostFromRightHandSideSearchByPostId:Ys,setEditingPost:Xs,emitShortcutReactToLastPostFrom:$s,openModal:Ve,getChannelTimezones:Qs,runMessageWillBePostedHooks:nh,runSlashCommandWillBePostedHooks:ih,scrollPostListToBottom:Qo,setShowPreview:$a,getChannelMemberCountsByGroup:Js},e)}}))(Qg);var ev={fileOverlay:"mqik-2f227fd2",overlayIndent:"mqik-2988dc4b",rightFileOverlay:"mqik-726b55ee",overlayFiles:"mqik-340def93",overlayCircle:"mqik-9ac0afaf",overlayLogo:"mqik-83477c83",fa:"mqik-ec2ba334"};const tv=e=>y("div",{className:A(ev.fileOverlay,"u3-hidden",{[ev.rightFileOverlay]:"right"===e.overlayType,[ev.centerFileOverlay]:"center"===e.overlayType}),children:y("div",{className:ev.overlayIndent,children:E("div",{className:ev.overlayCircle,children:[y("img",{className:ev.overlayFiles,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAABrCAMAAAAW2X0YAAAC9FBMVEUAAAAAAAAAAAD////Ozs4AAAABAQHPz8/GxsYAAADMzMwAAADv7+/6+vri4uIAAAAAAAD7+/v////+/v78/Pz29vbNzc0AAAAAAAAAAAD9/f3+/v7+/v77+/v29vafn58AAAAAAABCQkL+/v7+/v7r6+vz8/MAAADJycn6+vr8/Pz9/f38/Pz39/f6+vr8/Pz8/Pzo6OjKysq4uLjd3d3////+/v739/f39/f19fXMzMzLy8umpqb////29vb39/f7+/vR0dHMzMzGxsYAAADd3d3JycmmpqYAAAD39/ft7e3Gxsa9vb2tra34+Pi2trbU1NTi4uLw8PD7+/v29vb29vbm5ub19fX7+/vY2Njx8fHW1tbCwsLm5ubt7e3z8/N9fX35+fnp6enPz8/m5ubg4ODa2trU1NTW1tbk5OSysrLq6urPz8/BwcFjY2P9/f3Kysr19fW/v7/k5OSZmZnMzMwAAAC9vb3Hx8dAQECioqK7u7uvr6/w8PCxsbHc3Ny4uLikpKQLCwuoqKjHx8fOzs7u7u7w8PCsrKzT09OPj4+Tk5OXl5eZmZmenp61tbUAAADR0dG1tbX8/Pze3t6zs7OxsbGbm5ugoKC9vb0AAACBgYHq6uqnp6elpaXExMSrq6sAAAD4+PjZ2dmcnJzk5OTv7++kpKStra3n5+e4uLi/v7+JiYmhoaHIyMjAwMDJycm7u7v19fXg4OC3t7cdHR3S0tLw8PCRkZHb29vZ2dmtra2Tk5Pm5ube3t7CwsLr6+vU1NTf39/4+Pj19fXa2trw8PDr6+vz8/O3t7fS0tLKysrGxsbExMS4uLidnZ1zc3MmJiYAAAAAAAAAAAAAAAACAgK5ubmtra2GhoY/Pz8AAAAAAAAAAAC/v7+cnJxfX18FBQUAAAAAAAAAAAAAAADW1ta5ubmEhIQ1NTUAAAAAAAAAAADl5eWkpKTz8/Pg4OBtbW3f39/Z2dmVlZUICAhFRUUjIyPb29tpaWmMjIxycnKq81rdAAAA/HRSTlMAAQL/gAMF/4MI/wQVPxEHDE2zj2Q0CgkQBn2th1cnBAsSDKuoGyAUnLS0oHBBRnOms48k2rGWOWyzs3AXsCksWrOpWA2ztEUWQ7O1uIyzubOzs7T/tXYlVrO1sz+zt7YOnrizuLOzt7y5LbRJRR6zoZRgaP+vDz57Gf//M4n/XE4wFLO0ZH3///+3tbSzs7MKT////7Wzs7OzDiT//7mzsxOa////tbOzcLP/ublEs/+0jmM4FrmEuLtXuSpqXrV6UrqWsrWPgJI8vb/AwLCQbUk9NTEvLbGWdFI4KiebeFU7JCIgHp96VjUcGhilWqyIOYVrPSAoI24uOTKpTH4gAAALmklEQVR4AdTUg34sMRzF8T3pnSnWqW3bbWrbtq1r883vpEydzczq9wbfT/4nNpMBxPcA2EIjgESo9IaECAGargSIjNJIKAhA9Gg1QEyUnRA4nK7gXhPsbo8iICZK14iX0ti4+ITgIYiemKQIMATJySmUl5qWnpEJICiArGxFABfk5NKb8lK8+QgUAgApiAdgI8meQkUAr6i4hAqVlpX7fxIwclRUVtHqmlpAMwHg1YkCXn2DXycBIKGxqYHymhlradXcZgCiQKgtLb3dD5MAkNnRGdtGb+pirLsnp1cZ8LzA+knAqMCbkkvF+hhj/UUDg+qA5wWWTgKAa6iylD5smANGRscUARICCybBjz4+roE+1fgVYEIRICG4mUSn2iT40bd3prXR55o0D5AR8HJTvAXwBQGjfG9KHn2pKbMAeQGvtHKIT0Ly6J1lpfS1pq0AyAt4DXGNCS8bAJtx9LFUphkTgNkHzc1QydrmCfD80S8spqVS2ZZEgLmW5Z6At7L6lIAfV36FePQSrVkHWN+QfYJiVrRJ8PjoG5u2qK8tWwfY3iimcg0z1mO/LwAyYuupSjuWAXalb2iPse5WOwQBQPKpWvv9OweHlgCO1uckAV2MsRadiABiT96iSo2Pz60fBRYwznjH4hNA06ObqFolAQecMF6NromA5KzTsAH0scvO7AQi4DxcABc77LK3m9o9QPa7MAE0s+ve6wQCIOmDlYCPr6UOWGPXfbr7SkH0xM9fwgSwxG76KjyBPbr3W6qlgO8/nu+7CcAMu+vn3RNobk/2L0sBvyOe77cJwDS7SfxKQYwR/AkLwBQT+msnNwJjBP/CAnDxnzmzfFMbj6Lwuutdd5fMum9YrTAf2D4UWGXYKgt1z7rvOHDHh0AtTA06Rt3d+19thPs0c0NCPqQPvHXvCzm/nDmJhEM+YjodpXoI/nuzvgKzW9vmrAI3CIHENJ9Ou55juhN0eC7Q2fVbt1uBxal0Bnt648vAFcG3knH1KH1Hz7Eegr6f+j0XGJAkqfN6YnDISWBWarg5KyNiLh9tATesEudEb1HfArqG1m/wXKBLFdh4PXHbJieBzalYEwgJpYAqrYo/6E5CvZvRg5aZI1u8FthqzsLGbdJ2B4FUaocRYjGaL6JKqTm8qvZI8ZD2FlCb2Am18Y+GwX2IO7cPagOEfgF1SdKYg8D4hOkUCkwb7UF0EYmdTz+iHkTUJiahJgHEnlWgESvHWpwFiK9+26p+vUuSpG2DDgKzSMBg1RyfEYndsQjYMkkCRpv4BGrRi4hzQOUtVBl+y43AmCRtvX6jpLHVQWCRKsAIJpRWPRJlm0h88us9VwTUNrEHahBGlWZQEXtQQxGcLyH1Jd8uqXR3SRp/OQgstAhQJHK2kdjzDL0DRgj2Qg0KqFICDTG2W0bE7A4ngd8HBgc3SSY6bQUmHO7EgWm9PYhYBs7eh59+hNqEFoJ94EwMNWR6O8UyYqbkIPDVNmlgl2TmNvv7ABNgfDmnF/PA2feTegqZKvV+511OKKKOH4goZtKz7AVukzibbAUOmAQic8DKKEaB8fz+mbca9wFqEwfBCR8aKAAQL5UDABDLpA8dthMY/E2ysN1NmSvLCbCQQxEYBykC1CYePgL2UG4RWwGCiCjHAWA4nTpqJzAkWRlzI1BEq8Fb2AqcIw/3UQQqbeIYOFBGosU4TzEE8FY6dchOYECysm2wtkAEEWU/HzFRAc6x9XQFUQhGbAc6MVlGAmMAsGwUsScITcXUuNcfD4SwikEWE8BYMEIRuBKCb6AaYaWAZnZX/kqMQtNu7wVGUUNOgglBloPA+MYcAb1N9P1UdaDLIyNHL1QzNH1RXaBruz1dzgKrKGtmgzBmgbP8pz69yplDsBKsRNDCMuMMxTYS8HJWmYMVzKlV0AecleYIUJtY40ogrt1aSohJuoQ8E6DTumd0WmBqB3gLGGueueduErjSJo6DlSJyeo1DKSdAU85zgV4563uL9R6RSrCJdQ+bI+A00JWRIwsAsn6RhukY9U5AFMBCEkeB87PWI0jAcaBLooUwwLTWGABk06lhLwVsyGMIGI/9aj5EHQc6ES20UbugKnGVBYoYAcafagTMVxANdCeqtmhOiW45mfRJb8bd2Yvm2QsEsAicvytVmqCB7g+woqCFYOXAywx79HxgPJUZpoPHwjQsA+dfNQLs/2870IXRQrLy88MtngmkM4jFfFSsWqX9wHjzPx4Bh4FOkFFHziFRBg1/VPDqCc3RJctaUadVSQSBoHtzEBinpvQIc6U+DVbiiFhQEoLgo9t88So8YkoUsYKc9Zl30jlYAk7/T1SlCceBLuAXQadlFA0iHguc0U6hQEjfg5Ddi33YDJwN1CMI1wNduBU1QiTg2SXkz6rvMax6S9+DdCgSWQwD4+zITOoRhOuB7kv9OtpNAp6G2GgR+kRKFBR/lR6xk3qECfcD3blRRJ/HAhOH0hm6dkIB/SOoorl7MVaYegQ/SFd+AjWZk/A8xAvPKyUkiuWkCBChSMSB8Qn1CA4NdPV50D31ZS9QJBADwLhAVZpBA129BDQiMTqJKpEQMec4yRFsoKuLAPFWfFgmiZ4C5oHzB01yDBro6ihACOE2ikSVSa5Kj2ADXV0FiKDfiIQIjIvVegQf6BpAwIjE7rjzJEfwga5BBBh8kmPQQPdKYwssoB5hG4JTDS3AJzmCD3SNK8AnOYIPdI0q8B6f5KxtYuRsIwtcsusRfKBrVAE+yVWr1N83ssBlmyrNB7pGFXiOHu1x+EDnTkBo+eHw/4zbtQECMQAAwBVYgXm+psR1CmQorE337hq3PXDXK5Mm7rFsx33l+UEYxUmaZntpmsRRGPi5+4ZjW9v/X6+v67XPLeh2QPd3Bto9MLHsJ0ZRVlEUwTjNED5CWRrDfVBVFob9zJqAXvvfDMy+rCNeD+h+2h8MDcB2cmdFKOMQwnhf+ggLqZTSSkmJ0b4W4n0EZ5SsJve2YNBq/PsBYrEr3gog4waj8EQTIkiAy6+Q2DgxKAww0NCAwVxRc7UqFFSLAKXQATgAN5ABAzAUtllhLQAUANKkbXNpu+7u2raFvT95N+bt/E8t9oGqC9/3v+97iS8St6Y4iBZ0aqzDCLorq2sTHJ+cnh0ewrnDwQP3YlBG7QpROSiyoxRGAbOAH5yeHK/9xupKlz2A54kiAqSgU+B10Fle6kqcz1ycScOkwDyX1KO27/bD0AGEYd/121E0GBQwjjSVpjq7mDnvVlha7gTqT2hoJUdBCzoV1iEGQdC5/LF5lR4dZZK5PPXEBepOr2Xatqhg22av54AMN6mmUeQ52Cq92vx52ekEAe/8sZIjS1RV0CkkzH4fjsZZVsChl/LQ45q5EIal67qGgD8tA4SYLdARu76UATogIaOdrVdwEDy8+Hslxy7oCD583L7OkXsiuXstUwjL0jX66aP8j6ZblhBmy5uoKOUwbhZuN1SfIU2v5JgFHcXct/m7bELej/uSvC0MSp6KMIQtRfRjP8FR5Nfbi4wveb64ygjgI7WioHu6u3MP5Os1I7Pq9ZC8RslTERqK6HmYbhCRF9nD/L5i/b1RPEewCrqXB8OFG5nWQVR7HsibwkDfPGEB3YQi4smKKvIxRII8yJBXewT8gu7tItv0FOpISBEkEuTVHgGzoJvbl6YH9mj6kJheAWUk3KTK9dRIfMVKTh0CUtDNbu2MxtWWR9+g6S216fkiMBL1JPIcI6Gu5JQF3catND3eXXHRM03/6EiUZRWJe4wEebWn8pDj7/5r0z8+EsODOhLvFM8RpKB7tj//QJcl0/QNRGIPX+3xPPT502hc5H8sS5vtmwYiUdztvWc5CBep58oLSzQ93zfNRSJqx57gCtAMM3T9RPGE0CBoJHw/dky4DTMvt4QJ1zls0zcvwnE8U1jsW70mB9i86fmRELYko3GJ1NKbNz0/EjqSYV+E+N/k1XR+AWSp9BXRFCxOAAAAAElFTkSuQmCC",alt:"Files",loading:"lazy"}),E("span",{children:[y(b,{id:"generic_icons.upload",defaultMessage:"Upload Icon",children:e=>y("i",{className:"fa fa-upload",title:e})}),y(b,{id:"upload_overlay.info",defaultMessage:"Drop a file to upload it."})]}),y("img",{className:ev.overlayLogo,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAAAkCAYAAAF3QH8aAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAA26ADAAQAAAABAAAAJAAAAAARfPeIAAANUUlEQVR4Ae1dC9BVVRWWV4JApGEmalJSRtNU0yCEQ0FqWkOlo6NmjUlSaSLjmE4+oowBG9FsMs0QwiTsYVTYOKJmxiQ0JdBjhEkZUEwJTCzEQOJ5+779r3VmnXX3vvf89+G9t+6aWXet9a3Hfpx7Xvuc+/8HHZSgUqm0CpxRIqxxcNZSqXQTdVY2cnisJfifj+GFMC3OYOjHiCS8jB+gmVoI+m7xz4A+FHyC+gpLJIVRSaFshIqrFP8LImfYeOqe+nhAbVuQWB+Q+poi2aChaU1phEVNI5eorriV1JUQd6fqvZJswCaoDfkEcdqgF3tE6e+CfcP4cvnESX17RPknCxGF2KBebLrRgi8Bdhj4ZfAIYAMgjwQH6tU2RvI0FrWkhapJ5lSLKeRHndyRxnZGdS0k9ki1KQWba7G20XUAkIt9p9SneMoGPp4x1k9dMZHPqV/kRdZPveFkGnytLw7fZvoVV51S6AKRK0X+E/IMH08b+DxwOBCKHVI0tikytFDlQxtmmHTsX0ZfYXSqT0rMHpGac6XGCX4W7KXUe0O9OrKjAR599ica2ImjyJCEryVw8lCZ6E1qYAwfrLNNSbI1YH7dY9bfcp2dM/QY9LPB+wymX6sHidkOa4zFUrrPTcU1FK/UQeuDvkjsfdoB539W7P6Q3A+3gNeBvwruCw7EXCoi74eanXC1bsNkaFEa80WtD/rNzqZ5PD+ko1Q5sCnGVt81dGp91VUq3nDJBkixwj2erPNXqw35eerMsVJ1xWFnBzfnuwv2bIvF2q8bYwNC2VUG7IEKUkpnLzQ61Tt0EE7ugW8IeC+DtINW13hgx6q/KZKNViPpzI2M045pZyT3CMiN1MX/YCxOc7zP4tX07KtQLbBoI726Yi7SKGI4Ec2oW7D58jD0JzvqsXM10qO+MuqM9pi3EdMPzOvTG7yva1eZAUxaQ8g2g4JPm6ILrc/qJiY7Rll/LTpqTpK6t9WS3+ic3l5Z1tv+vTwsxAiF31ig+F9MzKcxkacaO6jAwgqE4rBza2ewTwPzzDnCxHAP/Rq4v8FegH2y2pDhLhRyN/AD4M/QBzkXvIC6EuyDwfPU7iiJjueoaOeRdItNtHnAOUmeuHITCI6fiHOnCTqfTtgfFIx77etEv6Ins+dcI9gwkY9LXu6uAL7cHgd7qcT/MFLr44p1jJTBZKJox5FwYpYExebBnGV8XG4LxBgonxNTr3rU/JH4bWy2MqD14TxZEyDLzo3Avi3+bOnD5AaXtPNvibte/R0lpfNeVLzSQ/AVPsEOGr7p6pdJ+q7aKjUe9nrBtkmshlBO1jiVwP5qAtYprhK+heKPbTjeuVnKHa61RkdIOwrRs5UX2O+P+KOQHSwC/qBBiqtNqRilx2GHO0rI34G3in+LxOrh8C3AR1mf1gS2QPD1ilkJX7gHYozFO05H/3dwEPVSbOCoOdTisLknjrNYPTpq8VZmoK8BjOfJQR6nDZyLOyS9iImFdQaGQSwPQ6n94+jOGGnYcI9gmNs7pb8V+4mB8HFbLXsen5C92rcqFcfyf+HEpNe7p6FEfsPB5lVk9DBlJxUx88FrwW+weFevMgOYsEbQKm0GxSabgrsUj0kT19kXCLHBNROzE1ePbvto61jc6oh5l4kLT2itv1YdNcNhvtb8Rua14rzB2wC+AHMOmK8BrQT3mjCJ2SqHS37M2EWWzUx4RXUwvWi36uG5YpV2dppvu1WPSPUZQUtsoOo2XjGV1kcd+AD1qYzE3AnflywOm5f01yoGnasxD6lNCVvpB1D0Bn449EfBJ7nYxcBOtFhH6Oh0jop0GgkcbI5sXs7RYxzj/Hy7IEfqB3hYzoEVEeMLLtpQstUO45/icmkeBZ6juMZKjQBbrCN0HYzIW4p22uXlLiSMb5noYXVDaxv/3apHfO+BbyP9xqcrG3w+v5U+UD/w+KCZD81RqS5jX+Ix9bW91I6LzO0RlTrv8rKJZY7xTVBda8EOLxxB8pHKVOuHrnvPWqmTW0SGv4/EM5fEd0MDQX87+KMESYqrBLQrOEqlicREpzhXYzpGms5TnVS04y4vN0nGdzp0XTu8lbWN7yToY9UWH+NJp4LfHLRSKTwR0H4JFoRiVqrfYtSBnym+ZyD5AkkgH9cRtnZe5EtFOo3YwS4vtdG4J51rYk9Rne1AH+TsmWLfKnKP7w/wP4lvjfdJzeCu5EOAnlOXxuLaHpMJsKLqMycbrLodqGKQVxE3tqrZYxQFJO5CtSGfsjXFz/OXpX6RmOD3uOTzCbil7Ol4LL5tMTsC1VOdhd9OqoYHaXOM4ybisJ8wWGqvfD1ieKVHChdEkIcES14kgs5XNUk8f5E22nalreDwuPiycyyC9sdiOgILI8x/jNKOA+a6YCHSHEqT8LDYen6i6xGNhT6RgNCXXa59kMr3PMZI3F6J04sR/kglIy0GGX2wa/yfypI6TTGDqEu14zaFNhGHfajBsvMIsOyCAPoBiT3cxFI9RXCeR7mhPiD2ddBJq2kr9UDh88eKWal+i3WcroOoU+7wA0e9t1oM9nFgXmg0bEkOtY63bVAHxr3SvrmVC4EvUA7sNEMHUafk2mTbE8Y4Wcb5t7bvbKUOYhBH17nBlleq304+jJN7IWl6O/WrrfqCyeEXYjlnqUXEReKOeR2irTZetzOdMwP4kk9r0Q4WazZ62kVgX/BDJoEXqL8HT6x1ppF7AdjTJgBl1021ttHN685Abgbw5QoP//23rkV22Y0JO8sdoEJ/arpkQb1liZpn5yaoDQz0k4+I+XzkHW3QnW4Xap2BxBeuZXBqHOjQbxKd4oO43FpZqobiiP9eotbTGtMuEv3ku/ieujsdNlDDloHaZWO7fvBlnFngEbEfPFqMMRIbXuCBXi/tTBTg7wb4DC66CO1zEMfF76keF3sk/P0SvlbB97uG52Ce+Wul0eDhztc123kGsMGKUOH3ilJjRSO5H66mGq2Qrz9eTaXem8pVHImfTCUb/G0abyX8J4AfN3Gq8k9KTbCx1IHdowEic7+9BOb78hKwsldCgV0j+SmxDY4B0uZdLuh52NE/sgT8Shd7sR9D127wDLgJ9ybfu2rY0ZO1wOFdLt+Q2qnhwa8/UdRQyv3WgM6zbpTge5+Lpbk3gk22BeDvA74vEudzJ7m8UcjhjmApLL4A8ItS12kufO8GXwVeB07RH+H4OZgvasw3uXzQtg9sabb6VcI5DGx/cc/4X6m/K5s0A5zlClTzal+qu2hrYoX2ShXy9HUwm/4Fa4h+jq8BnI82/M5xO7BrJceKy2w+HHdYJ/RJ6of+sPGVvX0F33jjp7oSfKPDsvfigfPd/J+C9b0Nhr7MD0PZG1jaDysRd76JpcodMndpDPvPdBhabmt09SbNgJnwmHpUo5tFI0fGGlIs1R78N2iMkR+CzrOAp2wBAY5B4BddwH1sB9jHHE7zNu0D9DHOn+1QwC8zPu4c79Q8K4F/x8RZ9T8wjrOxMR0x37RJ0CvubKyBmMUu51taG/g85+OlZrgM1ZiubNIMuIn3ZnhVspFNo4HrfSPWTrWFmK/YONHPYzz0B5yP9z+DxbfW+bK/SAX8WOejGf4SoORe7PzjYPNgscHgu6C/ifExgo8/ieB9naUtMHJ/dCKWSwxxPANbKrKzDUTCdpsE/b3gzzqMl+EjU2138QbPgJv8mHlPo5pEcf/FKWsv1RYCv1gWLK8FAeeXa5vz81LJ32vxS/4a2wZs/6XcoH74YpeZgAPxsvQsjU1JxMTOnizwiVSOxRG3gMGGqu5szEf8aSaH6lZn0zzdttXVmzwDkQ2QgpbAkbv2L9I15BwCLrQSyYZTNeHyZxmGz9R46DzrVKJX4Cxb7AG2wiXxkjA8woH8iPNths37xOyyCzpXFX8JHqt9UQnsIrClp6wBfYrGpiRi7nY5hXY21kNe6hKWJWel2uziTZoBtyFT5gw4yp5jAeMN/YfBXOkbC54MvhTMm3x/6QSoOqWGicypkezbbTz8V0diCHEHGm1jqQPjSuMzYE/ZK1tw/NY4N0EPfw8M8mDwL4yPanamgD7b+RZIm3McXnHJHbGLXHzZ6qIfl9rI4/iedfk0H9CYrnwVZyCyIWIQV8Tmg3nftBC8BmxXzGA2hmJDR+VDwXsiLWy28fBz6TtG37dxqiNweiwY2HNgPbvxgGJ3uFgKFzsmmLp+aX+R+igR+2tXJFvAsHESG1uFPcPHpWz2y7W1G/awVHwXb+IMuA3RcrPSUNG5y8FPSif/AVn2V5GBnSl+K5LvTyKoP5hnzdVgLnbwUq/sfgoYL4fPA/8MPBfMS0Q+6C474+sY4BsJjp1RRwBfDybx8jZb/tdclfANAfPgprQdSnTlU3OsRKw/w15q/Z2sJye+XQeFjbEKfRvTJv1bjVeRev9vE9uk8+3WDWxbfh959tc/gHYA+lDM8Svt1tda+hMuPWpJbGHOOLS9ooXta9PLobAvXWrcDFyOUrqjseqa/5UdrXFT1IJKOAryN2O811gF3gFuNrENtsU2O/Eg1YKtVFuTmN/DwYWe69XWQmuy/gtNdruFDFJIxwAAAABJRU5ErkJggg==",width:"100",alt:"Logo",loading:"lazy"})]})})});var sv=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},nv=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),iv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ov=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},rv=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var s=[],n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done)&&(s.push(r.value),!t||s.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return s}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},av=void 0;av="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var lv=null,cv=null,uv=av.clearTimeout,dv=av.setTimeout,pv=av.cancelAnimationFrame||av.mozCancelAnimationFrame||av.webkitCancelAnimationFrame,hv=av.requestAnimationFrame||av.mozRequestAnimationFrame||av.webkitRequestAnimationFrame;function fv(e){var t=void 0,s=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=void 0,l="undefined"!=typeof document&&document.attachEvent;if(!l){r=function(e){var t=e.__resizeTriggers__,s=t.firstElementChild,n=t.lastElementChild,i=s.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=s.offsetWidth+1+"px",i.style.height=s.offsetHeight+1+"px",s.scrollLeft=s.scrollWidth,s.scrollTop=s.scrollHeight},o=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},a=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;r(this),this.__resizeRAF__&&lv(this.__resizeRAF__),this.__resizeRAF__=cv((function(){o(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(s){s.call(t,e)})))}))}};var c=!1,u="";n="animationstart";var d="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=document.createElement("fakeelement");if(void 0!==h.style.animationName&&(c=!0),!1===c)for(var f=0;f<d.length;f++)if(void 0!==h.style[d[f]+"AnimationName"]){u="-"+d[f].toLowerCase()+"-",n=p[f],c=!0;break}t="@"+u+"keyframes "+(s="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",i=u+"animation: 1ms "+s+"; "}return{addResizeListener:function(o,c){if(l)o.attachEvent("onresize",c);else{if(!o.__resizeTriggers__){var u=o.ownerDocument,d=av.getComputedStyle(o);d&&"static"===d.position&&(o.style.position="relative"),function(s){if(!s.getElementById("detectElementResize")){var n=(t||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=s.head||s.getElementsByTagName("head")[0],r=s.createElement("style");r.id="detectElementResize",r.type="text/css",null!=e&&r.setAttribute("nonce",e),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(s.createTextNode(n)),o.appendChild(r)}}(u),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=u.createElement("div")).className="resize-triggers";var p=u.createElement("div");p.className="expand-trigger",p.appendChild(u.createElement("div"));var h=u.createElement("div");h.className="contract-trigger",o.__resizeTriggers__.appendChild(p),o.__resizeTriggers__.appendChild(h),o.appendChild(o.__resizeTriggers__),r(o),o.addEventListener("scroll",a,!0),n&&(o.__resizeTriggers__.__animationListener__=function(e){e.animationName===s&&r(o)},o.__resizeTriggers__.addEventListener(n,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(c)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",a,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(v_){}}}}}null==pv||null==hv?(lv=uv,cv=function(e){return dv(e,20)}):(lv=function(e){var t=rv(e,2),s=t[0],n=t[1];pv(s),uv(n)},cv=function(e){var t=hv((function(){uv(s),e()})),s=dv((function(){pv(t),e()}),20);return[t,s]});var mv=function(e){function t(){var e,s,n;sv(this,t);for(var i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];return s=n=ov(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={height:n.props.defaultHeight||0,width:n.props.defaultWidth||0},n._onResize=function(){var e=n.props,t=e.disableHeight,s=e.disableWidth,i=e.onResize;if(n._parentNode){var o=n._parentNode.offsetHeight||0,r=n._parentNode.offsetWidth||0,a=window.getComputedStyle(n._parentNode)||{},l=parseInt(a.paddingLeft,10)||0,c=parseInt(a.paddingRight,10)||0,u=parseInt(a.paddingTop,10)||0,d=parseInt(a.paddingBottom,10)||0,p=o-u-d,h=r-l-c;(!t&&n.state.height!==p||!s&&n.state.width!==h)&&(n.setState({height:o-u-d,width:r-l-c}),i({height:o,width:r}))}},n._setRef=function(e){n._autoSizer=e},ov(n,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.exports.PureComponent),nv(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=fv(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,s=e.className,n=e.disableHeight,i=e.disableWidth,o=e.style,r=this.state,a=r.height,l=r.width,c={overflow:"visible"},u={},d=!1;return n||(0===a&&(d=!0),c.height=0,u.height=a),i||(0===l&&(d=!0),c.width=0,u.width=l),p.exports.createElement("div",{className:s,ref:this._setRef,style:iv({},c,o)},!d&&t(u))}}]),t}();mv.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};var gv=function(e,t){return e===t};function vv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gv,s=void 0,n=[],i=void 0,o=!1,r=function(e,s){return t(e,n[s])},a=function(){for(var t=arguments.length,a=Array(t),l=0;l<t;l++)a[l]=arguments[l];return o&&s===this&&a.length===n.length&&a.every(r)?i:(o=!0,s=this,n=a,i=e.apply(this,a))};return a}function yv(){var e=window.navigator.userAgent;return-1!==e.indexOf("Safari")&&-1===e.indexOf("Chrome")}var bv=yv(),Ev={display:"inline",width:"0px",height:"0px",zIndex:"-1",overflow:"hidden",margin:"0px",padding:"0px"},Cv={position:"absolute",flex:"0 0 auto",overflow:"hidden",visibility:"hidden",zIndex:"-1",width:"100%",height:"100%",left:"0px",top:"0px"},Sv={flex:"0 0 auto",overflow:"hidden",zIndex:"-1",visibility:"hidden",left:"-9px",bottom:"-8px",right:"-8px",top:"-9px"},_v={position:"absolute",flex:"0 0 auto",visibility:"hidden",overflow:"scroll",zIndex:"-1",width:"100%",height:"100%"},wv={position:"absolute",height:"200%",width:"200%"},Av=function(e){function t(){for(var t,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this)._node=null,t._resizeSensorExpand=v.createRef(),t._resizeSensorShrink=v.createRef(),t._positionScrollbarsRef=null,t._measureItemAnimFrame=null,t.positionScrollBars=function(e,s){void 0===e&&(e=t.props.size),void 0===s&&(s=t.props.width),t._positionScrollbarsRef&&window.cancelAnimationFrame(t._positionScrollbarsRef),t._positionScrollbarsRef=window.requestAnimationFrame((function(){t._resizeSensorExpand.current.scrollTop=e+27,t._resizeSensorShrink.current.scrollTop=2*e+17}))},t.scrollingDiv=function(e){e.target.offsetHeight!==t.props.size&&t._measureItem(e.target.offsetWidth!==t.props.width)},t.renderItems=function(){var e=t.props.item,s={position:"absolute",left:"0",top:"0",height:t.props.size+27+"px",width:"100%"};return E("div",{style:{position:"relative"},children:[e,y("div",{style:Ev,children:y("div",{dir:"ltr",style:Cv,children:E("div",{style:Sv,children:[y("div",{style:_v,ref:t._resizeSensorExpand,onScroll:t.scrollingDiv,children:y("div",{style:s})}),y("div",{style:_v,ref:t._resizeSensorShrink,onScroll:t.scrollingDiv,children:y("div",{style:wv})})]})})})]})},t._measureItem=function(e){var s=t.props,n=s.handleNewMeasurements,i=s.size,o=s.itemId,r=t._node;if(r&&r.ownerDocument&&r.ownerDocument.defaultView&&r instanceof r.ownerDocument.defaultView.HTMLElement){var a=Math.ceil(r.offsetHeight);i!==a&&n(o,a,e)}},t}N(t,e);var s=t.prototype;return s.componentDidMount=function(){var e=this;this._node=M.exports.findDOMNode(this),bv&&this.props.size?this._measureItemAnimFrame=window.requestAnimationFrame((function(){e._measureItem(!1)})):this._measureItem(!1),this.props.size&&this.positionScrollBars()},s.componentDidUpdate=function(e){(0===e.size&&0!==this.props.size||e.size!==this.props.size)&&this.positionScrollBars()},s.componentWillUnmount=function(){this._positionScrollbarsRef&&window.cancelAnimationFrame(this._positionScrollbarsRef),this._measureItemAnimFrame&&window.cancelAnimationFrame(this._measureItemAnimFrame);var e=this.props,t=e.onUnmount,s=e.itemId,n=e.index;t&&t(s,n)},s.render=function(){return this.renderItems()},t}(p.exports.Component),Pv=function(e,t,s){var n=s.itemOffsetMap,i=s.itemSizeMap,o=e.itemData;return i[o[t]]?{offset:n[o[t]]||0,size:i[o[t]]||0}:{offset:0,size:0}},Tv=function(e,t,s){return Pv(e,t,s).offset},xv=function(e,t,s){var n=s.totalMeasuredSize,i=e.itemData;return t<=n?function(e,t,s,n,i){for(var o=n;n<=s;)i-Pv(e,n,t).offset<=0&&(o=n),n++;return o}(e,s,i.length,0,t):0},Iv=function(e,t,s){return Pv(e,t,s).size},Mv=function(e){function t(t){var s;return(s=e.call(this,t)||this)._listMetaData={itemOffsetMap:{},itemSizeMap:{},totalMeasuredSize:0,atBottom:!0},s._itemStyleCache={},s._outerRef=void 0,s._scrollCorrectionInProgress=!1,s._scrollByCorrection=null,s._keepScrollPosition=!1,s._keepScrollToBottom=!1,s._mountingCorrections=0,s._correctedInstances=0,s.state={scrollDirection:"backward",scrollOffset:"number"==typeof s.props.initialScrollOffset?s.props.initialScrollOffset:0,scrollUpdateWasRequested:!1,scrollDelta:0,scrollHeight:0,localOlderPostsToRender:[]},s.scrollBy=function(e,t){return function(){var n=s._outerRef;"function"==typeof n.scrollBy&&t?n.scrollBy(0,t):e&&(n.scrollTop=e),s._scrollCorrectionInProgress=!1}},s._callOnItemsRendered=vv((function(e,t,n,i){return s.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:i})})),s._callOnScroll=vv((function(e,t,n,i,o){return s.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n,scrollHeight:i,clientHeight:o})})),s._commitHook=function(){if(!s.state.scrolledToInitIndex&&Object.keys(s._listMetaData.itemOffsetMap).length){var e=s.props.initScrollToIndex(),t=e.index,n=e.position,i=e.offset;s.scrollToItem(t,n,i),s.setState({scrolledToInitIndex:!0}),0===t?s._keepScrollToBottom=!0:s._keepScrollPosition=!0}},s._dataChange=function(){s._listMetaData.totalMeasuredSize<s.props.height&&s.props.canLoadMorePosts()},s._heightChange=function(e,t){t+e>=s._listMetaData.totalMeasuredSize-10&&s.scrollToItem(0,"end")},s._widthChange=function(e,t){t+e>=s._listMetaData.totalMeasuredSize-10&&s.scrollToItem(0,"end")},s._getItemStyle=function(e){var t,n=s.props.itemData,i=s._itemStyleCache;return i.hasOwnProperty(n[e])?t=i[n[e]]:i[n[e]]=t={left:0,top:Tv(s.props,e,s._listMetaData),height:Iv(s.props,e,s._listMetaData),width:"100%"},t},s._correctScroll=function(){var e=s.state.scrollOffset,t=s._outerRef;t&&(t.scrollTop=e,s._scrollCorrectionInProgress=!1,s._correctedInstances=0,s._mountingCorrections=0)},s._generateOffsetMeasurements=function(){var e=s._listMetaData,t=e.itemOffsetMap,n=e.itemSizeMap,i=s.props.itemData;s._listMetaData.totalMeasuredSize=0;for(var o=i.length-1;o>=0;o--){var r=t[i[o+1]]||0,a=n[i[o+1]]||0;t[i[o]]=r+a,s._listMetaData.totalMeasuredSize+=n[i[o]]||0,delete s._itemStyleCache[i[o]]}},s._handleNewMeasurements=function(e,t,n){var i=s._listMetaData.itemSizeMap,o=s.props.itemData.findIndex((function(t){return t===e})),r=i[e]||0;if(r!==t)if(i[e]=t,s.state.scrolledToInitIndex){var a=s._outerRef;if((s.props.height+a.scrollTop>=s._listMetaData.totalMeasuredSize-10||s._keepScrollToBottom)&&s.props.correctScrollToBottom)return s._generateOffsetMeasurements(),s.scrollToItem(0,"end"),void s.forceUpdate();if(n||s._keepScrollPosition){var l=t-r,c=s._getRangeToRender(s.state.scrollOffset)[2];if(s._generateOffsetMeasurements(),o<c+1)return;return s._scrollCorrectionInProgress=!0,void s.setState((function(e){var t;return t=0===s._mountingCorrections?l:e.scrollDelta+l,s._mountingCorrections++,{scrollOffset:e.scrollOffset+l,scrollDelta:t}}),(function(){s._correctedInstances++,s._mountingCorrections===s._correctedInstances&&s._correctScroll()}))}s._generateOffsetMeasurements()}else s._generateOffsetMeasurements()},s._onItemRowUnmount=function(e,t){var n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(s).props;if(n.itemData[t]!==e&&!n.itemData.includes(e)){delete s._listMetaData.itemSizeMap[e],delete s._listMetaData.itemOffsetMap[e];var i=s._outerRef,o=i.offsetHeight+i.scrollTop>=s._listMetaData.totalMeasuredSize-10;s._generateOffsetMeasurements(),o&&s.scrollToItem(0,"end"),s.forceUpdate()}},s._renderItems=function(){var e=s.props,t=e.children,n=e.direction,i=e.itemData,o=e.loaderId,r=s.innerRefWidth,a=s._getRangeToRender(),l=a[0],c=a[1],u=i.length,d=[];if(u>0)for(var h=u-1;h>=0;h--){var f=Pv(s.props,h,s._listMetaData).size,m=s.state.localOlderPostsToRender,g=m[0],v=m[1],y=h>=g&&h<v+1&&g===c+1,b=i[h]===o,E=i[h],C=s._getItemStyle(h);if(h>=l&&h<c+1||y||b){var S=p.exports.createElement(t,{data:i,itemId:E});d.push(p.exports.createElement(Av,{direction:n,handleNewMeasurements:s._handleNewMeasurements,index:h,item:S,key:E,size:f,itemId:E,width:r,onUnmount:s._onItemRowUnmount,itemCount:u}))}else d.push(p.exports.createElement("div",{key:E,style:C}))}return d},s._onScrollVertical=function(e){if(s.state.scrolledToInitIndex){var t=e.currentTarget,n=t.scrollTop,i=t.scrollHeight;s._scrollCorrectionInProgress?s.state.scrollUpdateWasRequested&&s.setState((function(){return{scrollUpdateWasRequested:!1}})):(i!==s.state.scrollHeight&&s.setState({scrollHeight:i}),s.setState((function(e){return e.scrollOffset===n?null:{scrollDirection:e.scrollOffset<n?"forward":"backward",scrollOffset:n,scrollUpdateWasRequested:!1,scrollHeight:i,scrollTop:n,scrollDelta:0}})))}},s._outerRefSetter=function(e){var t=s.props.outerRef;s.innerRefWidth=s.props.innerRef.current.clientWidth,s._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},s}N(t,e),t.getDerivedStateFromProps=function(e,t){return kv(e),null};var s=t.prototype;return s.scrollTo=function(e,t,s){var n=this;void 0===s&&(s=!1),this._scrollCorrectionInProgress=!0,this.setState((function(s){return{scrollDirection:s.scrollOffset>=e?"backward":"forward",scrollOffset:e,scrollUpdateWasRequested:!0,scrollByValue:t}}),(function(){s?n._scrollByCorrection=window.requestAnimationFrame(n.scrollBy(n.state.scrollOffset,n.state.scrollByValue)):n.scrollBy(n.state.scrollOffset,n.state.scrollByValue)()})),this.forceUpdate()},s.scrollToItem=function(e,t,s){void 0===t&&(t="auto"),void 0===s&&(s=0);var n=this.state.scrollOffset,i=this._outerRef;if(0!==e||"end"!==t){var o=function(e,t,s,n,i){var o=e.height,r=Pv(e,t,i),a=i.totalMeasuredSize,l=Math.max(0,r.offset+r.size-o),c=Math.max(0,r.offset);switch(s){case"start":return c;case"end":return l;case"center":return Math.round(c-o/2+r.size/2);case"auto":default:return n>=c&&n<=l?a-(n+o):n-c<l-n?c:l}}(this.props,e,t,n,this._listMetaData);if(!o)!Iv(this.props,e,this._listMetaData)&&this.props.scrollToFailed&&(this.state.scrolledToInitIndex?this.props.scrollToFailed(e):console.warn("Failed to do initial scroll correction",this.props.initRangeToRender,e));this.scrollTo(o+s)}else this.scrollTo(i.scrollHeight-this.props.height)},s.componentDidMount=function(){var e=this.props.initialScrollOffset;"number"==typeof e&&null!==this._outerRef&&(this._outerRef.scrollTop=e);this._commitHook()},s.getSnapshotBeforeUpdate=function(e,t){if(t.localOlderPostsToRender[0]!==this.state.localOlderPostsToRender[0]||t.localOlderPostsToRender[1]!==this.state.localOlderPostsToRender[1]){var s=this._outerRef;return{previousScrollTop:s.scrollTop,previousScrollHeight:s.scrollHeight}}return null},s.componentDidUpdate=function(e,t,s){if(this.state.scrolledToInitIndex){var n=this.state,i=n.scrollDirection,o=n.scrollOffset,r=n.scrollUpdateWasRequested,a=n.scrollHeight,l=t.scrollDirection,c=t.scrollOffset,u=t.scrollUpdateWasRequested,d=t.scrollHeight;i===l&&o===c&&r===u&&a===d||this._callPropsCallbacks(),t.scrolledToInitIndex||(this._keepScrollPosition=!1,this._keepScrollToBottom=!1)}if(this._commitHook(),e.itemData!==this.props.itemData&&this._dataChange(),e.height!==this.props.height&&this._heightChange(e.height,t.scrollOffset),t.scrolledToInitIndex!==this.state.scrolledToInitIndex&&this._dataChange(),e.width!==this.props.width&&(this.innerRefWidth=this.props.innerRef.current.clientWidth,this._widthChange(e.height,t.scrollOffset)),t.localOlderPostsToRender[0]!==this.state.localOlderPostsToRender[0]||t.localOlderPostsToRender[1]!==this.state.localOlderPostsToRender[1]){var p=this._outerRef.scrollHeight,h=s.previousScrollTop+(p-s.previousScrollHeight);this.scrollTo(h,h-s.previousScrollTop,!0)}},s.componentWillUnmount=function(){this._scrollByCorrection&&window.cancelAnimationFrame(this._scrollByCorrection)},s.render=function(){var e=this.props,t=e.className,s=e.innerRef,n=e.innerTagName,i=e.outerTagName,o=e.style,r=e.innerListStyle,a=this._onScrollVertical,l=this._renderItems();return p.exports.createElement(i,{className:t,onScroll:a,ref:this._outerRefSetter,style:D({WebkitOverflowScrolling:"touch",overflowY:"auto",overflowAnchor:"none",willChange:"transform",width:"100%"},o)},p.exports.createElement(n,{children:l,ref:s,style:r}))},s._callPropsCallbacks=function(){var e=this.props,t=e.itemData,s=e.height,n=this.state,i=n.scrollDirection,o=n.scrollOffset,r=n.scrollUpdateWasRequested,a=n.scrollHeight,l=t.length;if("function"==typeof this.props.onItemsRendered&&l>0){var c=this._getRangeToRender(),u=c[0],d=c[1],p=c[2],h=c[3];if(this._callOnItemsRendered(u,d,p,h),"backward"===i&&o<1e3&&d!==l-1)!Iv(this.props,d+1,this._listMetaData).size&&this.state.scrolledToInitIndex&&this.setState((function(e){return e.localOlderPostsToRender[0]!==d+1?{localOlderPostsToRender:[d+1,d+50]}:null}))}"function"==typeof this.props.onScroll&&this._callOnScroll(i,o,r,a,s)},s._getRangeToRender=function(e,t){var s=this.props,n=s.itemData,i=s.overscanCountForward,o=s.overscanCountBackward,r=this.state,a=r.scrollDirection,l=r.scrollOffset,c=n.length;if(0===c)return[0,0,0,0];for(var u=e>=0?e:l,d=xv(this.props,u,this._listMetaData),p=function(e,t,s,n){for(var i=e.itemData,o=t,r=s+e.height,a=Pv(e,o,n),l=a.offset+(a.size||0);o>0&&l<=r;){var c=Pv(e,o,n);l=c.offset+c.size,o--}return o>=i.length?0:o}(this.props,d,u,this._listMetaData),h="backward"===a?o:Math.max(1,i),f="forward"===a?o:Math.max(1,i),m=Math.max(0,p-h),g=Math.max(0,Math.min(c-1,d+f));!Iv(this.props,g,this._listMetaData)&&g>0&&this._listMetaData.totalMeasuredSize>this.props.height;)g--;return!this.state.scrolledToInitIndex&&this.props.initRangeToRender.length?this.props.initRangeToRender:[m,g,d,p]},t}(p.exports.PureComponent);Mv.defaultProps={innerTagName:"div",itemData:void 0,outerTagName:"div",overscanCountForward:30,overscanCountBackward:10};var kv=function(e){e.children,e.itemSize};var Ov="mqik-0320c9fa",Rv="mqik-f63140b7",Nv="mqik-11cd2054";const Dv=[Oa,Ra];class Lv extends v.PureComponent{render(){const{isMobile:e,createAt:t,isScrolling:s,isRhsPost:n,toastPresent:i}=this.props;if(!e||0===t)return null;const o=A("post-list__timestamp",Ov,{[Rv]:s,rhs:n,toastAdjustment:i});return y("div",{className:o,"data-testid":"floatingTimestamp",children:y("span",{className:Nv,children:y(ka,{value:t,useTime:!1,ranges:Dv})})})}}var Fv=f((function(e,t){let s=t.postId;if(en(s)){const e=tn(s);s=e[e.length-1]}const n=Ts(e,s),i=Jo(e);return{createAt:n?n.create_at:0,toastPresent:i}}))(Lv);class Hv extends v.PureComponent{constructor(){super(...arguments),u(this,"getProfilePictureURL",(()=>{const{post:e,user:t}=this.props;return t&&t.id===e.user_id?nt(t.id,t.last_picture_update):e.user_id?nt(e.user_id):""})),u(this,"getStatus",((e,t,s)=>e||t||s&&s.is_bot?"":this.props.status)),u(this,"getPostIconURL",((e,t,s)=>{const{enablePostIconOverride:n,hasImageProxy:i,post:o}=this.props,r=o.props;let a="",l="";return r&&(a=r.override_icon_url,l=r.use_user_icon),this.props.compactDisplay?"":!t&&s&&!l&&n?a&&""!==a?sn(a,i):V.DEFAULT_WEBHOOK_LOGO:e}))}render(){const{compactDisplay:e,isBusy:t,isRHS:s,post:n,user:i,isBot:o}=this.props,r=nn(n),a=on(n);if(r&&!e&&!a&&!o)return y(Zo,{className:"u3-w-6 u3-h-6"});const l=rn(n),c=!l&&!a,u=this.getProfilePictureURL(),d=this.getPostIconURL(u,l,a),p=n.props?n.props.override_icon_emoji:"",h=n.props?n.props.override_username:"",f="string"==typeof p&&""!==p,m=this.getStatus(l,a,i);return y(Aa,{hasMention:c,isBusy:t,isRHS:s,size:"md",src:d,profileSrc:u,isEmoji:f,status:m,userId:null==i?void 0:i.id,channelId:n.channel_id,username:null==i?void 0:i.username,overwriteIcon:this.props.overwriteIcon,overwriteName:h})}}u(Hv,"defaultProps",{status:Ns.OFFLINE});var Uv=f((function(e,t){const s=q(e),n=K(e,t.userId),i="true"===s.EnablePostIconOverride&&t.post&&t.post.props&&t.post.props.override_icon_url;let o;return i&&(o=Ke.getAbsoluteUrl(i)),{enablePostIconOverride:"true"===s.EnablePostIconOverride,overwriteIcon:o,hasImageProxy:"true"===s.HasImageProxy,status:Rs(e,t.userId),isBot:Boolean(n&&n.is_bot),user:n}}))(Hv);const Bv=v.createContext({handlePopupOpened:null});var jv=Ua.jsx;var Vv=p.exports.forwardRef((function(e,t){return jv("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:jv("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}))}));var qv="mqik-b850d275",zv="mqik-02cab614",Wv="mqik-aa52bda4",Gv="mqik-afd93447";const Kv=e=>{const t=p.exports.useRef(null),s=p.exports.useRef(null),[n,i]=p.exports.useState(!1),[o,r]=p.exports.useState(!1),a=e.delay&&e.delay<50?100:e.delay||100;let l;const c=er.exports.debounce((()=>{r(!0)}),a);p.exports.useEffect((()=>{n?(r(!1),c.cancel(),l?l.update():t.current&&s.current&&(l=Ma(t.current,s.current,{placement:e.placement,strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,e.offset||8]}},{name:"delay",enabled:!0,phase:"afterWrite",fn({state:e}){c()}}]}))):!n&&l&&l.destroy()}),[n]);const u=E("div",{role:"tooltip",ref:s,className:A(qv,{[zv]:n,[Wv]:o}),children:[e.content,y("div",{className:A(Gv,{[zv]:n,[Wv]:o}),"data-popper-arrow":!0})]});return E(p.exports.Fragment,{children:[v.cloneElement(e.children,{ref:t,onMouseEnter:function(){i(!0)},onMouseLeave:function(){i(!1)}}),n?u:null]})},Yv=[Oa,Ra];class Xv extends v.PureComponent{constructor(){super(...arguments),u(this,"handleClick",(()=>{vs()&&tr()}))}render(){const{eventTime:e,isPermalink:t,location:s,postId:n,teamUrl:i,styles:o,timestampProps:r={}}=this.props,l=y(ka,a({value:e,className:"post__time",useDate:!1},r)),c=se()||!t?E("div",{role:"presentation",className:A("post_permalink_mobile_view",o.permarlink),children:[y(Vv,{className:o.timeIcon}),l]}):E(L,{id:`${s}_time_${n}`,to:`${i}/pl/${n}`,className:A("post__permalink",o.permarlink),onClick:this.handleClick,children:[y(Vv,{className:o.timeIcon}),l]});return y(Kv,{placement:"top",content:y(ka,{value:e,ranges:Yv}),children:c})}}u(Xv,"defaultProps",{eventTime:0,location:Cs.CENTER});var $v=f((function(e){return{teamUrl:Ze(e)}}))(Xv),Qv=Ua.jsx;var Jv=p.exports.forwardRef((function(e,t){return Qv("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:Qv("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}))})),Zv=Ua.jsx;var ey,ty,sy,ny,iy=p.exports.forwardRef((function(e,t){return Zv("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:Zv("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}))}));(ty=ey||(ey={}))[ty.Flagged=0]="Flagged",ty[ty.Pinned=1]="Pinned",ty[ty.PinnedAndFlagged=2]="PinnedAndFlagged",ty[ty.Neither=3]="Neither",(ny=sy||(sy={})).Flagged="flagged",ny.Pinned="pinned",ny.PinnedAndFlagged="pinnedAndFlagged";class oy extends v.PureComponent{constructor(){super(...arguments),u(this,"messageInfos",{flagged:{id:ds("post_pre_header.flagged"),defaultMessage:"Saved"},pinned:{id:ds("post_pre_header.pinned"),defaultMessage:"Pinned"}}),u(this,"handleLinkClick",((e,t)=>{}))}getPostStatus(e,t){return e?t?2:0:t?1:3}getMessageInfo(e,t,s){if(t&&s)return!1;if(2===e){if(!s&&!t)return sy.PinnedAndFlagged;if(s)return sy.Flagged;if(t)return sy.Pinned}return 0!==e||t?1===e&&!s&&sy.Pinned:sy.Flagged}render(){const{isFlagged:e,isPinned:t,skipPinned:s,skipFlagged:n,channelId:i,styles:o}=this.props,r=this.getMessageInfo(this.getPostStatus(e,t),n,s);if(!e&&!t||!r)return null;const a=[];return t&&!s&&a.push(E("div",{className:o.postMoreX,children:[y(iy,{className:o.xIcon}),y("a",{className:A(o.postMoreLink),onClick:()=>this.handleLinkClick(sy.Pinned,i),children:y(b,{id:this.messageInfos[sy.Pinned].id,defaultMessage:this.messageInfos[sy.Pinned].defaultMessage})})]},"post-more-pin")),e&&!n&&a.push(E("div",{className:o.postMoreX,children:[y(Jv,{className:o.xIcon}),y("a",{className:A(o.postMoreLink),onClick:()=>this.handleLinkClick(sy.Flagged),children:y(b,{id:this.messageInfos[sy.Flagged].id,defaultMessage:this.messageInfos[sy.Flagged].defaultMessage})})]},"post-more-flag")),a.length?a:null}}var ry=d(oy);var ay=f(null,(e=>({actions:g({showFlaggedPosts:Ht,showPinnedPosts:Ut},e)})))(ry),ly=Ua.jsx;var cy=p.exports.forwardRef((function(e,t){return ly("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:ly("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}))}));class uy extends v.PureComponent{render(){const{styles:e}=this.props;let t=null,s="post-menu__item post-menu__item--wide";return this.props.commentCount>0?(s+=" post-menu__item--show",t=y("span",{className:"post-menu__comment-count",children:this.props.commentCount})):""!==this.props.searchStyle&&(s=s+" "+this.props.searchStyle),E("button",{id:`${this.props.location}_commentIcon_${this.props.postId}`,"aria-label":De("post_info.comment_icon.tooltip.reply","Reply").toLowerCase(),className:A(e.postComment,s,this.props.extraClass),onClick:this.props.handleCommentClick,children:[y(cy,{className:e.commentIcon}),t]})}}function dy(e){return e.entities.files.files}function py(e,t){return t&&e.entities.files.fileIdsByPostId[t]||[]}function hy(){return S(dy,py,an,((e,t,s)=>{const n=t.map((t=>e[t])).filter((e=>Boolean(e)));return ma(n,s)}))}u(uy,"defaultProps",{location:"CENTER",searchStyle:"",commentCount:0,extraClass:""}),S((function(e){return e.entities.files.filesFromSearch}),(e=>e.entities.search.fileResults),((e,t)=>t?t.map((t=>e[t])):[]));class fy extends v.PureComponent{render(){if(!this.props.fileInfos||0===this.props.fileInfos.length)return null;let e=null;return this.props.fileInfos.length>1&&(e=y(b,{id:"post_body.plusMore",defaultMessage:" plus {count, number} other {count, plural, one {file} other {files}}",values:{count:this.props.fileInfos.length-1}})),E("span",{children:[this.props.fileInfos[0].name,e]})}}u(fy,"propTypes",{parentPostId:_.string.isRequired,fileInfos:_.arrayOf(_.object)});var my=f((function(){const e=hy();return function(t,s){let n;return s.parentPostId&&(n=e(t,s.parentPostId)),{fileInfos:n}}}))(fy);var gy={reply:"mqik-f3ee3da6"};class vy extends p.exports.PureComponent{constructor(){super(...arguments),u(this,"makeUsername",(()=>{const e=this.props.post.props;let t=this.props.displayName;return this.props.enablePostUsernameOverride&&e&&"true"===e.from_webhook&&e.override_username&&(t=e.override_username),t})),u(this,"makeCommentedOnMessage",(()=>{const{post:e}=this.props;let t="";if(e.message)t=ln(e.message);else if(e.file_ids&&e.file_ids.length>0)t=y(my,{parentPostId:e.id});else if(e.props&&e.props.attachments&&e.props.attachments.length>0){const s=e.props.attachments[0],n=s.pretext||s.title||s.text||s.fallback||"";t=ln(n)}return t}))}render(){const e=this.makeUsername(),t=this.makeCommentedOnMessage(),s=this.props.parentPostUser,n=s&&s.id||"",i=y(Na,{user:s,userId:n,displayName:e,hasMention:!0,disablePopover:!1});return E("div",{className:A(gy.reply,"post__link"),children:[y("div",{className:A(gy.replyBorder)}),E("div",{className:A(gy.replyContent),children:[y("div",{className:A(gy.replyTitle),dir:"auto",children:i}),y("div",{className:A(gy.replySubtitle),children:"string"==typeof t?cn(t):t})]})]})}}var yy=f((function(e,t){let s="";if(t.post){const n=K(e,t.post.user_id);s=un(e,n)}return{displayName:s,enablePostUsernameOverride:"true"===q(e).EnablePostUsernameOverride}}))(vy),by=Ua.jsx;var Ey=p.exports.forwardRef((function(e,t){return by("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:by("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}))}));class Cy extends v.PureComponent{render(){var e;const{fileInfo:t}=this.props,s=Jt(t.extension);let n;if(s===Zt.IMAGE){let s="post-image";t.width<V.THUMBNAIL_WIDTH&&t.height<V.THUMBNAIL_HEIGHT?s+=" small":s+=" normal";let n=ha(t.id,null==(e=t.preview_path)?void 0:e.replace("_preview.jpg","_thumb.jpg"));return es(t.extension)&&!t.has_preview_image&&(n=pa(t.id)),y("div",{className:s,style:{backgroundImage:`url(${n})`,backgroundSize:"cover"}})}return n=t.extension===Zt.SVG&&this.props.enableSVGs?y("img",{alt:"file thumbnail image",className:"post-image normal",src:pa(t.id),loading:"lazy"}):y("div",{className:"file-icon "+Qt(s)}),n}}var Sy=f((function(e){return{enableSVGs:"true"===q(e).EnableSVGs}}))(Cy);class _y extends v.PureComponent{constructor(e){super(e),u(this,"mounted",!1),u(this,"loadFiles",(()=>{const e=this.props.fileInfo;Jt(e.extension)===Zt.IMAGE?this.setState({loaded:!0}):e.extension===Zt.SVG&&this.props.enableSVGs&&dn(pa(e.id),this.handleImageLoaded)})),u(this,"handleImageLoaded",(()=>{this.mounted&&this.setState({loaded:!0})})),u(this,"onAttachmentClick",(e=>{e.preventDefault(),"blur"in e.target&&e.target.blur(),this.props.handleImageClick&&this.props.handleImageClick(this.props.index)})),this.state={loaded:Jt(e.fileInfo.extension)!==Zt.IMAGE,fileInfo:e.fileInfo}}componentDidMount(){this.mounted=!0,this.loadFiles()}static getDerivedStateFromProps(e,t){if(e.fileInfo.id!==t.fileInfo.id){const t=e.fileInfo.extension;return{loaded:Jt(t)!==Zt.IMAGE&&!(e.enableSVGs&&t===Zt.SVG),fileInfo:e.fileInfo}}return null}componentDidUpdate(e){this.state.loaded||this.props.fileInfo.id===e.fileInfo.id||this.loadFiles()}componentWillUnmount(){this.mounted=!1}render(){const{compactDisplay:e,fileInfo:t}=this.props,s=ca(t.name);let n,i;const o=`${De("file_attachment.thumbnail","file thumbnail")} ${t.name}`.toLowerCase();let r;return e||(n=y("a",{"aria-label":o,className:"post-image__thumbnail",href:"#",onClick:this.onAttachmentClick,children:this.state.loaded?y(Sy,{fileInfo:t}):y("div",{className:"post-image__load"})}),i=y("div",{className:"post-image__detail_wrapper",onClick:this.onAttachmentClick,children:E("div",{className:"post-image__detail",children:[y("span",{className:"post-image__name",children:s}),y("span",{className:"post-image__type",children:t.extension.toUpperCase()}),y("span",{className:"post-image__size",children:ts(t.size)})]})})),this.props.canDownloadFiles&&(r=y(vh,{fileInfo:t,compactDisplay:e,canDownload:this.props.canDownloadFiles,handleImageClick:this.onAttachmentClick,iconClass:"post-image__download",children:y(Ey,{className:"u3-w-5 u3-h-5"})})),E("div",{className:"post-image__column",children:[n,y("div",{className:"post-image__details",children:i}),r]})}}var wy=f((function(e){const t=q(e);return{canDownloadFiles:ga(t),enableSVGs:"true"===t.EnableSVGs}}))(_y);var Ay={fileViewSingle:"mqik-b97d3817",imageLoaded:"mqik-85cb961c",filePreviewButton:"mqik-e068c589",compactDisplay:"mqik-66f0f9fa",minPreview:"mqik-8e67e726",minPreviewPortrait:"mqik-f3595944",smallImageInsideContainer:"mqik-ad6eb812"};class Py extends v.PureComponent{constructor(e){var t,s;super(e),u(this,"mounted"),u(this,"imageLoaded",(()=>{this.mounted&&this.setState({loaded:!0})})),u(this,"handleImageClick",(e=>{e.preventDefault(),this.setState({showPreviewModal:!0})})),u(this,"showPreviewModal",(()=>{this.setState({showPreviewModal:!1})})),u(this,"toggleEmbedVisibility",(()=>{this.props.actions.toggleEmbedVisibility(this.props.postId)})),this.mounted=!0,this.state={loaded:!1,showPreviewModal:!1,dimensions:{width:(null==(t=e.fileInfo)?void 0:t.width)||0,height:(null==(s=e.fileInfo)?void 0:s.height)||0}}}componentDidMount(){this.mounted=!0}static getDerivedStateFromProps(e,t){var s,n,i;return(null==(s=e.fileInfo)?void 0:s.width)!==t.dimensions.width||e.fileInfo.height!==t.dimensions.height?{dimensions:{width:null==(n=e.fileInfo)?void 0:n.width,height:null==(i=e.fileInfo)?void 0:i.height}}:null}componentWillUnmount(){this.mounted=!1}render(){const{fileInfo:e,compactDisplay:t}=this.props,{loaded:s}=this.state;if(void 0===e)return y(p.exports.Fragment,{});const{has_preview_image:n,id:i}=e,o=pa(i),r=n?va(i):o,a=e.height,l=e.width,c={};let u;(l<50||a<50)&&(c[Ay.minPreview]=!0,a>l&&(c[Ay.minPreviewPortrait]=!0)),t&&(c[Ay.minPreviewCompact]=!0);let d="";let h={},f={},m="";return Jt(e.extension)===Zt.SVG&&(m="svg",this.state.dimensions.height?h={width:"100%"}:f={height:350,maxWidth:"100%"}),s&&(u=y(ya,{show:this.state.showPreviewModal,onModalDismissed:this.showPreviewModal,fileInfos:[e],postId:this.props.postId}),d="image-fade-in"),y("div",{className:A(Ay.fileViewSingle),children:E("div",{className:"file__image",children:[this.props.isEmbedVisible&&y("div",{className:"image-container",style:f,children:y("div",{className:A(Ay.imageLoaded,`image-loaded ${d} ${m}`),style:h,children:y(ba,{onClick:this.handleImageClick,className:A(c),src:r,dimensions:this.state.dimensions,fileInfo:this.props.fileInfo,onImageLoaded:this.imageLoaded,showLoader:this.props.isEmbedVisible,handleSmallImageContainer:!0})})}),u]})})}}u(Py,"defaultProps",{compactDisplay:!1});var Ty=f((function(e){return{isRhsOpen:Ot(e)}}),(function(e){return{actions:g({toggleEmbedVisibility:pn},e)}}))(Py);class xy extends v.PureComponent{constructor(e){super(e),u(this,"handleImageClick",(e=>{this.setState({showPreviewModal:!0,startImgIndex:e})})),u(this,"hidePreviewModal",(()=>{this.setState({showPreviewModal:!1})})),this.state={showPreviewModal:!1,startImgIndex:0}}render(){const{compactDisplay:e,enableSVGs:t,fileInfos:s,fileCount:n,locale:i}=this.props;if(s&&1===s.length){const n=Jt(s[0].extension);if(n===Zt.IMAGE||n===Zt.SVG&&t)return y(Ty,{fileInfo:s[0],isEmbedVisible:this.props.isEmbedVisible,postId:this.props.post.id,compactDisplay:e})}else if(1===n&&this.props.isEmbedVisible)return y("div",{style:Iy.minHeightPlaceholder});const o=ma(s,i),r=[];if(o&&o.length>0)for(let a=0;a<o.length;a++){const t=o[a];r.push(y(wy,{fileInfo:o[a],index:a,handleImageClick:this.handleImageClick,compactDisplay:e},t.id))}else if(n>0)for(let a=0;a<n;a++)r.push(y("div",{className:"post-image__column post-image__column--placeholder"},`fileCount-${a}`));return E(C,{children:[y("div",{"data-testid":"fileAttachmentList",className:A("post-image__columns clearfix u3-grid-cols-1"),children:r}),y(ya,{show:this.state.showPreviewModal,onModalDismissed:this.hidePreviewModal,startIndex:this.state.startImgIndex,fileInfos:o,postId:this.props.post.id})]})}}const Iy={minHeightPlaceholder:{minHeight:"385px"}};var My=f((function(){const e=hy();return function(t,s){const n=s.post?s.post.id:"",i=e(t,n);let o=0;return s.post.metadata&&s.post.metadata.files?o=(s.post.metadata.files||[]).length:s.post.file_ids?o=s.post.file_ids.length:s.post.filenames&&(o=s.post.filenames.length),{enableSVGs:"true"===q(t).EnableSVGs,fileInfos:i,fileCount:o,isEmbedVisible:hn(t,s.post.id),locale:ps(t)}}}))(xy);class ky extends v.PureComponent{constructor(){super(...arguments),u(this,"retryPost",(e=>{e.preventDefault();const t=a({},this.props.post);Reflect.deleteProperty(t,"id"),this.props.actions.createPost(t)})),u(this,"cancelPost",(e=>{e.preventDefault(),this.props.actions.removePost(this.props.post)}))}render(){return E("span",{className:"pending-post-actions",children:[y("a",{className:"post-retry",href:"#",onClick:this.retryPost,children:y(b,{id:"pending_post_actions.retry",defaultMessage:"Retry"})})," - ",y("a",{className:"post-cancel",href:"#",onClick:this.cancelPost,children:y(b,{id:"pending_post_actions.cancel",defaultMessage:"Cancel"})})]})}}var Oy=f(null,(function(e){return{actions:g({createPost:Zs,removePost:fn},e)}}))(ky);function Ry(e){return void 0!==e.height&&void 0!==e.width}function Ny(e,t){return Math.sqrt(Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2))}var Dy={attachmentOpengraph:"mqik-6cc8f915",attachmentContainer:"mqik-e7a58115",bodyWrap:"mqik-1169cf76",bodySitename:"mqik-e1371c16",attachmentTitle:"mqik-83fe2fc2",titleUrl:"mqik-18bfc7fe",attachmentBody:"mqik-7017ff1b"};const Ly={height:80,width:80};class Fy extends v.PureComponent{constructor(){super(...arguments),u(this,"getImageMetadata",(e=>{if(!e)return;const t=this.props.post.metadata.images;return t?t[e]:void 0})),u(this,"isLargeImage",(e=>{if(!e)return!1;const{height:t,width:s}=e;return s>=150&&s/t>=16/9})),u(this,"handleRemovePreview",(async()=>{const e=Object.assign({},this.props.post.props);e[mn.REMOVE_LINK_PREVIEW]="true";const t={id:this.props.post.id,props:e};return this.props.actions.editPost(t)}))}renderImageToggle(){return y("button",{className:"style--none post__embed-visibility color--link","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.props.toggleEmbedVisibility})}renderLargeImage(e,t){if(this.props.isEmbedVisible)return y(Ea,{src:e,imageMetadata:t,children:e=>y(ba,{className:"attachment__image attachment__image--opengraph large_image",src:e,dimensions:t})})}renderSmallImage(e,t){if(this.props.isEmbedVisible)return y("div",{className:"attachment__image__container--opengraph",children:y(Ea,{src:e,imageMetadata:t,children:e=>y(ba,{className:"attachment__image attachment__image--opengraph",src:e,dimensions:t})})})}truncateText(e){return e&&e.length>128?e.substring(0,128-"...".length)+"...":e}hasPreviewBeenRemoved(){const{post:e}=this.props;return!(!e||!e.props)&&"true"===e.props[mn.REMOVE_LINK_PREVIEW]}render(){if(!this.props.previewEnabled||!this.props.enableLinkPreviews)return null;if(!this.props.post||nn(this.props.post))return null;if(this.hasPreviewBeenRemoved())return null;const e=this.props.openGraphData;if(!e)return null;const t=function(e,t){var s;if(!(null==(s=null==e?void 0:e.images)?void 0:s.length))return;const n=e.images.map((e=>{const s=e.secure_url||e.url;return e.width&&e.height||!t||!t[s]?e:l(a({},e),{height:e.height||t[s].height,width:e.width||t[s].width})})),i=(o=Ly,r=n,r.reduce(((e,t)=>Ry(e)&&Ry(t)&&Ny(t,o)>=Ny(e,o)?e:t),{}));var o,r;return i.secure_url||i.url}(e,this.props.post.metadata.images),s=this.getImageMetadata(t),n=this.isLargeImage(s);let i,o;return this.props.currentUserId===this.props.post.user_id&&(i=y("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:this.handleRemovePreview,"data-testid":"removeLinkPreviewButton",children:y("span",{"aria-hidden":"true",children:"×"})})),(e.description||t)&&(o=E("div",{className:Dy.attachmentBody,children:[E("div",{children:[this.truncateText(e.description)," ",t&&n&&this.renderImageToggle()]}),t&&n&&this.renderLargeImage(t,s)]})),y("div",{className:Dy.attachmentOpengraph,children:E("div",{className:A(Dy.attachmentContainer,Dy.clearfix),children:[E("div",{className:A(Dy.bodyWrap,"attachment__body__wrap attachment__body__wrap--opengraph"),children:[y("span",{className:Dy.bodySitename,children:this.truncateText(e.site_name)}),i,y("h1",{className:A(Dy.attachmentTitle,{[Dy.titleUrl]:!!e.title}),children:y("a",{className:Dy.attachmentTitleLink,href:gn(e.url||this.props.link),target:"_blank",rel:"noopener noreferrer",title:e.title||e.url||this.props.link,children:this.truncateText(e.title||e.url||this.props.link)})}),o]}),t&&!n&&this.renderSmallImage(t,s)]})})}}var Hy=f((function(e,t){const s=q(e);return{currentUserId:we(e),enableLinkPreviews:"true"===s.EnableLinkPreviews,openGraphData:vn(e,t.postId,t.link),previewEnabled:He(e,Os.CATEGORY_DISPLAY_SETTINGS,Os.LINK_PREVIEW_DISPLAY,!0)}}),(function(e){return{actions:g({editPost:el},e)}}))(Fy);const Uy=/(?:http|https):\/\/(?:www\.|m\.)?(?:(?:youtube\.com\/(?:(?:v\/)|(?:(?:watch|embed\/watch)(?:\/|.*v=))|(?:embed\/)|(?:user\/[^/]+\/u\/[0-9]\/)))|(?:youtu\.be\/))([^#&?]*)/;var By="mqik-94991666",jy="mqik-178c5de4",Vy="mqik-0a594c35",qy="mqik-f8cd4376",zy="mqik-a456e5e8",Wy="mqik-a9524bbe";class Gy extends v.PureComponent{constructor(e,t){super(e,t),u(this,"play",(()=>{this.setState({playing:!0})})),u(this,"stop",(()=>{this.setState({playing:!1})})),this.state={playing:!1}}static getDerivedStateFromProps(e,t){return!e.show&&t.playing?{playing:!1}:null}render(){const{metadata:e,link:t}=this.props,s=function(e){const t=e.trim().match(Uy);return t&&11===t[1].length?t[1]:null}(t),n=function(e){var t,s,n,i,o,r;const a=e.match(/[\\?&](t|time|start|time_continue)=([0-9]+h)?([0-9]+m)?([0-9]+s?)/);if(!(null==a?void 0:a[0]))return"";const l=null!=(s=null==(t=a[2])?void 0:t.match(/([0-9]+)h/))?s:null,c=null!=(i=null==(n=a[3])?void 0:n.match(/([0-9]+)m/))?i:null,u=null!=(r=null==(o=a[4])?void 0:o.match(/([0-9]+)s?/))?r:null;let d=0;return(null==l?void 0:l[1])&&(d+=3600*parseInt(l[1],10)),(null==c?void 0:c[1])&&(d+=60*parseInt(c[1],10)),(null==u?void 0:u[1])&&(d+=parseInt(u[1],10)),`&start=${d}`}(t),i=E("h4",{children:[y("span",{className:jy,children:"YouTube - "}),y("span",{className:Vy,children:y("a",{href:this.props.link,target:"_blank",rel:"noopener noreferrer",children:(null==e?void 0:e.title)||"unknown"})})]});let o;if(this.state.playing)o=y("iframe",{src:"https://www.youtube.com/embed/"+s+"?autoplay=1&autohide=1&border=0&wmode=opaque&fs=1&enablejsapi=1"+n,width:"480px",height:"360px",frameBorder:"0",allowFullScreen:!0});else{const t=null==e?void 0:e.images[0];o=y("div",{className:"embed-responsive video-div__placeholder",children:E("div",{className:A("u3-aspect-w-16 u3-aspect-h-9"),children:[y(Ea,{src:(null==t?void 0:t.secure_url)||(null==t?void 0:t.url)||"",children:e=>y("img",{src:e,alt:"youtube video thumbnail",className:"video-thumbnail",loading:"lazy"})}),y("div",{className:zy,children:y("span",{className:Wy,children:y("span",{})})})]})})}return E("div",{className:By,children:[i,y("div",{className:A(qy,"u3-aspect-w-16 u3-aspect-h-9"),onClick:this.play,children:o})]})}static isYoutubeLink(e){return Boolean(e.trim().match(Uy))}}var Ky=f((function(e,t){const s=q(e);return{currentChannelId:Fe(e),googleDeveloperKey:s.GoogleDeveloperKey,hasImageProxy:"true"===s.HasImageProxy,metadata:vn(e,t.postId,t.link)}}))(Gy);class Yy extends v.PureComponent{constructor(){super(...arguments),u(this,"toggleEmbedVisibility",(()=>{this.props.actions.toggleEmbedVisibility(this.props.post.id)})),u(this,"getEmbed",(()=>{const{metadata:e}=this.props.post;return yn(e)})),u(this,"isEmbedToggleable",(e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const s of t)if(s.match(e))return Boolean(s.toggleable);return"image"===e.type||"opengraph"===e.type&&Ky.isYoutubeLink(e.url)})),u(this,"renderEmbed",(e=>{const t=this.props.pluginPostWillRenderEmbedComponents||[];for(const s of t)if(s.match(e)){const t=s.component;return this.props.isEmbedVisible&&y(t,{embed:e})}switch(e.type){case"opengraph":return Ky.isYoutubeLink(e.url)?this.props.isEmbedVisible?y(Ky,{postId:this.props.post.id,link:e.url,show:this.props.isEmbedVisible}):null:y(Hy,{postId:this.props.post.id,link:e.url,isEmbedVisible:this.props.isEmbedVisible,post:this.props.post,toggleEmbedVisibility:this.toggleEmbedVisibility});default:return null}})),u(this,"renderToggle",(e=>y("button",{className:"u3-hidden style--none post__embed-visibility color--link "+(e?"pull-left":""),"data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.toggleEmbedVisibility},"toggle")))}render(){const e=this.getEmbed();if(e){const t=this.isEmbedToggleable(e),s=/^\s*https?:\/\/.*$/.test(this.props.post.message);return E(p.exports.Fragment,{children:[t&&s&&this.renderToggle(!0),this.props.children,t&&!s&&this.renderToggle(!1),this.renderEmbed(e)]})}return this.props.children}}var Xy=f((function(e,t){return{isEmbedVisible:hn(e,t.post.id),pluginPostWillRenderEmbedComponents:e.plugins.components.PostWillRenderEmbedComponent,appsEnabled:sr(e)}}),(function(e){return{actions:g({toggleEmbedVisibility:pn},e)}}))(Yy);var $y={postMessageCollapsed:"mqik-f9c1bc6c",postMessageTextContainer:"mqik-73aa12ca",allEmoji:"mqik-891139f6",emoticon:"mqik-c6409bd1",emoticonUnicode:"mqik-14df24fa",osWindows:"mqik-963640c5",emoticonBig:"mqik-55563ce3",postCollapseGradient:"mqik-4ee04c9f",postAttachmentCollapseGradient:"mqik-ba3d91ab",postCollapseShowMore:"mqik-7a691046",postCollapse:"mqik-342fb210",postCollapseShowmore:"mqik-14c45232",showMoreButton:"mqik-a3d41e1d",postMoreIcon:"mqik-3f591d27",postMessageExpanded:"mqik-a41ece2d",postMessageOverflow:"mqik-d1da61d1"};class Qy extends v.PureComponent{constructor(e){super(e),u(this,"maxHeight"),u(this,"textContainer"),u(this,"overflowRef"),u(this,"checkTextOverflowDebounce"),u(this,"toggleCollapse",(e=>{e.preventDefault(),this.setState((e=>({isCollapsed:!e.isCollapsed})))})),u(this,"checkTextOverflow",(()=>{this.overflowRef&&window.cancelAnimationFrame(this.overflowRef),this.overflowRef=window.requestAnimationFrame((()=>{let e=!1;this.textContainer.current&&this.textContainer.current.scrollHeight>this.maxHeight&&(e=!0),e!==this.state.isOverflow&&this.setState({isOverflow:e})}))})),u(this,"handleResize",(()=>{this.checkTextOverflowDebounce()})),this.maxHeight=this.props.isAttachmentText?200:100,this.textContainer=v.createRef(),this.state={isCollapsed:!0,isOverflow:!1},this.checkTextOverflowDebounce=nr((()=>{this.checkTextOverflow()}),e.isRHSOpen?1e3:200)}componentDidMount(){if(this.checkTextOverflowDebounce(),window.addEventListener("resize",this.handleResize),this.textContainer.current){const e=getComputedStyle(this.textContainer.current);this.maxHeight=this.props.isAttachmentText?200:5*parseFloat(e.lineHeight.replace("px",""))}}componentDidUpdate(e){this.props.text===e.text&&this.props.isRHSExpanded===e.isRHSExpanded&&this.props.isRHSOpen===e.isRHSOpen&&this.props.checkOverflow===e.checkOverflow||this.checkTextOverflowDebounce()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.overflowRef&&window.cancelAnimationFrame(this.overflowRef)}render(){const{isCollapsed:e,isOverflow:t}=this.state,{text:s,children:n,isAttachmentText:i,compactDisplay:o,isMe:r}=this.props;let a,l={"post-message":!0};e?(a=this.maxHeight,l[$y.postMessageCollapsed]=!0):l[$y.postMessageExpanded]=!0,""===s&&(l["u3-hidden"]=!0);let c=null;if(t){!i&&e&&o&&a&&(a-=22);let t=y(zl,{className:$y.postMoreIcon}),s=De("post_info.message.show_less","Show less");e&&(t=y(Ca,{className:$y.postMoreIcon}),s=De("post_info.message.show_more","Show more")),c=E("div",{className:A($y.postCollapse,{[$y.postCollapseMe]:r}),children:[y("div",{className:A({[$y.postCollapseGradient]:!i,[$y.postAttachmentCollapseGradient]:i})}),E("div",{className:A({[$y.postCollapseShowmore]:!i,[$y.postAttachmentCollapseShowmore]:i}),children:[y("div",{className:"post-collapse__show-more-line"}),E("button",{id:"showMoreButton",className:$y.showMoreButton,onClick:this.toggleCollapse,children:[t," ",s]}),y("div",{className:"post-collapse__show-more-line"})]})]}),l[$y.postMessageOverflow]=!0}return E("div",{className:A(l),children:[y("div",{style:{maxHeight:a},className:A($y.postMessageTextContainer),ref:this.textContainer,children:n}),c]})}}var Jy=f((function(e){return{isRHSExpanded:js(e),isRHSOpen:Ot(e),compactDisplay:Ls(e,Os.CATEGORY_DISPLAY_SETTINGS,Os.MESSAGE_DISPLAY,Os.MESSAGE_DISPLAY_DEFAULT)===Os.MESSAGE_DISPLAY_COMPACT}}))(Qy);var Zy="mqik-db20077f",eb="mqik-459e6526";class tb extends v.PureComponent{constructor(e){super(e),u(this,"imageProps"),u(this,"checkPostOverflow",(()=>{this.setState((e=>({checkOverflow:e.checkOverflow+1})))})),u(this,"handleHeightReceived",(e=>{e>0&&this.checkPostOverflow()})),u(this,"handleFormattedTextClick",(e=>En(e,this.props.currentRelativeTeamUrl))),this.state={collapse:!0,hasOverflow:!1,checkOverflow:0},this.imageProps={onImageLoaded:this.handleHeightReceived,onImageHeightChanged:this.checkPostOverflow}}renderDeletedPost(){return y("p",{children:y(b,{id:"post_body.deleted",defaultMessage:"(message deleted)"})})}renderEditedIndicator(){return bn(this.props.post)?y("span",{id:`postEdited_${this.props.post.id}`,className:eb,children:y(b,{id:"post_message_view.edited",defaultMessage:"(edited)"})}):null}render(){const{post:e,enableFormatting:t,options:s,pluginPostTypes:n,compactDisplay:i,isRHS:o,theme:r,wordBlocked:a}=this.props;if(e.state===ae.POST_DELETED)return this.renderDeletedPost();let l=a.reduce(((e,t)=>{const s=new RegExp(`\\b${t}\\b`,"ig");return t.length<3?e.replace(s,"••"):e.replace(s,"•••")}),e.message);if(!t)return y("span",{children:l});const c=e.props&&e.props.type?e.props.type:e.type;if(n&&n.hasOwnProperty(c)){const t=n[c].component;return y(t,{post:e,compactDisplay:i,isRHS:o,theme:r})}const u=re(e);if(i&&u){const e=De("post_info.message.visible.compact"," (Only visible to you)");l=l.concat(e)}const d=o?`rhsPostMessageText_${e.id}`:`postMessageText_${e.id}`;return E(Jy,{checkOverflow:this.state.checkOverflow,isMe:Cn(e),text:l||"",children:[y("div",{"aria-readonly":"true",tabIndex:0,id:d,className:A(Zy,"post-message__text"),dir:"auto",onClick:this.handleFormattedTextClick,children:y(gl,{message:l,imageProps:this.imageProps,isRHS:o,options:s,post:e,channelId:e.channel_id,mentionKeys:[]})}),this.renderEditedIndicator()]})}}u(tb,"defaultProps",{options:{},isRHS:!1,pluginPostTypes:{}});var sb=f((function(e){return{enableFormatting:He(e,Ue.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),isRHSExpanded:js(e),isRHSOpen:Ot(e),pluginPostTypes:e.plugins.postTypes,theme:Sn(e),currentRelativeTeamUrl:Ze(e),wordBlocked:_n(e)}}))(tb),nb=()=>E("div",{className:Sa.messageSend,children:[y("span",{}),y("span",{}),y("span",{})]});var ib={time:"mqik-ce640c6c",timeX:"mqik-64ed99d2",inner:"mqik-ff775782"};const ob=[Oa,Ra];class rb extends v.PureComponent{constructor(){super(...arguments),u(this,"handleClick",(()=>{vs()&&tr()}))}render(){const{eventTime:e,timestampProps:t={}}=this.props,s=y(ka,a({value:e,className:"post__time",useDate:!1},t));return y(Kv,{placement:"top",content:y(ka,{value:e,ranges:ob}),children:E("span",{className:A(ib.time,ib.timeGico),children:[y("span",{className:A(ib.timeX),children:s}),y("div",{className:A(ib.inner,ib.timeGico),children:y("span",{className:A(ib.timeX),children:s})})]})})}}u(rb,"defaultProps",{eventTime:0,location:Cs.CENTER});var ab=f((function(e){return{teamUrl:Ze(e)}}))(rb);var lb={postBodyX:"mqik-da250324",hasComment:"mqik-22b21436",postFail:"mqik-f0fab7a5",postEdited:"mqik-8e707ddc",postWaiting:"mqik-d4b42dec",mentionComment:"mqik-7203e589",postEphemeral:"mqik-73977263",postMessage:"mqik-f5882c27",sameRoot:"mqik-6653766f",isEmptyMessage:"mqik-3a503688"};class cb extends v.PureComponent{constructor(e){super(e),this.sendingAction=new Hg((()=>{const e=this.props.post;e&&e.id===e.pending_post_id&&this.setState({sending:!0})})),this.state={sending:!1}}static getDerivedStateFromProps(e,t){return t.sending&&e.post&&e.post.id!==e.post.pending_post_id?{sending:!1}:null}componentDidUpdate(){!1===this.state.sending&&this.sendingAction.cancel()}componentDidMount(){const e=this.props.post;e&&e.id===e.pending_post_id&&this.sendingAction.fireAfter(3e3)}componentWillUnmount(){this.sendingAction.cancel()}render(){const e=this.props.post,t=this.props.user,s=this.props.parentPost,n=this.props.parentPostUser,i={[lb.sameRoot]:this.props.sameRoot,[lb.isEmptyMessage]:!e.message};let o;const r=re(e);if(wn(t))return y("div",{className:"post__link banned",children:"Nội dung bị ẩn do tài khoản bị BAN"});let a;this.props.isFirstReply&&s&&e.type!==V.PostTypes.EPHEMERAL&&(o=y(yy,{post:s,parentPostUser:n,onCommentClick:this.props.handleCommentClick})),this.props.post.failed&&(i[lb.postFail]=!0,a=y(Oy,{post:this.props.post})),bn(this.props.post)&&(i[lb.postEdited]=!0);let l=null;(e.file_ids&&e.file_ids.length>0||e.filenames&&e.filenames.length>0)&&this.props.post.state!==ae.POST_DELETED&&(l=y(My,{post:e,compactDisplay:this.props.compactDisplay})),this.state.sending&&(i[lb.postWaiting]=!0);const c=E(v.Fragment,{children:[a,this.state.sending&&y(nb,{}),!this.state.sending&&y(sb,{post:this.props.post,compactDisplay:this.props.compactDisplay,hasMention:!0})]}),u=e.type&&this.props.pluginPostTypes.hasOwnProperty(e.type)||e.props&&e.props.type&&this.props.pluginPostTypes.hasOwnProperty(e.props.type);let d;d=this.props.post.state===ae.POST_DELETED||u?c:y(Xy,{post:this.props.post,isEmbedVisible:this.props.isEmbedVisible,children:c});const{isCommentMention:h,hasComment:f}=this.props;return E(p.exports.Fragment,{children:[E("div",{id:`${e.id}_message`,className:A("post-message",lb.postBodyX,lb.postMessage,{[lb.mentionComment]:h,[lb.postEphemeral]:r,[lb.hasComment]:f},i),children:[d,y(ab,{isPermalink:!1,eventTime:e.create_at,postId:e.id,styles:lb})]}),o,l]})}}u(cb,"propTypes",{post:_.object.isRequired,parentPost:_.object,parentPostUser:_.object,handleCommentClick:_.func.isRequired,compactDisplay:_.bool,isCommentMention:_.bool,isFirstReply:_.bool,pluginPostTypes:_.object,isEmbedVisible:_.bool,enablePostUsernameOverride:_.bool.isRequired,isReadOnly:_.bool,user:_.object,hasComment:_.bool}),u(cb,"defaultProps",{isReadOnly:!1});var ub=f((function(e,t){let s,n;t.post.root_id&&(s=Ts(e,t.post.root_id),n=s?K(e,s.user_id):null);const i="true"===q(e).EnablePostUsernameOverride,o=0!==(z(e)||{}).delete_at;return{parentPost:s,parentPostUser:n,pluginPostTypes:e.plugins.postTypes,enablePostUsernameOverride:i,isReadOnly:Nt(e)||o,user:K(e,t.post.user_id)}}))(cb),db=()=>y("div",{children:"Bot"}),pb=({chidlren:e})=>y("div",{children:e});var hb="mqik-c266591c",fb="mqik-04ecbe6e",mb="mqik-20cd8c34";class gb extends v.PureComponent{render(){var e;const{post:t,sameRoot:s}=this.props,n=nn(t),i=rn(t),o="true"===(null==(e=null==t?void 0:t.props)?void 0:e.from_webhook);let r,a,l=y(Da,{userId:t.user_id,hasMention:!0});return o?(l=t.props.override_username&&this.props.enablePostUsernameOverride?y(Da,{userId:t.user_id,hideStatus:!0,overwriteName:t.props.override_username,overwriteIcon:this.props.overwriteIcon}):y(Da,{userId:t.user_id,hideStatus:!0}),this.props.isBot||(r=y(db,{}))):i?(l=y(Da,{userId:t.user_id,hideStatus:!0,hasMention:!0}),r=y(pb,{children:y(b,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"})})):n&&this.props.isBot?l=y(Da,{userId:t.user_id,hideStatus:!0}):n&&(l=y(Da,{userId:"",overwriteName:y(b,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:V.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0})),this.props.compactDisplay&&(a=y("strong",{className:"colon",children:":"})),E("div",{className:A(hb,{[mb]:s,[fb]:!t.message}),children:[l,a,r]})}}var vb=f((function(e,t){var s,n;const i=q(e),o="true"===i.EnablePostUsernameOverride,r="true"===i.EnablePostIconOverride&&(null==(n=null==(s=t.post)?void 0:s.props)?void 0:n.override_icon_url);let a;r&&(a=Ke.getAbsoluteUrl(r));const l=K(e,t.post.user_id);return{enablePostUsernameOverride:o,isBot:Boolean(l&&l.is_bot),overwriteIcon:a,isGuest:Boolean(l&&Fs(l))}}))(gb),yb=Ua.jsx;var bb=p.exports.forwardRef((function(e,t){return yb("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:yb("path",{d:"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"})}))}));var Eb="mqik-f7e4dfc9",Cb="mqik-9fa139e9",Sb="mqik-4b4108bd",_b="mqik-bac0c281",wb="mqik-a411a499",Ab="mqik-92463326",Pb="mqik-2d7fff5f";class Tb extends v.PureComponent{constructor(e){super(e),u(this,"reactionButtonRef",v.createRef()),u(this,"reactionCountRef",v.createRef()),u(this,"animating",!1),u(this,"handleClick",(()=>{if(!this.props.canAddReaction||!this.props.canRemoveReaction||this.animating)return;const{currentUserReacted:e}=this.props.sortedUsers;this.animating=!0,this.setState((t=>e?{displayNumber:t.displayNumber-1,reactedClass:"Reaction--unreacting"}:{displayNumber:t.displayNumber+1,reactedClass:"Reaction--reacting"})),this.handleAnimationEnded()})),u(this,"handleAnimationEnded",(()=>{const{actions:e,post:t,emojiName:s,postAdmin:n}=this.props,{currentUserReacted:i}=this.props.sortedUsers;this.animating=!1,this.setState((e=>"Reaction--reacting"===e.reactedClass?{reactedClass:"Reaction--reacted"}:"Reaction--unreacting"===e.reactedClass?{reactedClass:"Reaction--unreacted"}:e)),i?e.removeReaction(t.id,s):e.addReaction(t.id,s,n)})),u(this,"loadMissingProfiles",(async()=>{const e=this.props.reactions.map((e=>e.user_id));this.props.actions.getMissingProfilesByIds(e)}));const{reactionCount:t}=this.props,{currentUserReacted:s}=this.props.sortedUsers;this.state=s?{reactedClass:"Reaction--reacted",displayNumber:t}:{reactedClass:"Reaction--unreacted",displayNumber:t}}componentDidUpdate(e){if(e.reactionCount!==this.props.reactionCount){const{currentUserReacted:e}=this.props.sortedUsers,t=e?"Reaction--reacted":"Reaction--unreacted";this.animating=!1,this.setState({displayNumber:this.props.reactionCount,reactedClass:t})}}render(){if(!this.props.emojiImageUrl)return null;const{currentUserReacted:e,users:t}=this.props.sortedUsers,{reactionCount:s,otherUsersCount:n,canAddReaction:i,canRemoveReaction:o}=this.props,{displayNumber:r}=this.state,a=e?s:s+1,l=e?s-1:s,c=l>0?l:"",u=a>0?a:"",d=r>0?r:"",p=i&&o?"":"Reaction--read-only";if(!r)return null;let h,f;h=n>0?t.length>0?y(b,{id:"reaction.usersAndOthersReacted",defaultMessage:"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}",values:{users:t.join(", "),otherUsers:n}}):y(b,{id:"reaction.othersReacted",defaultMessage:"{otherUsers, number} {otherUsers, plural, one {user} other {users}}",values:{otherUsers:n}}):t.length>1?y(b,{id:"reaction.usersReacted",defaultMessage:"{users} and {lastUser}",values:{users:t.slice(0,-1).join(", "),lastUser:t[t.length-1]}}):t[0],f=t.length+n>1?y(b,e?{id:"reaction.reactionVerb.youAndUsers",defaultMessage:"reacted"}:{id:"reaction.reactionVerb.users",defaultMessage:"reacted"}):y(b,e?{id:"reaction.reactionVerb.you",defaultMessage:"reacted"}:{id:"reaction.reactionVerb.user",defaultMessage:"reacted"});const m=y(b,{id:"reaction.reacted",defaultMessage:"{users} {reactionVerb} with {emoji}",values:{users:y("b",{children:h}),reactionVerb:f,emoji:y("b",{children:":"+this.props.emojiName+":"})}}),g=this.props.emojiName.replace(/_/g," ");let v=`${De("reaction.reactWidth.ariaLabel","react with")} ${g}`;return e&&o&&(v=`${De("reaction.removeReact.ariaLabel","remove reaction")} ${g}`),y(Kv,{placement:"top",content:m,children:E("button",{id:`postReaction-${this.props.post.id}-${this.props.emojiName}`,"aria-label":v,className:A(Eb,"Reaction",this.state.reactedClass,p),onClick:this.handleClick,ref:this.reactionButtonRef,children:[y("span",{className:A(Pb,"Reaction__emoji emoticon"),style:{backgroundImage:"url("+this.props.emojiImageUrl+")"}}),y("span",{ref:this.reactionCountRef,className:Cb,children:E("span",{className:Sb,children:[y("span",{className:A(_b,"zzz-display"),children:d}),y("span",{className:A(Ab,"zzz-unreacted"),children:c}),y("span",{className:A(wb,"zzz-reacted"),children:u})]})})]})})}}function xb(e,t,s,n,i,o,r,a){return!!ie(e,{team:t,channel:s,permission:a})&&!(n===xt.DEFAULT_CHANNEL&&"true"===i.ExperimentalTownSquareIsReadOnly&&"true"===o.IsLicensed&&!r.roles.includes("system_admin"))}var Ib=f((function(){const e=An();return function(t,s){const n=q(t),i=_e(t),o=bt(t),r=e(t,s.reactions);let a;if(Pn.has(s.emojiName))a=Yt[Pn.get(s.emojiName)];else{a=Tn(t).get(s.emojiName)}let l="";a&&(l=Gt(a));const c=ce(t,s.post.channel_id)||{},u=0!==c.delete_at,d=c.team_id,p=we(t),h=$e(t);K(t,s.post.user_id);let f=!1,m=!1;return u||(f=xb(t,d,s.post.channel_id,c.name,n,i,o,oe.REMOVE_REACTION),m=xb(t,d,s.post.channel_id,c.name,n,i,o,oe.ADD_REACTION)),{profiles:r,postAdmin:!1,otherUsersCount:s.reactions.length-r.length,currentUserId:p,reactionCount:s.reactions.length,canAddReaction:f,canRemoveReaction:m,emojiImageUrl:l,sortedUsers:xn(s.reactions,p,r,h)}}}),(function(e){return{actions:g({addReaction:zs,removeReaction:Ws,getMissingProfilesByIds:In},e)}}))(Tb);var Mb="mqik-fdfc9c9d",kb="mqik-7eba8b75",Ob="mqik-0f4da2dd",Rb="mqik-741923ca",Nb="mqik-1093d31b",Db=e=>{const{emoji:t,spriteClassName:s}=e;return y("div",{className:A(Rb),children:y("div",{className:A(Nb),children:y("img",{alt:t.aliases.join(" - "),src:Gt(t),className:s,onClick:t=>{t.preventDefault(),e.onItemClick(e.emoji)},role:"button"})})})};function Lb(e,t){return t.findIndex((t=>e.includes(t)))}function Fb(e,t,s=0){return!(s>10)&&(!!e.isEqualNode(t)||Fb(e,t.parentNode,s+1))}const Hb=["thumbsup","heart","laughing","astonished","cry","rage"];var Ub=f((function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Xt(e),recentEmojis:$t(e),activeEmojis:Hb}}))((e=>{const[t,s]=p.exports.useState(e.show),[n,i]=p.exports.useState(!1),[o,r]=p.exports.useState([]),l=p.exports.useRef(null);let c;function u(){e.target()&&l.current&&(c=Ma(e.target(),l.current,{placement:"top",strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,6]}}],onFirstUpdate:t=>{i(!0),e.toggleFocus&&e.toggleFocus(!0)}}))}function d(t){if(l.current){Fb(l.current.parentNode,t.target)||(e.onHide(),e.toggleFocus&&e.toggleFocus(!1))}}return p.exports.useEffect((()=>{var t;return u(),null==(t=Mn())||t.addEventListener("mouseup",d,!1),()=>{var t;null==(t=Mn())||t.removeEventListener("mouseup",d,!1),c&&(c.destroy(),e.toggleFocus&&e.toggleFocus(!1))}}),[]),p.exports.useEffect((()=>{t||i(!1),c?c.update():u()}),[t]),p.exports.useEffect((()=>{s(e.show)}),[e.show]),p.exports.useEffect((()=>{const{activeEmojis:t}=e;let s=[];Kt.forEach((e=>{const n=e.map((e=>Yt[e])).filter((e=>Lb(t,e.aliases)>-1));s=s.concat(n)})),s.sort(((e,s)=>Lb(e.aliases,t)>Lb(s.aliases,t))),s=s.map((e=>{const t=a({},e);return t.filename=function(e){return e.filename||e.id}(e),t})),r(s)}),[e.recentEmojis]),y(p.exports.Fragment,t?{children:y("div",{role:"reactions-popper",ref:l,className:A(Mb,{"u3-invisible u3-opacity-0":!n}),children:y("div",{className:kb,children:y("div",{className:Ob,children:o.map(((t,s)=>y(Db,{emoji:t,onItemClick:e.onEmojiClick},`${t.filename}-${s}`)))})})})}:{})}));var Bb="mqik-2f5c50fc",jb="mqik-ec597914",Vb="mqik-b5985ddd",qb="mqik-7c91bb5a";class zb extends v.PureComponent{constructor(e){super(e),u(this,"addReactionButtonRef",v.createRef()),u(this,"getTarget",(()=>this.addReactionButtonRef.current)),u(this,"handleEmojiClick",(e=>{this.setState({showEmojiPicker:!1});const t=kn(e)?e.name:e.aliases[0];this.props.actions.addReaction(this.props.post.id,t,this.props.postAdmin)})),u(this,"hideEmojiPicker",(()=>{this.setState({showEmojiPicker:!1})})),u(this,"toggleEmojiPicker",(()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})})),this.state={showEmojiPicker:!1}}render(){const e=new Map,t=[];if(this.props.reactions)for(const r of Object.values(this.props.reactions)){const s=r.emoji_name;e.has(s)?e.get(s).push(r):(t.push(s),e.set(s,[r]))}if(0===e.size)return y("div",{className:"no-reactions"});const s=t.map((t=>y(Ib,{post:this.props.post,emojiName:t,reactions:e.get(t)||[]},t))),n=this.getTarget();n&&(window.innerWidth,n.getBoundingClientRect().right);let i=null;this.props.enableEmojiPicker&&(i=y("span",{className:"emoji-picker__container",children:E(oa,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[oe.ADD_REACTION],children:[y(Ub,{show:this.state.showEmojiPicker,target:this.getTarget,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick}),y("button",{"aria-label":De("reaction.add.ariaLabel","Add a reaction"),className:A("Reaction"),onClick:this.toggleEmojiPicker,children:y("span",{id:`addReaction-${this.props.post.id}`,className:A(jb,{[qb]:this.state.showEmojiPicker}),ref:this.addReactionButtonRef,children:y(bb,{className:Vb})})})]})}));let o="post-add-reaction";return this.state.showEmojiPicker&&(o+=" post-add-reaction-emoji-picker-open"),E("div",{"aria-label":De("reaction.container.ariaLabel","reactions"),className:A(Bb,"post__reaction-list"),children:[s,y("div",{className:o,children:i})]})}}f((function(){const e=On();return function(t,s){const n="true"===q(t).EnableEmojiPicker&&!s.isReadOnly,i=(ce(t,s.post.channel_id)||{}).team_id;return K(t,s.post.user_id),{teamId:i,reactions:e(t,s.post.id),enableEmojiPicker:n,postAdmin:!1}}}),(function(e){return{actions:g({addReaction:zs},e)}}))(zb);var Wb="mqik-95d3e7c8",Gb="mqik-3042c353",Kb="mqik-08c67451",Yb="mqik-535c660d",Xb="mqik-9bcfdf63",$b="mqik-8a7ac623",Qb="mqik-bbe826d9",Jb="mqik-8e836e01";class Zb extends v.PureComponent{constructor(e){super(e),u(this,"editDisableAction"),u(this,"buttonRef"),u(this,"menuRef"),u(this,"popoverInstance"),u(this,"handleEditDisable",(()=>{this.setState({canEdit:!1})})),u(this,"handleFlagMenuItemActivated",(()=>{this.props.isFlagged?this.props.actions.unflagPost(this.props.post.id):this.props.actions.flagPost(this.props.post.id)})),u(this,"handleAddReactionMenuItemActivated",(e=>{e.preventDefault(),this.props.handleAddReactionClick&&this.props.handleAddReactionClick()})),u(this,"copyLink",(()=>{Rn(`${this.props.currentTeamUrl}/pl/${this.props.post.id}`)})),u(this,"handlePinMenuItemActivated",(()=>{this.props.post.is_pinned?this.props.actions.unpinPost(this.props.post.id):this.props.actions.pinPost(this.props.post.id)})),u(this,"handleUnreadMenuItemActivated",(e=>{e.preventDefault(),this.props.actions.markPostAsUnread(this.props.post,this.props.location)})),u(this,"handleDeleteMenuItemActivated",(e=>{e.preventDefault();const t={ModalId:Ae.DELETE_POST,dialogType:rl,dialogProps:{post:this.props.post,commentCount:this.props.commentCount,isRHS:this.props.location===Cs.RHS_ROOT||this.props.location===Cs.RHS_COMMENT}};this.props.actions.openModal(t)})),u(this,"handleEditMenuItemActivated",(()=>{this.props.actions.setEditingPost(this.props.post.id,this.props.commentCount,this.props.location===Cs.CENTER?"post_textbox":"reply_textbox",this.props.post.root_id?De("rhs_comment.comment","Comment"):De("create_post.post","Post"),this.props.location===Cs.RHS_ROOT||this.props.location===Cs.RHS_COMMENT)})),u(this,"refCallback",(e=>{var t;if(e){const e=null==(t=this.buttonRef.current)?void 0:t.getBoundingClientRect();let s;s=void 0===(null==e?void 0:e.y)?void 0===(null==e?void 0:e.top)?0:null==e?void 0:e.top:null==e?void 0:e.y;const n=Mn(),i=((null==n?void 0:n.offsetHeight)||480)-80,o=s-V.CHANNEL_HEADER_HEIGHT,r=i-(o+V.POST_AREA_HEIGHT);this.setState({openUp:o>r})}})),u(this,"renderDivider",(e=>y("div",{id:`divider_post_${this.props.post.id}_${e}`,className:Qb,role:"menuitem"}))),u(this,"handleDropdownOpened",(e=>{this.props.handleDropdownOpened&&this.props.handleDropdownOpened(e),!e&&this.popoverInstance&&(this.popoverInstance.destroy(),this.popoverInstance=null),e&&this.buttonRef.current&&this.menuRef.current&&!this.popoverInstance&&(this.popoverInstance=Ma(this.buttonRef.current,this.menuRef.current,{placement:"bottom-end",strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,4]}}]}))})),u(this,"handleCopyMenuItem",(()=>{Rn(this.props.post.message)})),u(this,"handleReportPost",(()=>{this.props.actions.setReportPost(this.props.post.id)})),this.editDisableAction=new Hg(this.handleEditDisable),this.state={openUp:!1,canEdit:e.canEdit&&!e.isReadOnly,canDelete:e.canDelete&&!e.isReadOnly},this.buttonRef=v.createRef(),this.menuRef=v.createRef()}disableCanEditPostByTime(){const{post:e,isLicensed:t}=this.props,{canEdit:s}=this.state,n=this.props.postEditTimeLimit||V.UNSET_POST_EDIT_TIME_LIMIT;if(s&&t&&n!==String(V.UNSET_POST_EDIT_TIME_LIMIT)){const t=1e3,s=e.create_at+Number(n)*t-Ss();s>0&&this.editDisableAction.fireAfter(s+t)}}componentDidMount(){this.disableCanEditPostByTime()}static getDerivedStateFromProps(e){return{canEdit:e.canEdit&&!e.isReadOnly,canDelete:e.canDelete&&!e.isReadOnly}}componentWillUnmount(){this.editDisableAction.cancel()}render(){const e=nn(this.props.post);return this.state.canDelete||this.state.canEdit||!e?this.props.isReadOnly?null:y(ia,{as:"div",className:Wb,children:({open:t})=>E(C,{children:[y(ia.Button,{ref:this.buttonRef,id:`${this.props.location}_button_${this.props.post.id}`,"aria-label":De("post_info.dot_menu.tooltip.more_actions","More actions").toLowerCase(),className:A(Gb,"post-menu__item",{[Kb]:t}),type:"button","aria-expanded":"false",children:y(_a,{className:Yb})}),y(La,{as:p.exports.Fragment,show:t,enter:"u3-transition u3-ease-out u3-duration-100",enterFrom:"u3-transform u3-opacity-0 u3-scale-95",enterTo:"u3-transform u3-opacity-100 u3-scale-100",leave:"u3-transition u3-ease-in u3-duration-75",leaveFrom:"u3-transform u3-opacity-100 u3-scale-100",leaveTo:"u3-transform u3-opacity-0 u3-scale-95",beforeEnter:()=>this.handleDropdownOpened(!0),afterLeave:()=>this.handleDropdownOpened(!1),children:y(ia.Items,{id:`${this.props.location}_dropdown_${this.props.post.id}`,static:!0,className:A(Xb,"u3-right-0"),children:E("div",{className:$b,ref:this.menuRef,children:[y(zp,{show:!e&&this.props.location===Cs.CENTER,text:De("post_info.reply","Reply"),onClick:this.props.handleCommentClick,buttonClass:Jb}),y(zp,{id:`unread_post_${this.props.post.id}`,show:!e&&!this.props.channelIsArchived&&this.props.location!==Cs.SEARCH,text:De("post_info.unread","Mark as Unread"),onClick:this.handleUnreadMenuItemActivated,buttonClass:Jb}),E(oa,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[oe.USE_CHANNEL_PINPOST],children:[y(zp,{id:`unpin_post_${this.props.post.id}`,show:!e&&!this.props.isReadOnly&&this.props.post.is_pinned,text:De("post_info.unpin","Unpin"),onClick:this.handlePinMenuItemActivated,buttonClass:Jb}),y(zp,{id:`pin_post_${this.props.post.id}`,show:!e&&!this.props.isReadOnly&&!this.props.post.is_pinned,text:De("post_info.pin","Pin"),onClick:this.handlePinMenuItemActivated,buttonClass:Jb})]}),!e&&(this.state.canEdit||this.state.canDelete)&&this.renderDivider("edit"),y(zp,{id:`edit_post_${this.props.post.id}`,show:!0,text:De("post_info.copy","Sao chép"),onClick:this.handleCopyMenuItem,buttonClass:Jb}),y(zp,{id:`edit_post_${this.props.post.id}`,show:!0,text:De("post_info.copy","Báo cáo cho Admin"),onClick:this.handleReportPost,buttonClass:Jb}),y(zp,{id:`edit_post_${this.props.post.id}`,show:this.state.canEdit,text:De("post_info.edit","Edit"),onClick:this.handleEditMenuItemActivated,buttonClass:Jb}),y(zp,{id:`delete_post_${this.props.post.id}`,show:this.state.canDelete,text:De("post_info.del","Delete"),onClick:this.handleDeleteMenuItemActivated,buttonClass:Jb,isDangerous:!0})]})})})]})}):null}}u(Zb,"defaultProps",{commentCount:0,isFlagged:!1,isReadOnly:!1,location:Cs.CENTER});var eE=d(Zb);f((function(e,t){const{post:s}=t,n=_e(e),i=q(e),o=we(e),r=ce(e,s.channel_id),l=W(e)||{},c=`${Nn()}/${l.name}`;return a({channelIsArchived:Dn(r),components:e.plugins.components,postEditTimeLimit:i.PostEditTimeLimit,isLicensed:"true"===n.IsLicensed,teamId:Se(e),pluginMenuItems:e.plugins.components.PostDropdownMenu,canEdit:Ln(e,s,n,i,r,o),canDelete:Fn(e,s,r),currentTeamUrl:c},t)}),(function(e){return{actions:g({flagPost:Hn,unflagPost:Un,setEditingPost:Xs,pinPost:Bn,unpinPost:jn,openModal:Ve,setReportPost:Vn,markPostAsUnread:qn,setThreadFollow:zn},e)}}))(eE);var tE={postX:"mqik-f1d36a0f",postHighlight:"mqik-0ec905cc",postSection:"mqik-6913062f",postBubbleContentWrapper:"mqik-19021ca1",bubbleContent:"mqik-0f164d79",isMessageEmpty:"mqik-684ca595",message:"mqik-b510827b",postContentAvatar:"mqik-ef406e09",postContentMain:"mqik-ef74cd5b",postContentBody:"mqik-6812375f",postContentTools:"mqik-d81b5da3",postHoverd:"mqik-bcece314",postContentMore:"mqik-04fa9bc7",withReactions:"mqik-31583fbc",postMoreReaction:"mqik-877f3d06",postMoreTime:"mqik-9ce54ca8",postMoreComment:"mqik-4c78127f",postMoreX:"mqik-fd7cf88f",postMoreLink:"mqik-5445ec32",permarlink:"mqik-fdfa6933",postComment:"mqik-e14249f1",commentIcon:"mqik-2da5b521",timeIcon:"mqik-0fb4ac70",xIcon:"mqik-9e4d8b07",sameRoot:"mqik-e623aab8",otherRoot:"mqik-1d6d463c",currentUser:"mqik-fcfd90bb",itsMe:"mqik-5818578f",postHideControls:"mqik-f736b797"};var sE="mqik-bfd26e4e",nE="mqik-aa1fd571",iE="mqik-7471d6eb";class oE extends v.PureComponent{constructor(e){super(e),u(this,"addReactionButtonRef",v.createRef()),u(this,"getTarget",(()=>this.addReactionButtonRef.current)),u(this,"handleEmojiClick",(e=>{this.setState({showEmojiPicker:!1});const t=kn(e)?e.name:e.aliases[0];this.props.actions.addReaction(this.props.post.id,t,this.props.postAdmin)})),u(this,"hideEmojiPicker",(()=>{this.setState({showEmojiPicker:!1})})),u(this,"toggleEmojiPicker",(()=>{this.setState({showEmojiPicker:!this.state.showEmojiPicker})})),this.state={showEmojiPicker:!1}}render(){let e=null;return this.props.enableEmojiPicker&&(e=y(Bv.Consumer,{children:({handlePopupOpened:e})=>y("span",{className:"emoji-picker__container",children:E(oa,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[oe.ADD_REACTION],children:[y(Ub,{show:this.state.showEmojiPicker,target:this.getTarget,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,toggleFocus:e}),y("button",{"aria-label":De("reaction.add.ariaLabel","Add a reaction"),className:"Reaction",onClick:this.toggleEmojiPicker,children:y("span",{id:`addReaction-${this.props.post.id}`,className:nE,ref:this.addReactionButtonRef,children:y(bb,{className:iE})})})]})})})),y("div",{className:sE,children:e})}}f((function(){const e=On();return function(t,s){const n="true"===q(t).EnableEmojiPicker&&!s.isReadOnly,i=(ce(t,s.post.channel_id)||{}).team_id;return K(t,s.post.user_id),{teamId:i,reactions:e(t,s.post.id),enableEmojiPicker:n,postAdmin:!1}}}),(function(e){return{actions:g({addReaction:zs},e)}}))(oE);class rE extends v.PureComponent{constructor(e){super(e),u(this,"handleCommentClick",(e=>{e.preventDefault();const t=this.props.post;t&&this.props.actions.selectPost(t)})),u(this,"handleCardClick",(e=>{e&&this.props.actions.selectPostCard(e)})),u(this,"handlePostClick",(e=>{const t=this.props.post;t&&(this.props.channelIsArchived||t.system_post_ids||e.altKey&&this.props.actions.markPostAsUnread(t,"CENTER"))})),u(this,"handleDropdownOpened",(e=>{this.props.togglePostMenu&&this.props.togglePostMenu(e),this.setState({dropdownOpened:e})})),u(this,"hasSameRoot",(e=>{const t=e.post;return!e.isFirstReply&&(!(t.root_id||e.previousPostIsComment||!e.consecutivePostByUser)||!!t.root_id)})),u(this,"getClassName",((e,t,s,n,i,o)=>{const r={[tE.postX]:!0};return r[tE.postHideControls]=e.failed||e.state===ae.POST_DELETED,r[tE.postHighlight]=!this.state.fadeOutHighlight&&this.props.shouldHighlight,r[tE.sameRoot]=this.hasSameRoot(this.props),r[tE.otherRoot]=!this.hasSameRoot(this.props),r[tE.postBot]=o,r[tE.currentUser]=!n&&!t,r[tE.sameUser]=this.props.consecutivePostByUser,r[tE.postCompact]=this.props.compactDisplay,r[tE.postHoverd]=this.state.dropdownOpened||this.state.a11yActive,r[tE.postPinOrFlagged]=e.is_pinned||this.props.isFlagged,r["u3-cursor-pointer"]=this.state.alt&&!(this.props.channelIsArchived||e.system_post_ids),r[tE.isMessageEmpty]=!e.message,r[tE.itsMe]=this.props.currentUserId===e.user_id,!this.state.fadeOutHighlight&&this.props.shouldHighlight&&(e.is_pinned||this.props.isFlagged)&&(r[tE.postPinOrFlaggedHighlight]=!0),e.root_id&&e.root_id.length>0?r[tE.postComment]=!0:this.props.replyCount>0&&(r[tE.postRoot]=!0,r[tE.sameUser]=!1,r[tE.sameRoot]=!1,r[tE.otherRoot]=!1),(t||s)&&(r[tE.postSystem]=!0,t&&(r[tE.currentUser]=!1,r[tE.postComment]=!1,r[tE.postRoot]=!1,r[tE.otherRoot]=!1)),i&&(r[tE.postComment]=!0,r[tE.sameRoot]=!0,r[tE.postRoot]=!1),r})),u(this,"setHover",(()=>{this.setState({hover:!0})})),u(this,"unsetHover",(()=>{this.setState({hover:!1})})),u(this,"handleAlt",(e=>{this.state.alt!==e.altKey&&this.setState({alt:e.altKey})})),u(this,"handleA11yActivateEvent",(()=>{this.setState({a11yActive:!0,ariaHidden:!1})})),u(this,"handleA11yDeactivateEvent",(()=>{this.setState({a11yActive:!1,ariaHidden:!0})})),u(this,"handlePostFocus",(()=>{this.updateAriaLabel()})),u(this,"updateAriaLabel",(()=>{this.setState({currentAriaLabel:this.props.createAriaLabel(this.props.intl)})})),this.postRef=v.createRef(),this.state={dropdownOpened:!1,hover:!1,alt:!1,a11yActive:!1,currentAriaLabel:"",ariaHidden:!0,fadeOutHighlight:!1}}componentDidMount(){document.addEventListener("keydown",this.handleAlt),document.addEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.addEventListener(st.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(st.DEACTIVATE,this.handleA11yDeactivateEvent)),this.props.shouldHighlight&&(this.highlightTimeout=setTimeout((()=>{this.setState({fadeOutHighlight:!0})}),V.PERMALINK_FADEOUT))}componentWillUnmount(){document.removeEventListener("keydown",this.handleAlt),document.removeEventListener("keyup",this.handleAlt),this.postRef.current&&(this.postRef.current.removeEventListener(st.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(st.DEACTIVATE,this.handleA11yDeactivateEvent)),this.highlightTimeout&&clearTimeout(this.highlightTimeout)}componentDidUpdate(e){this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(st.UPDATE)),this.props.post.state===ae.POST_DELETED&&e.post.state!==ae.POST_DELETED&&this.updateAriaLabel()}render(){const{post:e,replyCount:t,isFirstReply:s,isCollapsedThreadsEnabled:n,consecutivePostByUser:i,compactDisplay:o}=this.props;if(!e.id)return null;const r=nn(e),a=Cn(e),l=rn(e),c=e&&e.props&&"true"===e.props.from_webhook,u=e&&e.props&&"true"===e.props.from_bot;if(r&&!l)return null;let d=y("span",{hidden:!0});const{root_id:p}=e,h=this.hasSameRoot(this.props)&&i&&!p&&0===t&&!u;h||(d=y(Uv,{compactDisplay:o,post:e,userId:e.user_id}),l&&(d=y("span",{className:"auto-responder",children:d})));const f=[];f.push(y(ay,{styles:tE,isFlagged:this.props.isFlagged,isPinned:e.is_pinned,channelId:e.channel_id},"post-highlight"));(l||!r&&(Boolean(t)||s))&&f.push(y("div",{className:tE.postMoreComment,children:y(uy,{handleCommentClick:this.handleCommentClick,commentCount:this.props.replyCount,postId:e.id,extraClass:"post__x-comment-count",styles:tE})},"post-more-comment"));const m=!(re(e)||ae.POST_DELETED===e.state||Wn(e)||e.type===ae.POST_TYPES.COMBINED_USER_ACTIVITY);return f.push(y("div",{className:tE.postMoreTime,children:y($v,{isPermalink:m,eventTime:e.create_at,postId:e.id,styles:tE})},"post-more-time")),y(Bv.Provider,{value:{handlePopupOpened:this.handleDropdownOpened,styles:tE},children:E("div",{ref:this.postRef,id:"post_"+e.id,role:"listitem",className:A("a11y__section","post-item-x",tE.postSection,this.getClassName(e,r,a,c,l,u),tE.postBubbleContentWrapper),tabIndex:0,onFocus:this.handlePostFocus,onMouseOver:this.setHover,onMouseLeave:this.unsetHover,onTouchStart:this.setHover,onClick:this.handlePostClick,"aria-label":this.state.currentAriaLabel,"aria-atomic":!0,children:[E("div",{className:tE.bubbleContent,children:[y(ub,{post:e,handleCommentClick:this.handleCommentClick,compactDisplay:this.props.compactDisplay,isCommentMention:this.props.isCommentMention,isFirstReply:this.props.isFirstReply,sameRoot:this.hasSameRoot(this.props),hasComment:e.root_id&&e.root_id.length>0||l}),y(vb,{post:e,handleCommentClick:this.handleCommentClick,handleCardClick:this.handleCardClick,handleDropdownOpened:this.handleDropdownOpened,compactDisplay:this.props.compactDisplay,isFirstReply:this.props.isFirstReply,replyCount:this.props.replyCount,showTimeWithoutHover:!h,hover:this.state.hover||this.state.a11yActive,isLastPost:this.props.isLastPost,sameRoot:this.hasSameRoot(this.props)})]}),y("div",{className:tE.postContentAvatar,children:d})]})})}}u(rE,"propTypes",{post:_.object.isRequired,thread:_.object,createAriaLabel:_.func.isRequired,currentUserId:_.string.isRequired,center:_.bool,compactDisplay:_.bool,isFirstReply:_.bool,shouldHighlight:_.bool,consecutivePostByUser:_.bool,previousPostIsComment:_.bool,togglePostMenu:_.func,isCommentMention:_.bool,isGuest:_.bool,replyCount:_.number,isLastPost:_.bool,channelIsArchived:_.bool.isRequired,intl:Yr.isRequired,actions:_.shape({selectPost:_.func.isRequired,selectPostCard:_.func.isRequired,markPostAsUnread:_.func.isRequired}).isRequired,isFlagged:_.bool.isRequired,isCollapsedThreadsEnabled:_.bool,isReadOnly:_.bool}),u(rE,"defaultProps",{post:{},isReadOnly:!1,isGuest:!1});var aE=d(rE);function lE(e,t){return!(!e||!e.root_id)&&(!t||e.root_id!==t.id&&e.root_id!==t.root_id)}var cE=f((function(){const e=Gn(),t=Kn(),s=Yn();return(n,i)=>{const o=i.post||Ts(n,i.postId),r=ce(n,o.channel_id);let a=null;i.previousPostId&&(a=Ts(n,i.previousPostId));let l=!1,c=!1;a&&(l=Xn(o,a),c=Boolean(a.root_id));const u=0!==(z(n)||{}).delete_at;return{post:o,createAriaLabel:s(n,o),currentUserId:we(n),isGuest:Fs(bt(n)),isFirstReply:lE(o,a),consecutivePostByUser:l,previousPostIsComment:c,replyCount:e(n,o),isCommentMention:t(n,o.id),center:Ls(n,Os.CATEGORY_DISPLAY_SETTINGS,Os.CHANNEL_DISPLAY_MODE,Os.CHANNEL_DISPLAY_MODE_DEFAULT)===Os.CHANNEL_DISPLAY_MODE_CENTERED,compactDisplay:Ls(n,Os.CATEGORY_DISPLAY_SETTINGS,Os.MESSAGE_DISPLAY,Os.MESSAGE_DISPLAY_DEFAULT)===Os.MESSAGE_DISPLAY_COMPACT,channelIsArchived:Dn(r),isFlagged:null!=Ls(n,Os.CATEGORY_FLAGGED_POST,o.id,null),isCollapsedThreadsEnabled:$n(n),isReadOnly:Nt(n)||u}}}),(function(e){return{actions:g({selectPost:Qn,selectPostCard:Jn,markPostAsUnread:qn},e)}}))(aE);var uE=f((function(){const e=Zn();return(t,s)=>({post:e(t,s.combinedId),postId:s.combinedId})}))(cE);var dE="mqik-f02aa279",pE="mqik-57573d5f",hE="mqik-dab47c84",fE="mqik-4c6b39c7",mE=({children:e})=>E("div",{className:dE,children:[y("div",{className:hE}),y("div",{className:fE,children:e})]});const gE=[Oa,Ra],vE=({date:e})=>y(mE,{children:y(ka,{value:e,useTime:!1,useSemanticOutput:!1,ranges:gE})});vE.propTypes={date:_.oneOfType([_.number,_.instanceOf(Date)]).isRequired};var yE=p.exports.memo(vE),bE=({children:e})=>E("div",{className:pE,children:[y("div",{className:hE}),y("div",{className:fE,children:e})]});var EE="mqik-ca428930";class CE extends v.PureComponent{render(){return y("div",{className:A(EE,"new-separator"),children:y(bE,{id:this.props.separatorId,children:y(b,{id:"posts_view.newMsg",defaultMessage:"New Messages"})})})}}class SE extends v.PureComponent{blockShortcutReactToLastPostForNonMessages(e){const{actions:{emitShortcutReactToLastPostFrom:t}}=this.props;ei(e)&&t(Cs.NO_WHERE)}componentDidUpdate(e){const{listId:t,isLastPost:s,shortcutReactToLastPostEmittedFrom:n}=this.props,i=e.shortcutReactToLastPostEmittedFrom!==n&&n===Cs.CENTER;s&&i&&this.blockShortcutReactToLastPostForNonMessages(t)}render(){const{listId:e,previousListId:t,loadingOlderPosts:s,loadingNewerPosts:n,post:i}=this.props,{OLDER_MESSAGES_LOADER:o,NEWER_MESSAGES_LOADER:r,CHANNEL_INTRO_MESSAGE:l,LOAD_OLDER_MESSAGES_TRIGGER:c,LOAD_NEWER_MESSAGES_TRIGGER:u}=ii;if(ti(e)){const t=si(e);return y(yE,{date:t},t)}if(ni(e))return y(CE,{separatorId:e});if(e===l)return y("div",{});if(e===c||e===u)return y("button",{className:"more-messages-text theme style--none color--link",onClick:e===c?this.props.loadOlderPosts:this.props.loadNewerPosts,children:y(b,{id:"posts_view.loadMore",defaultMessage:"Load More Messages"})});if(e===o||e===r){return y("div",{className:"loading-screen",children:E("div",{className:A("loading__content",{hideAnimation:!s&&!n}),children:[y("div",{className:"round round-1"}),y("div",{className:"round round-2"}),y("div",{className:"round round-3"})]})})}const d={previousPostId:t,shouldHighlight:this.props.shouldHighlight,togglePostMenu:this.props.togglePostMenu,isLastPost:this.props.isLastPost};return en(e)?y(uE,a({combinedId:e},d)):y(cE,a({postId:e,post:i},d))}}var _E=f((function(e,t){let s;ei(t.listId)||(s=t.listId);const n=Ds(e);return{post:t.post||(s?Ts(e,s):null),channel:t.channel,shortcutReactToLastPostEmittedFrom:n}}),(function(e){return{actions:g({emitShortcutReactToLastPostFrom:$s},e)}}))(SE),wE=Ua.jsx;var AE=p.exports.forwardRef((function(e,t){return wE("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:wE("path",{fillRule:"evenodd",d:"M15.707 4.293a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 011.414-1.414L10 8.586l4.293-4.293a1 1 0 011.414 0zm0 6a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 111.414-1.414L10 14.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"})}))}));var PE="mqik-e348b088";class TE extends v.PureComponent{render(){return y("div",{className:A(PE,{"u3-hidden":this.props.atBottom}),onClick:this.props.onClick,children:y(AE,{className:"u3-w-6 u3-h-6 u3-animate-bounce u3-text-white"})})}}u(TE,"propTypes",{isScrolling:_.bool.isRequired,atBottom:_.bool,onClick:_.func.isRequired});var xE=Ua.jsx,IE=Ua.jsxs;var ME=p.exports.forwardRef((function(e,t){return IE("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:[xE("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),xE("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}))}));var kE="mqik-12b068c8",OE="mqik-41a5fd77",RE="mqik-bc058da2",NE="mqik-93946fdf",DE="mqik-3119bb0a",LE="mqik-9fbcf278",FE="mqik-02d84790";class HE extends v.PureComponent{constructor(){super(...arguments),u(this,"mounted"),u(this,"handleDismiss",(()=>{"function"==typeof this.props.onDismiss&&this.props.onDismiss()}))}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e={[kE]:!0},t={[RE]:!0},{show:s,extraClasses:n,showActions:i,width:o}=this.props;s&&(e[OE]=!0),i&&(t[NE]=!0);return E("div",{className:A(e,"toastClass"),children:[E("div",{className:A(t),onClick:i?this.props.onClick:void 0,children:[i&&(()=>E("div",{className:DE,children:[y(ME,{className:"u3-w-5 u3-h-5 u3-text-white"}),o>V.MOBILE_SCREEN_WIDTH&&this.props.onClickMessage]}))(),this.props.children]}),y("div",{className:LE,onClick:this.handleDismiss,"data-testid":n?`dismissToast-${n}`:"dismissToast",children:y(Ta,{className:A(FE),id:"dismissToast"})})]})}}const UE=[Ha],BE=class extends v.PureComponent{constructor(e){super(e),u(this,"handleShortcut",(e=>{fe(e,V.KeyCodes.ESCAPE)&&(this.state.showUnreadToast?this.hideUnreadToast():this.state.showNewMessagesToast?this.hideNewMessagesToast():this.hideArchiveToast())})),u(this,"hideUnreadToast",(()=>{this.state.showUnreadToast&&this.setState({showUnreadToast:!1})})),u(this,"hideArchiveToast",(()=>{this.state.showMessageHistoryToast&&this.setState({showMessageHistoryToast:!1})})),u(this,"hideNewMessagesToast",((e=!0)=>{this.state.showNewMessagesToast&&(this.setState({showNewMessagesToast:!1}),e&&this.props.updateLastViewedBottomAt())})),u(this,"hideSearchHintToast",(()=>{this.props.onSearchHintDismiss&&this.props.onSearchHintDismiss()})),u(this,"newMessagesToastText",((e,t)=>this.props.width>500&&void 0!==t?y(b,{id:"postlist.toast.newMessagesSince",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}} {isToday, select, true {} other {since}} {date}",values:{count:e,isToday:Fa(new Date(t)).toString(),date:y(ka,{value:t,useTime:!1,ranges:UE})}}):y(b,{id:"postlist.toast.newMessages",defaultMessage:"{count, number} new {count, plural, one {message} other {messages}}",values:{count:e}}))),u(this,"archiveToastText",(()=>y("p",{className:"u3-ml-8 u3-inline-block",children:y(b,{id:"postlist.toast.history",defaultMessage:"Viewing message history"})}))),u(this,"changeUrlToRemountChannelView",(()=>{const{match:e,history:t,channelId:s}=this.props;s?t.replace(`/${e.params.team}/group/${s}`):t.replace(`/${e.params.team}`)})),u(this,"scrollToNewMessage",(()=>{const{focusedPostId:e,atLatestPost:t,scrollToNewMessage:s,updateLastViewedBottomAt:n}=this.props;!e||t?(s(),n(),this.hideNewMessagesToast()):this.changeUrlToRemountChannelView()})),u(this,"scrollToLatestMessages",(()=>{const{focusedPostId:e,atLatestPost:t,scrollToLatestMessages:s}=this.props;if(e){if(!t)return void this.changeUrlToRemountChannelView();this.hideArchiveToast()}s(),this.hideUnreadToast()})),this.state={unreadCountInChannel:e.unreadCountInChannel}}static getDerivedStateFromProps(e,t){let s,{showUnreadToast:n,showNewMessagesToast:i,showMessageHistoryToast:o}=t;return s=e.atLatestPost?BE.countNewMessages(e.postListIds,e.rootPosts,e.isCollapsedThreadsEnabled):e.channelMarkedAsUnread?t.unreadCountInChannel:t.unreadCountInChannel+e.newRecentMessagesCount,void 0===n&&null!==e.atBottom&&(n=s>0&&!e.atBottom),void 0===o&&""!==e.focusedPostId&&null!==e.atBottom&&(o=e.initScrollOffsetFromBottom>1e3||!e.atLatestPost),!e.channelMarkedAsUnread||e.atBottom||t.channelMarkedAsUnread||t.showUnreadToast||(n=!0),e.channelMarkedAsUnread&&e.lastViewedAt!==t.lastViewedAt&&!e.atBottom&&(n=!0),!n&&s>0&&!e.atBottom&&e.lastViewedBottom<e.latestPostTimeStamp&&(i=!0),s||(i=!1,n=!1),{unreadCount:s,showUnreadToast:n,showNewMessagesToast:i,lastViewedAt:e.lastViewedAt,channelMarkedAsUnread:e.channelMarkedAsUnread,showMessageHistoryToast:o}}componentDidMount(){this.mounted=!0;const{showUnreadToast:e,showNewMessagesToast:t,showMessageHistoryToast:s}=this.state,n=Boolean(e||t||s);document.addEventListener("keydown",this.handleShortcut),this.props.actions.updateToastStatus(n)}componentDidUpdate(e,t){const{showUnreadToast:s,showNewMessagesToast:n,showMessageHistoryToast:i}=this.state,{atBottom:o,atLatestPost:r,postListIds:a,lastViewedBottom:l,updateNewMessagesAtInChannel:c,actions:u}=this.props;!e.atBottom&&o&&r&&(this.hideNewMessagesToast(!1),this.hideUnreadToast(),this.hideArchiveToast());const d=e.postListIds.length,p=a.length;p!==d&&a[0]!==e.postListIds[0]&&(!1===o&&r&&p>0)&&!s&&c(l);if(t.showUnreadToast!==s||t.showNewMessagesToast!==n||t.showMessageHistoryToast!==i){const e=Boolean(s||n||i);u.updateToastStatus(e)}}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut)}getToastToRender(){const{atLatestPost:e,atBottom:t,width:s,lastViewedAt:n,showSearchHintToast:i}=this.props,{showUnreadToast:o,showNewMessagesToast:r,showMessageHistoryToast:c,unreadCount:u}=this.state,d={show:!0,width:s,onDismiss:this.hideUnreadToast,onClick:this.scrollToLatestMessages,onClickMessage:De("postlist.toast.scrollToBottom","Jump to recents"),showActions:!e||e&&!t};if(o&&u>0)return y(HE,l(a({},d),{children:this.newMessagesToastText(u,n)}));if(r){const e={onDismiss:this.hideNewMessagesToast,onClick:this.scrollToLatestMessages,onClickMessage:De("postlist.toast.scrollToLatest","Jump to new messages")};return y(HE,l(a(a({},d),e),{children:this.newMessagesToastText(u,n)}))}if(c){const e={show:!0,width:s,onDismiss:this.hideArchiveToast,onClick:this.scrollToLatestMessages,onClickMessage:De("postlist.toast.scrollToBottom","Jump to recents"),showActions:!0,extraClasses:"toast__history"};return y(HE,l(a({},e),{children:this.archiveToastText()}))}return null}render(){const e=this.getToastToRender();return y(v.Fragment,{children:e})}};let jE=BE;u(jE,"propTypes",{unreadCountInChannel:_.number,newRecentMessagesCount:_.number,channelMarkedAsUnread:_.bool,isCollapsedThreadsEnabled:_.bool,rootPosts:_.object,atLatestPost:_.bool,postListIds:_.array,latestPostTimeStamp:_.number,atBottom:_.bool,lastViewedBottom:_.number,width:_.number,lastViewedAt:_.number,focusedPostId:_.string,channelId:_.string,initScrollOffsetFromBottom:_.number,updateNewMessagesAtInChannel:_.func,scrollToNewMessage:_.func,scrollToLatestMessages:_.func,updateLastViewedBottomAt:_.func,showSearchHintToast:_.bool,onSearchHintDismiss:_.func,match:_.shape({params:_.shape({team:_.string}).isRequired}).isRequired,actions:_.shape({updateToastStatus:_.func.isRequired}).isRequired}),u(jE,"defaultProps",{focusedPostId:""}),u(jE,"countNewMessages",((e,t,s)=>{const n=oi(e);if(n<=0)return 0;let i=e.slice(0,n).filter((e=>!ei(e)));return s&&(i=i.filter((e=>t[e]))),i.length}));var VE=d(jE);var qE=h(f((function(){const e=vt(),t=S(ri,we,((e,t)=>t),((e,t,s)=>s),$n,((e,t,s,n,i)=>s?s.map((t=>e[t])).filter((e=>e&&e.user_id!==t&&e.state!==ae.POST_DELETED&&e.create_at>n&&(!i||""===e.root_id))).length:0)),s=S(ri,we,((e,t)=>t),((e,t,s)=>Object.values(e).filter((e=>""===e.root_id&&e.channel_id===s.id&&e.state!==ae.POST_DELETED)).reduce(((e,t)=>(e[t.id]=!0,e)),{}))),n=ai();return function(i,o){const r=e(i,{id:o.channelId});let a=0;const l=li(i,r.id),c=i.views.channel.lastChannelViewTime[r.id];if(!o.atLatestPost){let e=ci(i,r.id);e&&(e=n(i,{postIds:e,lastViewedAt:c,channelId:r.id})),a=t(i,e,c)}return{rootPosts:s(i,r),lastViewedAt:c,newRecentMessagesCount:a,isCollapsedThreadsEnabled:$n(i),unreadCountInChannel:ui(i,r),channelMarkedAsUnread:l}}}),(function(e){return{actions:g({updateToastStatus:ir},e)}}))(VE));var zE="mqik-f039e3e1",WE="mqik-05ea1f8c",GE="mqik-17088fc9",KE="mqik-727615df",YE="mqik-67fa946d",XE="mqik-1f7842d4",$E="mqik-c5cd3113",QE="mqik-c0e296a8";const JE=50,ZE=100,eC={padding:"0px 0px 7px"},tC={position:"absolute",bottom:"0",maxHeight:"100%"};class sC extends v.PureComponent{constructor(e){super(e),u(this,"getNewMessagesSeparatorIndex",(e=>e.findIndex((e=>0===e.indexOf(ii.START_OF_NEW_MESSAGES))))),u(this,"handleWindowResize",(()=>{this.props.actions.checkAndSetMobileView();const e=vs();if(e!==this.state.isMobile){const t=this.state.dynamicListStyle;this.state.postMenuOpened&&(e||"unset"!==t.willChange?e&&"transform"===t.willChange&&(t.willChange="unset"):t.willChange="transform"),this.setState({isMobile:e,dynamicListStyle:t}),this.scrollStopAction=new Hg(this.handleScrollStop)}this.showSearchHintThreshold=this.getShowSearchHintThreshold()})),u(this,"togglePostMenu",(e=>{const t=this.state.dynamicListStyle;this.state.isMobile&&(t.willChange=e?"unset":"transform"),this.setState({postMenuOpened:e,dynamicListStyle:t})})),u(this,"renderRow",(({data:e,itemId:t,style:s})=>{const n=e.indexOf(t);let i="";const o="post-row__padding",r=-1!==n&&n<e.length-1?e[n+1]:"",a=n>0&&n<e.length?e[n-1]:"";(ti(a)||ni(a))&&(i+="post-row__padding bottom"),(ti(r)||ni(r))&&(i.includes(o)?i+=" top":i+="post-row__padding top");const l=t===this.state.postListIds[0];return y("div",{style:s,className:A(KE,YE,i,{[XE]:l}),children:y(_E,{listId:t,previousListId:pi(e,n),shouldHighlight:t===this.props.focusedPostId,loadOlderPosts:this.props.actions.loadOlderPosts,loadNewerPosts:this.props.actions.loadNewerPosts,togglePostMenu:this.togglePostMenu,isLastPost:l,loadingNewerPosts:this.props.loadingNewerPosts,loadingOlderPosts:this.props.loadingOlderPosts})})})),u(this,"scrollToFailed",(e=>{0===e?this.props.actions.changeUnreadChunkTimeStamp(""):this.props.actions.changeUnreadChunkTimeStamp(this.props.lastViewedAt)})),u(this,"onScroll",(({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:s,clientHeight:n,scrollHeight:i})=>{if(i<=0)return;const o="forward"===e&&!s,r=i-n-t,a=r<1e3;if("backward"===e&&!s&&t<1e3&&!this.props.atOldestPost?this.props.actions.loadOlderPosts():o&&a&&!this.props.atLatestPost&&this.props.actions.loadNewerPosts(),this.state.isMobile&&(this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction&&this.scrollStopAction.fireAfter(V.SCROLL_DELAY)),this.checkBottom(t,i,n),s){this.listRef.current._getRangeToRender()[3]<=1&&!this.props.atLatestPost&&this.props.actions.canLoadMorePosts(hi.AFTER_ID),!this.state.atBottom&&i&&this.setState({initScrollOffsetFromBottom:r})}this.state.isMobile&&this.state.showSearchHint&&this.setState({showSearchHint:!1}),this.state.isMobile||this.state.isSearchHintDismissed||this.setState({showSearchHint:r>this.showSearchHintThreshold})})),u(this,"getShowSearchHintThreshold",(()=>3*window.screen.height)),u(this,"checkBottom",((e,t,s)=>{this.updateAtBottom(this.isAtBottom(e,t,s))})),u(this,"isAtBottom",((e,t,s)=>t-s-e<=10&&t>0)),u(this,"updateAtBottom",(e=>{if(e!==this.state.atBottom){let t=Date.now();this.props.latestPostTimeStamp>t&&(t=this.props.latestPostTimeStamp),this.setState({atBottom:e,lastViewedBottom:t})}})),u(this,"updateLastViewedBottomAt",((e=Date.now())=>{this.setState({lastViewedBottom:e})})),u(this,"handleScrollStop",(()=>{this.mounted&&this.setState({isScrolling:!1})})),u(this,"handleSearchHintDismiss",(()=>{this.setState({showSearchHint:!1,isSearchHintDismissed:!0})})),u(this,"updateFloatingTimestamp",(e=>{this.state.isMobile&&this.props.postListIds&&this.setState({topPostId:fi(this.props.postListIds.slice(e))})})),u(this,"onItemsRendered",(({visibleStartIndex:e})=>{this.updateFloatingTimestamp(e)})),u(this,"initScrollToIndex",(()=>{if(this.props.focusedPostId){return{index:this.state.postListIds.findIndex((e=>e===this.props.focusedPostId)),position:"center"}}return{index:0,position:"end"}})),u(this,"scrollToLatestMessages",(()=>{this.props.atLatestPost?this.scrollToBottom():(this.updateNewMessagesAtInChannel(),this.props.actions.changeUnreadChunkTimeStamp(this.props.latestPostTimeStamp))})),u(this,"scrollToBottom",(()=>{this.listRef.current?this.listRef.current.scrollToItem(0,"end"):setTimeout((()=>{this.listRef.current&&this.listRef.current.scrollToItem(0,"end")}),500)})),u(this,"scrollToNewMessage",(()=>{this.listRef.current?this.listRef.current.scrollToItem(oi(this.state.postListIds),"start",-50):setTimeout((()=>{this.listRef.current&&this.listRef.current.scrollToItem(oi(this.state.postListIds),"start",-50)}),500)})),u(this,"updateNewMessagesAtInChannel",((e=Date.now())=>{this.props.actions.updateNewMessagesAtInChannel(this.props.channelId,e)})),u(this,"renderToasts",(e=>y(qE,{atLatestPost:this.props.atLatestPost,postListIds:this.state.postListIds,atBottom:this.state.atBottom,width:e,lastViewedBottom:this.state.lastViewedBottom,latestPostTimeStamp:this.props.latestPostTimeStamp,scrollToNewMessage:this.scrollToNewMessage,scrollToLatestMessages:this.scrollToLatestMessages,updateNewMessagesAtInChannel:this.updateNewMessagesAtInChannel,updateLastViewedBottomAt:this.updateLastViewedBottomAt,channelId:this.props.channelId,focusedPostId:this.props.focusedPostId,initScrollOffsetFromBottom:this.state.initScrollOffsetFromBottom,onSearchHintDismiss:this.handleSearchHintDismiss,showSearchHintToast:this.state.showSearchHint})));const t=ii.CHANNEL_INTRO_MESSAGE,s=vs();this.state={isScrolling:!1,isMobile:s,atBottom:null,lastViewedBottom:Date.now(),postListIds:[t],topPostId:"",postMenuOpened:!1,dynamicListStyle:{willChange:"transform"},initScrollCompleted:!1,initScrollOffsetFromBottom:0,showSearchHint:!1,isSearchHintDismissed:!1},this.listRef=v.createRef(),this.postListRef=v.createRef(),s&&(this.scrollStopAction=new Hg(this.handleScrollStop)),this.initRangeToRender=this.props.focusedPostId?[0,ZE]:[0,JE];let n=0;n=e.focusedPostId?this.props.postListIds.findIndex((e=>e===this.props.focusedPostId)):this.getNewMessagesSeparatorIndex(e.postListIds);const i=e.focusedPostId?ZE:JE;this.initRangeToRender=[Math.max(n-30,0),Math.max(n+30,Math.min(e.postListIds.length-1,i))],this.showSearchHintThreshold=this.getShowSearchHintThreshold()}componentDidMount(){this.mounted=!0,this.props.actions.checkAndSetMobileView(),window.addEventListener("resize",this.handleWindowResize),de.addListener(di.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}getSnapshotBeforeUpdate(e){if(this.postListRef&&this.postListRef.current){const t=this.props.postListIds&&this.props.postListIds.length!==e.postListIds.length&&this.props.postListIds[0]===e.postListIds[0],s=this.props.atOldestPost!==e.atOldestPost;if((t||s)&&!1===this.state.atBottom){const e=this.postListRef.current;return{previousScrollTop:e.parentElement.scrollTop,previousScrollHeight:e.scrollHeight}}}return null}componentDidUpdate(e,t,s){if(!this.postListRef.current)return;const n=e.postListIds.length,i=this.props.postListIds.length;if(s){const t=this.postListRef.current.scrollHeight,o=i!==n&&this.props.postListIds[0]===e.postListIds[0],r=this.props.atOldestPost!==e.atOldestPost;if((o||r)&&!this.state.atBottom&&s){const e=s.previousScrollTop+(t-s.previousScrollHeight);0!==e&&e-s.previousScrollTop!=0&&this.listRef.current.scrollTo(e,e-s.previousScrollTop,!0)}}}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.handleWindowResize),de.removeListener(di.POST_LIST_SCROLL_TO_BOTTOM,this.scrollToLatestMessages)}static getDerivedStateFromProps(e){const t=e.postListIds;let s;return s=e.atOldestPost?[...t,ii.CHANNEL_INTRO_MESSAGE]:e.autoRetryEnable?[...t,ii.OLDER_MESSAGES_LOADER]:[...t,ii.LOAD_OLDER_MESSAGES_TRIGGER],e.atLatestPost||(s=e.autoRetryEnable?[ii.NEWER_MESSAGES_LOADER,...s]:[ii.LOAD_NEWER_MESSAGES_TRIGGER,...s]),{postListIds:s}}render(){const e=this.props.channelId;let t;this.props.latestAriaLabelFunc&&this.props.postListIds.indexOf(ii.START_OF_NEW_MESSAGES)>=0&&(t=this.props.latestAriaLabelFunc(this.props.intl));const{dynamicListStyle:s}=this.state;return E("div",{role:"list",className:"a11y__region","aria-label":De("accessibility.sections.centerContent","message list main region"),children:[this.state.isMobile&&E(v.Fragment,{children:[y(Fv,{isScrolling:this.state.isScrolling,isMobile:!0,postId:this.state.topPostId}),y(TE,{isScrolling:this.state.isScrolling,atBottom:this.state.atBottom,onClick:this.scrollToBottom})]}),y("div",{role:"presentation",className:zE,children:y("div",{role:"presentation",className:WE,children:E("div",{id:"postListContent",className:GE,children:[y("span",{className:A($E,"sr-only"),"aria-live":"polite",children:t}),y(mv,{children:({height:e,width:t})=>E(v.Fragment,{children:[y("div",{children:this.renderToasts(t)}),y(Mv,{ref:this.listRef,height:e,width:t,className:QE,itemData:this.state.postListIds,overscanCountForward:80,overscanCountBackward:80,onScroll:this.onScroll,initScrollToIndex:this.initScrollToIndex,canLoadMorePosts:this.props.actions.canLoadMorePosts,innerRef:this.postListRef,style:a(a({},tC),s),innerListStyle:eC,initRangeToRender:this.initRangeToRender,loaderId:ii.OLDER_MESSAGES_LOADER,correctScrollToBottom:this.props.atLatestPost,onItemsRendered:this.onItemsRendered,scrollToFailed:this.scrollToFailed,children:this.renderRow})]})})]})})},"postlist-"+e)]})}}u(sC,"propTypes",{postListIds:_.array.isRequired,focusedPostId:_.string,channelId:_.string.isRequired,autoRetryEnable:_.bool,atOldestPost:_.bool,atLatestPost:_.bool,loadingNewerPosts:_.bool,loadingOlderPosts:_.bool,intl:Yr.isRequired,latestPostTimeStamp:_.number,latestAriaLabelFunc:_.func,lastViewedAt:_.string,actions:_.shape({loadOlderPosts:_.func.isRequired,loadNewerPosts:_.func.isRequired,canLoadMorePosts:_.func.isRequired,checkAndSetMobileView:_.func.isRequired,changeUnreadChunkTimeStamp:_.func.isRequired,updateNewMessagesAtInChannel:_.func.isRequired}).isRequired});var nC=d(sC);class iC extends v.PureComponent{constructor(e){super(e),u(this,"autoRetriesCount"),u(this,"loadingMorePosts"),u(this,"actionsForPostList"),u(this,"mounted"),u(this,"extraPagesLoaded"),u(this,"postsOnLoad",(async e=>{const{focusedPostId:t,isFirstLoad:s,latestPostTimeStamp:n,isPrefetchingInProcess:i,actions:o}=this.props;t?await o.loadPostsAround(e,this.props.focusedPostId):s&&i||await o.loadLatestPosts(e),t||this.markChannelAsReadAndViewed(e),this.mounted&&this.setState({loadingOlderPosts:!1,loadingNewerPosts:!1})})),u(this,"callLoadPosts",(async(e,t,s)=>{const{error:n}=await this.props.actions.loadPosts({channelId:e,postId:t,type:s});return s===hi.BEFORE_ID?this.setState({loadingOlderPosts:!1}):this.setState({loadingNewerPosts:!1}),n?this.autoRetriesCount<3?(this.autoRetriesCount++,await this.callLoadPosts(e,t,s)):this.mounted&&this.setState({autoRetryEnable:!1}):(this.mounted&&this.setState({autoRetryEnable:!0}),this.state.autoRetryEnable||(this.autoRetriesCount=0)),{error:n}})),u(this,"markChannelAsReadAndViewed",(e=>{this.props.actions.markChannelAsViewed(e),this.props.actions.markChannelAsRead(e)})),u(this,"getOldestVisiblePostId",(()=>mi(this.props.postListIds))),u(this,"getLatestVisiblePostId",(()=>fi(this.props.postListIds))),u(this,"canLoadMorePosts",(async(e=hi.BEFORE_ID)=>{this.props.postListIds&&(this.state.loadingOlderPosts||this.state.loadingNewerPosts||(this.extraPagesLoaded>10?this.state.autoRetryEnable&&this.setState({autoRetryEnable:!1}):(this.props.atOldestPost||e!==hi.BEFORE_ID?this.props.atLatestPost||await this.getPostsAfter():await this.getPostsBefore(),this.extraPagesLoaded+=1)))})),u(this,"getPostsBefore",(async()=>{if(this.state.loadingOlderPosts)return;const e=this.getOldestVisiblePostId();this.setState({loadingOlderPosts:!0}),await this.callLoadPosts(this.props.channelId,e,hi.BEFORE_ID)})),u(this,"getPostsAfter",(async()=>{if(this.state.loadingNewerPosts)return;const e=this.getLatestVisiblePostId();this.setState({loadingNewerPosts:!0}),await this.callLoadPosts(this.props.channelId,e,hi.AFTER_ID)})),this.state={loadingNewerPosts:!1,loadingOlderPosts:!1,autoRetryEnable:!0},this.mounted=!1,this.autoRetriesCount=0,this.loadingMorePosts=null,this.extraPagesLoaded=0,this.actionsForPostList={loadOlderPosts:this.getPostsBefore,loadNewerPosts:this.getPostsAfter,checkAndSetMobileView:e.actions.checkAndSetMobileView,canLoadMorePosts:this.canLoadMorePosts,changeUnreadChunkTimeStamp:e.changeUnreadChunkTimeStamp,updateNewMessagesAtInChannel:this.props.actions.updateNewMessagesAtInChannel}}componentDidMount(){this.mounted=!0,this.props.channelId&&this.postsOnLoad(this.props.channelId)}componentDidUpdate(e){this.props.channelId!==e.channelId&&this.postsOnLoad(this.props.channelId)}componentWillUnmount(){this.props.channelManuallyUnread||this.markChannelAsReadAndViewed(this.props.channelId),this.mounted=!1}render(){return this.props.postListIds?y(nC,{loadingNewerPosts:this.state.loadingNewerPosts,loadingOlderPosts:this.state.loadingOlderPosts,atOldestPost:this.props.atOldestPost,atLatestPost:this.props.atLatestPost,focusedPostId:this.props.focusedPostId,channelId:this.props.channelId,autoRetryEnable:this.state.autoRetryEnable,actions:this.actionsForPostList,postListIds:this.props.formattedPostIds,latestPostTimeStamp:this.props.latestPostTimeStamp,latestAriaLabelFunc:this.props.latestAriaLabelFunc,latestPostId:this.props.latestPostId},"postlist-"+this.props.channelId):y(gi,{})}}const oC=(e,t)=>!e.entities.posts.postsInChannel[t],rC=_i((e=>fi(e)));var aC=f((function(){const e=vi(),t=ai(),s=Yn();return function(n,i){let o,r,a,l,c=0,u=!1,d=!1;const{focusedPostId:p,unreadChunkTimeStamp:h,channelId:f}=i,m=n.views.channel,g=m.lastChannelViewTime[f],v=m.channelPrefetchStatus[f]===yi.STARTED,y=li(n,f);if(r=p&&0!==h?e(n,p,f):h?bi(n,f,h):Ei(n,f),r&&(o=r.order,u=!!r.recent,d=!!r.oldest),o&&(a=t(n,{postIds:o,lastViewedAt:g,indicateNewMessages:!0,channelId:f}),o.length)){const e=rC(o),t=Ts(n,e);c=t.create_at,l=s(n,t)}return{lastViewedAt:g,isFirstLoad:oC(n,f),formattedPostIds:a,atLatestPost:u,atOldestPost:d,latestPostTimeStamp:c,postListIds:o,latestAriaLabelFunc:l,isPrefetchingInProcess:v,channelManuallyUnread:y}}}),(function(e){return{actions:g({loadUnreads:or,loadPosts:rr,loadLatestPosts:ar,loadPostsAround:lr,checkAndSetMobileView:cr,syncPostsInChannel:ur,markChannelAsViewed:Ci,markChannelAsRead:Si,updateNewMessagesAtInChannel:dr},e)}}))(iC);var lC="mqik-0a3960a1";class cC extends v.PureComponent{constructor(e){super(e),u(this,"changeUnreadChunkTimeStamp",(e=>{this.setState({unreadChunkTimeStamp:e,loaderForChangeOfPostsChunk:!1},(()=>{window.requestAnimationFrame((()=>{this.setState({loaderForChangeOfPostsChunk:!1})}))}))})),this.state={unreadChunkTimeStamp:e.lastViewedAt,loaderForChangeOfPostsChunk:!1,channelLoading:e.channelLoading}}static getDerivedStateFromProps(e,t){return null===t.unreadChunkTimeStamp&&e.lastViewedAt?{unreadChunkTimeStamp:e.lastViewedAt}:e.channelLoading!==t.channelLoading?{unreadChunkTimeStamp:e.lastViewedAt,channelLoading:e.channelLoading}:null}render(){return this.props.channelLoading||this.state.loaderForChangeOfPostsChunk?E("div",{id:"post-list",className:A(lC),children:[y("div",{className:"filter-x u3-filder-x",children:""}),y(gi,{})]}):E("div",{id:"post-list",className:A(lC),role:"main",children:[y("div",{className:"filter-x u3-filder-x",children:""}),y(aC,{match:this.props.match,unreadChunkTimeStamp:this.state.unreadChunkTimeStamp,channelId:this.props.channelId,changeUnreadChunkTimeStamp:this.changeUnreadChunkTimeStamp,focusedPostId:this.props.focusedPostId})]})}}var uC=f((function(){return function(e,t){const s=wi(e,t.match.params.team);let n;const i=ce(e,t.channelId);let o=e.views.channel.lastChannelViewTime[t.channelId];i&&(i.type===V.DM_CHANNEL&&i.teammate_id&&(n=K(e,i.teammate_id)),o=i.last_post_at?o:i.last_post_at);const r=Ai(e),a=((e,t,s,n,i)=>{const o=e.params;if(o.postid)return!1;if(t&&s){if(t.type!==V.DM_CHANNEL&&t.name!==o.identifier)return!0;if(t.type===V.DM_CHANNEL&&n&&o.identifier!==`@${n.username}`)return!0;const e=s.id;return!!(t.team_id&&t.team_id!==e||i&&!i[e])}return!0})(t.match,i,s,n,r);return{lastViewedAt:(new Date).getTime(),channelLoading:a}}}))(cC);var dC="mqik-35bb03ec",pC="mqik-53d2bd64",hC="mqik-069ba657",fC="mqik-a098bb29";const mC=class extends v.PureComponent{constructor(e){super(e),u(this,"channelViewRef"),u(this,"getChannelView",(()=>this.channelViewRef.current)),u(this,"onClickCloseChannel",(()=>{this.props.actions.goToLastViewedChannel()})),u(this,"handleFocus",(e=>{e.preventDefault(),this.props.actions.selectChannel(this.props.channelId)})),this.state={url:e.match.url,channelId:e.channelId,focusedPostId:e.match.params.postid,deferredPostView:mC.createDeferredPostView(),showNextSteps:e.showNextSteps},this.channelViewRef=v.createRef()}static getDerivedStateFromProps(e,t){let s={};const n=e.match.params.postid;return e.match.url!==t.url&&e.channelId!==t.channelId&&(s={deferredPostView:mC.createDeferredPostView(),url:e.match.url,focusedPostId:n}),e.channelId!==t.channelId&&(s=l(a({},s),{channelId:e.channelId,focusedPostId:n})),n&&n!==t.focusedPostId&&(s=l(a({},s),{focusedPostId:n})),e.showNextSteps!==t.showNextSteps&&(s=l(a({},s),{showNextSteps:e.showNextSteps})),Object.keys(s).length?s:null}async componentDidMount(){!this.props.showNextSteps&&!this.props.showNextStepsTips||this.props.isOnboardingHidden||this.props.actions.setShowNextStepsView(!0),this.props.channelMemberLoading&&this.props.actions.getMyChannelMember(this.props.channelId),this.props.channelRolesLoading&&this.props.actions.getMyChannelMember(this.props.channelRole)}componentDidUpdate(e){this.props.channelMemberLoading&&e.channelId!==this.props.channelId&&this.props.actions.getMyChannelMember(this.props.channelId),this.props.channelRolesLoading&&e.channelRole!==this.props.channelRole&&this.props.actions.getRoleByName(this.props.channelRole),e.channelId===this.props.channelId&&e.channelIsArchived===this.props.channelIsArchived||this.props.channelIsArchived&&!this.props.viewArchivedChannels&&this.props.actions.goToLastViewedChannel(),this.props.match.url!==e.match.url&&this.props.showNextStepsEphemeral&&this.props.actions.setShowNextStepsView(!1)}render(){const{channelIsArchived:e,isMinimal:t,channelId:s,preData:n}=this.props;let i;this.props.deactivatedChannel?i=y("div",{className:"post-create__container",id:"post-create",children:E("div",{className:"channel-archived__message",children:[y(Kr,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a **deactivated user**. New messages cannot be posted."}),y("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel,children:y(b,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})})]})}):e?i=y("div",{className:"post-create__container",id:"post-create",children:E("div",{id:"channelArchivedMessage",className:"channel-archived__message",children:[y(Kr,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."}),y("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel,children:y(b,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})})]})}):this.props.channelRolesLoading||(i=y("div",{className:"post-create__container",id:"post-create",children:y(Zg,{getChannelView:this.getChannelView,channelId:s})}));const o=this.state.deferredPostView;return E("div",{ref:this.channelViewRef,className:A(dC,{[pC]:t}),onFocus:this.handleFocus,children:[y(sh,a({},this.props)),E("div",{className:A(hC),children:[y(tv,{overlayType:"center"}),y(o,{channelId:this.props.channelId,match:n?n.match:this.props.match,focusedPostId:this.state.focusedPostId}),i]})]})}};let gC=mC;u(gC,"createDeferredPostView",(()=>function(e,t){class s extends v.PureComponent{constructor(e,t){super(e,t),this.state={shouldRender:!1}}componentDidMount(){window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>this.setState({shouldRender:!0})))}))}render(){return this.state.shouldRender?y(e,a({},this.props)):t}}return P(s,e)}(uC,y("div",{id:"post-list",className:A(fC,"a11y__region"),"data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0}))));const vC=S(((e,t)=>Pi(e,t)),(e=>Boolean(e&&e.delete_at)));var yC=h(f((function(){const e=vt();return(t,s)=>{const n=e(t,{id:s.channelId}),i=Ti(t,n.id||""),o=q(t),r=xi(t,n.id||""),a="true"===o.EnableTutorial,l=Ms(t,Os.TUTORIAL_STEP,we(t),ks.FINISHED),c="true"===o.ExperimentalViewArchivedChannels;let u=!0,d=!0,p="";if(n&&n.id){const e=Ii(t),s=Mi(t);if(s[n.id]){d=!1;const t=s[n.id].values();for(const s of t){p=s,e[s]&&(u=!1);break}}}return{channelId:n?n.id:"",isMinimal:i,channelRole:p,channelRolesLoading:u,channelMemberLoading:d,deactivatedChannel:!!n&&vC(t,n.id),focusedPostId:t.views.channel.focusedPostId,showTutorial:a&&l<=ks.INTRO_SCREENS,showNextStepsEphemeral:t.views.nextSteps.show,channelIsArchived:!!n&&0!==n.delete_at,viewArchivedChannels:c,isCloud:!1,preData:r}}}),(function(e){return{actions:g({setShowNextStepsView:Hl,goToLastViewedChannel:Wo,getProfiles:ki,getContacts:Fl,getMyChannelMember:Oi,getRoleByName:Ri,selectChannel:Wt},e)}}))(gC));var bC="mqik-a4e08f2d",EC="mqik-0ac00af3";var CC=f((function(e){return{team:W(e),chatList:Ni(e)}}))((e=>y("div",{className:bC,children:y("div",{className:A(EC),children:e.chatList.map(((e,t)=>y(yC,{channelId:e},e)))})})));function SC(e){return e.views.lhs.isOpen}var _C={},wC={},AC={exports:{}},PC=null,TC=["Webkit","Moz","O","ms"],xC=function(e){return IC.test(e)?e.toLowerCase():MC.test(e)?(function(e){return e.replace(OC,(function(e,t){return t?" "+t:""}))}(e)||e).toLowerCase():kC.test(e)?function(e){return e.replace(RC,(function(e,t,s){return t+" "+s.toLowerCase().split("").join(" ")}))}(e).toLowerCase():e.toLowerCase()},IC=/\s/,MC=/(_|-|\.|:)/,kC=/([a-z][A-Z]|[A-Z][a-z])/;var OC=/[\W_]+(.|$)/g;var RC=/(.)([A-Z]+)/g;var NC=xC;var DC=function(e){return NC(e).replace(/[\W_]+(.|$)/g,(function(e,t){return t?" "+t:""})).trim()};var LC={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},FC=function(e){PC||(PC=document.createElement("div"));var t=PC.style;if(e in t)return e;for(var s=e.charAt(0).toUpperCase()+e.slice(1),n=TC.length;n>=0;n--){var i=TC[n]+s;if(i in t)return i}return!1},HC=function(e){return DC(e).replace(/\s(\w)/g,(function(e,t){return t.toUpperCase()}))},UC={float:"cssFloat"},BC=function(e,t){return"number"!=typeof t||LC[e]?t:t+"px"};function jC(e,t,s){var n=UC[t];if(void 0===n&&(n=function(e){var t=HC(e),s=FC(t);return UC[t]=UC[e]=UC[s]=s,s}(t)),n){if(void 0===s)return e.style[n];e.style[n]=BC(n,s)}}function VC(e,t){for(var s in t)t.hasOwnProperty(s)&&jC(e,s,t[s])}function qC(){2===arguments.length?"string"==typeof arguments[1]?arguments[0].style.cssText=arguments[1]:VC(arguments[0],arguments[1]):jC(arguments[0],arguments[1],arguments[2])}AC.exports=qC,AC.exports.set=qC,AC.exports.get=function(e,t){return Array.isArray(t)?t.reduce((function(t,s){return t[s]=jC(e,s||""),t}),{}):jC(e,t||"")};var zC,WC={};zC=WC,Object.defineProperty(zC,"__esModule",{value:!0}),zC.default=function(e){return"string"==typeof e};var GC={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!1!==i)return i;if("undefined"!=typeof document){var e=document.createElement("div");(0,n.default)(e,{width:100,height:100,position:"absolute",top:-9999,overflow:"scroll",MsOverflowStyle:"scrollbar"}),document.body.appendChild(e),i=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else i=0;return i||0};var t,s=AC.exports,n=(t=s)&&t.__esModule?t:{default:t};var i=!1}(GC);var KC={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return!1}}(KC);var YC={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=e.clientWidth,s=getComputedStyle(e),n=s.paddingLeft,i=s.paddingRight;return t-parseFloat(n)-parseFloat(i)}}(YC);var XC={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=e.clientHeight,s=getComputedStyle(e),n=s.paddingTop,i=s.paddingBottom;return t-parseFloat(n)-parseFloat(i)}}(XC);var $C={};Object.defineProperty($C,"__esModule",{value:!0}),$C.containerStyleDefault={position:"relative",overflow:"hidden",width:"100%",height:"100%"},$C.containerStyleAutoHeight={height:"auto"},$C.viewStyleDefault={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"scroll",WebkitOverflowScrolling:"touch"},$C.viewStyleAutoHeight={position:"relative",top:void 0,left:void 0,right:void 0,bottom:void 0},$C.viewStyleUniversalInitial={overflow:"hidden",marginRight:0,marginBottom:0},$C.trackHorizontalStyleDefault={position:"absolute",height:6},$C.trackVerticalStyleDefault={position:"absolute",width:6},$C.thumbHorizontalStyleDefault={position:"relative",display:"block",height:"100%"},$C.thumbVerticalStyleDefault={position:"relative",display:"block",width:"100%"},$C.disableSelectStyle={userSelect:"none"},$C.disableSelectStyleReset={userSelect:""};var QC={};Object.defineProperty(QC,"__esModule",{value:!0});var JC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};QC.renderViewDefault=function(e){return tS.default.createElement("div",e)},QC.renderTrackHorizontalDefault=function(e){var t=e.style,s=sS(e,["style"]),n=JC({},t,{right:2,bottom:2,left:2,borderRadius:3});return tS.default.createElement("div",JC({style:n},s))},QC.renderTrackVerticalDefault=function(e){var t=e.style,s=sS(e,["style"]),n=JC({},t,{right:2,bottom:2,top:2,borderRadius:3});return tS.default.createElement("div",JC({style:n},s))},QC.renderThumbHorizontalDefault=function(e){var t=e.style,s=sS(e,["style"]),n=JC({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return tS.default.createElement("div",JC({style:n},s))},QC.renderThumbVerticalDefault=function(e){var t=e.style,s=sS(e,["style"]),n=JC({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return tS.default.createElement("div",JC({style:n},s))};var ZC,eS=p.exports,tS=(ZC=eS)&&ZC.__esModule?ZC:{default:ZC};function sS(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s}!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},s=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),n=gc.exports,i=g(n),o=g(AC.exports),r=p.exports,a=g(x.exports),l=g(WC),c=g(GC),u=g(KC),d=g(YC),h=g(XC),f=$C,m=QC;function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function a(e){var t;v(this,a);for(var s=arguments.length,n=Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];var o=y(this,(t=a.__proto__||Object.getPrototypeOf(a)).call.apply(t,[this,e].concat(n)));return o.getScrollLeft=o.getScrollLeft.bind(o),o.getScrollTop=o.getScrollTop.bind(o),o.getScrollWidth=o.getScrollWidth.bind(o),o.getScrollHeight=o.getScrollHeight.bind(o),o.getClientWidth=o.getClientWidth.bind(o),o.getClientHeight=o.getClientHeight.bind(o),o.getValues=o.getValues.bind(o),o.getThumbHorizontalWidth=o.getThumbHorizontalWidth.bind(o),o.getThumbVerticalHeight=o.getThumbVerticalHeight.bind(o),o.getScrollLeftForOffset=o.getScrollLeftForOffset.bind(o),o.getScrollTopForOffset=o.getScrollTopForOffset.bind(o),o.scrollLeft=o.scrollLeft.bind(o),o.scrollTop=o.scrollTop.bind(o),o.scrollToLeft=o.scrollToLeft.bind(o),o.scrollToTop=o.scrollToTop.bind(o),o.scrollToRight=o.scrollToRight.bind(o),o.scrollToBottom=o.scrollToBottom.bind(o),o.handleTrackMouseEnter=o.handleTrackMouseEnter.bind(o),o.handleTrackMouseLeave=o.handleTrackMouseLeave.bind(o),o.handleHorizontalTrackMouseDown=o.handleHorizontalTrackMouseDown.bind(o),o.handleVerticalTrackMouseDown=o.handleVerticalTrackMouseDown.bind(o),o.handleHorizontalThumbMouseDown=o.handleHorizontalThumbMouseDown.bind(o),o.handleVerticalThumbMouseDown=o.handleVerticalThumbMouseDown.bind(o),o.handleWindowResize=o.handleWindowResize.bind(o),o.handleScroll=o.handleScroll.bind(o),o.handleDrag=o.handleDrag.bind(o),o.handleDragEnd=o.handleDragEnd.bind(o),o.state={didMountUniversal:!1},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e),s(a,[{key:"componentDidMount",value:function(){this.addListeners(),this.update(),this.componentDidMountUniversal()}},{key:"componentDidMountUniversal",value:function(){this.props.universal&&this.setState({didMountUniversal:!0})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){this.removeListeners(),(0,n.cancel)(this.requestFrame),clearTimeout(this.hideTracksTimeout),clearInterval(this.detectScrollingInterval)}},{key:"getScrollLeft",value:function(){return this.view?this.view.scrollLeft:0}},{key:"getScrollTop",value:function(){return this.view?this.view.scrollTop:0}},{key:"getScrollWidth",value:function(){return this.view?this.view.scrollWidth:0}},{key:"getScrollHeight",value:function(){return this.view?this.view.scrollHeight:0}},{key:"getClientWidth",value:function(){return this.view?this.view.clientWidth:0}},{key:"getClientHeight",value:function(){return this.view?this.view.clientHeight:0}},{key:"getValues",value:function(){var e=this.view||{},t=e.scrollLeft,s=void 0===t?0:t,n=e.scrollTop,i=void 0===n?0:n,o=e.scrollWidth,r=void 0===o?0:o,a=e.scrollHeight,l=void 0===a?0:a,c=e.clientWidth,u=void 0===c?0:c,d=e.clientHeight,p=void 0===d?0:d;return{left:s/(r-u)||0,top:i/(l-p)||0,scrollLeft:s,scrollTop:i,scrollWidth:r,scrollHeight:l,clientWidth:u,clientHeight:p}}},{key:"getThumbHorizontalWidth",value:function(){var e=this.props,t=e.thumbSize,s=e.thumbMinSize,n=this.view,i=n.scrollWidth,o=n.clientWidth,r=(0,d.default)(this.trackHorizontal),a=Math.ceil(o/i*r);return r===a?0:t||Math.max(a,s)}},{key:"getThumbVerticalHeight",value:function(){var e=this.props,t=e.thumbSize,s=e.thumbMinSize,n=this.view,i=n.scrollHeight,o=n.clientHeight,r=(0,h.default)(this.trackVertical),a=Math.ceil(o/i*r);return r===a?0:t||Math.max(a,s)}},{key:"getScrollLeftForOffset",value:function(e){var t=this.view,s=t.scrollWidth,n=t.clientWidth;return e/((0,d.default)(this.trackHorizontal)-this.getThumbHorizontalWidth())*(s-n)}},{key:"getScrollTopForOffset",value:function(e){var t=this.view,s=t.scrollHeight,n=t.clientHeight;return e/((0,h.default)(this.trackVertical)-this.getThumbVerticalHeight())*(s-n)}},{key:"scrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollLeft=e)}},{key:"scrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollTop=e)}},{key:"scrollToLeft",value:function(){this.view&&(this.view.scrollLeft=0)}},{key:"scrollToTop",value:function(){this.view&&(this.view.scrollTop=0)}},{key:"scrollToRight",value:function(){this.view&&(this.view.scrollLeft=this.view.scrollWidth)}},{key:"scrollToBottom",value:function(){this.view&&(this.view.scrollTop=this.view.scrollHeight)}},{key:"addListeners",value:function(){if("undefined"!=typeof document&&this.view){var e=this.view,t=this.trackHorizontal,s=this.trackVertical,n=this.thumbHorizontal,i=this.thumbVertical;e.addEventListener("scroll",this.handleScroll),(0,c.default)()&&(t.addEventListener("mouseenter",this.handleTrackMouseEnter),t.addEventListener("mouseleave",this.handleTrackMouseLeave),t.addEventListener("mousedown",this.handleHorizontalTrackMouseDown),s.addEventListener("mouseenter",this.handleTrackMouseEnter),s.addEventListener("mouseleave",this.handleTrackMouseLeave),s.addEventListener("mousedown",this.handleVerticalTrackMouseDown),n.addEventListener("mousedown",this.handleHorizontalThumbMouseDown),i.addEventListener("mousedown",this.handleVerticalThumbMouseDown),window.addEventListener("resize",this.handleWindowResize))}}},{key:"removeListeners",value:function(){if("undefined"!=typeof document&&this.view){var e=this.view,t=this.trackHorizontal,s=this.trackVertical,n=this.thumbHorizontal,i=this.thumbVertical;e.removeEventListener("scroll",this.handleScroll),(0,c.default)()&&(t.removeEventListener("mouseenter",this.handleTrackMouseEnter),t.removeEventListener("mouseleave",this.handleTrackMouseLeave),t.removeEventListener("mousedown",this.handleHorizontalTrackMouseDown),s.removeEventListener("mouseenter",this.handleTrackMouseEnter),s.removeEventListener("mouseleave",this.handleTrackMouseLeave),s.removeEventListener("mousedown",this.handleVerticalTrackMouseDown),n.removeEventListener("mousedown",this.handleHorizontalThumbMouseDown),i.removeEventListener("mousedown",this.handleVerticalThumbMouseDown),window.removeEventListener("resize",this.handleWindowResize),this.teardownDragging())}}},{key:"handleScroll",value:function(e){var t=this,s=this.props,n=s.onScroll,i=s.onScrollFrame;n&&n(e),this.update((function(e){var s=e.scrollLeft,n=e.scrollTop;t.viewScrollLeft=s,t.viewScrollTop=n,i&&i(e)})),this.detectScrolling()}},{key:"handleScrollStart",value:function(){var e=this.props.onScrollStart;e&&e(),this.handleScrollStartAutoHide()}},{key:"handleScrollStartAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleScrollStop",value:function(){var e=this.props.onScrollStop;e&&e(),this.handleScrollStopAutoHide()}},{key:"handleScrollStopAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleWindowResize",value:function(){this.update()}},{key:"handleHorizontalTrackMouseDown",value:function(e){e.preventDefault();var t=e.target,s=e.clientX,n=t.getBoundingClientRect().left,i=this.getThumbHorizontalWidth(),o=Math.abs(n-s)-i/2;this.view.scrollLeft=this.getScrollLeftForOffset(o)}},{key:"handleVerticalTrackMouseDown",value:function(e){e.preventDefault();var t=e.target,s=e.clientY,n=t.getBoundingClientRect().top,i=this.getThumbVerticalHeight(),o=Math.abs(n-s)-i/2;this.view.scrollTop=this.getScrollTopForOffset(o)}},{key:"handleHorizontalThumbMouseDown",value:function(e){e.preventDefault(),this.handleDragStart(e);var t=e.target,s=e.clientX,n=t.offsetWidth,i=t.getBoundingClientRect().left;this.prevPageX=n-(s-i)}},{key:"handleVerticalThumbMouseDown",value:function(e){e.preventDefault(),this.handleDragStart(e);var t=e.target,s=e.clientY,n=t.offsetHeight,i=t.getBoundingClientRect().top;this.prevPageY=n-(s-i)}},{key:"setupDragging",value:function(){(0,o.default)(document.body,f.disableSelectStyle),document.addEventListener("mousemove",this.handleDrag),document.addEventListener("mouseup",this.handleDragEnd),document.onselectstart=u.default}},{key:"teardownDragging",value:function(){(0,o.default)(document.body,f.disableSelectStyleReset),document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("mouseup",this.handleDragEnd),document.onselectstart=void 0}},{key:"handleDragStart",value:function(e){this.dragging=!0,e.stopImmediatePropagation(),this.setupDragging()}},{key:"handleDrag",value:function(e){if(this.prevPageX){var t=e.clientX,s=-this.trackHorizontal.getBoundingClientRect().left+t-(this.getThumbHorizontalWidth()-this.prevPageX);this.view.scrollLeft=this.getScrollLeftForOffset(s)}if(this.prevPageY){var n=e.clientY,i=-this.trackVertical.getBoundingClientRect().top+n-(this.getThumbVerticalHeight()-this.prevPageY);this.view.scrollTop=this.getScrollTopForOffset(i)}return!1}},{key:"handleDragEnd",value:function(){this.dragging=!1,this.prevPageX=this.prevPageY=0,this.teardownDragging(),this.handleDragEndAutoHide()}},{key:"handleDragEndAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleTrackMouseEnter",value:function(){this.trackMouseOver=!0,this.handleTrackMouseEnterAutoHide()}},{key:"handleTrackMouseEnterAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleTrackMouseLeave",value:function(){this.trackMouseOver=!1,this.handleTrackMouseLeaveAutoHide()}},{key:"handleTrackMouseLeaveAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"showTracks",value:function(){clearTimeout(this.hideTracksTimeout),(0,o.default)(this.trackHorizontal,{opacity:1}),(0,o.default)(this.trackVertical,{opacity:1})}},{key:"hideTracks",value:function(){var e=this;if(!this.dragging&&!this.scrolling&&!this.trackMouseOver){var t=this.props.autoHideTimeout;clearTimeout(this.hideTracksTimeout),this.hideTracksTimeout=setTimeout((function(){(0,o.default)(e.trackHorizontal,{opacity:0}),(0,o.default)(e.trackVertical,{opacity:0})}),t)}}},{key:"detectScrolling",value:function(){var e=this;this.scrolling||(this.scrolling=!0,this.handleScrollStart(),this.detectScrollingInterval=setInterval((function(){e.lastViewScrollLeft===e.viewScrollLeft&&e.lastViewScrollTop===e.viewScrollTop&&(clearInterval(e.detectScrollingInterval),e.scrolling=!1,e.handleScrollStop()),e.lastViewScrollLeft=e.viewScrollLeft,e.lastViewScrollTop=e.viewScrollTop}),100))}},{key:"raf",value:function(e){var t=this;this.requestFrame&&i.default.cancel(this.requestFrame),this.requestFrame=(0,i.default)((function(){t.requestFrame=void 0,e()}))}},{key:"update",value:function(e){var t=this;this.raf((function(){return t._update(e)}))}},{key:"_update",value:function(e){var t=this.props,s=t.onUpdate,n=t.hideTracksWhenNotNeeded,i=this.getValues();if((0,c.default)()){var r=i.scrollLeft,a=i.clientWidth,l=i.scrollWidth,u=(0,d.default)(this.trackHorizontal),p=this.getThumbHorizontalWidth(),f={width:p,transform:"translateX("+r/(l-a)*(u-p)+"px)"},m=i.scrollTop,g=i.clientHeight,v=i.scrollHeight,y=(0,h.default)(this.trackVertical),b=this.getThumbVerticalHeight(),E={height:b,transform:"translateY("+m/(v-g)*(y-b)+"px)"};if(n){var C={visibility:l>a?"visible":"hidden"},S={visibility:v>g?"visible":"hidden"};(0,o.default)(this.trackHorizontal,C),(0,o.default)(this.trackVertical,S)}(0,o.default)(this.thumbHorizontal,f),(0,o.default)(this.thumbVertical,E)}s&&s(i),"function"==typeof e&&e(i)}},{key:"render",value:function(){var e=this,s=(0,c.default)(),n=this.props;n.onScroll,n.onScrollFrame,n.onScrollStart,n.onScrollStop,n.onUpdate;var i=n.renderView,o=n.renderTrackHorizontal,a=n.renderTrackVertical,u=n.renderThumbHorizontal,d=n.renderThumbVertical,p=n.tagName;n.hideTracksWhenNotNeeded;var h=n.autoHide;n.autoHideTimeout;var m=n.autoHideDuration;n.thumbSize,n.thumbMinSize;var g=n.universal,v=n.autoHeight,y=n.autoHeightMin,b=n.autoHeightMax,E=n.style,C=n.children,S=function(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s}(n,["onScroll","onScrollFrame","onScrollStart","onScrollStop","onUpdate","renderView","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","tagName","hideTracksWhenNotNeeded","autoHide","autoHideTimeout","autoHideDuration","thumbSize","thumbMinSize","universal","autoHeight","autoHeightMin","autoHeightMax","style","children"]),_=this.state.didMountUniversal,w=t({},f.containerStyleDefault,v&&t({},f.containerStyleAutoHeight,{minHeight:y,maxHeight:b}),E),A=t({},f.viewStyleDefault,{marginRight:s?-s:0,marginBottom:s?-s:0},v&&t({},f.viewStyleAutoHeight,{minHeight:(0,l.default)(y)?"calc("+y+" + "+s+"px)":y+s,maxHeight:(0,l.default)(b)?"calc("+b+" + "+s+"px)":b+s}),v&&g&&!_&&{minHeight:y,maxHeight:b},g&&!_&&f.viewStyleUniversalInitial),P={transition:"opacity "+m+"ms",opacity:0},T=t({},f.trackHorizontalStyleDefault,h&&P,(!s||g&&!_)&&{display:"none"}),x=t({},f.trackVerticalStyleDefault,h&&P,(!s||g&&!_)&&{display:"none"});return(0,r.createElement)(p,t({},S,{style:w,ref:function(t){e.container=t}}),[(0,r.cloneElement)(i({style:A}),{key:"view",ref:function(t){e.view=t}},C),(0,r.cloneElement)(o({style:T}),{key:"trackHorizontal",ref:function(t){e.trackHorizontal=t}},(0,r.cloneElement)(u({style:f.thumbHorizontalStyleDefault}),{ref:function(t){e.thumbHorizontal=t}})),(0,r.cloneElement)(a({style:x}),{key:"trackVertical",ref:function(t){e.trackVertical=t}},(0,r.cloneElement)(d({style:f.thumbVerticalStyleDefault}),{ref:function(t){e.thumbVertical=t}}))])}}]),a}(r.Component);e.default=b,b.propTypes={onScroll:a.default.func,onScrollFrame:a.default.func,onScrollStart:a.default.func,onScrollStop:a.default.func,onUpdate:a.default.func,renderView:a.default.func,renderTrackHorizontal:a.default.func,renderTrackVertical:a.default.func,renderThumbHorizontal:a.default.func,renderThumbVertical:a.default.func,tagName:a.default.string,thumbSize:a.default.number,thumbMinSize:a.default.number,hideTracksWhenNotNeeded:a.default.bool,autoHide:a.default.bool,autoHideTimeout:a.default.number,autoHideDuration:a.default.number,autoHeight:a.default.bool,autoHeightMin:a.default.oneOfType([a.default.number,a.default.string]),autoHeightMax:a.default.oneOfType([a.default.number,a.default.string]),universal:a.default.bool,style:a.default.object,children:a.default.node},b.defaultProps={renderView:m.renderViewDefault,renderTrackHorizontal:m.renderTrackHorizontalDefault,renderTrackVertical:m.renderTrackVerticalDefault,renderThumbHorizontal:m.renderThumbHorizontalDefault,renderThumbVertical:m.renderThumbVerticalDefault,tagName:"div",thumbMinSize:30,hideTracksWhenNotNeeded:!1,autoHide:!1,autoHideTimeout:1e3,autoHideDuration:200,autoHeight:!1,autoHeightMin:0,autoHeightMax:200,universal:!1}}(wC),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Scrollbars=void 0;var t=function(e){return e&&e.__esModule?e:{default:e}}(wC);e.default=t.default,e.Scrollbars=t.default}(_C);var nS={exports:{}};nS.exports=function(){var e=void 0;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e||"undefined"==typeof process||"node"!==process.title||(e=setImmediate);var t=e=e||function(e){window.setTimeout(e,1e3/60)},s=Array.prototype.concat,n=Array.prototype.slice;function i(e,t){for(var i=arguments.length,o=Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];return function(){for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];e.apply(t,s.call(o,n.call(r)))}}function o(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])}function r(e){return t(e)}function a(e,t){var s=e.indexOf(t);-1!==s&&e.splice(s,1)}var l={};function c(e){if(l[e])return l[e];var t=e.replace("#","");3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var s=t.match(/.{2}/g);if(!s||s.length<3)throw new Error("Expected a color string of format #rrggbb");var n={r:parseInt(s[0],16),g:parseInt(s[1],16),b:parseInt(s[2],16)};return l[e]=n,n}function u(e,t,s){var n=e.toString(16),i=t.toString(16),o=s.toString(16);return"#"+(n=n.length<2?"0"+n:n)+(i=i.length<2?"0"+i:i)+(o=o.length<2?"0"+o:o)}var d=Object.freeze({bind:i,extend:o,onFrame:r,removeFirst:a,hexToRGB:c,rgbToHex:u});function p(e,t,s,n,i){return n+(e-t)/(s-t)*(i-n)}function h(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments[5],r=c(t),a=c(s),l=Math.floor(p(e,n,i,r.r,a.r)),d=Math.floor(p(e,n,i,r.g,a.g)),h=Math.floor(p(e,n,i,r.b,a.b));return o?"rgb("+l+","+d+","+h+")":u(l,d,h)}function f(e){return e*Math.PI/180}function m(e){return 180*e/Math.PI}var g=Object.freeze({mapValueInRange:p,interpolateColor:h,degreesToRadians:f,radiansToDegrees:m});function v(e){return 3.62*(e-30)+194}function y(e){return(e-194)/3.62+30}function b(e){return 3*(e-8)+25}function E(e){return(e-25)/3+8}var C=Object.freeze({tensionFromOrigamiValue:v,origamiValueFromTension:y,frictionFromOrigamiValue:b,origamiFromFriction:E}),S=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},w=function(){function e(){S(this,e),this.springSystem=null}return e.prototype.run=function(){var e=T.call(this);r((function(){e.loop(Date.now())}))},e}(),A=function(){function e(t){S(this,e),this.springSystem=null,this.time=0,this.running=!1,this.timestep=t||16.667}return e.prototype.run=function(){var e=T.call(this);if(!this.running){for(this.running=!0;!e.getIsIdle();)e.loop(this.time+=this.timestep);this.running=!1}},e}(),P=function(){function e(){S(this,e),this.springSystem=null,this.time=0,this.running=!1}return e.prototype.run=function(){},e.prototype.step=function(e){T.call(this).loop(this.time+=e)},e}();function T(){if(null==this.springSystem)throw new Error("cannot run looper without a springSystem");return this.springSystem}var x=Object.freeze({AnimationLooper:w,SimulationLooper:A,SteppingSimulationLooper:P}),I=function(){function e(t,s){S(this,e),this.bounciness=t,this.speed=s;var n=this.normalize(t/1.7,0,20);n=this.projectNormal(n,0,.8);var i=this.normalize(s/1.7,0,20);this.bouncyTension=this.projectNormal(i,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(n,this.b3Nobounce(this.bouncyTension),.01)}return e.prototype.normalize=function(e,t,s){return(e-t)/(s-t)},e.prototype.projectNormal=function(e,t,s){return t+e*(s-t)},e.prototype.linearInterpolation=function(e,t,s){return e*s+(1-e)*t},e.prototype.quadraticOutInterpolation=function(e,t,s){return this.linearInterpolation(2*e-e*e,t,s)},e.prototype.b3Friction1=function(e){return 7e-4*Math.pow(e,3)-.031*Math.pow(e,2)+.64*e+1.28},e.prototype.b3Friction2=function(e){return 44e-6*Math.pow(e,3)-.006*Math.pow(e,2)+.36*e+2},e.prototype.b3Friction3=function(e){return 45e-8*Math.pow(e,3)-332e-6*Math.pow(e,2)+.1078*e+5.84},e.prototype.b3Nobounce=function(e){return e<=18?this.b3Friction1(e):e>18&&e<=44?this.b3Friction2(e):this.b3Friction3(e)},e}(),M=function(){function e(t,s){S(this,e),this.tension=t,this.friction=s}return e.fromOrigamiTensionAndFriction=function(t,s){return new e(v(t),b(s))},e.fromBouncinessAndSpeed=function(t,s){var n=new I(t,s);return e.fromOrigamiTensionAndFriction(n.bouncyTension,n.bouncyFriction)},e.coastingConfigWithOrigamiFriction=function(t){return new e(0,b(t))},e}();M.DEFAULT_ORIGAMI_SPRING_CONFIG=M.fromOrigamiTensionAndFriction(40,7);var k=function e(){S(this,e),this.position=0,this.velocity=0},O=function(){function e(t){S(this,e),this.listeners=[],this._startValue=0,this._currentState=new k,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new k,this._restSpeedThreshold=.001,this._tempState=new k,this._timeAccumulator=0,this._wasAtRest=!0,this._id="s"+e._ID++,this._springSystem=t}return e.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},e.prototype.getId=function(){return this._id},e.prototype.setSpringConfig=function(e){return this._springConfig=e,this},e.prototype.getSpringConfig=function(){return this._springConfig},e.prototype.setCurrentValue=function(e,t){return this._startValue=e,this._currentState.position=e,t||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},e.prototype.getStartValue=function(){return this._startValue},e.prototype.getCurrentValue=function(){return this._currentState.position},e.prototype.getCurrentDisplacementDistance=function(){return this.getDisplacementDistanceForState(this._currentState)},e.prototype.getDisplacementDistanceForState=function(e){return Math.abs(this._endValue-e.position)},e.prototype.setEndValue=function(e){if(this._endValue===e&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=e,this._springSystem.activateSpring(this.getId());for(var t=0,s=this.listeners.length;t<s;t++){var n=this.listeners[t].onSpringEndStateChange;n&&n(this)}return this},e.prototype.getEndValue=function(){return this._endValue},e.prototype.setVelocity=function(e){return e===this._currentState.velocity||(this._currentState.velocity=e,this._springSystem.activateSpring(this.getId())),this},e.prototype.getVelocity=function(){return this._currentState.velocity},e.prototype.setRestSpeedThreshold=function(e){return this._restSpeedThreshold=e,this},e.prototype.getRestSpeedThreshold=function(){return this._restSpeedThreshold},e.prototype.setRestDisplacementThreshold=function(e){this._displacementFromRestThreshold=e},e.prototype.getRestDisplacementThreshold=function(){return this._displacementFromRestThreshold},e.prototype.setOvershootClampingEnabled=function(e){return this._overshootClampingEnabled=e,this},e.prototype.isOvershootClampingEnabled=function(){return this._overshootClampingEnabled},e.prototype.isOvershooting=function(){var e=this._startValue,t=this._endValue;return this._springConfig.tension>0&&(e<t&&this.getCurrentValue()>t||e>t&&this.getCurrentValue()<t)},e.prototype.advance=function(t,s){var n=this.isAtRest();if(!n||!this._wasAtRest){var i=s;s>e.MAX_DELTA_TIME_SEC&&(i=e.MAX_DELTA_TIME_SEC),this._timeAccumulator+=i;for(var o=this._springConfig.tension,r=this._springConfig.friction,a=this._currentState.position,l=this._currentState.velocity,c=this._tempState.position,u=this._tempState.velocity,d=void 0,p=void 0,h=void 0,f=void 0,m=void 0,g=void 0,v=void 0,y=void 0;this._timeAccumulator>=e.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=e.SOLVER_TIMESTEP_SEC,this._timeAccumulator<e.SOLVER_TIMESTEP_SEC&&(this._previousState.position=a,this._previousState.velocity=l),d=l,p=o*(this._endValue-c)-r*l,c=a+d*e.SOLVER_TIMESTEP_SEC*.5,h=u=l+p*e.SOLVER_TIMESTEP_SEC*.5,f=o*(this._endValue-c)-r*u,c=a+h*e.SOLVER_TIMESTEP_SEC*.5,m=u=l+f*e.SOLVER_TIMESTEP_SEC*.5,g=o*(this._endValue-c)-r*u,c=a+m*e.SOLVER_TIMESTEP_SEC,v=u=l+g*e.SOLVER_TIMESTEP_SEC,y=1/6*(p+2*(f+g)+(o*(this._endValue-c)-r*u)),a+=1/6*(d+2*(h+m)+v)*e.SOLVER_TIMESTEP_SEC,l+=y*e.SOLVER_TIMESTEP_SEC;this._tempState.position=c,this._tempState.velocity=u,this._currentState.position=a,this._currentState.velocity=l,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/e.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),n=!0);var b=!1;this._wasAtRest&&(this._wasAtRest=!1,b=!0);var E=!1;n&&(this._wasAtRest=!0,E=!0),this.notifyPositionUpdated(b,E)}},e.prototype.notifyPositionUpdated=function(e,t){for(var s=0,n=this.listeners.length;s<n;s++){var i=this.listeners[s];e&&i.onSpringActivate&&i.onSpringActivate(this),i.onSpringUpdate&&i.onSpringUpdate(this),t&&i.onSpringAtRest&&i.onSpringAtRest(this)}},e.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},e.prototype.wasAtRest=function(){return this._wasAtRest},e.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},e.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},e.prototype._interpolate=function(e){this._currentState.position=this._currentState.position*e+this._previousState.position*(1-e),this._currentState.velocity=this._currentState.velocity*e+this._previousState.velocity*(1-e)},e.prototype.getListeners=function(){return this.listeners},e.prototype.addListener=function(e){return this.listeners.push(e),this},e.prototype.removeListener=function(e){return a(this.listeners,e),this},e.prototype.removeAllListeners=function(){return this.listeners=[],this},e.prototype.currentValueIsApproximately=function(e){return Math.abs(this.getCurrentValue()-e)<=this.getRestDisplacementThreshold()},e}();O._ID=0,O.MAX_DELTA_TIME_SEC=.064,O.SOLVER_TIMESTEP_SEC=.001;var R=function(){function e(t){S(this,e),this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={},this.looper=t||new w,this.looper.springSystem=this}return e.prototype.setLooper=function(e){this.looper=e,e.springSystem=this},e.prototype.createSpring=function(e,t){var s=void 0;return s=void 0===e||void 0===t?M.DEFAULT_ORIGAMI_SPRING_CONFIG:M.fromOrigamiTensionAndFriction(e,t),this.createSpringWithConfig(s)},e.prototype.createSpringWithBouncinessAndSpeed=function(e,t){var s=void 0;return s=void 0===e||void 0===t?M.DEFAULT_ORIGAMI_SPRING_CONFIG:M.fromBouncinessAndSpeed(e,t),this.createSpringWithConfig(s)},e.prototype.createSpringWithConfig=function(e){var t=new O(this);return this.registerSpring(t),t.setSpringConfig(e),t},e.prototype.getIsIdle=function(){return this._isIdle},e.prototype.getSpringById=function(e){return this._springRegistry[e]},e.prototype.getAllSprings=function(){var e=[];for(var t in this._springRegistry)this._springRegistry.hasOwnProperty(t)&&e.push(this._springRegistry[t]);return e},e.prototype.registerSpring=function(e){this._springRegistry[e.getId()]=e},e.prototype.deregisterSpring=function(e){a(this._activeSprings,e),delete this._springRegistry[e.getId()]},e.prototype.advance=function(e,t){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var s=0,n=this._activeSprings.length;s<n;s++){var i=this._activeSprings[s];i.systemShouldAdvance()?i.advance(e/1e3,t/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(i))}for(;this._idleSpringIndices.length>0;){var o=this._idleSpringIndices.pop();o>=0&&this._activeSprings.splice(o,1)}},e.prototype.loop=function(e){var t=void 0;-1===this._lastTimeMillis&&(this._lastTimeMillis=e-1);var s=e-this._lastTimeMillis;this._lastTimeMillis=e;var n=0,i=this.listeners.length;for(n=0;n<i;n++)(t=this.listeners[n]).onBeforeIntegrate&&t.onBeforeIntegrate(this);for(this.advance(e,s),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<i;n++)(t=this.listeners[n]).onAfterIntegrate&&t.onAfterIntegrate(this);this._isIdle||this.looper.run()},e.prototype.activateSpring=function(e){var t=this._springRegistry[e];-1===this._activeSprings.indexOf(t)&&this._activeSprings.push(t),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.removeListener=function(e){a(this.listeners,e)},e.prototype.removeAllListeners=function(){this.listeners=[]},e}();return _({},x,{OrigamiValueConverter:C,MathUtil:g,Spring:O,SpringConfig:M,SpringSystem:R,util:_({},d,g)})}();var iS=Ua.jsx;var oS=p.exports.forwardRef((function(e,t){return iS("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e)),{children:iS("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}))}));var rS="mqik-e9623fc4",aS="mqik-eda00eab",lS="mqik-13b1ae77",cS="mqik-16d43afe",uS="mqik-a70f0c5b",dS="mqik-b1c0de58",pS="mqik-9b4edf97",hS="mqik-1c2e67da",fS=e=>y("div",{children:"Shared"});function mS(e){const t=[];let s=0;for(const n of e.matchAll(F())){const i=n[0],o=n.index;n.index!==s&&t.push(e.substring(s,o)),t.push(y("span",{className:"emoji",children:i},o)),s=o+i.length}return s<e.length&&t.push(e.substring(s)),1===t.length?t[0]:t}var gS="mqik-eaeccb35",vS=e=>{const{unreadMentions:t}=e;return t>0?y("span",{className:gS,children:t}):null},yS=Ua.jsx;var bS=p.exports.forwardRef((function(e,t){return yS("svg",l(a({},Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e)),{children:yS("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}))}));var ES="mqik-745f6b5a",CS="mqik-7f6f6a17",SS="mqik-cf411b3f";class _S extends v.PureComponent{render(){return 0!==this.props.channel.delete_at?y("i",{className:"icon icon-archive-outline"}):this.props.hasDraft?E("div",{className:ES,children:[this.props.icon,y("span",{className:CS,children:y(bS,{className:SS})})]}):this.props.icon}}function wS(e,t,s){return e&&Boolean(e.message.trim()||e.fileInfos.length||e.uploadsInProgress.length)&&t!==(null==s?void 0:s.id)}var AS=f((function(e,t){var s;const n=Fe(e);return{hasDraft:wS(!!(null==(s=t.channel)?void 0:s.id)&&As(e,fs.DRAFT,t.channel.id),n,t.channel)}}),(function(e){return{actions:g({},e)}}))(_S);var PS="mqik-919643f2",TS="mqik-96ed684f";class xS extends v.PureComponent{constructor(e){super(e),u(this,"labelRef"),u(this,"gmItemRef"),u(this,"enableToolTipIfNeeded",(()=>{const e=this.gmItemRef.current||this.labelRef.current,t=e&&e.offsetWidth<e.scrollWidth;this.setState({showTooltip:Boolean(t)})})),u(this,"getAriaLabel",(()=>{const{label:e,ariaLabelPrefix:t,unreadMentions:s}=this.props;let n=e;return t&&(n+=` ${t}`),1===s?n+=` ${s} ${De("accessibility.sidebar.types.mention","mention")}`:s>1&&(n+=` ${s} ${De("accessibility.sidebar.types.mentions","mentions")}`),this.showChannelAsUnread()&&0===s&&(n+=` ${De("accessibility.sidebar.types.unread","unread")}`),n.toLowerCase()})),u(this,"removeTooltipLink",(()=>{var e,t;return null==(t=null==(e=this.gmItemRef.current)?void 0:e.removeAttribute)?void 0:t.call(e,"aria-describedby")})),u(this,"handleChannelClick",(e=>{this.handleSelectChannel(e)})),u(this,"handleSelectChannel",(e=>{e.defaultPrevented||0!==e.button||(this.props.actions.addChatId(this.props.channel.id),Ie(e)?(e.preventDefault(),this.props.actions.multiSelectChannelAdd(this.props.channel.id)):this.props.actions.clearChannelSelection())})),u(this,"handleMenuToggle",(e=>this.setState({isMenuOpen:e}))),u(this,"showChannelAsUnread",(()=>this.props.unreadMentions>0||this.props.unreadMsgs>0&&this.props.showUnreadForMsgs)),this.labelRef=v.createRef(),this.gmItemRef=v.createRef(),this.state={isMenuOpen:!1,showTooltip:!1}}componentDidMount(){this.enableToolTipIfNeeded()}componentDidUpdate(e){e.label!==this.props.label&&this.enableToolTipIfNeeded()}render(){const{link:e,label:t,channel:s,unreadMentions:n,icon:i,isMuted:o}=this.props;let r=y("span",{className:A("SidebarChannelLinkLabel",{truncated:this.state.showTooltip}),children:mS(t)});const a=E(C,{children:[y(AS,{channel:s,icon:i}),y("div",{className:"SidebarChannelLinkLabel_wrapper",ref:this.labelRef,children:r}),y(vS,{unreadMentions:n})]}),l=A(PS,["SidebarLink",{menuOpen:this.state.isMenuOpen,muted:o,[TS]:this.showChannelAsUnread(),selected:!1}]);return y(L,{className:l,"data-group":`sidebarItem_${s.name}`,"aria-label":this.getAriaLabel(),to:e,onClick:this.handleChannelClick,tabIndex:this.props.isCollapsed?-1:0,children:a})}}var IS=f((function(e,t){const s=yt(e)[t.channel.id];let n=0,i=0,o=!0;const r=$n(e);return s&&(n=r?s.mention_count_root:s.mention_count,t.channel&&(i=Di(r,t.channel,s)),s.notify_props&&(o=s.notify_props.mark_unread!==Pt.MENTION)),{unreadMentions:n,unreadMsgs:i,showUnreadForMsgs:o,isMuted:St(s),isChannelSelected:Li(e,t.channel.id)}}),(function(e){return{actions:g({clearChannelSelection:xr,multiSelectChannelTo:Ir,multiSelectChannelAdd:Mr,addChatId:kr},e)}}))(xS);class MS extends v.PureComponent{constructor(){super(...arguments),u(this,"handleLeavePublicChannel",(()=>{this.props.actions.leaveChannel(this.props.channel.id)})),u(this,"handleLeavePrivateChannel",(()=>{Vo({id:this.props.channel.id,display_name:this.props.channel.display_name})})),u(this,"getCloseHandler",(()=>{const{channel:e}=this.props;return e.type===V.OPEN_CHANNEL&&e.name!==V.DEFAULT_CHANNEL?this.handleLeavePublicChannel:e.type===V.PRIVATE_CHANNEL?this.handleLeavePrivateChannel:null})),u(this,"getIcon",(()=>{const{channel:e}=this.props;return e.shared?y(fS,{className:"icon",channelType:e.type,withTooltip:!0}):y(Aa,{src:Ke.getChannelPictureUrl(e.id,e.last_picture_update),size:"lg",status:"",wrapperClass:"DirectChannel__profile-picture",newStatusIcon:!0})}))}render(){const{channel:e,currentTeamName:t}=this.props;let s;return e.type===V.OPEN_CHANNEL?s=De("accessibility.sidebar.types.public","public channel"):e.type===V.PRIVATE_CHANNEL&&(s=De("accessibility.sidebar.types.private","private channel")),y(IS,{channel:e,link:`/${t}/group/${e.name}`,label:e.display_name,ariaLabelPrefix:s,closeHandler:this.getCloseHandler(),icon:this.getIcon(),isCollapsed:!1})}}var kS=f(null,(function(e){return{actions:g({leaveChannel:qo},e)}}))(MS);class OS extends v.PureComponent{constructor(e){super(e),u(this,"handleLeaveChannel",(e=>{const t=this.props.channel.teammate_id,s=V.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,n=this.props.currentUserId;this.props.actions.savePreferences(n,[{user_id:n,category:s,name:t,value:"false"}]).then(e),this.props.actions.leaveDirectChannel(this.props.channel.name),this.props.active&&te.push(`/${this.props.currentTeamName}/channels/${this.props.redirectChannel}`)})),u(this,"onSvgLoadError",(()=>{this.setState({svgErrorUrl:this.props.botIconUrl})})),u(this,"onSvgLoad",(()=>{this.setState({svgErrorUrl:null})})),u(this,"getIcon",(()=>{const{channel:e,teammate:t}=this.props;if(!t)return null;if(t.id&&t.delete_at)return y("i",{className:"icon icon-archive-outline"});let s="";return"online"===e.status?s="status-online":"away"===e.status?s="status-away":"dnd"===e.status&&(s="status-dnd"),y(Aa,{src:Ke.getProfilePictureUrl(t.id,t.last_picture_update),size:"lg",status:t.is_bot?"":e.status,wrapperClass:"DirectChannel__profile-picture",newStatusIcon:!0,statusClass:`DirectChannel__status-icon ${s}`})})),this.state={svgErrorUrl:null}}render(){const{channel:e,teammate:t,currentTeamName:s}=this.props;if(!t)return null;let n=e.display_name;return this.props.currentUserId===t.id&&(n=this.props.intl.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:e.display_name})),y(IS,{teammateId:t.id,channel:e,link:`/${s}/messages/@${t.username}`,label:n,closeHandler:this.handleLeaveChannel,icon:this.getIcon(),isCollapsed:this.props.isCollapsed})}}var RS=d(OS);var NS=f((function(e,t){const s=K(e,t.channel.teammate_id),n=bt(e),i=W(e),o=mt(e,i.id),r=Fe(e),a=t.channel.id===r;return{teammate:s,currentUserId:n.id,redirectChannel:o,active:a,botIconUrl:(l=s,l&&l.is_bot&&l.bot_last_icon_update?`${Ke.getBotRoute(l.id)}/icon?_=${l.bot_last_icon_update||0}`:null)};var l}),(function(e){return{actions:g({savePreferences:gt,leaveDirectChannel:zo},e)}}))(RS);class DS extends v.PureComponent{constructor(){super(...arguments),u(this,"handleLeaveChannel",(e=>{const t=this.props.channel.id,s=V.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,n=this.props.currentUserId;this.props.actions.savePreferences(n,[{user_id:n,category:s,name:t,value:"false"}]).then(e),this.props.active&&te.push(`/${this.props.currentTeamName}/channels/${this.props.redirectChannel}`)})),u(this,"getIcon",(()=>y("div",{className:"status status--group",children:this.props.membersCount})))}render(){const{channel:e,currentTeamName:t}=this.props;return y(IS,{channel:e,link:`/${t}/messages/${e.name}`,label:e.display_name,closeHandler:this.handleLeaveChannel,icon:this.getIcon(),isCollapsed:this.props.isCollapsed})}}var LS=f((function(e,t){const s=bt(e),n=W(e),i=mt(e,n.id),o=Fe(e),r=t.channel.id===o,a=Fi(e);let l=0;if(a&&a[t.channel.id]){const e=a[t.channel.id];l=e.size,e.has(s.id)&&l--}return{currentUserId:s.id,redirectChannel:i,active:r,membersCount:l}}),(function(e){return{actions:g({savePreferences:gt},e)}}))(DS);function FS(e){return e.unreadMentions>0||e.unreadMsgs>0&&e.showUnreadForMsgs}var HS={channelItem:"mqik-936757b2"};var US=f((function(){const e=vt();return(t,s)=>{const n=e(t,{id:s.channelId}),i=W(t),o=yt(t)[s.channelId];Fe(t);const r=$n(t);let a=0,l=0,c=!0;return o&&(a=r?o.mention_count_root:o.mention_count,n&&(l=Di(r,n,o)),o.notify_props&&(c=o.notify_props.mark_unread!==Pt.MENTION)),{channel:n,isCurrentChannel:!1,currentTeamName:i.name,unreadMentions:a,unreadMsgs:l,showUnreadForMsgs:c,draggingState:Hi(t),isChannelSelected:Li(t,s.channelId),multiSelectedChannelIds:t.views.channelSidebar.multiSelectedChannelIds,autoSortedCategoryIds:Ui(t)}}}))((e=>{const{channel:t,currentTeamName:s}=e;let n=kS;return t.type===V.DM_CHANNEL?n=NS:t.type===V.GM_CHANNEL&&(n=LS),y("li",{className:A(HS.channelItem,{[HS.hasUnread]:FS(e)}),children:y(n,{isCollapsed:!1,channel:t,currentTeamName:s})})}));var BS=f((function(){const e=Bi(),t=ji();return(s,n)=>{const i=n.categories.reduce(((t,n)=>t.concat(e(s,n))),[]),o=1===Vi(s);let r=i.map((e=>ce(s,e)));return r=t(s,r),{channelIds:r.map((e=>e.id)),categoryLoading:o,sidebarIndex:0}}}),(function(e){return{actions:g({openModal:Ve},e)}}))((e=>{const t=k(),s=H();if(e.categoryLoading&&0===e.sidebarIndex)return y(Gr,{});const n=()=>{e.actions.openModal({modalId:Ae.MORE_CHANNELS,dialogType:Or,dialogProps:{morePublicChannelsModalType:"public"}})};return 0===e.channelIds.length?y("div",{className:A(rS),children:E("div",{className:A(aS),children:[y(oS,{className:lS}),y("p",{className:A(cS),children:t.formatMessage({id:"sidebar.starting",defaultMessage:"Để bắt đầu, tham gia một nhóm hoặc thử nhắn tin với bạn bè."})}),E("div",{className:A(uS),children:[y("button",{className:A(dS,pS),onClick:()=>s.push("/friends"),children:t.formatMessage({id:"sidebar.open_friends",defaultMessage:"Danh sách Bạn bè"})}),y("button",{className:A(dS,hS),onClick:n,children:t.formatMessage({id:"sidebar.group_list",defaultMessage:"Tham gia Nhóm"})})]})]})}):E(p.exports.Fragment,{children:[y("ul",{role:"chat-list",children:e.channelIds.map(((e,t)=>y(US,{channelIndex:t,channelId:e},e)))}),e.categoryLoading&&e.sidebarIndex?y(Gr,{count:1}):null]})}));var jS={sidebarChannelList:"mqik-c8ed5811",sidebarChannelListContent:"mqik-e611ce1a"};function VS(e){return y("div",l(a({},e),{className:"scrollbar--view"}))}function qS(e){return y("div",l(a({},e),{className:"scrollbar--horizontal"}))}function zS(e){return y("div",l(a({},e),{className:"scrollbar--vertical"}))}function WS(e){return y("div",l(a({},e),{className:"scrollbar--verticalTrack"}))}class GS extends p.exports.PureComponent{constructor(e){super(e),u(this,"loaded"),u(this,"channelRefs"),u(this,"scrollbar"),u(this,"scrollAnimation"),u(this,"animate"),u(this,"loadMore"),u(this,"updateMore"),u(this,"getDisplayedChannelIds",(()=>this.props.displayedChannels.map((e=>e.id)))),u(this,"getChannelRef",(e=>this.channelRefs.get(e))),u(this,"setChannelRef",((e,t)=>{t?this.channelRefs.set(e,t):this.channelRefs.delete(e)})),u(this,"handleScrollAnimationUpdate",(e=>{const t=e.getCurrentValue();this.scrollbar.current.scrollTop(t)})),u(this,"scrollToChannel",((e,t=!1)=>{if(!e)return;const s=this.channelRefs.get(e);if(!s)return;const n=s.offsetTop,i=n+s.offsetHeight,o=this.scrollbar.current.getScrollTop(),r=this.scrollbar.current.getClientHeight();if(n<o+0){const s=t||!this.state.showTopUnread?10:0;let i;const o=this.getDisplayedChannelIds();i=o.length>0&&o[0]===e?0:n-s-0,this.scrollToPosition(i)}else if(i>o+r){const e=i-r+(t||!this.state.showBottomUnread?10:0);this.scrollToPosition(e)}})),u(this,"scrollToPosition",(e=>{this.scrollAnimation.setCurrentValue(this.scrollbar.current.getScrollTop()).setAtRest(),this.scrollAnimation.setEndValue(e)})),u(this,"onScroll",(async()=>{var e,t,s;const n=(null==(e=this.scrollbar.current)?void 0:e.getScrollHeight())||0;((null==(t=this.scrollbar.current)?void 0:t.getScrollTop())||0)+((null==(s=this.scrollbar.current)?void 0:s.getClientHeight())||0)+72>=n&&this.props.allowLoadmore&&!this.state.loadMore&&(this.setState({loadMore:!0}),this.handleLoadMore())})),u(this,"handleLoadMore",(async()=>{this.loadMore&&-1===this.props.sidebarIndex||(this.loadMore=!0,await this.props.actions.loadMoreChannelsForCurrentUser(this.props.sidebarIndex+1,this.updateMore),this.setState({loadMore:!0}),this.loadMore=!1)})),this.state={showTopUnread:!1,showBottomUnread:!1,loadMore:!1},this.channelRefs=new Map,this.loaded=!1,this.loadMore=!1,this.scrollbar=p.exports.createRef(),this.animate=new nS.exports.SpringSystem,this.scrollAnimation=this.animate.createSpring(),this.scrollAnimation.setOvershootClampingEnabled(!0),this.scrollAnimation.addListener({onSpringUpdate:this.handleScrollAnimationUpdate}),this.updateMore=nr((()=>{this.setState({loadMore:!1})}),3e3)}render(){return y("div",{id:"sidebar-chat-list",role:"application",className:A(jS.sidebarChannelList,{disabled:this.props.isUnreadFilterEnabled}),"data-a11y-disable-nav":Boolean(this.props.draggingState.type),"data-a11y-sort-order":"7",children:y("div",{className:A(jS.sidebarChannelListContent),children:E(_C.Scrollbars,{ref:this.scrollbar,autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:qS,renderThumbVertical:zS,renderTrackVertical:WS,renderView:VS,onScroll:this.onScroll,style:{position:"absolute"},children:[y(BS,{categories:this.props.categories,getChannelRef:this.getChannelRef,setChannelRef:this.setChannelRef}),this.props.allowLoadmore&&!this.props.sidebarLoading&&this.props.sidebarIndex>0?y("div",{className:A(jS.sidebarChannelMore),children:y("p",{onClick:this.handleLoadMore,children:"Xem thêm"})}):null]})})})}}var KS=f((function(e){const t=W(e),s=qi(e),n=zi(e,s),i=!n||n&&n.type===Wi.DIRECT_MESSAGES,o=1===Vi(e);return{currentTeam:t,categories:Gi(e),isUnreadFilterEnabled:Ki(e),unreadChannelIds:Yi(e),displayedChannels:Xi(e),draggingState:Hi(e),newCategoryIds:e.views.channelSidebar.newCategoryIds,multiSelectedChannelIds:e.views.channelSidebar.multiSelectedChannelIds,showUnreadsCategory:$i(e),isCategoryAll:"all"===s,sidebarIndex:Qi(e,s),allowLoadmore:i,sidebarLoading:o}}),(function(e){return{actions:g({close:Ba,switchToChannelById:pr,moveChannelsInSidebar:Rr,moveCategory:Ji,setDraggingState:Nr,stopDragging:Dr,clearChannelSelection:xr,multiSelectChannelAdd:Mr,sidebarGetMore:Zi,loadChannelsForCurrentUser:hr,loadChannelsForCurrentUser2:fr,loadMoreChannelsForCurrentUser:mr,loadChannelsForCurrentCategory:gr},e)}}))(GS);var YS="mqik-a386b190";class XS extends v.PureComponent{constructor(e){super(e),u(this,"handleClickClearChannelSelection",(e=>{e.defaultPrevented||this.props.actions.clearChannelSelection()})),u(this,"handleKeyDownClearChannelSelection",(e=>{fe(e,V.KeyCodes.ESCAPE)&&this.props.actions.clearChannelSelection()})),u(this,"showMoreDirectChannelsModal",(()=>{this.setState({showDirectChannelsModal:!0})})),u(this,"hideMoreDirectChannelsModal",(()=>{this.setState({showDirectChannelsModal:!1})})),u(this,"handleOpenMoreDirectChannelsModal",(e=>{e.preventDefault(),this.state.showDirectChannelsModal?this.hideMoreDirectChannelsModal():this.showMoreDirectChannelsModal()})),u(this,"onDragStart",(()=>{this.setState({isDragging:!0})})),u(this,"onDragEnd",(()=>{this.setState({isDragging:!1})})),u(this,"onActiveLeftbar",(e=>{this.setState({sidebarLeftSelected:e})})),this.state={showDirectChannelsModal:!1,isDragging:!1,sidebarLeftSelected:"messages"}}async componentDidMount(){this.props.teamId&&(await this.props.actions.fetchMyCategories(this.props.teamId),this.props.actions.loadChannelsForCurrentUser2(),this.props.actions.loadFirstDirect(this.props.teamId)),window.addEventListener("click",this.handleClickClearChannelSelection),window.addEventListener("keydown",this.handleKeyDownClearChannelSelection)}componentDidUpdate(e){this.props.teamId&&e.teamId!==this.props.teamId&&this.props.actions.fetchMyCategories(this.props.teamId)}componentWillUnmount(){window.removeEventListener("click",this.handleClickClearChannelSelection),window.removeEventListener("keydown",this.handleKeyDownClearChannelSelection)}render(){return this.props.teamId?y("div",{className:A(YS,{dragging:this.state.isDragging}),children:y(KS,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd})}):y("div",{})}}var $S=f((function(e){const t=W(e),s=Fe(e),n=Ki(e);let i=!1,o=!1,r=!1;return t&&(i=ie(e,{channel:s,team:t.id,permission:oe.CREATE_PUBLIC_CHANNEL}),o=ie(e,{channel:s,team:t.id,permission:oe.CREATE_PRIVATE_CHANNEL}),r=ie(e,{channel:s,team:t.id,permission:oe.JOIN_PUBLIC_CHANNELS})),{teamId:t?t.id:"",canCreatePrivateChannel:o,canCreatePublicChannel:i,canJoinPublicChannel:r,isOpen:SC(e),hasSeenModal:He(e,Ue.CATEGORY_WHATS_NEW_MODAL,Ue.HAS_SEEN_SIDEBAR_WHATS_NEW_MODAL,!1),isCloud:"true"===_e(e).Cloud,unreadFilterEnabled:n}}),(function(e){return{actions:g({clearChannelSelection:xr,createCategory:Lr,fetchMyCategories:eo,loadFirstDirect:vr,loadChannelsForCurrentUser2:fr,openModal:Ve},e)}}))(XS);let QS=!1;function JS(e,t,s,n){return async(i,o)=>{if(QS)return{data:!1};const{data:r}=await i(to(e));if(!r)return(n||te).replace(`/error?type=${so.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!0};const a=o(),l=r.posts[r.order[0]].channel_id;let c=a.entities.channels.channels[l];const u=W(a),d=u.id;if(!c){const{data:e}=await i(no(l));if(!e)return(n||te).replace(`/error?type=${so.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};c=e}let p=a.entities.channels.myMembers[l];if(!p){if(c.type===V.DM_CHANNEL||c.type===V.GM_CHANNEL)return(n||te).replace(`/error?type=${so.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};const e=await i(io(c.id,s));if("data"in e&&(p=e.data),!p){const e=bt(a);if(c.type===V.PRIVATE_CHANNEL&&oo(e.roles)){QS=!0;const e=await i(ro(u,c));if(QS=!1,"data"in e&&!e.data.join)return{data:!1}}await i(ao(s,"",l,""))}}if(c.team_id&&c.team_id!==d)return(n||te).replace(`/error?type=${so.PERMALINK_NOT_FOUND}&returnTo=${t}`),{data:!1};c&&c.type===V.DM_CHANNEL?i(lo(c.id)):c&&c.type===V.GM_CHANNEL&&i(co(c.id)),i(Wt(l)),i({type:j.RECEIVED_FOCUSED_POST,data:e,channelId:l});const h=uo(a,c.team_id||d);if(c.type===V.DM_CHANNEL){const t=po(c.name),s=K(a,t);(n||te).replace(`/${h.name}/messages/@${s.username}/${e}`)}else c.type===V.GM_CHANNEL?(n||te).replace(`/${h.name}/messages/${c.name}/${e}`):(n||te).replace(`/${h.name}/group/${c.name}/${e}`);return i(fr()),i(ho(l)),{data:!0}}}class ZS extends v.PureComponent{constructor(e){super(e),u(this,"mounted"),u(this,"doPermalinkEvent",(async e=>{const t=e.match.params.postId;await this.props.actions.focusPost(t,this.props.returnTo,this.props.currentUserId,e.history),this.mounted&&this.setState({valid:!0})})),u(this,"isStateValid",(()=>this.state.valid&&this.props.channelId&&this.props.teamName)),this.state={valid:!1},this.mounted=!1}static getDerivedStateFromProps(e,t){let s={postid:e.match.params.postId,valid:t.valid};return t.postid!==e.match.params.postId&&(s.valid=!1),s}componentDidMount(){this.mounted=!0,this.doPermalinkEvent(this.props),document.body.classList.add("app__body")}componentDidUpdate(){this.state.valid||this.doPermalinkEvent(this.props)}componentWillUnmount(){this.mounted=!1}render(){return this.isStateValid()?null:y("div",{id:"app-content",className:"app__content"})}}var e_=f((function(e){const t=W(e),s=z(e),n=we(e);return{channelId:s?s.id:"",teamName:t?t.name:"",currentUserId:n}}),(function(e){return{actions:g({focusPost:JS},e)}}))(ZS);const t_=new RegExp("^[a-zA-Z0-9]{26}__[a-zA-Z0-9]{26}$");function s_({match:e,history:t}){return async(s,n)=>{const i=n(),{path:o,identifier:r,team:a}=e.params;if(!r)return{data:void 0};const l=wi(i,a);if(!l)return{data:void 0};switch(function(e,t,s){if("group"===t){const t=Eo(e,s),n=Ao(e).find((e=>e.name===s));return 26===s.length?t||n?"channel_name":"channel_id":!t&&!n&&40===s.length||t&&t.type===V.GM_CHANNEL||n&&n.type===V.GM_CHANNEL?"group_channel_group_id":function(e){return 54===e.length&&t_.test(e)}(s)?"direct_channel_user_ids":"channel_name"}if("messages"===t)return 0===s.indexOf("@")?"direct_channel_username":s.indexOf("@")>0?"direct_channel_email":26===s.length?"direct_channel_user_id":40===s.length?"group_channel_group_id":"error";return"error"}(i,o,r)){case"channel_name":await s(function(e,t){return async(s,n)=>{const i=n(),{team:o,identifier:r}=e.params,a=r.toLowerCase(),l=wi(i,o);if(!l)return{data:void 0};let c,u=_o(i,l.id)[a];if(!u){const e=await s(wo(o,a,!0));"data"in e&&(u=e.data)}if(u&&(c=i.entities.channels.myMembers[u.id],!c)){const e=await s(io(u.id,we(i)));"data"in e&&(c=e.data)}if(!u||!c){const r=bt(n());if(oo(null==r?void 0:r.roles)&&u.type===V.PRIVATE_CHANNEL){const e=await s(ro(l,u));if("data"in e&&!e.data.join)return{data:void 0}}const c=await s(Co(we(i),l.id,"",a));if("error"in c){if(!u){const n=await s(wo(o,a,!0));if("error"in n||0===n.data.delete_at)return await s(fo(l.id,0,20)),a_(e,t,mt(i,l.id)),{data:void 0};u=n.data}}else u=c.data.channel}return u.type===V.DM_CHANNEL?s(i_(e,t)):u.type===V.GM_CHANNEL?t.replace(`/${o}/messages/${u.name}`):o_(u),{data:void 0}}}(e,t));break;case"channel_id":await s(function(e,t){return async(s,n)=>{const i=n(),{team:o,identifier:r}=e.params,a=r.toLowerCase();let l=ce(i,a);const c=i.entities.channels.myMembers[a],u=wi(i,o);if(!l||!c){const n=await s(Co(we(i),u.id,a,""));if("error"in n)return await s(fo(u.id,0,20)),a_(e,t,mt(i,u.id)),{data:void 0};l=n.data.channel}return l.type===V.DM_CHANNEL?s(n_(e,t,po(l.name,we(i)))):l.type===V.GM_CHANNEL?t.replace(`/${o}/messages/${l.name}`):t.replace(`/${o}/group/${l.name}`),{data:void 0}}}(e,t));break;case"group_channel_group_id":await s(function(e,t){return async(s,n)=>{const i=n(),{identifier:o,team:r}=e.params,a=o.toLowerCase();t.replace(e.url.replace("/group/","/messages/"));let l=Eo(i,a);const c=wi(i,r);if(!l){const n=await s(Co(we(i),c.id,"",a));if("error"in n)return await s(fo(c.id,0,20)),r_(e,t,mt(i,c.id)),{data:void 0};l=n.data.channel}return s(So(l.id)),o_(l),{data:void 0}}}(e,t));break;case"direct_channel_username":await s(function(e,t){return async(s,n)=>{const i=n(),{team:o,identifier:r}=e.params,a=r.slice(1,r.length).toLowerCase(),l=wi(i,o);let c=yo(i,a);if(!c){const n=await s(bo(a));if("error"in n)return await s(fo(l.id,0,20)),r_(e,t,mt(i,l.id)),{data:void 0};c=n.data}const u=await s(Bo(c.id));return"error"in u?(await s(fo(l.id,0,20)),r_(e,t,mt(i,l.id)),{data:void 0}):(o_(u.data),{data:void 0})}}(e,t));break;case"direct_channel_email":await s(function(e,t){return async(s,n)=>{const i=n(),{team:o,identifier:r}=e.params,a=r.toLowerCase(),l=wi(i,o);let c=go(i,a);if(!c){const n=await s(vo(a));if("error"in n)return await s(fo(l.id,0,20)),r_(e,t,mt(i,l.id)),{data:void 0};c=n.data}return t.replace(`/${o}/messages/@${c.username}`),{data:void 0}}}(e,t));break;case"direct_channel_user_ids":await s(i_(e,t));break;case"direct_channel_user_id":await s(n_(e,t,r));break;case"error":await s(fo(l.id,0,20)),r_(e,t,mt(i,l.id))}return{data:void 0}}}function n_(e,t,s){return async(n,i)=>{const o=i(),{team:r}=e.params,a=wi(o,r);let l=K(o,s);if(!l){const i=await n(mo(s));if("error"in i)return await n(fo(a.id,0,20)),r_(e,t,mt(o,a.id)),{data:void 0};l=i.data}return t.replace(`/${r}/messages/@${l.username}`),{data:void 0}}}function i_(e,t){return async(s,n)=>{const i=n(),{team:o,identifier:r}=e.params,a=po(r.toLowerCase(),we(n())),l=wi(i,o);let c=K(i,a);if(!c){const n=await s(mo(a));if("error"in n)return await s(fo(l.id,0,20)),r_(e,t,mt(i,l.id)),{data:void 0};c=n.data}return t.replace(`/${o}/messages/@${c.username}`),{data:void 0}}}function o_(e){yr(e)}function r_(e,t,s){const{team:n}=e.params;t.push(n?`/${n}/group/${s}`:"/")}async function a_(e,t,s){const{team:n}=e.params;t.push(n?`/error?type=channel_not_found&returnTo=/${n}/group/${s}`:"/")}S(((e,t)=>Pi(e,t)),(e=>Boolean(e&&e.delete_at)));var l_=f((function(e){const t=z(e);return{channelId:t?t.id:""}}),(function(e){return{actions:g({setPreChat:Fr},e)}}))((e=>{const[t,s]=p.exports.useState(""),[n,i]=p.exports.useState(!1);return p.exports.useEffect((()=>{n!=e.loaded&&t!==e.match.url&&(i(e.loaded),s(e.match.url),e.actions.setPreChat(e.channelId,{match:e.match}))})),null}));var c_=f(null,(function(e){return{actions:g({onChannelByIdentifierEnter:s_},e)}}))((e=>{let t;const[s,n]=p.exports.useState(!1),[i,o]=p.exports.useState(!1),r=function(e){const t=p.exports.useRef();return p.exports.useEffect((()=>{t.current=e})),t.current}(e),a=async e=>{await e.actions.onChannelByIdentifierEnter(e),o(!0)};return p.exports.useEffect((()=>(a(e),n(!0),()=>{t&&clearTimeout(t)})),[]),p.exports.useEffect((()=>{i&&o(!1);const n=e.match.params.team,l=null==r?void 0:r.match.params.team,c=e.match.params.identifier,u=null==r?void 0:r.match.params.identifier;if(!s||!u)return o(!0);n!==l||c!==u?(t&&clearTimeout(t),a(e),e.match.params.postid&&(t=setTimeout((()=>{const t=e.match.url.split("/").slice(0,-1).join("/");te.replace(t)}),V.PERMALINK_FADEOUT))):o(!0)}),[e.match]),i?y(l_,{match:e.match,loaded:i}):y("div",{children:"Loading..."})}));class u_ extends v.PureComponent{constructor(e){super(e),this.state={returnTo:"",lastReturnTo:""}}static getDerivedStateFromProps(e,t){return t.lastReturnTo!==e.location.pathname&&e.location.pathname.includes("/pl/")?{lastReturnTo:e.location.pathname,returnTo:t.lastReturnTo}:{lastReturnTo:e.location.pathname}}render(){const e=this.props.match.url;return E(U,{children:[y(B,{path:`${e}/pl/:postid`,render:e=>y(e_,l(a({},e),{returnTo:this.state.returnTo}))}),y(B,{path:"/:team/:path(group|messages)/:identifier/:postid?",component:c_})]})}}var d_=f(((e,t)=>({lhsOpen:!1,rhsOpen:!1,rhsMenuOpen:!1,isCollapsedThreadsEnabled:$n(e)})))(u_);const p_=e=>{const[t,s]=p.exports.useState(!0);return p.exports.useEffect((()=>{var e,t,s;return null==(e=Mn())||e.classList.add("mexty-app__body","mexty-team-view"),Po()?null==(t=Mn())||t.classList.add("mexty-os--windows"):To()&&(null==(s=Mn())||s.classList.add("mexty-os--mac")),function(){var e;null==(e=Mn())||e.classList.remove("mexty-app__body","mexty-team-view")}}),[t]),E("div",{className:za,children:[y(Ka,{}),!e.fetchingChannels&&y($S,{}),!e.fetchingChannels&&y(B,{component:d_}),!e.fetchingChannels&&y(CC,{}),e.fetchingChannels&&y(Gr,{}),y(Ll,{}),y(kl,{}),y(Xa,{})]})};let h_,f_=Date.now();var m_=e=>{(new Date).getTime(),clearInterval(h_),h_=window.setInterval((()=>{const e=(new Date).getTime();e>f_+6e4&&br(!1),f_=e}),3e4);const[t,s]=p.exports.useState(null),[n,i]=p.exports.useState(""),[o,r]=p.exports.useState(!0);p.exports.useEffect((()=>{(new Date).getTime()-e.lastSyncProfile>36e5&&!1===Fs(e.currentUser)&&e.actions.syncMe();const t=e.tutorialStep;if(0===t&&e.currentUser){const t=e.currentUser.id,s=[{user_id:t,category:Os.TUTORIAL_STEP,name:t,value:ks.POST_POPOVER.toString()}];e.actions.setDefaultProfileImage(t),e.actions.savePreferences(t,s)}if(-1!==[0,1].indexOf(t)&&e.currentUser){const t=e.currentUser.id,s=Os.CATEGORY_DISPLAY_SETTINGS,n=[{user_id:t,category:Os.TUTORIAL_STEP,name:t,value:ks.CHANNEL_POPOVER.toString()},{user_id:t,category:s,name:Os.USE_MILITARY_TIME,value:"true"},{user_id:t,category:s,name:Os.CHANNEL_DISPLAY_MODE,value:"full"},{user_id:t,category:s,name:Os.MESSAGE_DISPLAY,value:Os.MESSAGE_DISPLAY_CLEAN},{user_id:t,category:s,name:Os.MESSAGE_DISPLAY,value:Os.MESSAGE_DISPLAY_CLEAN},{user_id:t,category:s,name:Os.COLLAPSED_REPLY_THREADS,value:"off"},{user_id:t,category:s,name:Os.LINK_PREVIEW_DISPLAY,value:"true"},{user_id:t,category:s,name:Os.COLLAPSE_DISPLAY,value:"false"},{user_id:t,category:s,name:Os.NAME_NAME_FORMAT,value:V.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME}];e.actions.savePreferences(t,n)}const s=e.match.params.team,n=e.teamList.find((e=>e.name===s));n?a(n):l(s,!0)}),[]),p.exports.useEffect((()=>{const t=e.teamList.find((t=>t.name===e.match.params.team));t&&s(t)}),[e.match.params.team]),p.exports.useEffect((()=>{t&&a(t)}),[t]),p.exports.useEffect((()=>{var s,n;e.chatActive&&t&&a(t,!0),e.chatActive?null==(s=document.querySelector(".p-pageWrapper"))||s.classList.add("mexty-quik-enabled"):null==(n=document.querySelector(".p-pageWrapper"))||n.classList.remove("mexty-quik-enabled")}),[e.chatActive]),xo.setTeamIdJoinedOnLoad(null);const a=async(t,s=!1)=>{t.name!==n&&(e.actions.selectTeam(t),e.actions.setPreviousTeamId(t.id),e.actions.setChatReady(),s&&(i(t.name),o||r(!0),await e.actions.fetchMyChannelIds(t.id,"",0,50),r(!1)))},l=async(t,n)=>{var i;const{data:o}=await e.actions.getTeamByName(t);if(o&&0===o.delete_at){const{error:t}=await e.actions.addUserToTeam(o.id,null==(i=e.currentUser)?void 0:i.id);return t?void e.history.push("/error?type=team_not_found"):(n&&xo.setTeamIdJoinedOnLoad(o.id),void s(o))}e.history.push("/error?type=team_not_found")};if(!e.chatActive)return y(p.exports.Fragment,{});if(o)return E("div",{className:A(Wa),children:[y(Gr,{}),y(Hr,{})]});return E("div",{className:A(Wa),children:[y(U,{children:y(B,{render:e=>y(p_,{pathName:e.location.pathname,fetchingChannels:o})})}),y(Hr,{})]})};var g_=f((function(e){const t=bt(e),s=Ms(e,Os.TUTORIAL_STEP,t.id,ks.INTRO_SCREENS);return{currentUser:t,currentTeamId:Se(e),currentChannelId:Fe(e),prevTeamId:Er(e),teamList:Tt(e),tutorialStep:s,lastSyncProfile:Io(e),chatActive:Cr(e)}}),(function(e){return{actions:g({selectTeam:Mo,setPreviousTeamId:ko,fetchMyChannelIds:Oo,getTeamByName:Ro,addUserToTeam:No,setDefaultProfileImage:Do,savePreferences:gt,syncMe:Sr,setChatReady:_r},e)}}))(m_);export{g_ as default};
