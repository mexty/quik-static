import{B as e,w as a,A as n,x as t,J as s,G as c,H as i}from"./vendor.3b6a4709.js";import{c5 as o,at as r,H as d,M as l,c9 as m,k as u,L as h,b4 as p}from"./index.e8a4c22e.js";import{r as f,a4 as N,b as k}from"./index.8bb8f098.js";var I="mqik-1b771820",v="mqik-0536c7cf",b="mqik-5d874e90",x="mqik-eccefc2a";var g=c=>{const[i,d]=e.exports.useState(!1),[l,m]=e.exports.useState(!1),u=async e=>{const{location:a,history:n,noAccounts:t,currentUserId:s}=c;(t||!s&&!e)&&n.push(`/connect?next=${encodeURIComponent(a.pathname)}`),d(!0),o()(r.dispatch,r.getState)},h=async()=>{if(!c.siteName&&c.clientId){const[e,a,n,t]=await c.actions.loadMeAndConfig(c.clientId);t||await c.actions.userConnect(),t&&t.data&&f(c.history),u(t&&t.data)}c.siteName&&u(!1)};return e.exports.useEffect((()=>{h()}),[]),a("div",i?{className:n(I),children:[t("div",{className:v,children:t("p",{children:"Kết nối thành công"})}),t(s,{to:"/connect"})]}:{className:n(I),children:[t("div",{className:v,children:t("p",{children:"Kết nối tài khoản"})}),l?a("div",{className:b,children:[t("p",{children:"Kết nối có thể bị gián đoạn."}),t("button",{className:x,onClick:h,children:"Thử lại"})]}):null]})};var A=c((function(e){const a=d(),n=l(e),t=m(e),s=a.clientId===t.clientId,c=t.allowed,i=u(e),o=h.getPreviousTeamId(u(e)),r=p(e,o);return{siteName:n.SiteName,noAccounts:"true"===n.NoAccounts,clientValid:s,clientId:a.clientId,allowedDomains:c,hasUserToken:!!a.userToken,permalinkRedirectTeamName:r?r.name:"",currentUserId:i}}),(function(e){return{actions:i({loadMeAndConfig:N,userConnect:k},e)}}))(g);export{A as default};
