import{B as e,y as n,A as a,x as t,I as s,F as c,G as i}from"./vendor.bbf9911b.js";import{c5 as o,at as r,H as d,M as l,c9 as m,k as u,L as h,b4 as p}from"./index.866713cb.js";import{r as f,a1 as N,b as I}from"./index.c136d238.js";var k="mqik-1b771820",b="mqik-0536c7cf",v="mqik-5d874e90",x="mqik-eccefc2a";var g=c=>{const[i,d]=e.exports.useState(!1),[l,m]=e.exports.useState(!1),u=async e=>{const{location:n,history:a,noAccounts:t,currentUserId:s}=c;(t||!s&&!e)&&a.push(`/connect?next=${encodeURIComponent(n.pathname)}`),d(!0),o()(r.dispatch,r.getState)},h=async()=>{if(!c.siteName&&c.clientId){const[e,n,a,t]=await c.actions.loadMeAndConfig(c.clientId);t||await c.actions.userConnect(),t&&t.data&&f(c.history),u(t&&t.data)}c.siteName&&u(!1)};return e.exports.useEffect((()=>{h()}),[]),n("div",i?{className:a(k),children:[t("div",{className:b,children:t("p",{children:"Kết nối thành công"})}),t(s,{to:"/connect"})]}:{className:a(k),children:[t("div",{className:b,children:t("p",{children:"Kết nối tài khoản"})}),l?n("div",{className:v,children:[t("p",{children:"Kết nối có thể bị gián đoạn."}),t("button",{className:x,onClick:h,children:"Thử lại"})]}):null]})};var A=c((function(e){const n=d(),a=l(e),t=m(e),s=n.clientId===t.clientId,c=t.allowed,i=u(e),o=h.getPreviousTeamId(u(e)),r=p(e,o);return{siteName:a.SiteName,noAccounts:"true"===a.NoAccounts,clientValid:s,clientId:n.clientId,allowedDomains:c,hasUserToken:!!n.userToken,permalinkRedirectTeamName:r?r.name:"",currentUserId:i}}),(function(e){return{actions:i({loadMeAndConfig:N,userConnect:I},e)}}))(g);export{A as default};
