var e=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,i,s)=>i in a?e(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,c=(e,a)=>{for(var i in a||(a={}))d.call(a,i)&&n(e,i,a[i]);if(s)for(var i of s(a))r.call(a,i)&&n(e,i,a[i]);return e},l=(e,s)=>a(e,i(s));import{w as t,A as u,x as m,B as o,$ as h,G as v,H as p}from"./vendor.3b6a4709.js";import{D as N,W as k,T as f,ci as g,U as b,ba as y}from"./index.d0f5484d.js";import{u as x}from"./index.6ad2818d.js";import{U as I}from"./index.2f72f8bf.js";import{P as q}from"./index.a5ba24b0.js";import{T as P}from"./Tooltip.2ea90f42.js";import"./jsx-runtime_commonjs-proxy.1991ba65.js";const S={day:"1",week:"7",month:"30"};function w(e){return async(a,i)=>{let s;const d=S[e]||"";try{s=await N.getRanks(d,"hot")}catch(r){return k(r,a,i),{error:r}}return a(f([{type:g.RECEIVED_RANKS,data:{period:e,ranks:s.ranks}},{type:b.RECEIVED_PROFILES_LIST,data:s.users}])),{data:s}}}function _(e){return async(a,i)=>{let s;const d=S[e]||"";try{s=await N.getRanks(d,"commit")}catch(r){return k(r,a,i),{error:r}}return a(f([{type:g.RECEIVED_RANKS2,data:{period:e,ranks:s.ranks}},{type:b.RECEIVED_PROFILES_LIST,data:s.users}])),{data:s}}}var D="mqik-a0d507ce",C="mqik-9d01e40d",E="mqik-d3d02730",R="mqik-2dd25643",T="mqik-db4dc8ce",j="mqik-72c52047",$="mqik-b9643e6c",O="mqik-2df26439",U="mqik-e3febf16",z="mqik-cfe34e90",L="mqik-c4be0906",M="mqik-dd6e4483",B="mqik-7a3cfc7e",F="mqik-d5fa14c8",H="mqik-53ceda94",V="mqik-35c8ffd7",A="mqik-9cd6b167",K="mqik-b5f4b9d3",X="mqik-ad97e8e6",G="mqik-7fe8da0a",W="mqik-6c09e06c",J="mqik-d62fc5f3",Q="mqik-2f5292be",Y="mqik-4c723ed9",Z="mqik-e087594d",ee="mqik-3111f176",ae="mqik-ad1e6877",ie="mqik-158c0c85",se="mqik-805a84d4",de="mqik-9548d40d",re="mqik-f15222db",ne="mqik-3ec2d446",ce="mqik-9698e90a",le="mqik-28cd36e9",te="mqik-31444f73";const ue=[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9},{id:10}];var me=e=>{const a=(new Date).getTime();return t("div",{className:u(O,U,{[z]:e.blue}),children:[t("div",{className:u(L,{[M]:!e.blue,[B]:e.blue}),children:[t("div",{className:F,children:[m("div",{className:J,children:m("h3",{children:"Bảng xếp hạng"})}),t("div",{className:H,children:[a>164097e7?m("button",{className:u(Q,{[V]:"month"===e.period}),onClick:()=>e.onSelect("month"),children:"Tháng"}):null,a>16387236e5?m("button",{className:u(Q,{[V]:"week"===e.period}),onClick:()=>e.onSelect("week"),children:"Tuần"}):null,m("button",{className:u(Q,{[V]:"day"===e.period}),onClick:()=>e.onSelect("day"),children:"Ngày"})]})]}),m("div",{className:u(A),children:t("div",{className:u(K,Z,"u3-px-3"),children:[m("div",{className:"u3-w-20 u3-h-20 u3-bg-gray-300 u3-rounded-full u3-animate-pulse u3-mx-auto"}),m("div",{className:u(G,"u3-h-6 u3-w-24 u3-mx-auto u3-rounded-full u3-bg-gray-200  u3-mt-1 u3-animate-pulse")}),m("div",{className:u(W,"u3-h-5 u3-w-16 u3-mx-auto u3-mt-1 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})}),m("div",{className:u(A),children:t("div",{className:u(K,Y,"u3-px-3"),children:[m("div",{className:"u3-w-24 u3-h-24 u3-bg-gray-300 u3-rounded-full u3-animate-pulse u3-mx-auto"}),m("div",{className:u(G,"u3-h-6 u3-w-24 u3-mx-auto u3-rounded-full u3-bg-gray-200  u3-mt-1 u3-animate-pulse")}),m("div",{className:u(W,"u3-h-5 u3-w-16 u3-mx-auto u3-mt-1 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})}),m("div",{className:u(A),children:t("div",{className:u(K,ee,"u3-px-3"),children:[m("div",{className:"u3-w-20 u3-h-20 u3-bg-gray-300 u3-rounded-full u3-animate-pulse u3-mx-auto"}),m("div",{className:u(G,"u3-h-6 u3-w-24 u3-mx-auto u3-rounded-full u3-bg-gray-200 u3-mt-1 u3-animate-pulse")}),m("div",{className:u(W,"u3-h-5 u3-w-16 u3-mx-auto u3-mt-0.5 u3-bg-gray-200 u3-rounded u3-animate-pulse")})]})})]}),m("div",{className:u(se,"u3-overflow-hidden"),children:m("div",{className:u(de,"u3-overflow-hidden"),children:ue.map(((e,a)=>a<3?m(o.exports.Fragment,{},`rank-${a}-${e.id}`):t("div",{className:re,children:[m("div",{className:ne,children:a+1}),m("div",{className:u(ce,"u3-pl-1"),children:m("div",{className:"u3-w-10 u3-h-10 u3-bg-gray-300 u3-rounded-full u3-animate-pulse"})}),m("div",{className:u(le,"u3-h-6 u3-bg-gray-300 u3-rounded u3-animate-pulse")}),m("div",{className:u(te,"u3-h-6 u3-w-8 u3-bg-gray-300 u3-rounded u3-animate-pulse")})]})))})})]})};function oe(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1.")}var he=e=>{const[a,i]=o.exports.useState("day"),[s,d]=o.exports.useState("day"),[r,n]=o.exports.useState("day"),[c,l]=o.exports.useState("day"),[v,p]=o.exports.useState("hot"),[k,f]=o.exports.useState(!0),[g,b]=o.exports.useState(!0),y=x(),S=(new Date).getTime(),w=h();function _(i){i!==a&&(f(!0),n(i),e.actions.fetchRanks(i))}function U(a){a!==s&&(b(!0),l(a),e.actions.fetchRanks2(a))}o.exports.useEffect((()=>{y.setTitle("Bảng Xếp Hạng"),e.actions.fetchRanks("day"),e.actions.fetchRanks2("day")}),[]),o.exports.useEffect((()=>{i(e.period),f(!1)}),[e.period]),o.exports.useEffect((()=>{d(e.period2),b(!1)}),[e.period2]);let z=m(me,{period:r,onSelect:_}),ue=m(me,{period:c,onSelect:U,blue:!0});if(!e.isLoading&&!k&&e.ranksData[0]){const i=e.ranksData[0],s=e.ranksData[1],d=e.ranksData[2];z=t("div",{className:u(O,ae,{[$]:"hot"===v}),children:[t("div",{className:u(L,M),children:[t("div",{className:F,children:[m("div",{className:J,children:m("h3",{children:"Xếp hạng cao thủ"})}),t("div",{className:H,children:[S>164097e7?m("button",{className:u(Q,{[V]:"month"===a}),onClick:()=>_("month"),children:"Tháng"}):null,S>16387236e5?m("button",{className:u(Q,{[V]:"week"===a}),onClick:()=>_("week"),children:"Tuần"}):null,m("button",{className:u(Q,{[V]:"day"===a}),onClick:()=>_("day"),children:"Ngày"})]})]}),m("div",{className:u(A),children:t("div",{className:u(K,Z),children:[m(q,{src:N.getProfilePictureUrl(s.id,s.last_picture_update),size:"6xl",userId:s.id,hasMention:!1,username:s.username}),m("div",{className:X,children:m("div",{className:G,children:m(P,{placement:"top",content:m(I,{userId:s.id,channelId:"",hideStatus:!0,disablePopover:!0}),children:m(I,{userId:s.id,channelId:"",hideStatus:!0,disablePopover:!0})})})}),m("div",{className:W,children:oe(s.score)})]})}),m("div",{className:u(A),children:t("div",{className:u(K,Y),children:[m(q,{src:N.getProfilePictureUrl(i.id,i.last_picture_update),size:"7xl",userId:i.id,hasMention:!1,username:i.username}),m("div",{className:X,children:m("div",{className:G,children:m(I,{userId:i.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),m("div",{className:W,children:oe(i.score)})]})}),m("div",{className:u(A),children:t("div",{className:u(K,ee),children:[m(q,{src:N.getProfilePictureUrl(d.id,d.last_picture_update),size:"6xl",userId:d.id,hasMention:!1,username:d.username}),m("div",{className:X,children:m("div",{className:G,children:m(I,{userId:d.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),m("div",{className:W,children:oe(d.score)})]})})]}),m("div",{className:se,children:m("div",{className:de,children:e.ranksData.map(((e,a)=>a<3?m(o.exports.Fragment,{},`rank-hot-${a}-${e.id}`):t("div",{className:re,children:[m("div",{className:ne,children:a+1}),m("div",{className:ce,children:m(q,{src:N.getProfilePictureUrl(e.id,e.last_picture_update),size:"xl",userId:e.id,hasMention:!1,username:e.username})}),m("div",{className:le,children:m(I,{userId:e.id,channelId:"",hideStatus:!0,disablePopover:!0})}),m("div",{className:te,children:oe(e.score)})]},`rank-hot-${a}-${e.id}`)))})})]})}if(!e.isLoading2&&!g&&e.ranksData2[0]){const a=e.ranksData2[0],i=e.ranksData2[1],d=e.ranksData2[2];ue=t("div",{className:u(O,ie,{[$]:"commit"===v}),children:[t("div",{className:u(L,B),children:[t("div",{className:F,children:[m("div",{className:J,children:m("h3",{children:"Bảng cống hiến"})}),t("div",{className:H,children:[S>164097e7?m("button",{className:u(Q,{[V]:"month"===s}),onClick:()=>U("month"),children:"Tháng"}):null,S>16387236e5?m("button",{className:u(Q,{[V]:"week"===s}),onClick:()=>U("week"),children:"Tuần"}):null,m("button",{className:u(Q,{[V]:"day"===s}),onClick:()=>U("day"),children:"Ngày"})]})]}),m("div",{className:u(A),children:t("div",{className:u(K,Z),children:[m(q,{src:N.getProfilePictureUrl(i.id,i.last_picture_update),size:"6xl",userId:i.id,hasMention:!1,username:i.username}),m("div",{className:X,children:m("div",{className:G,children:m(P,{placement:"top",content:m(I,{userId:i.id,channelId:"",hideStatus:!0,disablePopover:!0}),children:m(I,{userId:i.id,channelId:"",hideStatus:!0,disablePopover:!0})})})}),m("div",{className:W,children:oe(i.score)})]})}),m("div",{className:u(A),children:t("div",{className:u(K,Y),children:[m(q,{src:N.getProfilePictureUrl(a.id,a.last_picture_update),size:"7xl",userId:a.id,hasMention:!1,username:a.username}),m("div",{className:X,children:m("div",{className:G,children:m(I,{userId:a.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),m("div",{className:W,children:oe(a.score)})]})}),m("div",{className:u(A),children:t("div",{className:u(K,ee),children:[m(q,{src:N.getProfilePictureUrl(d.id,d.last_picture_update),size:"6xl",userId:d.id,hasMention:!1,username:d.username}),m("div",{className:X,children:m("div",{className:G,children:m(I,{userId:d.id,channelId:"",hideStatus:!0,disablePopover:!0})})}),m("div",{className:W,children:oe(d.score)})]})})]}),m("div",{className:se,children:m("div",{className:u(de),children:e.ranksData2.map(((e,a)=>a<3?m(o.exports.Fragment,{},`rank-commit-${a}-${e.id}`):t("div",{className:u(re),children:[m("div",{className:ne,children:a+1}),m("div",{className:ce,children:m(q,{src:N.getProfilePictureUrl(e.id,e.last_picture_update),size:"xl",userId:e.id,hasMention:!1,username:e.username})}),m("div",{className:le,children:m(I,{userId:e.id,channelId:"",hideStatus:!0,disablePopover:!0})}),m("div",{className:te,children:oe(e.score)})]},`rank-commit-${a}-${e.id}`)))})})]})}return t("div",{className:D,children:[m("div",{className:C,children:m("button",{onClick:()=>w.goBack(),children:"Trở lại Phòng Chat"})}),m("div",{className:R,children:t("div",{className:T,children:[m("button",{className:u(j,{[$]:"hot"===v}),onClick:()=>p("hot"),children:"Hạng Cao Thủ"}),m("button",{className:u(j,{[$]:"commit"===v}),onClick:()=>p("commit"),children:"Bảng Cống Hiến"})]})}),t("div",{className:E,children:[z,ue]})]})};var ve=v((function(e){const a=function(e){return e.entities.ranks.ranks}(e),i=function(e){return e.entities.ranks.ranks2}(e),s=a.current||"",d=i.current||"";let r=[],n=[];s&&(r=a[a.current]||[]),d&&(n=i[i.current]||[]);const t=!s,u=!s;return!t&&r.length&&(r=r.map((a=>{const i=y(e,a.user_id);return l(c({},i),{score:a.score})}))),!u&&n.length&&(n=n.map((a=>{const i=y(e,a.user_id);return l(c({},i),{score:a.score})}))),{ranksData:r,ranksData2:n,period:s,period2:d,isLoading:t,isLoading2:u}}),(function(e){return{actions:p({fetchRanks:w,fetchRanks2:_},e)}}))(he);export{ve as default};
